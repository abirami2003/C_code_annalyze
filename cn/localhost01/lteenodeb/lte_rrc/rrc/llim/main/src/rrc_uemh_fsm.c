/***************************************************************************
 *
 *  ARICENT -
 *
 *  Copyright (c) 2009 Aricent.
 *
 ****************************************************************************
 * File Details
 * ------------
 *  $Id: rrc_uemh_fsm.c,v 1.49 2010/12/02 12:38:47 gur21897 Exp $
 ****************************************************************************
 *
 *  File Description : This header file contains implementation of UEMH FSM,
 *                     all UEMH states and handlers.
 *
 ****************************************************************************
 *
 * Revision Details
 * ----------------
 * $Log: rrc_uemh_fsm.c,v $
 * Revision 1.46.2.2  2010/12/13 13:48:00  gur21231
 * check_in_after_puneet_comment
 *
 * Revision 1.46.2.1  2010/12/02 06:08:56  gur21231
 * Reestablishment Code Review Req

 * Revision 1.49  2010/12/02 12:38:47  gur21897
 * Merging With 2.0.1 Support Branch
 *
 * Revision 1.48  2010/11/22 12:49:10  gur11120
 *
 * Revision 1.47  2010/11/16 13:08:11  gur21239
 *
 * Revision 1.46  2010/10/13 07:03:10  gur18569
 * Merge from LTE_L3_Rel_2_0_2 tag tag
 *
 * Revision 1.3.4.50  2010/10/08 12:36:39  gur21006
 * TDD changes merged
 *
 * Revision 1.3.4.49  2010/10/07 04:53:34  gur25381
 * Fix for stoping LLIM UE_ENTITY_SUSPEND_TIMER
 *
 * Revision 1.3.4.48  2010/10/06 06:02:51  gur04518
 * updated the for loop boundry check
 *
 * Revision 1.3.4.47  2010/10/05 12:34:49  gur22047
 * compilation warning removed
 *
 * Revision 1.3.4.46  2010/10/04 13:53:58  gur04518
 * Removed TABS
 *
 * Revision 1.3.4.45  2010/10/04 13:31:52  gur04518
 * removed backslash
 *
 * Revision 1.3.4.44  2010/10/01 14:04:45  gur18569
 * fixed ssit errors
 *
 * Revision 1.3.4.43  2010/10/01 06:42:07  gur04518
 * Removed interface guard timer from LLIM for source HO
 *
 * Revision 1.3.4.42  2010/09/30 08:54:57  gur16768
 * correct the extra execution of loop cycle
 *
 * Revision 1.3.4.41  2010/09/29 08:26:17  gur04518
 * Updated for transaction Ids
 *
 * Revision 1.3.4.40  2010/09/28 15:55:57  gur18569
 * added logs and fixed bug
 *
 * Revision 1.3.4.39  2010/09/23 11:54:59  gur22047
 * klocwork warning fixes
*
* Revision 1.3.4.38  2010/09/23 05:07:09  gur18569
* removed commenting of start timer
*
* Revision 1.3.4.37  2010/09/23 04:42:59  gur18569
* removed event rach res guard timer expiry
*
* Revision 1.3.4.36  2010/09/22 14:45:39  gur25381
* klocwork warning solved after merging
*
* Revision 1.3.4.35  2010/09/21 04:12:40  gur04518
* Added one more timer to handle MAC INACTIVE TIME response
*
*
****************************************************************************/

/****************************************************************************
 * Standard Library Includes
 ****************************************************************************/


/****************************************************************************
 * Project Includes
 ****************************************************************************/

#include "rrc_uemh_fsm.h"
#include "rrc_defines.h"
#include "rrc_llim_logger.h"
#include "rrc_common_utils.h"
#include "rrc_uemh_timers.h"
#include "rrc_msg_mgmt.h"
#include "rrc_llim_utils.h"
#include "rrc_intrl_api.h"
#include "rrc_ext_api.h"
#include "rrc_uecc_llim_intf.h"
#include "rrc_phy_intf.h"
#include "rrc_phy_il_composer.h"
#include "rrc_mac_intf.h"
#include "rrc_mac_il_composer.h"
#include "rrc_rlc_intf.h"
#include "rrc_rlc_il_composer.h"
#include "rrc_pdcp_intf.h"
#include "rrc_pdcp_il_composer.h"
#include "rrc_s1u_intf.h"
#include "rrc_s1u_il_composer.h"
#include "rrc_llim_cell_ctx.h"
#include "rrc_common_md.h"

#define RRC_LLIM_UEMH_FSM_TRACE(log_level, format, ...) \
	RRC_LLIM_TRACE(log_level, "[UE:%u] "format, \
			p_ue_ctx->ue_index, ##__VA_ARGS__)

/****************************************************************************
  Private Definitions
 ****************************************************************************/

/****************************************************************************
  Private Types
 ****************************************************************************/

/*
 *   UEMH FSM types
 */

typedef void (*uemh_fsm_act_func_ptr)(void *, void *, rrc_llim_ue_ctx_t *,
		rrc_llim_gl_ctx_t *);


/****************************************************************************
 * Private Function Prototypes
 ****************************************************************************/

static rrc_bool_et start_uecc_trigered_roll_back_for_ho_create_ue
(
 rrc_llim_ue_ctx_t *p_ue_ctx,
 rrc_cell_index_t  cell_index
 );

static void fill_delete_part_drb_rlc_reconfig_ue_entity_req
(
 rrc_rlc_reconfig_ue_entity_req_t*, 
 rrc_lc_id_t,
 rrc_rlc_lc_mode_et*
 );

void uemh_fsm_ue_in_service_state_suspend_ue_entity_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );
void uemh_fsm_w_for_mac_reset_ue_entity_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */   
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx 
 );

void uemh_fsm_w_for_rlc_reestablish_ue_entity_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */   
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx 
 );

void uemh_fsm_w_for_pdcp_suspend_state_suspend_ue_entity_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );

void uemh_fsm_suspend_ue_entity_timer_expiry
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );

static rrc_rb_direction_et get_rb_direction_from_drb_config
(
 rrm_drb_config_t    *p_drb_config
 );

void uemh_fsm_xxx_suspend_ue_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );

void uemh_fsm_xxx_reestablish_ue_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );
static void uemh_fsm_w_xxx_suspend_ue_state_cleanup_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );


static void build_and_send_uecc_create_ho_ue_rollback_resp
(
 rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param,
 rrc_uecc_llim_create_ue_entity_resp_t *p_create_ue_resp 
 );
static void fill_create_part_srb_rlc_create_ue_entity_req
(
 /* destination */
 rrc_rlc_create_ue_entity_req_t        *p_rlc_create_ue_entity_req,
 rrc_lc_id_t                             lc_id,
 /* main source */
 rrm_srb_am_config_t                     *p_srb_am_config
 );
static void fill_create_part_drb_rlc_create_ue_entity_req
(
 /* destination */
 rrc_rlc_create_ue_entity_req_t        *p_rlc_create_ue_entity_req,
 rrc_lc_id_t                             lc_id,
 /* main source */
 rrc_rlc_config_t                        *p_rlc_config
 );

static void uemh_fsm_idle_uecc_ho_rach_res_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );

static void uemh_fsm_idle_mac_ho_rach_res_resp
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );

static void uemh_fsm_w_rlc_reestablish_ue_state_entity_in_service_cnf(
		void                *p_api,             /* p_api */
		void                *p_msg,             /* p_msg */
		rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
		/* Pointer to the LLIM global context data */
		rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
		);
static void fill_qos_info_rlc_reconfig_ue_entity_req_add_lc_req
(
 /* destination */
 rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 rrc_counter_t                           drb_index, 
 /* main source */
 rrc_uecc_llim_add_lc_req_t              *p_add_lc_param
 );

static void fill_qos_info_rlc_create_ue_entity_req
(
 /* destination */
 rrc_rlc_create_ue_entity_req_t        *p_rlc_create_ue_entity_req,
 rrc_counter_t                           drb_index,
 /* main source */
 rrc_uecc_llim_create_ue_entity_req_t   *p_create_ue_param
 );

static void fill_qos_info_rlc_reconfig_ue_entity_req_modify_lc_req
(
 /* destination */
 rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 rrc_counter_t                           drb_index,
 /* main source */
 rrc_uecc_llim_modify_lc_req_t           *p_modify_lc_param,
 U8        modify_drb_index
 );

static void fill_qos_mac_create_lc_req
(
 rrc_mac_create_lc_req_t     *p_mac_create_lc,   /* destination */
 rrc_uecc_llim_create_drb_entity_t *p_drb_entity /* main source */
 );
static void uemh_cleanup_ue_ctx
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 );

static void fill_gbr_qos_mac_reconfig_lc_req
(
 rrc_mac_reconfigure_lc_req_t     *p_mac_reconfigure_lc,   /* destination */
 rrc_uecc_llim_drb_config_t    *p_drb_config       /* main source */
 );

static void fill_qos_info_mac_create_ue_entity
(
 rrc_mac_create_lc_req_t     *p_mac_create_lc_req,
 rrc_uecc_llim_drb_config_t  *p_uecc_llim_drb_info
 );

static void uemh_fsm_ue_in_service_state_reset_ue_entity_req 
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );
static void uemh_fsm_ue_in_service_state_reestb_ue_entity_comp_ind
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );
/* SPR 18926 Fix Start */
static rrc_return_et build_and_send_pdcp_re_establish_ue_entity_req(
    rrc_llim_ue_ctx_t  *p_ue_ctx);
/* SPR 18926 Fix Stop */

/*SPR:6462 start*/
static void uemh_fsm_ue_in_service_state_reestb_ue_entity_comp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );
/*SPR:6462 stop */
/*BUG 604 changes start*/
/*Bug 357 Fix Start*/
/*Bug 357 Fix Stop*/
/*BUG 604 changes stop*/
/*BUG 604 changes start*/
static void uemh_fsm_ue_in_service_state_s1u_data_fwd_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );
static void uemh_fsm_ue_in_service_state_s1u_data_fwd_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );
static void uemh_fsm_ue_in_service_state_s1u_path_switch_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );
static void uemh_fsm_ue_in_service_state_s1u_path_switch_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );
/*BUG 604 changes stop*/

/* Bug 839 Fix Start */
void uemh_send_mac_ho_rel_rach_res_ind
(
 void                *p_msg,             /* p_msg */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 );
/* Bug 839 Fix Stop */
void rrc_mac_fill_scell_info
(
 rrc_mac_scell_info_t          *p_rrc_mac_scell_info,
 rrc_scell_to_add_mod_t        *p_rrc_scell_to_add_mod,
 scells_operation_list_t  *p_scells_operation_list
 );

void rrc_uecc_fill_scell_mac_main_config_extension
(
 rrc_mac_scell_info_t *p_rrc_mac_scell_info,
 rrc_scell_mac_main_config_extensions_t *p_rrc_scell_mac_main_config_extensions
 );

void rrc_scell_fill_cqi_info
(
 rrc_mac_cqi_info_t                   *p_dst_cqi,
 rrc_cqi_report_config_scell_r10_t    *p_src_cqi
 );

void map_rrm_mac_mimo_capability
(
 rrc_mac_supported_mimo_capability_dl_r10_t   *p_rrc_mac_mimo_capability,
 U8                                            mimo_capability_dl_r10
 );
void rrc_mac_fill_ca_config_ue_info
(
 rrc_mac_carrier_aggr_config_t *p_rrc_mac_carrier_aggr_config,
 rrm_mac_config_t              *p_rrm_mac_config,
 rrm_scell_config_t            *p_rrm_scell_config,
 scells_operation_list_t  *p_scells_operation_list
 );

U8 rrc_calculate_cbsr_type
(
 U8    num_bits,
 U8    transmission_mode         
 );

void rrc_fill_phy_scell_config_list
(
 rrc_phy_scell_config_list_t *p_rrc_phy_scell_config_list,
 rrm_scell_config_t          *p_rrm_scell_config,
 scells_operation_list_t *p_scells_operation_list
 );


void fill_mac_pucch_format
(
 rrc_pucch_channel_selection_config_v1020_t  *p_pucch_config,/*src*/
 rrc_mac_pucch_channel_selection_config_v1020_t *p_mac_pucch_config /*dest*/
 );

void fill_mac_cqi_info_r10
(
 rrc_mac_cqi_info_t             *p_dst_cqi, /* destination */
 rrc_cqi_report_config_r10_t    *p_src_cqi /* source */
 );

static void update_cell_id_operation_validity_for_config_error 
( rrc_mac_reconfigure_ue_entity_cnf_t     *p_msg, 
  rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
  );

static void update_cell_id_operation_validity(
		scells_operation_list_t *p_cell_id_operation_list,
		U8 scell_index,
		U8 validity);

static void update_scell_config_modify_lc_req_for_rollback( 
		rrc_uecc_llim_modify_lc_req_t *p_modify_lc_req);

static  void populate_scell_release_list_modify_lc_req_rollback(
		rrm_scell_config_t *p_scell_config,
		U8 scell_index, 
		U8 cell_index);

static  void populate_scell_add_mod_list_modify_lc_req_rollback(
		rrm_scell_config_t *p_scell_config,
		rrc_scell_to_add_mod_t *p_scell_to_add_mod );

static  void process_mac_modify_lc_req_partial_success_scell_config(
		rrc_mac_reconfigure_ue_entity_cnf_t     *p_mac_reconfigure_ue_entity_cnf,
		rrc_llim_ue_ctx_t   *p_ue_ctx);

static  void process_mac_modify_lc_req_failure_scell_config(
        /*SPR 17777 +-*/
		rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
		);

static void map_scell_deactivation_timer_mac
(
 scell_deactivation_timer_t  *p_rrc_mac_scell_deactivation_timer,
 U8                          rrc_rrm_scell_deactivation_timer 
 );

/****************************************************************************
  Private Constants
 ****************************************************************************/

/****************************************************************************
 * Exported Variables
 ****************************************************************************/

/*
 *   Helper functions used in different UEMH FSM states
 */
const S8 * UEMH_FSM_STATES_NAMES[] =
{
	(const S8*)"UEMH_STATE_IDLE",
	(const S8*)"UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF",/*1*/
	(const S8*)"UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF",/*2*/
	(const S8*)"UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF",/*3*/
	(const S8*)"UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF",/*4*/
	(const S8*)"UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF",/*5*/
	(const S8*)"UEMH_STATE_UE_ENTITY_IN_SERVICE",          /*6*/
	(const S8*)"UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF",   /*7*/ 
	(const S8*)"UEMH_STATE_W_FOR_CONFIGURE_SECURITY_CNF", /*8*/
	(const S8*)"UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF",/*9*/
	(const S8*)"UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF",/*10*/
	(const S8*)"UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF",/*11*/
	(const S8*)"UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF", /*12*/
	(const S8*)"UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF", /*13*/
	(const S8*)"UEMH_STATE_W_FOR_DEL_ALL_LC_CNF",             /*14*/
	(const S8*)"UEMH_STATE_LLIM_LL_MODIFY_LC_IN_SYNC_ONGOING", /*15*/
	(const S8*)"UEMH_STATE_LLIM_LL_ADD_LC_IN_SYNC_ONGOING",  /*16*/
	(const S8*)"UEMH_STATE_W_FOR_PDCP_SUSPEND_UE_ENTITY_CNF",          /*17*/
	(const S8*)"UEMH_STATE_W_FOR_MAC_RESET_UE_ENTITY_CNF", /*18*/
	(const S8*)"UEMH_STATE_W_FOR_RLC_REESTABLISH_UE_ENTITY_CNF", /* 19 */
	(const S8*)"UEMH_STATE_W_FOR_PDCP_REESTABLISH_UE_ENTITY_CNF", /* 20 */
	(const S8*)"UEMH_STATE_W_FOR_RECONFIG_SECURITY_UE_ENTITY_CNF", /* 21 */
	(const S8*)"UEMH_STATE_W_FOR_PDCP_RESUME_UE_ENTITY_CNF", /* 22 */
	(const S8*)"UEMH_STATE_W_FOR_PHY_CHANGE_CRNTI_CNF", /* 23*/
	(const S8*)"UEMH_STATE_W_FOR_MAC_CHANGE_CRNTI_CNF", /* 24 */
	(const S8*)"UEMH_STATE_W_FOR_RLC_CHANGE_CRNTI_CNF", /* 25*/
	/*SPR_14411_fix Start */
	(const S8*)"UEMH_STATE_W_FOR_PDCP_CHANGE_CRNTI_CNF", /* 26*/ 
	(const S8*)"UEMH_STATE_W_FOR_PDCP_DELETE_UE_ENTITY_CNF", /* 27 */
	(const S8*)"UEMH_STATE_W_FOR_RLC_DELETE_UE_ENTITY_CNF", /* 28 */
	(const S8*)"UEMH_STATE_W_FOR_MAC_DELETE_UE_ENTITY_CNF", /* 29 */
	(const S8*)"UEMH_STATE_W_FOR_PHY_DELETE_UE_ENTITY_CNF" /* 30 */ 
	/*SPR_14411_fix Stop */
};

const S8 * UEMH_FSM_EVENTS_NAMES[] =
{
	(const S8*)"UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ",
	(const S8*)"UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_CREATE_UE_TIMER_EXPIRED",
	(const S8*)"UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ",
	(const S8*)"UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_DELETE_UE_TIMER_EXPIRED",
	(const S8*)"UEMH_EVENT_UECC_ADD_LC_REQ",
	(const S8*)"UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED",
	(const S8*)"UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ",
	(const S8*)"UEMH_EVENT_SECURITY_TIMER_EXPIRED",
	(const S8*)"UEMH_EVENT_OAMH_CLEANUP_REQ",
	(const S8*)"UEMH_EVENT_S1U_ERROR_IND",
	(const S8*)"UEMH_EVENT_UECC_MODIFY_LC_REQ",
	(const S8*)"UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ",
	(const S8*)"UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ",
	(const S8*)"UEMH_EVENT_UECC_DELETE_LC_REQ",
	(const S8*)"UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY",
	(const S8*)"UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ",
	(const S8*)"UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF",

	(const S8*)"UEMH_EVENT_UECC_SN_HFN_STATUS_REQ",
	(const S8*)"UEMH_EVENT_UECC_SN_HFN_STATUS_IND",
	(const S8*)"UEMH_EVENT_UECC_MAC_I_REQ",
	(const S8*)"UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND",
	(const S8*)"UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ",
	(const S8*)"UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ",
	(const S8*)"UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP",
	(const S8*)"UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND",
	(const S8*)"UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ",
	(const S8*)"UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ",
	(const S8*)"UEMH_EVENT_PDCP_MAC_I_RESP",
	(const S8*)"UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP_DELETED_EVENT",
	(const S8*)"UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP",
	(const S8*)"UEMH_EVENT_S1U_END_MARKER_IND",
	(const S8*)"UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ",
	(const S8*)"UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ",
	(const S8*)"UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ",
	(const S8*)"UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF",
	(const S8*)"UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED",
	(const S8*)"UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED",
	(const S8*)"UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED",
	(const S8*)"UEMH_EVENT_UECC_CHANGE_CRNTI_REQ",
	(const S8*)"UEMH_EVENT_PHY_CHANGE_CRNTI_CNF",
	(const S8*)"UEMH_EVENT_MAC_CHANGE_CRNTI_CNF",
	(const S8*)"UEMH_EVENT_RLC_CHANGE_CRNTI_CNF",
	(const S8*)"UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF",
	(const S8*)"UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED",
	(const S8*)"UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ",
	(const S8*)"UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND",
	(const S8*)"UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF",
	/*BUG 604 changes start*/
	(const S8*)"UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ",
	(const S8*)"UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF",
	(const S8*)"UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ",
	(const S8*)"UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF",
    /*BUG 604 changes stop*/
    /*SPR_19066_START*/
    /*Bug 357 Fix Start*/
    (const S8*)"UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ",
    /*Bug 357 Fix Stop*/
    (const S8*)"UEMH_EVENT_PDCP_INACTIVE_UES_IND",
    (const S8*)"UEMH_EVENT_PDCP_HO_PREP_INFO_REQ",
    (const S8*)"UEMH_EVENT_PDCP_HO_PREP_INFO_RESP"
    /*SPR_19066_END*/
};


/****************************************************************************
 * Private Variables (Must be declared static)
 ****************************************************************************/


/*
 *   Helper functions used in different UEMH FSM states
 */
/******************************************************************************
 *   FUNCTION NAME: get_rlc_poll_retransmission_from_enum
 *   INPUT        : U8 poll_retransmit
 *   OUTPUT       : none
 *   DESCRIPTION  : This function returns RLC poll retransmission value from given enum
 *
 *   RETURNS      : RLC poll retransmission value
 *
 ******************************************************************************/
static U16 get_rlc_poll_retransmission_from_enum
(
 U8 poll_retransmit /*rrc_t_poll_retransmit_et*/
 )
{
	U16 poll_retransmit_val = (U16)( 250 + 
			(poll_retransmit - 
			 RRC_POLL_RETRAS_MS_250)* 50);

	RRC_LLIM_UT_TRACE_ENTER();

	if (poll_retransmit <= RRC_POLL_RETRAS_MS_250)
	{
		poll_retransmit_val = (U16)((poll_retransmit + 1) * 5);
	}
	else if (poll_retransmit <= RRC_POLL_RETRAS_MS_500)
	{
		poll_retransmit_val = (U16)(250 + (poll_retransmit - RRC_POLL_RETRAS_MS_250) *
				50);
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return poll_retransmit_val;
}

/******************************************************************************
 *   FUNCTION NAME: get_rlc_poll_pdu_from_enum
 *   INPUT        : U8 poll_pdu
 *   OUTPUT       : none
 *   DESCRIPTION  : This function returns RLC poll PDU value from given enum
 *
 *   RETURNS:
 *       RLC poll PDU value
 *
 ******************************************************************************/
static U16 get_rlc_poll_pdu_from_enum
(
 U8 poll_pdu /*rrc_poll_pdu_et*/
 )
{
	/* CSR#59256 Fix Start */
	U16 poll_pdu_val = 257; /* pInfinity */
	/* CSR#59256 Fix Stop */

	RRC_LLIM_UT_TRACE_ENTER();

	if (poll_pdu < RRC_POLL_PDU_INFINITY)
	{
		poll_pdu_val = (U16)(4 << poll_pdu);
	}
	else if (poll_pdu == RRC_POLL_PDU_INFINITY)
	{
		/* CSR#59256 Fix Start */
		poll_pdu_val = 257;
		/* CSR#59256 Fix Stop */
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return poll_pdu_val;
}

/******************************************************************************
 *   FUNCTION NAME: get_rlc_poll_byte_from_enum
 *   INPUT        : U8 poll_byte
 *   OUTPUT       : none
 *   DESCRIPTION  : This function returns RLC poll byte value from given enum
 *
 *   RETURNS      : RLC poll byte value
 *
 ******************************************************************************/
static U16 get_rlc_poll_byte_from_enum
(
 U8 poll_byte /*rrc_poll_byte_et*/
 )
{
	U16 poll_byte_val = 3001; /* kbinfinity */

	RRC_LLIM_UT_TRACE_ENTER();

	if (poll_byte <= RRC_POLL_BYTE_KB_125)
	{
		poll_byte_val = (U16)((1 + poll_byte) * 25);
	}
	else if (poll_byte <= RRC_POLL_BYTE_KB_375)
	{
		poll_byte_val = (U16)((1 + poll_byte - RRC_POLL_BYTE_KB_125) * 125);
	}
	else if (poll_byte <= RRC_POLL_BYTE_KB_1500)
	{
		poll_byte_val = (U16)((1 + poll_byte - RRC_POLL_BYTE_KB_375) * 250);
	}
	else if (poll_byte < RRC_POLL_BYTE_KB_INFINITY)
	{
		poll_byte_val = (U16)((1 + poll_byte - RRC_POLL_BYTE_KB_1500) * 1000);
	}
	else if (poll_byte == RRC_POLL_BYTE_KB_INFINITY)
	{
		poll_byte_val = 3001;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return poll_byte_val;
}

/******************************************************************************
 *   FUNCTION NAME: get_rlc_max_retx_threshold_from_enum
 *   INPUT        : U8 t_threshold
 *   OUTPUT       : none
 *   DESCRIPTION  : This function returns RLC threshold value from given enum
 *
 *   RETURNS      : RLC threshold value
 *
 ******************************************************************************/
static U16 get_rlc_max_retx_threshold_from_enum
(
 U8 t_threshold /*rrc_max_retx_threshold_et*/
 )
{
	U16 t_threshold_val = (U16)(8 << (t_threshold - RRC_MAX_RETRANS_THRESH_6 - 1));

	RRC_LLIM_UT_TRACE_ENTER();

	if (t_threshold <= RRC_MAX_RETRANS_THRESH_4)
	{
		t_threshold_val = (rrc_max_retx_threshold_et)(t_threshold + 1);
	}
	else if (t_threshold == RRC_MAX_RETRANS_THRESH_6)
	{
		t_threshold_val = 6;
	}
	else if (t_threshold <= RRC_MAX_RETRANS_THRESH_32)
	{
		t_threshold_val = (rrc_max_retx_threshold_et)(8 << (t_threshold - RRC_MAX_RETRANS_THRESH_6 - 1));
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return t_threshold_val;
}

/******************************************************************************
 *   FUNCTION NAME: get_rlc_t_reordering_from_enum
 *   INPUT        : U8 t_reordering  
 *   OUTPUT       : none
 *   DESCRIPTION  : This function returns RLC reordering timeout value from given enum
 *
 *   RETURNS      : RLC reordering value
 *
 ******************************************************************************/
static U16 get_rlc_t_reordering_from_enum
(
 U8 t_reordering /* rrc_t_reordering_et */
 )
{
	U16 t_reordering_val = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	if (t_reordering <= RRC_T_REORDER_MS_100)
	{
		t_reordering_val = (U16)(t_reordering * 5);
	}
	else if (t_reordering <= RRC_T_REORDER_MS_200)
	{
		t_reordering_val = (U16)(100 + (t_reordering - RRC_T_REORDER_MS_100) * 10);
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return t_reordering_val;
}

/******************************************************************************
 *   FUNCTION NAME: get_rlc_t_status_prohibit_from_enum
 *   INPUT        : U8 t_status_prohibit
 *   OUTPUT       : none
 *   DESCRIPTION  : This function returns RLC status prohibit time value from given enum
 *
 *   RETURNS      : RLC status prohibit value
 *
 ******************************************************************************/
static U16 get_rlc_t_status_prohibit_from_enum
(
 U8 t_status_prohibit /*rrc_t_status_prohibit_et*/
 )
{
	U16 t_status_prohibit_val = (U16)(250 + (t_status_prohibit -
				RRC_T_STATUS_PROHB_MS_250) * 50);

	RRC_LLIM_UT_TRACE_ENTER();

	if (t_status_prohibit <= RRC_T_STATUS_PROHB_MS_250)
	{
		t_status_prohibit_val = (U16)( t_status_prohibit * 5);
	}
	else if (t_status_prohibit <= RRC_T_STATUS_PROHB_MS_500)
	{
		t_status_prohibit_val = (U16)(250 + (t_status_prohibit -
					RRC_T_STATUS_PROHB_MS_250) * 50);
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return t_status_prohibit_val;
}

/******************************************************************************
 *   FUNCTION NAME: get_rlc_sn_field_length_from_enum
 *   INPUT        : U8 sn_field_length
 *   OUTPUT       : none
 *   DESCRIPTION  : This function returns RLC sn field length value from given enum
 *
 *   RETURNS      : RLC sn field length value
 *
 ******************************************************************************/
static U8 get_rlc_sn_field_length_from_enum
(
 U8 sn_field_length /*rrc_sn_field_length_et*/
 )
{
	U8 sn_field_length_val = 10;

	RRC_LLIM_UT_TRACE_ENTER();

	if (RRC_SN_FIELD_LEN_5 == sn_field_length)
	{
		sn_field_length_val = 5;
	}
	else if (RRC_SN_FIELD_LEN_10 == sn_field_length)
	{
		sn_field_length_val = 10;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return sn_field_length_val;
}

/******************************************************************************
 *   FUNCTION NAME: get_pdcp_rlc_mode_from_drb_config
 *   INPUT        : rrm_drb_config_t    *p_drb_config
 *   OUTPUT       : none
 *   DESCRIPTION  : This finds PDCP RLC mode from DRB configuration
 *
 *   RETURNS      : RLC mode
 *
 ******************************************************************************/
static U16 get_pdcp_rlc_mode_from_drb_config
(
 rrm_drb_config_t    *p_drb_config
 )
{
	U16 rlc_mode = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_drb_config);
	RRC_ASSERT(p_drb_config->bitmask & RRM_DRB_CONFIG_RLC_CONFIG_PRESENT);

	if (RRC_RLC_CONFIG_AM_CONFIG_PRESENT == 
			p_drb_config->rlc_config_enb.rlc_config.bitmask)
	{
		rlc_mode = PDCP_RLC_MODE_AM;
	}
	else
	{
		rlc_mode = PDCP_RLC_MODE_UM;
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return rlc_mode;
}

/******************************************************************************
 *   FUNCTION NAME: get_rb_direction_from_drb_config_during_erab_modify
 *   INPUT        : rrm_drb_config_t    *p_drb_config
 *   OUTPUT       : none
 *   DESCRIPTION  : This finds RB direction from DRB configuration
 *
 *   RETURNS      : RB direction
 *
 ******************************************************************************/
static rrc_rb_direction_et get_rb_direction_from_drb_config_during_erab_modify
(
 rrm_drb_config_t    *p_drb_config
 )
{
	rrc_rb_direction_et rb_direction = RRC_PDCP_RB_DIR_BOTH;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_drb_config);
	if ( (RRC_RLC_CONFIG_AM_CONFIG_PRESENT == 
				p_drb_config->rlc_config_enb.rlc_config.bitmask) ||
			(RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT ==  
			 p_drb_config->rlc_config_enb.rlc_config.bitmask) )
	{
		rb_direction = RRC_PDCP_RB_DIR_BOTH;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT == p_drb_config
			->rlc_config_enb.rlc_config.bitmask)
	{
		rb_direction = RRC_PDCP_RB_DIR_TX;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT == p_drb_config
			->rlc_config_enb.rlc_config.bitmask)
	{
		rb_direction = RRC_PDCP_RB_DIR_RX;
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return rb_direction;
}
/******************************************************************************
 *   FUNCTION NAME: get_rb_direction_from_drb_config
 *   INPUT        : rrm_drb_config_t    *p_drb_config
 *   OUTPUT       : none
 *   DESCRIPTION  : This finds RB direction from DRB configuration
 *
 *   RETURNS      : RB direction
 *
 ******************************************************************************/
static rrc_rb_direction_et get_rb_direction_from_drb_config
(
 rrm_drb_config_t    *p_drb_config
 )
{
	rrc_rb_direction_et rb_direction = RRC_PDCP_RB_DIR_BOTH;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_drb_config);
	RRC_ASSERT(p_drb_config->bitmask & RRM_DRB_CONFIG_RLC_CONFIG_PRESENT);

	if ( (RRC_RLC_CONFIG_AM_CONFIG_PRESENT == 
				p_drb_config->rlc_config_enb.rlc_config.bitmask) ||
			(RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT ==  p_drb_config->
			 rlc_config_enb.rlc_config.bitmask) )
	{
		rb_direction = RRC_PDCP_RB_DIR_BOTH;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT == p_drb_config
			->rlc_config_enb.rlc_config.bitmask)
	{
		rb_direction = RRC_PDCP_RB_DIR_TX;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT == p_drb_config
			->rlc_config_enb.rlc_config.bitmask)
	{
		rb_direction = RRC_PDCP_RB_DIR_RX;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return rb_direction;
}

/******************************************************************************
 *   FUNCTION NAME: get_rohc_profile_id_from_rohc_config
 *   INPUT        : rrc_pdcp_rohc_config_t  *p_rohc_config
 *   OUTPUT       : none
 *   DESCRIPTION  : This creates ROHC profile ID based on list of ROHC profiles
 *
 *   RETURNS      : ROHC profile ID
 *
 ******************************************************************************/
static U16 get_rohc_profile_id_from_rohc_config
(
 rrc_pdcp_rohc_config_t  *p_rohc_config
 )
{
	U16 profile_id      = RRC_NULL;
	U16 profile_bitmask = 0x0001;
	U16 profile_index   = RRC_NULL;
	U8* p_profiles      = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_rohc_config);

	p_profiles = (U8 *)&p_rohc_config->rohc_profile;
	/* Iterate over profiles */
	for (profile_index = 0; profile_index < sizeof(rrc_pdcp_rohc_profile_t);
			profile_index++)
	{
		if (RRC_TRUE == p_profiles[profile_index])
		{
			profile_id |= profile_bitmask;
		}

		profile_bitmask = (U16)(profile_bitmask << 1);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return profile_id;
}

/******************************************************************************
 *   FUNCTION NAME: get_pdcp_disc_timer_from_enum
 *   INPUT        : U8 disc_timer
 *   OUTPUT       : none
 *   DESCRIPTION  : This function returns PDCP discard timer value from given enum
 *
 *   RETURNS      : PDCP discard timer value
 *
 ******************************************************************************/
static U16 get_pdcp_disc_timer_from_enum
(
 U8 disc_timer /*rrc_pdcp_discard_timer_et*/
 )
{
	U16 disc_timer_val = 0; /* Infinity */

	RRC_LLIM_UT_TRACE_ENTER();

	switch (disc_timer)
	{
		case RRC_PDCP_DISCARD_TIMER_MS_50:
			disc_timer_val = 50;
			break;

		case RRC_PDCP_DISCARD_TIMER_MS_100:
			disc_timer_val = 100;
			break;

		case RRC_PDCP_DISCARD_TIMER_MS_150:
			disc_timer_val = 150;
			break;

		case RRC_PDCP_DISCARD_TIMER_MS_300:
			disc_timer_val = 300;
			break;

		case RRC_PDCP_DISCARD_TIMER_MS_500:
			disc_timer_val = 500;
			break;

		case RRC_PDCP_DISCARD_TIMER_MS_750:
			disc_timer_val = 750;
			break;

		case RRC_PDCP_DISCARD_TIMER_MS_1500:
			disc_timer_val = 1500;
			break;

		case RRC_PDCP_DISCARD_TIMER_INFINITY:
			disc_timer_val = 0;
			break;

		default:
			RRC_ASSERT(RRC_FALSE);
			break;
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return disc_timer_val;
}

/******************************************************************************
 *   FUNCTION NAME: get_pdcp_sn_size_from_enum
 *   INPUT        : U8 sn_size
 *   OUTPUT       : none
 *   DESCRIPTION  : This function returns PDCP sn size value from given enum
 *
 *   RETURNS:
 *       PDCP sn size value
 *
 ******************************************************************************/
static U8 get_pdcp_sn_size_from_enum
(
 U8 sn_size /*rrc_pdcp_sn_size_et*/
 )
{
	U8 sn_size_val = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	if (RRC_PDCP_SN_SIZE_7_BITS == sn_size)
	{
		sn_size_val = 7;
	}
	else if (RRC_PDCP_SN_SIZE_12_BITS == sn_size)
	{
		sn_size_val = 12;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return sn_size_val;
}

/******************************************************************************
 *   FUNCTION NAME: uemh_e2v_mac_cqi_reporting_mode_aperiodic
 *   INPUT        : U8  cqi_reporting_mode_aperiodic
 *   OUTPUT       : none
 *   DESCRIPTION  : This function converts cqi_reporting_mode_aperiodic_et enum value
 *                  into the MAC format value
 *
 *   RETURNS:
 *       UL cqi aperiodic mode value {12,20,22,30,31}
 *
 ******************************************************************************/
static U8 uemh_e2v_mac_cqi_reporting_mode_aperiodic
(
 U8 cqi_reporting_mode_aperiodic /*cqi_reporting_mode_aperiodic_et*/
 )
{
	U8 cqi_aperiodic_mode = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	if (CQI_REPORTING_MODE_APERIODIC_RM12 == cqi_reporting_mode_aperiodic)
	{
		cqi_aperiodic_mode = 12;
	}
	else if (CQI_REPORTING_MODE_APERIODIC_RM20 == cqi_reporting_mode_aperiodic)
	{
		cqi_aperiodic_mode = 20;
	}
	else if (CQI_REPORTING_MODE_APERIODIC_RM22 == cqi_reporting_mode_aperiodic)
	{
		cqi_aperiodic_mode = 22;
	}
	else if (CQI_REPORTING_MODE_APERIODIC_RM30 == cqi_reporting_mode_aperiodic)
	{
		cqi_aperiodic_mode = 30;
	}
	else if (CQI_REPORTING_MODE_APERIODIC_RM31 == cqi_reporting_mode_aperiodic)
	{
		cqi_aperiodic_mode = 31;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return cqi_aperiodic_mode;
}


/******************************************************************************
 *   FUNCTION NAME: fill_mac_reconfig_del_lc_req_for_rollback
 *   INPUT        : rrc_mac_reconfigure_ue_entity_req_t *p_mac_reconfigure_ue_entity_req,
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx,
 *                  U8                                   drb_index
 *   OUTPUT       : none
 *       This function fills the required parameters for a particular DRB to 
 *       delete a LC while RollBack.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_mac_reconfig_del_lc_req_for_llim_trigerred_rollback
(
 rrc_mac_reconfigure_ue_entity_req_t *p_mac_reconfigure_ue_entity_req,
 rrc_llim_ue_ctx_t                   *p_ue_ctx,
 U8                                   drb_index
 )
{

	/*  Prepare RRC_MAC_RECONFIGURE_UE_ENTITY_REQ */
	p_mac_reconfigure_ue_entity_req->ue_index =
		p_ue_ctx->ue_index;

	/* Delete LC */

	RRC_ASSERT(p_mac_reconfigure_ue_entity_req->
			delete_lc_req_counter <=
			RRC_MAC_MAX_DELETE_LC);

	if(p_mac_reconfigure_ue_entity_req->delete_lc_req_counter < RRC_MAC_MAX_DELETE_LC)
	{
		p_mac_reconfigure_ue_entity_req->
			delete_lc_req[p_mac_reconfigure_ue_entity_req->
			delete_lc_req_counter].
			lch_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].lc_id;

		if(p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc.
				create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
				rlc_config_enb.rlc_config.bitmask & 
				RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->
				delete_lc_req[p_mac_reconfigure_ue_entity_req->
				delete_lc_req_counter].
				lc_type=
				MAC_DELETE_LC_UPLINK;
		}
		else if(p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc.
				create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
				rlc_config_enb.rlc_config.bitmask & 
				RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->
				delete_lc_req[p_mac_reconfigure_ue_entity_req->
				delete_lc_req_counter].
				lc_type=
				MAC_DELETE_LC_DOWNLINK;
		}
		else
		{
			p_mac_reconfigure_ue_entity_req->
				delete_lc_req[p_mac_reconfigure_ue_entity_req->
				delete_lc_req_counter].
				lc_type=
				MAC_DELETE_LC_BOTH;
		}
		/*Incrementing the delete LC counter*/
		p_mac_reconfigure_ue_entity_req->delete_lc_req_counter++;
	}
}

/******************************************************************************
 *   FUNCTION NAME: fill_mac_reconfig_del_lc_req_for_uecc_trigerred_rollback
 *   INPUT        : rrc_mac_reconfigure_ue_entity_req_t *p_mac_reconfigure_ue_entity_req,
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx,
 *                  U8                                   drb_index
 *   OUTPUT       : none
 *
 *   DESCRIPTION  : This function fills the required parameters for a particular DRB to 
 *       delete a LC while RollBack.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_mac_reconfig_del_lc_req_for_uecc_trigerred_rollback
(
 rrc_mac_reconfigure_ue_entity_req_t *p_mac_reconfigure_ue_entity_req,
 rrc_llim_ue_ctx_t                   *p_ue_ctx,
 U8                                   drb_index
 )
{

	/*  Prepare RRC_MAC_RECONFIGURE_UE_ENTITY_REQ */
	p_mac_reconfigure_ue_entity_req->ue_index =
		p_ue_ctx->ue_index;

	/* Delete LC */

	RRC_ASSERT(p_mac_reconfigure_ue_entity_req->
			delete_lc_req_counter <=
			RRC_MAC_MAX_DELETE_LC);
	if(p_mac_reconfigure_ue_entity_req->delete_lc_req_counter < RRC_MAC_MAX_DELETE_LC)
	{
		p_mac_reconfigure_ue_entity_req->
			delete_lc_req[p_mac_reconfigure_ue_entity_req->
			delete_lc_req_counter].
			lch_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
			add_drb_entity[drb_index].lc_id;

		if(RLC_CONFIG_UM_UL_UNI_DIR_MODE == p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.add_drb_entity[drb_index].rlc_mode ) 
		{
			p_mac_reconfigure_ue_entity_req->
				delete_lc_req[p_mac_reconfigure_ue_entity_req->
				delete_lc_req_counter].
				lc_type=
				MAC_DELETE_LC_UPLINK;
		}
		else if(RLC_CONFIG_UM_DL_UNI_DIR_MODE == p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.add_drb_entity[drb_index].rlc_mode ) 
		{
			p_mac_reconfigure_ue_entity_req->
				delete_lc_req[p_mac_reconfigure_ue_entity_req->
				delete_lc_req_counter].
				lc_type=
				MAC_DELETE_LC_DOWNLINK;
		}
		else
		{
			p_mac_reconfigure_ue_entity_req->
				delete_lc_req[p_mac_reconfigure_ue_entity_req->
				delete_lc_req_counter].
				lc_type=
				MAC_DELETE_LC_BOTH;
		}
		/*Incrementing the delete LC counter*/
		p_mac_reconfigure_ue_entity_req->delete_lc_req_counter++;
	} 
}

/******************************************************************************
 *   FUNCTION NAME: fill_rlc_reconfig_del_lc_req_for_llim_trigerred_rollback
 *   INPUT        : rrc_rlc_reconfig_ue_entity_req_t *p_rlc_reconfig_ue_entity_req,
 *                  rrc_llim_ue_ctx_t                *p_ue_ctx,
 *                  U8                                drb_index
 *   OUTPUT       : none        
 *   DESCRIPTION  : This function fills the required parameters for a particular DRB to 
 *       delete a LC while RollBack.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_rlc_reconfig_del_lc_req_for_llim_trigerred_rollback
(
 rrc_rlc_reconfig_ue_entity_req_t *p_rlc_reconfig_ue_entity_req,
 rrc_llim_ue_ctx_t                *p_ue_ctx,
 U8                                drb_index
 )
{
	rrc_uecc_llim_add_lc_req_t *p_add_lc_param = PNULL;

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	p_rlc_reconfig_ue_entity_req->ue_index = p_ue_ctx->ue_index;

	if (p_add_lc_param->create_drb_entity[drb_index].uecc_llim_drb_config.
			drb_config.rlc_config_enb.rlc_config.bitmask &
			RRC_RLC_CONFIG_AM_CONFIG_PRESENT)
	{
		p_rlc_reconfig_ue_entity_req->delete_tx_rx_am_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_am_rlc].lc_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->
			llim_drb_status[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_am_rlc;
	}
	else if (p_add_lc_param->create_drb_entity[drb_index].uecc_llim_drb_config.
			drb_config.rlc_config_enb.rlc_config.bitmask &
			RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT)
	{
		p_rlc_reconfig_ue_entity_req->delete_tx_rx_um_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_um_rlc].lc_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->
			llim_drb_status[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_um_rlc;
	}
	else if (p_add_lc_param->create_drb_entity[drb_index].uecc_llim_drb_config.
			drb_config.rlc_config_enb.rlc_config.bitmask &
			RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT)
	{
		p_rlc_reconfig_ue_entity_req->delete_rx_um_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_rx_um_rlc].lc_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->
			llim_drb_status[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_rx_um_rlc;
	}
	else if (p_add_lc_param->create_drb_entity[drb_index].uecc_llim_drb_config.
			drb_config.rlc_config_enb.rlc_config.bitmask &
			RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT)
	{
		p_rlc_reconfig_ue_entity_req->delete_tx_um_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_tx_um_rlc].lc_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->
			llim_drb_status[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_tx_um_rlc;
	}
	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: fill_rlc_reconfig_del_lc_req_for_uecc_trigerred_rollback
 *   INPUT        : rrc_rlc_reconfig_ue_entity_req_t *p_rlc_reconfig_ue_entity_req,
 *                  rrc_llim_ue_ctx_t                *p_ue_ctx,
 *                  U8                                drb_index
 *   OUTPUT       : none
 *   DESCRIPTION  :    This function fills the required parameters for a particular DRB to 
 *       delete a LC while RollBack.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_rlc_reconfig_del_lc_req_for_uecc_trigerred_rollback
(
 rrc_rlc_reconfig_ue_entity_req_t *p_rlc_reconfig_ue_entity_req,
 rrc_llim_ue_ctx_t                *p_ue_ctx,
 U8                                drb_index
 )
{
	rrc_uecc_llim_add_rollback_req_t *p_add_lc_rollback = PNULL;

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_add_lc_rollback = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback;

	p_rlc_reconfig_ue_entity_req->ue_index = p_ue_ctx->ue_index;


	if (RLC_CONFIG_AM_MODE == p_add_lc_rollback->
			add_drb_entity[drb_index].rlc_mode)
	{
		p_rlc_reconfig_ue_entity_req->delete_tx_rx_am_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_am_rlc].lc_id =
			p_add_lc_rollback->
			add_drb_entity[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_am_rlc;
	}
	else if (RLC_CONFIG_UM_BI_DIR_MODE == p_add_lc_rollback->
			add_drb_entity[drb_index].rlc_mode)
	{
		p_rlc_reconfig_ue_entity_req->delete_tx_rx_um_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_um_rlc].lc_id =
			p_add_lc_rollback->
			add_drb_entity[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_um_rlc;
	}
	else if (RLC_CONFIG_UM_UL_UNI_DIR_MODE== p_add_lc_rollback->
			add_drb_entity[drb_index].rlc_mode)
	{
		p_rlc_reconfig_ue_entity_req->delete_rx_um_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_rx_um_rlc].lc_id =
			p_add_lc_rollback->
			add_drb_entity[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_rx_um_rlc;
	}
	else if (RLC_CONFIG_UM_DL_UNI_DIR_MODE== p_add_lc_rollback->
			add_drb_entity[drb_index].rlc_mode)
	{
		p_rlc_reconfig_ue_entity_req->delete_tx_um_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_tx_um_rlc].lc_id =
			p_add_lc_rollback->
			add_drb_entity[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_tx_um_rlc;
	}
}
/******************************************************************************
 *   FUNCTION NAME: start_roll_back_for_add_lc
 *   INPUT        : rrc_llim_ue_ctx_t *p_ue_ctx
 *   OUTPUT       : none
 *   DESCRIPTION  : This function starts the roll back procedure for ADD lc.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void start_roll_back_for_add_lc
(
 rrc_llim_ue_ctx_t *p_ue_ctx
 )
{
	rrc_uecc_llim_add_lc_req_t *p_add_lc_param = PNULL;

	rrc_counter_t failed_lc_counter = RRC_NULL;

	rrc_mac_reconfigure_ue_entity_req_t
		mac_reconfigure_ue_entity_req;

	rrc_s1u_reconfigure_ue_entity_req_t
		s1u_reconfigure_ue_entity_req;

	rrc_pdcp_reconf_ue_entity_req_t 
		pdcp_reconf_ue_entity_req;

	rrc_rlc_reconfig_ue_entity_req_t
		rlc_reconfig_ue_entity_req;

	U8 drb_index = RRC_NULL;
	U16 drb_status = RRC_NULL;
	rrc_return_et  response_code = RRC_FAILURE;
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_ue_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	memset_wrapper(&mac_reconfigure_ue_entity_req, 0, sizeof
			(mac_reconfigure_ue_entity_req));

	memset_wrapper(&s1u_reconfigure_ue_entity_req, 0, sizeof
			(s1u_reconfigure_ue_entity_req));

	memset_wrapper(&pdcp_reconf_ue_entity_req, 0, sizeof
			(pdcp_reconf_ue_entity_req));

	memset_wrapper(&rlc_reconfig_ue_entity_req, 0, sizeof
			(rlc_reconfig_ue_entity_req));

	for(drb_index = RRC_NULL;
			drb_index < p_add_lc_param->create_drb_entity_counter;
			drb_index++)
	{
		drb_status =
			p_ue_ctx->curr_op_param.p_rcfg_ue->
			llim_drb_status[drb_index].drb_status;

		switch(drb_status)
		{
			case RRC_LLIM_DRB_FAILED_AT_S1U  :

				pdcp_reconf_ue_entity_req.ue_index = p_ue_ctx->ue_index;

				RRC_ASSERT(pdcp_reconf_ue_entity_req.num_del_drb_entity <=
						RRC_PDCP_MAX_DRB);

				if(pdcp_reconf_ue_entity_req.num_del_drb_entity < RRC_PDCP_MAX_DRB)
				{
					pdcp_reconf_ue_entity_req.del_drb_entities[
						pdcp_reconf_ue_entity_req.num_del_drb_entity].lc_id =
						p_ue_ctx->curr_op_param.p_rcfg_ue->
						llim_drb_status[drb_index].lc_id;
					pdcp_reconf_ue_entity_req.num_del_drb_entity++;
				}

			case RRC_LLIM_DRB_FAILED_AT_PDCP :

				fill_rlc_reconfig_del_lc_req_for_llim_trigerred_rollback(
						&rlc_reconfig_ue_entity_req,
						p_ue_ctx,
						drb_index);


			case RRC_LLIM_DRB_FAILED_AT_RLC  :

				fill_mac_reconfig_del_lc_req_for_llim_trigerred_rollback(
						&mac_reconfigure_ue_entity_req,
						p_ue_ctx,
						drb_index);

				++failed_lc_counter;
				break;

		}
	}

	if(RRC_NULL != mac_reconfigure_ue_entity_req.delete_lc_req_counter)
	{
		if(p_add_lc_param->create_drb_entity_counter == failed_lc_counter)
		{
			/*All lc has failed at a particular layer*/
			/*We should Roll Back MAC reconfig info*/

			if (p_add_lc_param->bitmask & UECC_LLIM_ADD_LC_REQ_OLD_MAC_CONFIG_PRESENT) 
			{
				mac_reconfigure_ue_entity_req.optional_elems_present |=
					RRC_MAC_RECONFIG_UE_INFO_PRESENT;

				mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present =
					RRC_NULL;

				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_DL_MAX_RB_INFO_PRESENT;
				mac_reconfigure_ue_entity_req.reconfig_ue_info.dl_max_rb_info.
					dl_max_rb =
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_OLD_MAC_CONFIG].
					mac_main_config_extensions.dl_max_rb;

				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_NUM_OF_LAYER_INFO_PRESENT;
				mac_reconfigure_ue_entity_req.reconfig_ue_info.num_of_layer_info.
					num_of_layer =
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_OLD_MAC_CONFIG].
					mac_main_config_extensions.num_of_layer;

				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_CODE_BOOK_INDEX_INFO_PRESENT;
				mac_reconfigure_ue_entity_req.reconfig_ue_info.code_book_index_info.
					code_book_index =
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_OLD_MAC_CONFIG].
					mac_main_config_extensions.code_book_index;
				/*Transmission_mode_7_8 start*/ 
				if(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_OLD_MAC_CONFIG].
						mac_main_config_extensions.bitmask &
						RRM_MAC_MAIN_CONFIG_EXT_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT)
				{
					mac_reconfigure_ue_entity_req.reconfig_ue_info.
						optional_elems_present |=
						RRC_MAC_RECONFIG_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT;
					mac_reconfigure_ue_entity_req.reconfig_ue_info.pdsch_epre_to_ue_rs_ratio.
						pdsch_epre_to_ue_rs_ratio =
						p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_OLD_MAC_CONFIG].
						mac_main_config_extensions.pdsch_epre_to_ue_rs_ratio;
				}
				/*Transmission_mode_7_8 stop*/ 
			}


		}
		response_code = rrc_mac_il_send_rrc_mac_reconfigure_ue_entity_req(
				&mac_reconfigure_ue_entity_req, 
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_add_lc_param->cell_index),
				p_add_lc_param->transaction_id,
				p_add_lc_param->cell_index);

		if(response_code == RRC_SUCCESS)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"Sent : "
					"MAC reconfig UE entity req for ADD LC Rollback");

			/*16 is number of bits in 2 bytes*/
			RRC_ASSERT(UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF < 16); 

			p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
				1 << UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF;
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"Unable to send "
					"MAC reconfig UE entity req");
		}

	}
	if( RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_um_rlc ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_rx_um_rlc  ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_rx_um_rlc ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_rx_am_rlc 
	  )
	{
		response_code = rrc_rlc_il_send_rrc_rlc_reconfig_ue_entity_req(
				&rlc_reconfig_ue_entity_req, RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_add_lc_param->cell_index),
				p_add_lc_param->transaction_id,
				p_add_lc_param->cell_index);
		if (RRC_SUCCESS == response_code)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"Sent : "
					"RLC reconfig UE entity req for ADD LC Rollback");
			RRC_ASSERT(UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF < 16);
			p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
				1 << UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF;
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"Unable to send "
					"RLC reconfig UE entity req");
		}

	}
	if(RRC_NULL != pdcp_reconf_ue_entity_req.num_del_drb_entity)
	{
		response_code = rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
				&pdcp_reconf_ue_entity_req, RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_add_lc_param->cell_index),
				p_add_lc_param->transaction_id,
				p_add_lc_param->cell_index);
		if(RRC_SUCCESS == response_code)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"Sent : "
					"PDCP reconfig UE entity req for ADD LC Rollback");
			RRC_ASSERT(UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF < 16);
			p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
				1 << UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF;
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"Unable to send "
					"PDCP reconfig UE entity req");
		}

	}
	if(RRC_NULL != s1u_reconfigure_ue_entity_req.num_rel_sap_req)
	{
		response_code = rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
				&s1u_reconfigure_ue_entity_req, RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_add_lc_param->cell_index),
				p_add_lc_param->transaction_id,
				p_add_lc_param->cell_index);
		if(RRC_SUCCESS == response_code)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"Sent : "
					"S1U reconfig UE entity req for ADD LC Rollback");
			RRC_ASSERT(UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF < 16);
			p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
				1 << UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF;
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"Unable to send "
					"S1U reconfig UE entity req");
		}
	}
	if(RRC_NULL != p_ue_ctx->curr_op_param.p_rcfg_ue->
			cur_mask_lc_to_be_tracked_layers)
	{
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_LLIM_LL_ADD_LC_IN_SYNC_ONGOING);
	}
	else
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}
		rrc_llim_send_internal_msg( 
				RRC_GET_UECC_MODULE_ID(p_add_lc_param->ue_index), 
				UECC_LLIM_ADD_LC_RESP,
				sizeof(p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp), 
				&p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: start_uecc_trigered_roll_back_for_add_lc
 *   INPUT        : rrc_llim_ue_ctx_t *p_ue_ctx
 *   OUTPUT       : none
 *   DESCRIPTION  : This function starts the roll back procedure for ADD lc.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void start_uecc_trigered_roll_back_for_add_lc
(
 rrc_llim_ue_ctx_t *p_ue_ctx
 )
{
	rrc_uecc_llim_add_lc_req_t *p_add_lc_param = PNULL;

	rrc_mac_reconfigure_ue_entity_req_t
		mac_reconfigure_ue_entity_req;

	rrc_s1u_reconfigure_ue_entity_req_t
		s1u_reconfigure_ue_entity_req;

	rrc_pdcp_reconf_ue_entity_req_t 
		pdcp_reconf_ue_entity_req;

	rrc_rlc_reconfig_ue_entity_req_t
		rlc_reconfig_ue_entity_req;

	U8 drb_index = RRC_NULL;
	U16 drb_status = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_ue_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	memset_wrapper(&mac_reconfigure_ue_entity_req, 0, sizeof
			(mac_reconfigure_ue_entity_req));

	memset_wrapper(&s1u_reconfigure_ue_entity_req, 0, sizeof
			(s1u_reconfigure_ue_entity_req));

	memset_wrapper(&pdcp_reconf_ue_entity_req, 0, sizeof
			(pdcp_reconf_ue_entity_req));

	memset_wrapper(&rlc_reconfig_ue_entity_req, 0, sizeof
			(rlc_reconfig_ue_entity_req));

	p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure = 
		RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING;

	for(drb_index = RRC_NULL;
			drb_index < p_add_lc_param->create_drb_entity_counter;
			drb_index++)
	{
		drb_status =
			p_ue_ctx->curr_op_param.p_rcfg_ue->
			llim_drb_status[drb_index].drb_status;

		if ( drb_status == RRC_LLIM_DRB_PASSED_AT_S1U )
		{
			s1u_reconfigure_ue_entity_req.ue_index = p_ue_ctx->ue_index;

			/*Increamenting counter for deleting LC*/
			s1u_reconfigure_ue_entity_req.num_rel_sap_req++;

			RRC_ASSERT(s1u_reconfigure_ue_entity_req.num_rel_sap_req <=
					RRC_S1U_MAX_NUM_LC);

			s1u_reconfigure_ue_entity_req.rel_sap_req[drb_index].lc_id =
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].lc_id;
		}
		if ( (drb_status == RRC_LLIM_DRB_PASSED_AT_S1U)  || 
				(drb_status == RRC_LLIM_DRB_PASSED_AT_PDCP) || (drb_status == RRC_LLIM_DRB_FAILED_AT_S1U))
		{
			pdcp_reconf_ue_entity_req.ue_index = p_ue_ctx->ue_index;

			pdcp_reconf_ue_entity_req.del_drb_entities[
				pdcp_reconf_ue_entity_req.num_del_drb_entity].lc_id =
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].lc_id;
			pdcp_reconf_ue_entity_req.num_del_drb_entity++;

			RRC_ASSERT(pdcp_reconf_ue_entity_req.num_del_drb_entity <=
					RRC_PDCP_MAX_DRB);
		}
		if (( (drb_status == RRC_LLIM_DRB_PASSED_AT_S1U)  || 
					(drb_status == RRC_LLIM_DRB_PASSED_AT_PDCP) || (drb_status == RRC_LLIM_DRB_FAILED_AT_S1U) ||
					(drb_status == RRC_LLIM_DRB_PASSED_AT_RLC) || (drb_status == RRC_LLIM_DRB_FAILED_AT_PDCP))
				&& (pdcp_reconf_ue_entity_req.num_del_drb_entity < RRC_PDCP_MAX_DRB))
		{
			fill_rlc_reconfig_del_lc_req_for_uecc_trigerred_rollback(
					&rlc_reconfig_ue_entity_req,
					p_ue_ctx,
					drb_index);
		}
		if ( (drb_status == RRC_LLIM_DRB_PASSED_AT_S1U)  || 
				(drb_status == RRC_LLIM_DRB_PASSED_AT_PDCP) || (drb_status == RRC_LLIM_DRB_FAILED_AT_S1U) ||
				(drb_status == RRC_LLIM_DRB_PASSED_AT_RLC) || (drb_status == RRC_LLIM_DRB_FAILED_AT_PDCP) || 
				(drb_status == RRC_LLIM_DRB_PASSED_AT_MAC) || (drb_status == RRC_LLIM_DRB_FAILED_AT_RLC))
		{
			fill_mac_reconfig_del_lc_req_for_uecc_trigerred_rollback(
					&mac_reconfigure_ue_entity_req,
					p_ue_ctx,
					drb_index);
		}
	}
	if(RRC_NULL != mac_reconfigure_ue_entity_req.delete_lc_req_counter)
	{
		/*Applying older Configurations */
		if (p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.bitmask & 
				UECC_LLIM_ADD_ROLLBACK_REQ_OLD_MAC_CONFIG_PRESENT )
		{

			mac_reconfigure_ue_entity_req.optional_elems_present |=
				RRC_MAC_RECONFIG_UE_INFO_PRESENT;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present =
				0;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_DL_MAX_RB_INFO_PRESENT;
			mac_reconfigure_ue_entity_req.reconfig_ue_info.dl_max_rb_info.
				dl_max_rb =
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				mac_config.mac_main_config_extensions.dl_max_rb;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_NUM_OF_LAYER_INFO_PRESENT;
			mac_reconfigure_ue_entity_req.reconfig_ue_info.num_of_layer_info.
				num_of_layer =
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				mac_config.mac_main_config_extensions.num_of_layer;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_CODE_BOOK_INDEX_INFO_PRESENT;
			mac_reconfigure_ue_entity_req.reconfig_ue_info.code_book_index_info.
				code_book_index =
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				mac_config.mac_main_config_extensions.code_book_index;
			/*Transmission_mode_7_8 start*/
			if(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_OLD_MAC_CONFIG].
					mac_main_config_extensions.bitmask &
					RRM_MAC_MAIN_CONFIG_EXT_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT)
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_RECONFIG_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT;
				mac_reconfigure_ue_entity_req.reconfig_ue_info.pdsch_epre_to_ue_rs_ratio.
					pdsch_epre_to_ue_rs_ratio =
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_OLD_MAC_CONFIG].
					mac_main_config_extensions.pdsch_epre_to_ue_rs_ratio;
			}
			/*Transmission_mode_7_8 stop*/
		}

		if( RRC_SUCCESS != rrc_mac_il_send_rrc_mac_reconfigure_ue_entity_req(
					&mac_reconfigure_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_add_lc_param->cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					transaction_id,
					p_add_lc_param->cell_index))
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"[%s]Unable to send "
					"MAC reconfig UE entity req", __FUNCTION__);
		}


		RRC_ASSERT(UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF < 16); 

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			1 << UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF;
	}
	if( RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_um_rlc ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_rx_um_rlc  ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_rx_um_rlc ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_rx_am_rlc 
	  )
	{
		if(RRC_SUCCESS != rrc_rlc_il_send_rrc_rlc_reconfig_ue_entity_req(
					&rlc_reconfig_ue_entity_req, RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_add_lc_param->cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					transaction_id,
					p_add_lc_param->cell_index))
		{
			RRC_LLIM_TRACE(RRC_ERROR,
					"[%s]Unable to send rlc_reconfig_ue_entity_req",__FUNCTION__);
		}
		RRC_ASSERT(UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
			1 << UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF;

	}
	if(RRC_NULL != pdcp_reconf_ue_entity_req.num_del_drb_entity)
	{
		if(RRC_SUCCESS != rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
					&pdcp_reconf_ue_entity_req, RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_add_lc_param->cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					transaction_id,
					p_add_lc_param->cell_index))
		{
			RRC_LLIM_TRACE(RRC_ERROR, 
					"[%s]Failure to send pdcp_reconfe_ue_entity_req.", __FUNCTION__);
		}
		RRC_ASSERT(UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
			1 << UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF;

	}
	if(RRC_NULL != s1u_reconfigure_ue_entity_req.num_rel_sap_req)
	{
		rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
				&s1u_reconfigure_ue_entity_req, RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_add_lc_param->cell_index),
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				transaction_id,
				p_add_lc_param->cell_index);
		RRC_ASSERT(UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
			1 << UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF;
	}
	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_LLIM_LL_ADD_LC_IN_SYNC_ONGOING);    
	RRC_LLIM_UT_TRACE_EXIT();
}



/******************************************************************************
 *   FUNCTION NAME: fill_srb_mac_create_lc_req
 *   INPUT        : rrc_mac_create_lc_req_t     *p_mac_create_lc
 *                  rrc_lc_id_t                 lc_id
 *                  rrm_srb_config_t            *p_srb_config
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC TLV create_lc_req for SRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_srb_mac_create_lc_req
(
 rrc_mac_create_lc_req_t     *p_mac_create_lc,   /* destination */
 rrc_lc_id_t                 lc_id,
 rrm_srb_config_t            *p_srb_config       /* main source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_mac_create_lc);
	RRC_ASSERT(PNULL != p_srb_config);

	RRC_ASSERT(p_srb_config->bitmask &
			RRM_SRB_CONFIG_MAC_LC_CONFIG_ENB_PRESENT);
	RRC_ASSERT(p_srb_config->mac_lc_config_enb.bitmask &
			RRM_MAC_LC_CONFIG_UL_LC_G_ID_PRESENT);
	RRC_ASSERT(p_srb_config->mac_lc_config_enb.bitmask &
			RRM_MAC_LC_CONFIG_DL_PRIORITY_PRESENT);

	p_mac_create_lc->optional_elems_present |= RRC_MAC_UL_LC_CREATE_REQ_PRESENT|
		RRC_MAC_DL_LC_CREATE_REQ_PRESENT;
	p_mac_create_lc->lch_id                 = lc_id;
	p_mac_create_lc->rlc_mode               = MAC_RLC_MODE_AM;

	p_mac_create_lc->ul_lc_create_req.lc_g_id =
		p_srb_config->mac_lc_config_enb.ul_lc_g_id;
	p_mac_create_lc->dl_lc_create_req.lch_priority =
		p_srb_config->mac_lc_config_enb.dl_lch_priority;
	/* TS 36.322 - 10 bits for AMD and 5 or 10 bits for UMD */
	p_mac_create_lc->dl_lc_create_req.rlc_sn_field_length =
		get_rlc_sn_field_length_from_enum(RRC_SN_FIELD_LEN_10);

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: fill_qos_mac_create_lc_req
 *   INPUT        : rrc_mac_create_lc_req_t     *p_mac_create_lc
 *                  rrc_uecc_llim_create_drb_entity_t *p_drb_entity
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC TLV create_lc_req for QOS info.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_qos_mac_create_lc_req
(
 rrc_mac_create_lc_req_t     *p_mac_create_lc,   /* destination */
 rrc_uecc_llim_create_drb_entity_t *p_drb_entity /* main source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_mac_create_lc);
	RRC_ASSERT(PNULL != p_drb_entity);


	if (RRM_DRB_CONFIG_BEARER_TYPE_PRESENT & 
			p_drb_entity->uecc_llim_drb_config.drb_config.bitmask)
	{
		p_mac_create_lc->optional_elems_present |= RRC_MAC_QOS_INFO_PRESENT;
		p_mac_create_lc->qos_info.bearer_type  = 
			p_drb_entity->uecc_llim_drb_config.drb_config.bearer_type;
	}

	if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & 
			p_drb_entity->uecc_llim_drb_config.bitmask)
	{
		p_mac_create_lc->optional_elems_present |= RRC_MAC_QOS_INFO_PRESENT;
		p_mac_create_lc->qos_info.qci  = p_drb_entity->uecc_llim_drb_config.
			qos_info.qci;

		if ((RRC_GBR_QOS_INFO_PRESENT & p_drb_entity->uecc_llim_drb_config.
					qos_info.bitmask) &&
				(RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
				 p_drb_entity->uecc_llim_drb_config.drb_config.bitmask) &&
				(BEARER_TYPE_GBR == p_drb_entity->uecc_llim_drb_config.drb_config.
				 bearer_type))
		{
			p_mac_create_lc->qos_info.optional_elems_present |= 
				RRC_MAC_GBR_QOS_INFO_PRESENT;
			p_mac_create_lc->qos_info.gbr_qos_info.e_rab_mbr_dl = 
				p_drb_entity->uecc_llim_drb_config.qos_info.gbr_qos_info.dl_mbr;
			p_mac_create_lc->qos_info.gbr_qos_info.e_rab_mbr_ul = 
				p_drb_entity->uecc_llim_drb_config.qos_info.gbr_qos_info.ul_mbr;
			p_mac_create_lc->qos_info.gbr_qos_info.e_rab_gbr_dl = 
				p_drb_entity->uecc_llim_drb_config.qos_info.gbr_qos_info.dl_gbr;
			p_mac_create_lc->qos_info.gbr_qos_info.e_rab_gbr_ul = 
				p_drb_entity->uecc_llim_drb_config.qos_info.gbr_qos_info.ul_gbr;
		}
	}
}

/******************************************************************************
 *   FUNCTION NAME: fill_qos_info_mac_create_ue_entity
 *   INPUT        : rrc_mac_create_lc_req_t     *p_mac_create_lc
 *                  rrc_uecc_llim_drb_config_t  *p_uecc_llim_drb_info
 *   OUTPUT       : none
 *   DESCRIPTON   :  This function fills qos_info during create_ue_entity for HO case.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_qos_info_mac_create_ue_entity
(
 rrc_mac_create_lc_req_t     *p_mac_create_lc,   /* Destination*/
 rrc_uecc_llim_drb_config_t  *p_uecc_llim_drb_info /* main source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_mac_create_lc);
	RRC_ASSERT(PNULL != p_uecc_llim_drb_info);

	if (RRM_DRB_CONFIG_BEARER_TYPE_PRESENT & 
			p_uecc_llim_drb_info->drb_config.bitmask)
	{
		/* Filling the bitmask*/
		p_mac_create_lc->optional_elems_present |= RRC_MAC_QOS_INFO_PRESENT;
		p_mac_create_lc->qos_info.bearer_type = 
			p_uecc_llim_drb_info->drb_config.bearer_type;
	}
	if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & p_uecc_llim_drb_info->bitmask)
	{
		/* Filling the bitmask*/
		p_mac_create_lc->optional_elems_present |= RRC_MAC_QOS_INFO_PRESENT;
		p_mac_create_lc->qos_info.qci = p_uecc_llim_drb_info->qos_info.qci;

		if ((RRC_GBR_QOS_INFO_PRESENT & p_uecc_llim_drb_info->qos_info.bitmask) &&
				(RRM_DRB_CONFIG_BEARER_TYPE_PRESENT & 
				 p_uecc_llim_drb_info->drb_config.bitmask)&&
				(BEARER_TYPE_GBR == p_uecc_llim_drb_info->drb_config.bearer_type))
		{
			p_mac_create_lc->qos_info.optional_elems_present |= 
				RRC_MAC_GBR_QOS_INFO_PRESENT;
			p_mac_create_lc->qos_info.gbr_qos_info.
				e_rab_mbr_dl = p_uecc_llim_drb_info->qos_info.gbr_qos_info.dl_mbr;
			p_mac_create_lc->qos_info.gbr_qos_info.
				e_rab_mbr_ul = p_uecc_llim_drb_info->qos_info.gbr_qos_info.ul_mbr;
			p_mac_create_lc->qos_info.gbr_qos_info.
				e_rab_gbr_dl = p_uecc_llim_drb_info->qos_info.gbr_qos_info.dl_gbr;
			p_mac_create_lc->qos_info.gbr_qos_info.
				e_rab_gbr_ul = p_uecc_llim_drb_info->qos_info.gbr_qos_info.ul_gbr;
		}
	}
}

/******************************************************************************
 *   FUNCTION NAME: fill_drb_mac_create_lc_req
 *   INPUT        : rrc_mac_create_lc_req_t     *p_mac_create_lc
 *                  rrc_lc_id_t                 lc_id
 *                  rrm_drb_config_t            *p_drb_config
 *   OUTPUT       : none               
 *   DESCRIPTION  : This function fills MAC TLV create_lc_req for DRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_drb_mac_create_lc_req
(
 rrc_mac_create_lc_req_t     *p_mac_create_lc,   /* destination */
 rrc_lc_id_t                 lc_id,
 rrm_drb_config_t            *p_drb_config       /* main source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_mac_create_lc);
	RRC_ASSERT(PNULL != p_drb_config);

	RRC_ASSERT(p_drb_config->bitmask & RRM_DRB_CONFIG_RLC_CONFIG_PRESENT);
	RRC_ASSERT(p_drb_config->bitmask &
			RRM_DRB_CONFIG_MAC_LC_CONFIG_ENB_PRESENT);

	p_mac_create_lc->optional_elems_present = 0;
	p_mac_create_lc->lch_id                 = lc_id;
	if (RRC_RLC_CONFIG_AM_CONFIG_PRESENT == 
			p_drb_config->rlc_config_enb.rlc_config.bitmask)
	{
		RRC_ASSERT(p_drb_config->mac_lc_config_enb.bitmask &
				RRM_MAC_LC_CONFIG_UL_LC_G_ID_PRESENT);
		RRC_ASSERT(p_drb_config->mac_lc_config_enb.bitmask &
				RRM_MAC_LC_CONFIG_DL_PRIORITY_PRESENT);

		p_mac_create_lc->optional_elems_present |=
			RRC_MAC_UL_LC_CREATE_REQ_PRESENT |
			RRC_MAC_DL_LC_CREATE_REQ_PRESENT;
		p_mac_create_lc->rlc_mode = MAC_RLC_MODE_AM;

		p_mac_create_lc->ul_lc_create_req.lc_g_id =
			p_drb_config->mac_lc_config_enb.ul_lc_g_id;

		if (p_drb_config->pdcp_config.bitmask &
				RRC_PDCP_CONFIG_RLC_AM_STATUS_REPORT_REQ_PRESENT)
		{
			p_mac_create_lc->ul_lc_create_req.optional_elems_present |=
				RRC_MAC_UE_PSR_REQ_PRESENT;

			p_mac_create_lc->ul_lc_create_req.
				configure_status_report_required_ue.ue_psr_req_flag = 
				p_drb_config->pdcp_config.rlc_am_status_report_required;
		}

		p_mac_create_lc->dl_lc_create_req.lch_priority =
			p_drb_config->mac_lc_config_enb.dl_lch_priority;
		/* TS 36.322 - 10 bits for AMD and 5 or 10 bits for UMD */
		p_mac_create_lc->dl_lc_create_req.rlc_sn_field_length =
			get_rlc_sn_field_length_from_enum(RRC_SN_FIELD_LEN_10);

		if (p_drb_config->pdcp_config.bitmask &
				RRC_PDCP_CONFIG_RLC_AM_ENB_STATUS_REPORT_REQ_PRESENT)
		{
			p_mac_create_lc->dl_lc_create_req.optional_elems_present |=
				RRC_MAC_ENB_PSR_REQ_PRESENT;

			p_mac_create_lc->dl_lc_create_req.
				configure_status_report_required_enb.enb_psr_req_flag = 
				p_drb_config->pdcp_config.rlc_am_enb_status_report_required;
		}
		if( (BEARER_TYPE_GBR == p_drb_config->bearer_type) &&
				(p_drb_config->mac_lc_config_enb.bitmask & 
				 RRM_MAC_CA_LC_BANDWIDTH_DIST_INFO_PRESENT))
		{
			p_mac_create_lc->dl_lc_create_req.optional_elems_present |=
				RRC_MAC_DL_CREATE_CA_LC_BANDWIDTH_DIST_INFO_PRESENT;

			l3_memcpy_wrapper(&p_mac_create_lc->dl_lc_create_req.
					ca_lc_bandwidth_dist_info,&p_drb_config->
					mac_lc_config_enb.ca_lc_bandwidth_dist_info,
					sizeof(rrc_mac_ca_lc_bandwidth_dist_info_t));
		}
	}
	else if (RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT == p_drb_config->
			rlc_config_enb.rlc_config.bitmask)
	{
		RRC_ASSERT(p_drb_config->mac_lc_config_enb.bitmask &
				RRM_MAC_LC_CONFIG_UL_LC_G_ID_PRESENT);
		RRC_ASSERT(p_drb_config->mac_lc_config_enb.bitmask &
				RRM_MAC_LC_CONFIG_DL_PRIORITY_PRESENT);

		p_mac_create_lc->optional_elems_present |=
			RRC_MAC_UL_LC_CREATE_REQ_PRESENT |
			RRC_MAC_DL_LC_CREATE_REQ_PRESENT;
		p_mac_create_lc->rlc_mode = MAC_RLC_MODE_UM;

		p_mac_create_lc->ul_lc_create_req.lc_g_id =
			p_drb_config->mac_lc_config_enb.ul_lc_g_id;
		p_mac_create_lc->dl_lc_create_req.lch_priority =
			p_drb_config->mac_lc_config_enb.dl_lch_priority;
		p_mac_create_lc->dl_lc_create_req.rlc_sn_field_length =
			get_rlc_sn_field_length_from_enum(p_drb_config->rlc_config_enb.
					rlc_config.um_bi_directional_config.
					dl_um_rlc.sn_field_length);
		if( (BEARER_TYPE_GBR == p_drb_config->bearer_type) &&
				(p_drb_config->mac_lc_config_enb.bitmask & 
				 RRM_MAC_CA_LC_BANDWIDTH_DIST_INFO_PRESENT))
		{
			p_mac_create_lc->dl_lc_create_req.optional_elems_present |=
				RRC_MAC_DL_CREATE_CA_LC_BANDWIDTH_DIST_INFO_PRESENT;

			l3_memcpy_wrapper(&p_mac_create_lc->dl_lc_create_req.
					ca_lc_bandwidth_dist_info,&p_drb_config->
					mac_lc_config_enb.ca_lc_bandwidth_dist_info,
					sizeof(rrc_mac_ca_lc_bandwidth_dist_info_t));
		}
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT == p_drb_config
			->rlc_config_enb.rlc_config.bitmask)
	{
		RRC_ASSERT(p_drb_config->mac_lc_config_enb.bitmask &
				RRM_MAC_LC_CONFIG_UL_LC_G_ID_PRESENT);

		p_mac_create_lc->optional_elems_present |=
			RRC_MAC_UL_LC_CREATE_REQ_PRESENT;
		p_mac_create_lc->rlc_mode = MAC_RLC_MODE_UM;

		p_mac_create_lc->ul_lc_create_req.lc_g_id =
			p_drb_config->mac_lc_config_enb.ul_lc_g_id;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT == p_drb_config
			->rlc_config_enb.rlc_config.bitmask)
	{
		RRC_ASSERT(p_drb_config->mac_lc_config_enb.bitmask &
				RRM_MAC_LC_CONFIG_DL_PRIORITY_PRESENT);

		p_mac_create_lc->optional_elems_present |=
			RRC_MAC_DL_LC_CREATE_REQ_PRESENT;
		p_mac_create_lc->rlc_mode = MAC_RLC_MODE_UM;

		p_mac_create_lc->dl_lc_create_req.lch_priority =
			p_drb_config->mac_lc_config_enb.dl_lch_priority;
		p_mac_create_lc->dl_lc_create_req.rlc_sn_field_length =
			get_rlc_sn_field_length_from_enum(p_drb_config->rlc_config_enb.
					rlc_config.um_bi_directional_config.
					dl_um_rlc.sn_field_length);
		if( (BEARER_TYPE_GBR == p_drb_config->bearer_type) &&
				(p_drb_config->mac_lc_config_enb.bitmask & 
				 RRM_MAC_CA_LC_BANDWIDTH_DIST_INFO_PRESENT))
		{
			p_mac_create_lc->dl_lc_create_req.optional_elems_present |=
				RRC_MAC_DL_CREATE_CA_LC_BANDWIDTH_DIST_INFO_PRESENT;

			l3_memcpy_wrapper(&p_mac_create_lc->dl_lc_create_req.
					ca_lc_bandwidth_dist_info,&p_drb_config->
					mac_lc_config_enb.ca_lc_bandwidth_dist_info,
					sizeof(rrc_mac_ca_lc_bandwidth_dist_info_t));
		}
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_gbr_qos_mac_reconfig_lc_req
 *   INPUT        : rrc_mac_reconfigure_lc_req_t     *p_mac_reconfigure_lc
 *                  rrc_uecc_llim_drb_config_t    *p_drb_config
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC TLV reconfigure_lc_req for gbr_qos_info.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_gbr_qos_mac_reconfig_lc_req
(
 rrc_mac_reconfigure_lc_req_t     *p_mac_reconfigure_lc,   /* destination */
 rrc_uecc_llim_drb_config_t    *p_drb_config       /* main source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_mac_reconfigure_lc);
	RRC_ASSERT(PNULL != p_drb_config);

	if ((UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & p_drb_config->bitmask) &&
			(RRC_GBR_QOS_INFO_PRESENT & p_drb_config->qos_info.bitmask))
	{
		p_mac_reconfigure_lc->optional_elems_present |= 
			RRC_MAC_GBR_QOS_INFO_PRESENT;

		p_mac_reconfigure_lc->gbr_qos_info.e_rab_mbr_dl = 
			p_drb_config->qos_info.gbr_qos_info.dl_mbr;

		p_mac_reconfigure_lc->gbr_qos_info.e_rab_mbr_ul = 
			p_drb_config->qos_info.gbr_qos_info.ul_mbr;

		p_mac_reconfigure_lc->gbr_qos_info.e_rab_gbr_dl = 
			p_drb_config->qos_info.gbr_qos_info.dl_gbr;

		p_mac_reconfigure_lc->gbr_qos_info.e_rab_gbr_ul = 
			p_drb_config->qos_info.gbr_qos_info.ul_gbr;
	}
}
/******************************************************************************
 *   FUNCTION NAME: fill_drb_mac_reconfig_lc_req
 *   INPUT        : rrc_mac_reconfigure_lc_req_t     *p_mac_reconfigure_lc
 *                  rrm_drb_config_t            *p_drb_config
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC TLV reconfigure_lc_req for DRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_drb_mac_reconfig_lc_req
(
 rrc_mac_reconfigure_lc_req_t     *p_mac_reconfigure_lc,   /* destination */
 rrm_drb_config_t            *p_drb_config       /* main source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_mac_reconfigure_lc);
	RRC_ASSERT(PNULL != p_drb_config);


	p_mac_reconfigure_lc->optional_elems_present = 0;

	p_mac_reconfigure_lc->lch_id                 =
		p_drb_config->logical_channel_identity;
	if ((RRC_RLC_CONFIG_AM_CONFIG_PRESENT == 
				p_drb_config->rlc_config_enb.rlc_config.bitmask) ||
			(RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT ==
			 p_drb_config->rlc_config_enb.rlc_config.bitmask))
	{
		if (p_drb_config->mac_lc_config_enb.bitmask &
				RRM_MAC_LC_CONFIG_UL_LC_G_ID_PRESENT )
		{
			p_mac_reconfigure_lc->optional_elems_present |=
				RRC_MAC_UL_LC_RECONFIG_REQ_PRESENT ;
	    /* SPR 15774 FIX START */
	    /* SPR 15774 FIX STOP */
		}
		if(p_drb_config->mac_lc_config_enb.bitmask & 
				RRM_MAC_LC_CONFIG_DL_PRIORITY_PRESENT)
		{
			p_mac_reconfigure_lc->optional_elems_present |=
				RRC_MAC_DL_LC_RECONFIG_REQ_PRESENT;
		}
		if( (BEARER_TYPE_GBR == p_drb_config->bearer_type) &&
				(p_drb_config->mac_lc_config_enb.bitmask & 
				 RRM_MAC_CA_LC_BANDWIDTH_DIST_INFO_PRESENT))
		{
			p_mac_reconfigure_lc->optional_elems_present |=
				RRC_MAC_DL_LC_RECONFIG_REQ_PRESENT;
			p_mac_reconfigure_lc->dl_lc_reconfig_req.optional_elems_present |=
				RRC_MAC_DL_RECONFIG_CA_LC_BANDWIDTH_DIST_INFO_PRESENT;

			l3_memcpy_wrapper(&p_mac_reconfigure_lc->dl_lc_reconfig_req.
					ca_lc_bandwidth_dist_info,&p_drb_config->
					mac_lc_config_enb.ca_lc_bandwidth_dist_info,
					sizeof(rrc_mac_ca_lc_bandwidth_dist_info_t));
		}
		/*sn_feild_length cannot be reconfigured as per Spec 36.331*/
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT == 
			p_drb_config->rlc_config_enb.rlc_config.bitmask)
	{
		if (RRC_NULL != (p_drb_config->mac_lc_config_enb.bitmask &
					RRM_MAC_LC_CONFIG_UL_LC_G_ID_PRESENT))
		{

			p_mac_reconfigure_lc->optional_elems_present |=
				RRC_MAC_UL_LC_RECONFIG_REQ_PRESENT;

            /* SPR 15774 FIX START */
            /* SPR 15774 FIX STOP */
		}
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT == 
			p_drb_config->rlc_config_enb.rlc_config.bitmask)
	{
		if (RRC_NULL != (p_drb_config->mac_lc_config_enb.bitmask &
					RRM_MAC_LC_CONFIG_DL_PRIORITY_PRESENT))
		{
			p_mac_reconfigure_lc->optional_elems_present |=
				RRC_MAC_DL_LC_RECONFIG_REQ_PRESENT;

		}
		if( (BEARER_TYPE_GBR == p_drb_config->bearer_type) &&
				(p_drb_config->mac_lc_config_enb.bitmask & 
				 RRM_MAC_CA_LC_BANDWIDTH_DIST_INFO_PRESENT))
		{
			p_mac_reconfigure_lc->optional_elems_present |=
				RRC_MAC_DL_LC_RECONFIG_REQ_PRESENT;
			p_mac_reconfigure_lc->dl_lc_reconfig_req.optional_elems_present |=
				RRC_MAC_DL_RECONFIG_CA_LC_BANDWIDTH_DIST_INFO_PRESENT;

			l3_memcpy_wrapper(&p_mac_reconfigure_lc->dl_lc_reconfig_req.
					ca_lc_bandwidth_dist_info,&p_drb_config->
					mac_lc_config_enb.ca_lc_bandwidth_dist_info,
					sizeof(rrc_mac_ca_lc_bandwidth_dist_info_t));
		}
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_drb_mac_delete_lc_req
 *   INPUT        : rrc_mac_delete_lc_req_t *p_mac_delete_lc
 *                  rrc_lc_id_t             lc_id
 *                  rrc_rlc_lc_mode_et        *p_rlc_mode
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC TLV delete_lc_req for DRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_drb_mac_delete_lc_req
(
 rrc_mac_delete_lc_req_t *p_mac_delete_lc,   /* destination */
 rrc_lc_id_t             lc_id,
 rrc_rlc_lc_mode_et        *p_rlc_mode       /* main source */
 )
{
	rrc_mac_delete_lc_types_et mac_delete_lc_types = MAC_DELETE_LC_BOTH;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_mac_delete_lc);
	RRC_ASSERT(PNULL != p_rlc_mode);

	p_mac_delete_lc->lch_id = lc_id;

	if (*p_rlc_mode == RLC_CONFIG_UM_UL_UNI_DIR_MODE)
	{
		mac_delete_lc_types = MAC_DELETE_LC_UPLINK;
	}
	else if (*p_rlc_mode == 
			RLC_CONFIG_UM_DL_UNI_DIR_MODE)
	{
		mac_delete_lc_types = MAC_DELETE_LC_DOWNLINK;
	}
	else 
	{
		mac_delete_lc_types = MAC_DELETE_LC_BOTH;
	}

	p_mac_delete_lc->lc_type = mac_delete_lc_types;

	RRC_LLIM_UT_TRACE_EXIT();
}
/* ERB RELEASE COMMAND START */
/******************************************************************************
 *   FUNCTION NAME: rrc_mac_build_and_send_delete_lc_req
 *   INPUT        : rrc_mac_reconfigure_ue_entity_req_t*  p_mac_reconfigure_ue_entity_req,
 *                  rrc_uecc_llim_delete_lc_req_t*        p_delete_lc_param
 *   OUTPUT       : none
 *   DESCRIPTION  : This function build and send delete lc req for MAC.
 *
 *   RETURNS:
 *       RRC_SUCCESS/RRC_FAILURE
 *
 ******************************************************************************/
static rrc_return_et rrc_mac_build_and_send_delete_lc_req
(
 rrc_mac_reconfigure_ue_entity_req_t*  p_mac_reconfigure_ue_entity_req,
 rrc_uecc_llim_delete_lc_req_t*        p_delete_lc_param
 )
{
	rrc_counter_t    drb_index = RRC_NULL;
	rrc_return_et    response = RRC_FAILURE;

	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_req);
	RRC_ASSERT(PNULL != p_delete_lc_param);

	memset_wrapper(p_mac_reconfigure_ue_entity_req, 0, sizeof
			(rrc_mac_reconfigure_ue_entity_req_t));

	p_mac_reconfigure_ue_entity_req->optional_elems_present = 0;
	p_mac_reconfigure_ue_entity_req->ue_index = p_delete_lc_param->ue_index;

	/* SPS Start */
	if (p_delete_lc_param->bitmask &
			UECC_LLIM_DELETE_LC_REQ_SPS_CONFIG_PRESENT)
	{
		p_mac_reconfigure_ue_entity_req->optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_SPS_CONFIG_PRESENT;

		if (p_delete_lc_param->sps_config.bitmask &
				RRC_SPS_CONFIG_SPS_CONFIG_DL_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.bitmask |=
				RRC_MAC_SPS_DL_INFO_PRESENT;

			if (p_delete_lc_param->sps_config.sps_config_dl.bitmask &
					RRC_SPS_CONFIG_DL_PARAM_PRESENT)
			{

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.bitmask |=
					RRC_MAC_SPS_DL_SETUP_INFO_PRESENT;
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.request_type =
					1; /* 1 - Setup */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
					semi_persist_sched_interval_dl = p_delete_lc_param->sps_config.sps_config_dl.
					sps_config_dl_param.semi_persist_sched_interval_dl;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
					number_of_conf_sps_processes = p_delete_lc_param->sps_config.sps_config_dl.
					sps_config_dl_param.number_of_conf_sps_processes;
				for (drb_index = 0; drb_index < p_delete_lc_param->sps_config.sps_config_dl.
						sps_config_dl_param.n1_pucch_an_persist_list.count;
						drb_index++)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
						n1_pucch_an_persist[drb_index].n1_pucch_an_persist =
						p_delete_lc_param->sps_config.sps_config_dl.sps_config_dl_param.
						n1_pucch_an_persist_list.n1_pucch_an_persist[drb_index];

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
						n1_pucch_an_persist_list_counter++;


				}

			}
			else
			{    /* Release */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.request_type =
					0; /* 0 - Release */
			}
		}

		if (p_delete_lc_param->sps_config.bitmask &
				RRC_SPS_CONFIG_SPS_CONFIG_UL_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.bitmask |=
				RRC_MAC_SPS_UL_INFO_PRESENT;

			if (p_delete_lc_param->sps_config.sps_config_ul.bitmask &
					RRC_SPS_CONFIG_UL_PARAM_PRESENT)
			{    /* Setup */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.bitmask |=
					RRC_MAC_SPS_UL_SETUP_INFO_PRESENT;
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.request_type =
					1; /* 1 - Setup */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
					semi_persist_sched_interval_ul = p_delete_lc_param->sps_config.sps_config_ul.
					sps_config_ul_param.semi_persist_sched_interval_ul;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
					implicit_release_after = p_delete_lc_param->sps_config.sps_config_ul.
					sps_config_ul_param.implicit_release_after;

				if (p_delete_lc_param->sps_config.sps_config_ul.sps_config_ul_param.bitmask &
						RRC_SPS_CONFIG_UL_P_0_PERSISTENT_PRESENT)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						bitmask |=
						RRC_MAC_P_ZERO_PERSISTENT_PRESENT;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						p_zero_persistent.p_zero_nominal_pusch_persistent = p_delete_lc_param->sps_config.
						sps_config_ul.sps_config_ul_param.p_zero_persistent.p_zero_nominal_pusch_persistent;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						p_zero_persistent.p_zero_ue_pusch_persistent = p_delete_lc_param->sps_config.
						sps_config_ul.sps_config_ul_param.p_zero_persistent.p_zero_ue_pusch_persistent;
				}
				if (p_delete_lc_param->sps_config.sps_config_ul.sps_config_ul_param.bitmask &
						RRC_SPS_CONFIG_UL_TWO_INTERVALS_CONFIG_PRESENT)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						bitmask |= RRC_MAC_TWO_INTERVALS_CONFIG_PRESENT;
					/* SPR:5994 start */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						two_intervals_config.two_intervals_config = 1;
					/* SPR:5994 stop */
				}


			}
			else
			{    /* Release */
				/* SPR 20747 Fix Start */  
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.request_type =
					0; /* 0 - Release */
				/* SPR 20747 Fix End */  
			}
		}


	}

	/* SPS Stop */

	for (drb_index = 0;
			drb_index < p_delete_lc_param->delete_drb_entity_counter;
			++drb_index)
	{
		/* fill lc id and mac lc types for each LC to be delete at MAC */ 
		fill_drb_mac_delete_lc_req(&p_mac_reconfigure_ue_entity_req->
				delete_lc_req
				[p_mac_reconfigure_ue_entity_req->delete_lc_req_counter],
				p_delete_lc_param->delete_drb_entity[drb_index].lc_id,
				&p_delete_lc_param->delete_drb_entity[drb_index].rlc_mode);

		++p_mac_reconfigure_ue_entity_req->delete_lc_req_counter;
	}
	RRC_ASSERT(p_mac_reconfigure_ue_entity_req->delete_lc_req_counter <=
			RRC_MAC_MAX_DELETE_LC);

	response = rrc_mac_il_send_rrc_mac_reconfigure_ue_entity_req(
			p_mac_reconfigure_ue_entity_req, RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_delete_lc_param->cell_index),
			p_delete_lc_param->transaction_id,
			p_delete_lc_param->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
	return response;
}

/******************************************************************************
 *   FUNCTION NAME : rrc_s1u_build_and_send_delete_lc_req
 *   INPUT         : rrc_s1u_reconfigure_ue_entity_req_t*  p_s1u_reconfigure_ue_entity_req,
 *                   rrc_uecc_llim_delete_lc_req_t*        p_delete_lc_param
 *   OUTPUT        : none
 *   DESCRIPTION   :
 *       This function build and send delete_lc_req for s1u.
 *
 *   RETURNS       : 
 *       RRC_SUCCESS/RRC_FAILURE
 *
 ******************************************************************************/
static  rrc_return_et rrc_s1u_build_and_send_delete_lc_req
(
 rrc_s1u_reconfigure_ue_entity_req_t*  p_s1u_reconfigure_ue_entity_req,
 rrc_uecc_llim_delete_lc_req_t*        p_delete_lc_param
 )
{
	rrc_counter_t    drb_index = RRC_NULL;
	rrc_return_et    response = RRC_FAILURE;

	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_s1u_reconfigure_ue_entity_req);
	RRC_ASSERT(PNULL != p_delete_lc_param);

	memset_wrapper(p_s1u_reconfigure_ue_entity_req, 0, sizeof
			(rrc_s1u_reconfigure_ue_entity_req_t));

	p_s1u_reconfigure_ue_entity_req->ue_index = p_delete_lc_param->ue_index;

	for (drb_index = 0;
			drb_index < p_delete_lc_param->delete_drb_entity_counter;
			++drb_index)
	{
		/* fill lc id for each LC to be delete at S1U */
		p_s1u_reconfigure_ue_entity_req->rel_sap_req
			[p_s1u_reconfigure_ue_entity_req->num_rel_sap_req].lc_id = 
			p_delete_lc_param->delete_drb_entity[drb_index].lc_id;

		++p_s1u_reconfigure_ue_entity_req->num_rel_sap_req;
	}
	RRC_ASSERT(p_s1u_reconfigure_ue_entity_req->num_rel_sap_req <=
			RRC_S1U_MAX_NUM_LC);

	response = rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
			p_s1u_reconfigure_ue_entity_req, RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_delete_lc_param->cell_index),/* cell index changes, p_ue_ctx not declared */
			p_delete_lc_param->transaction_id,
			p_delete_lc_param->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
	return response;
}

/******************************************************************************
 *   FUNCTION NAME : rrc_pdcp_build_and_send_delete_lc_req
 *   INPUT         : rrc_pdcp_reconf_ue_entity_req_t*    p_pdcp_reconf_ue_entity_req,
 *                   rrc_uecc_llim_delete_lc_req_t*      p_delete_lc_param
 *   OUTPUT        : none
 *   DESCRIPTION   :
 *       This function build and send delete_lc_req for pdcp.
 *
 *   RETURNS       : 
 *       RRC_SUCCESS/RRC_FAILURE
 *
 ******************************************************************************/
static rrc_return_et rrc_pdcp_build_and_send_delete_lc_req
(
 rrc_pdcp_reconf_ue_entity_req_t*    p_pdcp_reconf_ue_entity_req,
 rrc_uecc_llim_delete_lc_req_t*      p_delete_lc_param
 )
{
    
	rrc_counter_t    drb_index = RRC_NULL;
	rrc_return_et    response = RRC_FAILURE;

	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_pdcp_reconf_ue_entity_req);
	RRC_ASSERT(PNULL != p_delete_lc_param);
	memset_wrapper(p_pdcp_reconf_ue_entity_req, 0, sizeof
			(rrc_pdcp_reconf_ue_entity_req_t));

	p_pdcp_reconf_ue_entity_req->ue_index = p_delete_lc_param->ue_index;
	for (drb_index = 0;
			drb_index < p_delete_lc_param->delete_drb_entity_counter;
			++drb_index)
	{
#ifdef ENDC_ENABLED
        /*OPTION3X Changes Start*/

        /*checkif the bearer is SN_TERMINATED_SPLIT_BEARER, 
         * if yes, PDCP is already deleted hence no need to send PDCP delete req*/
        if((UECC_LLIM_DELETE_DRB_ENTITY_DC_BEARER_TYPE_PRESENT &
                    p_delete_lc_param->delete_drb_entity[drb_index].bitmask) &&
                (SN_TERMINATED_SPLIT_BEARER == 
                 p_delete_lc_param->delete_drb_entity[drb_index].dc_bearer_type))
        {
            RRC_LLIM_TRACE(RRC_ERROR, 
                    "LCID[%d] is SN_TERMINATED_SCG_BEARER "
                    "Dont send PDCP DELETE REQ",
                    p_delete_lc_param->delete_drb_entity[drb_index].lc_id);

            continue;
        }

        /*OPTION3X Changes End*/
#endif
		/* fill lc id for each LC to be delete at PDCP.*/
		p_pdcp_reconf_ue_entity_req->del_drb_entities
			[p_pdcp_reconf_ue_entity_req->num_del_drb_entity].lc_id = 
			p_delete_lc_param->delete_drb_entity[drb_index].lc_id;

		++p_pdcp_reconf_ue_entity_req->num_del_drb_entity;
	}

#ifdef ENDC_ENABLED
    /*OPTION3X Changes Start*/
    if(p_pdcp_reconf_ue_entity_req->num_del_drb_entity)
    /*OPTION3X Changes End*/
#endif
    {
        /* SPR 20747 Fix Start */
        /* SPS Start */
        if (p_delete_lc_param->bitmask &
                UECC_LLIM_DELETE_LC_REQ_SPS_CONFIG_PRESENT)
        {

            p_pdcp_reconf_ue_entity_req->optional_elems_present |=
                RRC_PDCP_RECONFIG_UE_SPS_CONFIG_PRESENT;

            if (p_delete_lc_param->sps_config.bitmask &
                    RRC_SPS_CONFIG_SPS_CONFIG_DL_PRESENT)
            {
                p_pdcp_reconf_ue_entity_req->sps_config.optional_elems_present |=
                    RRC_PDCP_SPS_DL_INFO_PRESENT;

                if (p_delete_lc_param->sps_config.sps_config_dl.bitmask &
                        RRC_SPS_CONFIG_DL_PARAM_PRESENT)
                {

                    p_pdcp_reconf_ue_entity_req->sps_config.sps_dl_info.optional_elems_present |=
                        RRC_PDCP_SPS_DL_SETUP_INFO_PRESENT;
                    p_pdcp_reconf_ue_entity_req->sps_config.sps_dl_info.request_type =
                        1; /* 1 - Setup */

                    p_pdcp_reconf_ue_entity_req->sps_config.sps_dl_info.sps_dl_setup_info.
                        semi_persistent_sched_interval_dl = p_delete_lc_param->sps_config.sps_config_dl.
                        sps_config_dl_param.semi_persist_sched_interval_dl;


                }
                else
                {    /* Release */

                    p_pdcp_reconf_ue_entity_req->sps_config.sps_dl_info.request_type =
                        0; /* 0 - Release */
                }
            }

            if (p_delete_lc_param->sps_config.bitmask &
                    RRC_SPS_CONFIG_SPS_CONFIG_UL_PRESENT)
            {
                p_pdcp_reconf_ue_entity_req->sps_config.optional_elems_present |=
                    RRC_PDCP_SPS_UL_INFO_PRESENT;

                if (p_delete_lc_param->sps_config.sps_config_ul.bitmask &
                        RRC_SPS_CONFIG_UL_PARAM_PRESENT)
                {    /* Setup */
                    p_pdcp_reconf_ue_entity_req->sps_config.sps_ul_info.optional_elems_present |=
                        RRC_PDCP_SPS_UL_SETUP_INFO_PRESENT;
                    p_pdcp_reconf_ue_entity_req->sps_config.sps_ul_info.request_type =
                        1; /* 1 - Setup */

                    p_pdcp_reconf_ue_entity_req->sps_config.sps_ul_info.sps_ul_setup_info.
                        semi_persistent_sched_interval_ul = p_delete_lc_param->sps_config.sps_config_ul.
                        sps_config_ul_param.semi_persist_sched_interval_ul;

                }
                else
                {    /* Release */
                    p_pdcp_reconf_ue_entity_req->sps_config.sps_ul_info.request_type =
                        0; /* 0 - Release */
                }
            }


        }
        /*SPR_19066_START*/
        if(p_delete_lc_param->bitmask & UECC_LLIM_DELETE_LC_REQ_UE_INACTIVITY_TIMER_PRESENT)

        {
            p_pdcp_reconf_ue_entity_req->optional_elems_present |= 
                RRC_PDCP_RECONFIG_UE_INACTIVITY_TIMER_CONFIG_PRESENT;

            p_pdcp_reconf_ue_entity_req->ue_inactivity_timer.ue_inactive_time_config = 
                p_delete_lc_param->ue_inactivity_timer.ue_inactive_time_config;

        }
        /*SPR_19066_END*/

        /* SPS Stop */
        /* SPR 20747 Fix End */

        RRC_ASSERT(p_pdcp_reconf_ue_entity_req->num_del_drb_entity <=
                RRC_PDCP_MAX_DRB);

        response = rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
                p_pdcp_reconf_ue_entity_req, RRC_LLIM_MODULE_ID,
                RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_delete_lc_param->cell_index),
                p_delete_lc_param->transaction_id,
                p_delete_lc_param->cell_index);
    }
#ifdef ENDC_ENABLED
    /*OPTION3X Changes Start*/
    else
    {
        response = RRC_SUCCESS;
    }
    /*OPTION3X Changes End*/
#endif
	RRC_LLIM_UT_TRACE_EXIT();
	return response;
}

/******************************************************************************
 *   FUNCTION NAME : rrc_rlc_build_and_send_delete_lc_req
 *   INPUT         : rrc_rlc_reconfig_ue_entity_req_t*     p_rlc_reconfig_ue_entity_req,
 *                   rrc_uecc_llim_delete_lc_req_t*        p_delete_lc_param
 *   OUTPUT        : none
 *   DESCRIPTION   :
 *       This function build and send delete_lc_req for rlc.
 *
 *   RETURNS       : 
 *       RRC_SUCCESS/RRC_FAILURE
 *
 ******************************************************************************/
static rrc_return_et rrc_rlc_build_and_send_delete_lc_req
(
 rrc_rlc_reconfig_ue_entity_req_t*     p_rlc_reconfig_ue_entity_req,
 rrc_uecc_llim_delete_lc_req_t*        p_delete_lc_param
 )
{
	rrc_counter_t    drb_index = RRC_NULL;
	rrc_return_et    response = RRC_FAILURE;

	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_rlc_reconfig_ue_entity_req);
	RRC_ASSERT(PNULL != p_delete_lc_param);

	memset_wrapper(p_rlc_reconfig_ue_entity_req, 0, sizeof
			(rrc_rlc_reconfig_ue_entity_req_t));

	p_rlc_reconfig_ue_entity_req->ue_index = p_delete_lc_param->ue_index;

	for (drb_index = 0;
			drb_index < p_delete_lc_param->delete_drb_entity_counter;
			++drb_index)
	{
		/*fill lc id and mode for each LC to be delete at RLC.*/
		fill_delete_part_drb_rlc_reconfig_ue_entity_req(
				p_rlc_reconfig_ue_entity_req,
				p_delete_lc_param->delete_drb_entity[drb_index].lc_id,
				&p_delete_lc_param->delete_drb_entity[drb_index].rlc_mode);
	}

	RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_delete_tx_um_rlc <=
			RRC_RLC_MAX_NUM_LC);
	RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_delete_rx_um_rlc <=
			RRC_RLC_MAX_NUM_LC);
	RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_um_rlc <=
			RRC_RLC_MAX_NUM_LC);
	RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_am_rlc <=
			RRC_RLC_MAX_NUM_LC);

	response = rrc_rlc_il_send_rrc_rlc_reconfig_ue_entity_req(
			p_rlc_reconfig_ue_entity_req, RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_delete_lc_param->cell_index),
			p_delete_lc_param->transaction_id,
			p_delete_lc_param->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
	return response;
}
/* ERB RELEASE COMMAND END */

/******************************************************************************
 *   FUNCTION NAME: fill_create_part_srb_rlc_reconfig_ue_entity_req
 *   INPUT        : rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 *                  rrc_lc_id_t                             lc_id
 *                  rrm_srb_am_config_t                     *p_srb_am_config
 *   OUTPUT       : none
 *
 *   DESCRIPTION  : This function continues filling create part of
 *       RLC message RLC_RECONFIG_UE_ENTITY_REQ
 *           based on p_srb_am_config of new SRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_create_part_srb_rlc_reconfig_ue_entity_req
(
 /* destination */
 rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 rrc_lc_id_t                             lc_id,
 /* main source */
 rrm_srb_am_config_t                     *p_srb_am_config
 )
{
	rrc_counter_t lc = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_rlc_reconfig_ue_entity_req);
	RRC_ASSERT(PNULL != p_srb_am_config);

	/* RRM_SRB_AM_CONFIG_EXPLISIT_PRESENT should be present */
	RRC_ASSERT(p_srb_am_config->bitmask & RRM_SRB_AM_CONFIG_EXPLICIT_PRESENT);

	lc = p_rlc_reconfig_ue_entity_req->num_create_tx_rx_am_rlc;

	p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].lc_id = lc_id;

	p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].t_poll_retransmission
		=
		get_rlc_poll_retransmission_from_enum(p_srb_am_config->
				am_config_explicit.ul_am_rlc.t_poll_retransmit);
	p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].poll_pdu =
		get_rlc_poll_pdu_from_enum(p_srb_am_config->am_config_explicit.ul_am_rlc
				.poll_pdu);
	p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].poll_byte =
		get_rlc_poll_byte_from_enum(p_srb_am_config->am_config_explicit.
				ul_am_rlc.poll_byte);
	p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].max_re_tx_thrsh_ld =
		get_rlc_max_retx_threshold_from_enum(p_srb_am_config->am_config_explicit
				.ul_am_rlc.max_retx_threshold);

	p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].t_reordering =
		get_rlc_t_reordering_from_enum(p_srb_am_config->am_config_explicit.
				dl_am_rlc.t_reordering);
	p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].t_status_prohibit =
		get_rlc_t_status_prohibit_from_enum(p_srb_am_config->am_config_explicit.
				dl_am_rlc.t_status_prohibit);

	++p_rlc_reconfig_ue_entity_req->num_create_tx_rx_am_rlc;

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: fill_qos_info_rlc_reconfig_ue_entity_req_modify_lc_req
 *   INPUT        : rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 *                  rrc_counter_t                           drb_index
 *                  rrc_uecc_llim_modify_lc_req_t           *p_modify_lc_param,
 *                  U8        modify_drb_index
 *   OUTPUT       : none
 *   DESCRIPTION  : This function continues filling qos_info of
 *       RLC message RLC_RECONFIG_UE_ENTITY_REQ
 *           based on p_rlc_config of new DRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_qos_info_rlc_reconfig_ue_entity_req_modify_lc_req
(
 /* destination */
 rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 rrc_counter_t                           drb_index, 
 /* main source */
 rrc_uecc_llim_modify_lc_req_t           *p_modify_lc_param,
 U8        modify_drb_index
 )
{
	rrc_counter_t                   lc_idx = RRC_NULL;
	rrc_rlc_config_t                *p_rlc_config = RRC_NULL;
	rrc_uecc_llim_drb_config_t      *p_uecc_llim_drb_config = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_rlc_reconfig_ue_entity_req);
	RRC_ASSERT(PNULL != p_modify_lc_param);

	p_rlc_config = 
		&(p_modify_lc_param->modify_drb_entity[modify_drb_index].
				uecc_llim_drb_config[drb_index].drb_config.rlc_config_enb.rlc_config);
	p_uecc_llim_drb_config = 
		&(p_modify_lc_param->modify_drb_entity[modify_drb_index].
				uecc_llim_drb_config[drb_index]);

	if (RRC_RLC_CONFIG_AM_CONFIG_PRESENT == p_rlc_config->bitmask)
	{
		lc_idx = (rrc_counter_t)((p_rlc_reconfig_ue_entity_req->num_reconfig_tx_rx_am_rlc) - 1);

		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & p_uecc_llim_drb_config->bitmask)
		{
			/* Fill the Qci info */
			p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc_idx].rrc_rlc_qci_info.
				qci = p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the TX and RX values based on bearer type GBR and 
			 * ignoring the TX and RX values in case of Non GBR */
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT & 
						p_uecc_llim_drb_config->drb_config.bitmask) && 
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/
				p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_TX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc_idx].
					rrc_rlc_tx_bit_rate_info.bit_rate_tx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.ul_mbr;

				p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_RX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc_idx].
					rrc_rlc_rx_bit_rate_info.bit_rate_rx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.dl_mbr;
			}
		}
		/* Fill the QciLength info */
		if ( (p_uecc_llim_drb_config->drb_config.bitmask & 
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT) &&
				(p_uecc_llim_drb_config->drb_config.
				 rlc_config_enb.bitmask & 
				 RRC_RLC_CONFIG_QCI_LENGTH_PRESENT) )
		{
			p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QUEUE_SIZE_INFO_PRESENT;

			p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc_idx].
				rrc_rlc_queue_size_info.rlc_queue_size = 
				p_uecc_llim_drb_config->drb_config.rlc_config_enb.qci_length;
		}
	} 
	else if (RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT ==
			p_rlc_config->bitmask)
	{
		lc_idx = (rrc_counter_t)(p_rlc_reconfig_ue_entity_req->num_reconfig_tx_rx_um_rlc - 1);
		/* Fill the Qci info */
		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & p_uecc_llim_drb_config->bitmask)
		{
			p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_um_rlc[lc_idx].rrc_rlc_qci_info.
				qci = p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the TX and RX values based on bearer type GBR and 
			 * ignoring the TX and RX values in case of Non GBR*/
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
						p_uecc_llim_drb_config->drb_config.bitmask) &&
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/
				p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_TX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_um_rlc[lc_idx].
					rrc_rlc_tx_bit_rate_info.bit_rate_tx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.ul_mbr;

				p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_RX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_um_rlc[lc_idx].
					rrc_rlc_rx_bit_rate_info.bit_rate_rx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.dl_mbr;
			}
		} 
		/* Fill the QciLength info */
		if ( (p_uecc_llim_drb_config->drb_config.bitmask & 
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT) &&
				(p_uecc_llim_drb_config->drb_config.
				 rlc_config_enb.bitmask & 
				 RRC_RLC_CONFIG_QCI_LENGTH_PRESENT) )
		{
			p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QUEUE_SIZE_INFO_PRESENT;

			p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_um_rlc[lc_idx].
				rrc_rlc_queue_size_info.rlc_queue_size = p_uecc_llim_drb_config->
				drb_config.rlc_config_enb.qci_length;
		}

	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT == p_rlc_config
			->bitmask)
	{
		lc_idx = (rrc_counter_t)(p_rlc_reconfig_ue_entity_req->num_reconfig_tx_um_rlc - 1);
		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & p_uecc_llim_drb_config->bitmask)
		{
			/* Fill the Qci info */
			p_rlc_reconfig_ue_entity_req->reconfig_tx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_reconfig_ue_entity_req->reconfig_tx_um_rlc[lc_idx].rrc_rlc_qci_info.
				qci = p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the TX values based on bearer type (GBR/NGBR)*/
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
						p_uecc_llim_drb_config->drb_config.bitmask) &&
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/
				p_rlc_reconfig_ue_entity_req->reconfig_tx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_TX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->reconfig_tx_um_rlc[lc_idx].
					rrc_rlc_tx_bit_rate_info.bit_rate_tx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.ul_mbr;
			}
		}
		/* Fill the QciLength info */
		if ( (p_uecc_llim_drb_config->drb_config.bitmask & 
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT) &&
				(p_uecc_llim_drb_config->drb_config.rlc_config_enb.bitmask & 
				 RRC_RLC_CONFIG_QCI_LENGTH_PRESENT) )
		{
			p_rlc_reconfig_ue_entity_req->reconfig_tx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QUEUE_SIZE_INFO_PRESENT;

			p_rlc_reconfig_ue_entity_req->reconfig_tx_um_rlc[lc_idx].
				rrc_rlc_queue_size_info.rlc_queue_size = p_uecc_llim_drb_config->
				drb_config.rlc_config_enb.qci_length;
		}

	} 
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT == p_rlc_config
			->bitmask)
	{
		lc_idx = (rrc_counter_t)(p_rlc_reconfig_ue_entity_req->num_reconfig_rx_um_rlc - 1);
		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & p_uecc_llim_drb_config->bitmask)
		{
			/* Fill the Qci info */
			p_rlc_reconfig_ue_entity_req->reconfig_rx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_reconfig_ue_entity_req->reconfig_rx_um_rlc[lc_idx].rrc_rlc_qci_info.
				qci = p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the RX values based on bearer type (GBR/NGBR)*/
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT & 
						p_uecc_llim_drb_config->drb_config.bitmask)&&
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/
				p_rlc_reconfig_ue_entity_req->reconfig_rx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_RX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->reconfig_rx_um_rlc[lc_idx].
					rrc_rlc_rx_bit_rate_info.bit_rate_rx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.dl_mbr;
			}
		}
	}
}

/******************************************************************************
 *   FUNCTION NAME: fill_qos_info_rlc_reconfig_ue_entity_req_add_lc_req 
 *   INPUT        : rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 *                  rrc_counter_t                           drb_index
 *                  rrc_uecc_llim_add_lc_req_t              *p_add_lc_param
 *   OUTPUT       : none
 *   DESCRIPTION  : This function continues filling qos_info of
 *       RLC message RLC_RECONFIG_UE_ENTITY_REQ
 *           based on p_rlc_config of new DRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_qos_info_rlc_reconfig_ue_entity_req_add_lc_req
(
 /* destination */
 rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 rrc_counter_t                           drb_index, 
 /* main source */
 rrc_uecc_llim_add_lc_req_t              *p_add_lc_param
 )
{
	rrc_counter_t                   lc_idx = RRC_NULL;
	rrc_rlc_config_t *p_rlc_config = RRC_NULL;
	rrc_uecc_llim_drb_config_t      *p_uecc_llim_drb_config = PNULL; 

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_rlc_reconfig_ue_entity_req);
	RRC_ASSERT(PNULL != p_add_lc_param);

	p_rlc_config = &(p_add_lc_param->create_drb_entity[drb_index].
			uecc_llim_drb_config.drb_config.rlc_config_enb.rlc_config);
	p_uecc_llim_drb_config = &(p_add_lc_param->create_drb_entity[drb_index].
			uecc_llim_drb_config);


	if (RRC_RLC_CONFIG_AM_CONFIG_PRESENT == p_rlc_config->bitmask)
	{
		lc_idx = (rrc_counter_t)(p_rlc_reconfig_ue_entity_req->num_create_tx_rx_am_rlc - 1);
		/* Fill the Qci info */
		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & 
				p_uecc_llim_drb_config->bitmask)
		{
			p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
				rrc_rlc_qci_info.qci = p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the TX and RX values based on bearer type GBR and 
			 * ignoring the TX and RX values in case of Non GBR */
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
						p_uecc_llim_drb_config->drb_config.bitmask)&&
					(p_uecc_llim_drb_config->drb_config.bearer_type == 
					 BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & 
					 RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/
				p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_TX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
					rrc_rlc_tx_bit_rate_info.bit_rate_tx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.ul_mbr;

				p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_RX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
					rrc_rlc_rx_bit_rate_info.bit_rate_rx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.dl_mbr;
			}
		}
		/* Fill the QciLength info */
		if ( (p_uecc_llim_drb_config->drb_config.bitmask & 
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT) &&
				(p_uecc_llim_drb_config->drb_config.rlc_config_enb.bitmask & 
				 RRC_RLC_CONFIG_QCI_LENGTH_PRESENT) )
		{
			p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QUEUE_SIZE_INFO_PRESENT;

			p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
				rrc_rlc_queue_size_info.rlc_queue_size = p_uecc_llim_drb_config->
				drb_config.rlc_config_enb.qci_length;
		}
	} 
	else if (RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT ==
			p_rlc_config->bitmask)
	{
		lc_idx = (rrc_counter_t)(p_rlc_reconfig_ue_entity_req->num_create_tx_rx_um_rlc - 1);
		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & 
				p_uecc_llim_drb_config->bitmask)
		{
			/* Fill the Qci info */
			p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc_idx].rrc_rlc_qci_info.
				qci = p_uecc_llim_drb_config->qos_info.qci;
			/* Fills the TX and RX values based on bearer type GBR and 
			 * ignoring the TX and RX values in case of Non GBR*/
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
						p_uecc_llim_drb_config->drb_config.bitmask) &&
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/

				p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_TX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
					rrc_rlc_tx_bit_rate_info.bit_rate_tx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.ul_mbr;

				p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_RX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
					rrc_rlc_rx_bit_rate_info.bit_rate_rx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.dl_mbr;
			}
		}
		/* Fill the QciLength info */
		if ( (p_uecc_llim_drb_config->drb_config.bitmask & 
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT) &&
				(p_uecc_llim_drb_config->drb_config.rlc_config_enb.bitmask & 
				 RRC_RLC_CONFIG_QCI_LENGTH_PRESENT) )
		{
			p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QUEUE_SIZE_INFO_PRESENT;

			p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
				rrc_rlc_queue_size_info.rlc_queue_size = p_uecc_llim_drb_config->
				drb_config.rlc_config_enb.qci_length;
		}

	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT == p_rlc_config
			->bitmask)
	{
		lc_idx = (rrc_counter_t)(p_rlc_reconfig_ue_entity_req->num_create_tx_um_rlc - 1);
		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & 
				p_uecc_llim_drb_config->bitmask)
		{
			/* Fill the Qci info */
			p_rlc_reconfig_ue_entity_req->create_tx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_reconfig_ue_entity_req->create_tx_um_rlc[lc_idx].rrc_rlc_qci_info.
				qci = p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the TX values based on bearer type GBR and ignores for NGBR*/
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
						p_uecc_llim_drb_config->drb_config.bitmask) &&
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/

				p_rlc_reconfig_ue_entity_req->create_tx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_TX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->create_tx_um_rlc[lc_idx].
					rrc_rlc_tx_bit_rate_info.bit_rate_tx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.ul_mbr;
			}
		}
		/* Fill the QciLength info */
		if ( (p_uecc_llim_drb_config->drb_config.bitmask & 
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT) &&
				(p_uecc_llim_drb_config->drb_config.rlc_config_enb.bitmask & 
				 RRC_RLC_CONFIG_QCI_LENGTH_PRESENT) )
		{
			p_rlc_reconfig_ue_entity_req->create_tx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QUEUE_SIZE_INFO_PRESENT;

			p_rlc_reconfig_ue_entity_req->create_tx_um_rlc[lc_idx].
				rrc_rlc_queue_size_info.rlc_queue_size = p_uecc_llim_drb_config->
				drb_config.rlc_config_enb.qci_length;
		}

	} 
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT == p_rlc_config
			->bitmask)
	{
		lc_idx = (rrc_counter_t)(p_rlc_reconfig_ue_entity_req->num_create_rx_um_rlc - 1);
		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & 
				p_uecc_llim_drb_config->bitmask)
		{
			/* Fill the Qci info */
			p_rlc_reconfig_ue_entity_req->create_rx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_reconfig_ue_entity_req->create_rx_um_rlc[lc_idx].rrc_rlc_qci_info.
				qci = p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the RX values based on bearer type GBR and ignores for NGBR*/
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
						p_uecc_llim_drb_config->drb_config.bitmask) &&
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/
				p_rlc_reconfig_ue_entity_req->create_rx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_RX_BIT_RATE_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->create_rx_um_rlc[lc_idx].
					rrc_rlc_rx_bit_rate_info.bit_rate_rx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.dl_mbr;
			}
		}
	}
}

/******************************************************************************
 *   FUNCTION NAME: fill_create_part_drb_rlc_reconfig_ue_entity_req
 *   INPUT        : rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 *                  rrc_lc_id_t                             lc_id
 *                  rrc_rlc_config_t                        *p_rlc_config
 *   OUTPUT       : none
 *   DESCRIPTION  : This function continues filling create part of
 *       RLC message RLC_RECONFIG_UE_ENTITY_REQ
 *           based on p_rlc_config of new DRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_create_part_drb_rlc_reconfig_ue_entity_req
(
 /* destination */
 rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 rrc_lc_id_t                             lc_id,
 /* main source */
 rrc_rlc_config_t                        *p_rlc_config
#ifdef ENDC_ENABLED 
 /*OPTION3X Changes Start*/
 ,U8                                     *p_dc_bearer_type
 /*OPTION3X Changes Stop*/
#endif
 )
{
	rrc_counter_t lc = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_rlc_reconfig_ue_entity_req);
	RRC_ASSERT(PNULL != p_rlc_config);

	if (RRC_RLC_CONFIG_AM_CONFIG_PRESENT == p_rlc_config->bitmask)
    {
        lc = p_rlc_reconfig_ue_entity_req->num_create_tx_rx_am_rlc;
        p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].lc_id = lc_id;

        p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].
            t_poll_retransmission =
            get_rlc_poll_retransmission_from_enum(p_rlc_config->am_config.
                    ul_am_rlc.t_poll_retransmit);
        p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].poll_pdu =
            get_rlc_poll_pdu_from_enum(p_rlc_config->am_config.ul_am_rlc.
                    poll_pdu);
        p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].poll_byte =
            get_rlc_poll_byte_from_enum(p_rlc_config->am_config.ul_am_rlc.
                    poll_byte);
        p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].max_re_tx_thrsh_ld
            =
            get_rlc_max_retx_threshold_from_enum(p_rlc_config->am_config.
                    ul_am_rlc.max_retx_threshold);

        p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].t_reordering =
            get_rlc_t_reordering_from_enum(p_rlc_config->am_config.dl_am_rlc.
                    t_reordering);
        p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].t_status_prohibit
            =
            get_rlc_t_status_prohibit_from_enum(p_rlc_config->am_config.
                    dl_am_rlc.t_status_prohibit);

#ifdef ENDC_ENABLED
    /*OPTION3X Changes */
        if (PNULL != p_dc_bearer_type)
        {
            p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].
                optional_elems_present |=
                RRC_RLC_DC_BEARER_TYPE_INFO_PRESENT_FOR_TX_RX_AM;
            p_rlc_reconfig_ue_entity_req->create_tx_rx_am_rlc[lc].
                dc_bearer_type_info.dc_bearer_type = *p_dc_bearer_type;
        }
    /*OPTION3X Changes */
#endif

        ++p_rlc_reconfig_ue_entity_req->num_create_tx_rx_am_rlc;
    }
	else if (RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT == p_rlc_config->
			bitmask)
	{
		lc = p_rlc_reconfig_ue_entity_req->num_create_tx_rx_um_rlc;
		p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc].lc_id = lc_id;

		p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc].sn_field_length_rx
			=
			get_rlc_sn_field_length_from_enum(p_rlc_config->
					um_bi_directional_config.ul_um_rlc.sn_field_length);
		p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc].sn_field_length_tx
			=
			get_rlc_sn_field_length_from_enum(p_rlc_config->
					um_bi_directional_config.dl_um_rlc.sn_field_length);
		p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc].t_reordering =
			get_rlc_t_reordering_from_enum(p_rlc_config->
					um_bi_directional_config.dl_um_rlc.t_reordering);
#ifdef ENDC_ENABLED
    /*OPTION3X Changes */
        if (PNULL != p_dc_bearer_type)
        {
            p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc].
             optional_elems_present |=
               RRC_RLC_DC_BEARER_TYPE_INFO_PRESENT_FOR_TX_RX_UM;
            p_rlc_reconfig_ue_entity_req->create_tx_rx_um_rlc[lc].
             dc_bearer_type_info.dc_bearer_type = *p_dc_bearer_type;
        }
    /*OPTION3X Changes */
#endif
		++p_rlc_reconfig_ue_entity_req->num_create_tx_rx_um_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT == p_rlc_config
			->bitmask)
	{
		lc = p_rlc_reconfig_ue_entity_req->num_create_tx_um_rlc;
		p_rlc_reconfig_ue_entity_req->create_tx_um_rlc[lc].lc_id = lc_id;

		p_rlc_reconfig_ue_entity_req->create_tx_um_rlc[lc].sn_field_length =
			get_rlc_sn_field_length_from_enum(p_rlc_config->
					um_uni_directional_ul_config.ul_um_rlc.sn_field_length);

#ifdef ENDC_ENABLED
    /*OPTION3X Changes */
        if (PNULL != p_dc_bearer_type)
        {
            p_rlc_reconfig_ue_entity_req->create_tx_um_rlc[lc].
             optional_elems_present |=
               RRC_RLC_DC_BEARER_TYPE_INFO_PRESENT_FOR_TX_UM;
            p_rlc_reconfig_ue_entity_req->create_tx_um_rlc[lc].
             dc_bearer_type_info.dc_bearer_type = *p_dc_bearer_type;
        }
    /*OPTION3X Changes */
#endif

		++p_rlc_reconfig_ue_entity_req->num_create_tx_um_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT == p_rlc_config
			->bitmask)
	{
		lc = p_rlc_reconfig_ue_entity_req->num_create_rx_um_rlc;
		p_rlc_reconfig_ue_entity_req->create_rx_um_rlc[lc].lc_id = lc_id;

		p_rlc_reconfig_ue_entity_req->create_rx_um_rlc[lc].sn_field_length =
			get_rlc_sn_field_length_from_enum(p_rlc_config->
					um_uni_directional_dl_config.dl_um_rlc.sn_field_length);
		p_rlc_reconfig_ue_entity_req->create_rx_um_rlc[lc].t_reordering =
			get_rlc_t_reordering_from_enum(p_rlc_config->
					um_uni_directional_dl_config.dl_um_rlc.t_reordering);

#ifdef ENDC_ENABLED
    /*OPTION3X Changes */
        if (PNULL != p_dc_bearer_type)
        {
            p_rlc_reconfig_ue_entity_req->create_rx_um_rlc[lc].
             optional_elems_present |=
               RRC_RLC_DC_BEARER_TYPE_INFO_PRESENT_FOR_RX_UM;
            p_rlc_reconfig_ue_entity_req->create_rx_um_rlc[lc].
             dc_bearer_type_info.dc_bearer_type = *p_dc_bearer_type;
        }
    /*OPTION3X Changes */
#endif

		++p_rlc_reconfig_ue_entity_req->num_create_rx_um_rlc;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_reconfigure_part_drb_rlc_reconfig_ue_entity_req
 *   INPUT        : rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 *                  rrc_lc_id_t                             lc_id
 *                  rrc_rlc_config_t                        *p_rlc_config
 *   OUTPUT       : none
 *
 *   
 DESCRIPTION   
 *           based on p_rlc_config of DRB to be modified.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_reconfigure_part_drb_rlc_reconfig_ue_entity_req
(
 /* destination */
 rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 rrc_lc_id_t                             lc_id,
 /* main source */
 rrc_rlc_config_t                        *p_rlc_config
 )
{
	rrc_counter_t lc = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_rlc_reconfig_ue_entity_req);
	RRC_ASSERT(PNULL != p_rlc_config);

	if (RRC_RLC_CONFIG_AM_CONFIG_PRESENT == p_rlc_config->bitmask)
	{
		lc = p_rlc_reconfig_ue_entity_req->num_reconfig_tx_rx_am_rlc;

		/*lc id*/
		p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc].lc_id = lc_id;

		/*t_poll_retransmit*/
		p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc].
			t_poll_retransmission =
			get_rlc_poll_retransmission_from_enum(p_rlc_config->am_config.
					ul_am_rlc.t_poll_retransmit);

		/*poll_pdu*/
		p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc].poll_pdu =
			get_rlc_poll_pdu_from_enum(p_rlc_config->am_config.ul_am_rlc.
					poll_pdu);

		/*poll_byte*/
		p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc].poll_byte =
			get_rlc_poll_byte_from_enum(p_rlc_config->am_config.ul_am_rlc.
					poll_byte);

		/*max_re_tx_thrsh_ld*/
		p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc].
			max_re_tx_thrsh_ld =
			get_rlc_max_retx_threshold_from_enum(p_rlc_config->am_config.
					ul_am_rlc.max_retx_threshold);

		/*t_reordering*/
		p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc].t_reordering =
			get_rlc_t_reordering_from_enum(p_rlc_config->am_config.dl_am_rlc.
					t_reordering);

		/*t_status_prohibit*/
		p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_am_rlc[lc].
			t_status_prohibit =
			get_rlc_t_status_prohibit_from_enum(p_rlc_config->am_config.
					dl_am_rlc.t_status_prohibit);

		++p_rlc_reconfig_ue_entity_req->num_reconfig_tx_rx_am_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT == p_rlc_config->
			bitmask)
	{
		lc = p_rlc_reconfig_ue_entity_req->num_reconfig_tx_rx_um_rlc;

		/*lc_id*/
		p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_um_rlc[lc].lc_id = lc_id;

		/*t_reordering*/
		p_rlc_reconfig_ue_entity_req->reconfig_tx_rx_um_rlc[lc].t_reordering =
			get_rlc_t_reordering_from_enum(p_rlc_config->
					um_bi_directional_config.dl_um_rlc.t_reordering);

		++p_rlc_reconfig_ue_entity_req->num_reconfig_tx_rx_um_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT == 
			p_rlc_config -> bitmask)
	{
		lc = p_rlc_reconfig_ue_entity_req->num_reconfig_tx_um_rlc;

		/*lc_id*/
		p_rlc_reconfig_ue_entity_req->reconfig_tx_um_rlc[lc].lc_id = lc_id;


		++p_rlc_reconfig_ue_entity_req->num_reconfig_tx_um_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT == p_rlc_config
			->bitmask)
	{
		lc = p_rlc_reconfig_ue_entity_req->num_reconfig_rx_um_rlc;

		/*lc_id*/
		p_rlc_reconfig_ue_entity_req->reconfig_rx_um_rlc[lc].lc_id = lc_id;

		/*t_reordering*/
		p_rlc_reconfig_ue_entity_req->reconfig_rx_um_rlc[lc].t_reordering =
			get_rlc_t_reordering_from_enum(p_rlc_config->
					um_uni_directional_dl_config.dl_um_rlc.t_reordering);

		++p_rlc_reconfig_ue_entity_req->num_reconfig_rx_um_rlc;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_delete_part_drb_rlc_reconfig_ue_entity_req
 *   INPUT        : rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 *                  rrc_lc_id_t                             lc_id,
 *                  rrc_rlc_lc_mode_et                      *p_rlc_mode
 *   OUTPUT       : none
 *   DESCRIPTION  : This function continues filling delete part of
 *       RLC message RLC_RECONFIG_UE_ENTITY_REQ
 *           based on p_rlc_config of DRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_delete_part_drb_rlc_reconfig_ue_entity_req
(
 /* destination */
 rrc_rlc_reconfig_ue_entity_req_t        *p_rlc_reconfig_ue_entity_req,
 rrc_lc_id_t                             lc_id,
 /* main source */
 rrc_rlc_lc_mode_et                      *p_rlc_mode
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_rlc_reconfig_ue_entity_req);
	RRC_ASSERT(PNULL != p_rlc_mode);

	if (RLC_CONFIG_AM_MODE == *p_rlc_mode)
	{
		p_rlc_reconfig_ue_entity_req->
			delete_tx_rx_am_rlc[p_rlc_reconfig_ue_entity_req->
			num_delete_tx_rx_am_rlc].lc_id = lc_id;

		++p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_am_rlc;
	}
	else if (RLC_CONFIG_UM_BI_DIR_MODE == *p_rlc_mode)
	{
		p_rlc_reconfig_ue_entity_req->
			delete_tx_rx_um_rlc[p_rlc_reconfig_ue_entity_req->
			num_delete_tx_rx_um_rlc].lc_id = lc_id;

		++p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_um_rlc;
	}
	else if (RLC_CONFIG_UM_UL_UNI_DIR_MODE == *p_rlc_mode)
	{
		p_rlc_reconfig_ue_entity_req->
			delete_tx_um_rlc[p_rlc_reconfig_ue_entity_req->num_delete_tx_um_rlc].
			lc_id = lc_id;

		++p_rlc_reconfig_ue_entity_req->num_delete_tx_um_rlc;
	}
	else if (RLC_CONFIG_UM_DL_UNI_DIR_MODE == *p_rlc_mode)
	{
		p_rlc_reconfig_ue_entity_req->
			delete_rx_um_rlc[p_rlc_reconfig_ue_entity_req->num_delete_rx_um_rlc].
			lc_id = lc_id;

		++p_rlc_reconfig_ue_entity_req->num_delete_rx_um_rlc;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_pdcp_cr_srb_entities
 *   INPUT         :rrc_pdcp_cr_srb_entity_t                *p_pdcp_cr_srb_entity,
 *                  rrc_uecc_llim_create_srb_entity_t       *p_int_cr_srb_entity
 *   OUTPUT        :none
 *   DESCRIPTION   : This function fills PDCP TLV cr_srb_entities.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_pdcp_cr_srb_entities
(
 /* destination */
 rrc_pdcp_cr_srb_entity_t                *p_pdcp_cr_srb_entity,
 rrc_uecc_llim_create_srb_entity_t       *p_int_cr_srb_entity    /* source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	p_pdcp_cr_srb_entity->srb_id         = p_int_cr_srb_entity->lc_id;
	p_pdcp_cr_srb_entity->rlc_mode      = PDCP_RLC_MODE_AM;
	p_pdcp_cr_srb_entity->rb_direction  = RRC_PDCP_RB_DIR_BOTH;

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_pdcp_cr_drb_entities
 *   INPUT        : rrc_pdcp_cr_drb_entity_t                *p_pdcp_cr_drb_entity
 *                  rrc_uecc_llim_create_drb_entity_t       *p_int_cr_drb_entity
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills PDCP TLV cr_drb_entities.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_pdcp_cr_drb_entities
(
 /* destination */
 rrc_pdcp_cr_drb_entity_t                *p_pdcp_cr_drb_entity,
 rrc_uecc_llim_create_drb_entity_t       *p_int_cr_drb_entity    /* source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	p_pdcp_cr_drb_entity->optional_elems_present = 0;

	p_pdcp_cr_drb_entity->lc_id   = p_int_cr_drb_entity->uecc_llim_drb_config.
		drb_config.logical_channel_identity;
	p_pdcp_cr_drb_entity->rlc_mode      = get_pdcp_rlc_mode_from_drb_config(
			&p_int_cr_drb_entity->uecc_llim_drb_config.drb_config);
	p_pdcp_cr_drb_entity->rb_direction  = get_rb_direction_from_drb_config(
			&p_int_cr_drb_entity->uecc_llim_drb_config.drb_config);

	/*qos changes start*/
	if (p_int_cr_drb_entity->uecc_llim_drb_config.bitmask & 
			UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT)
	{
		p_pdcp_cr_drb_entity->qci = p_int_cr_drb_entity->uecc_llim_drb_config.
			qos_info.qci;
	}
	/*qos changes stop*/

	/* RB Changes Start */
	p_pdcp_cr_drb_entity->drb_id = p_int_cr_drb_entity->uecc_llim_drb_config.
		drb_config.drb_id;
	/* RB Changes Stop */

	if (p_int_cr_drb_entity->uecc_llim_drb_config.drb_config.bitmask &
			RRM_DRB_CONFIG_PDCP_CONFIG_PRESENT)
	{
		if (p_int_cr_drb_entity->uecc_llim_drb_config.drb_config.pdcp_config.
				header_compression.bitmask &
				RRC_PDCP_HEADER_COMPRESSION_ROHC_CONFIG_PRESENT)
		{
			p_pdcp_cr_drb_entity->optional_elems_present |=
				RRC_PDCP_CR_DRB_CONFIG_ROHC_PRESENT;

			p_pdcp_cr_drb_entity->config_rohc.max_cid = p_int_cr_drb_entity->
				uecc_llim_drb_config.drb_config.pdcp_config.header_compression.
				rohc_config.max_cid;
			p_pdcp_cr_drb_entity->config_rohc.profile_id =
				get_rohc_profile_id_from_rohc_config(&p_int_cr_drb_entity->
						uecc_llim_drb_config.drb_config.pdcp_config.
						header_compression.rohc_config);
		}

		if (p_int_cr_drb_entity->uecc_llim_drb_config.drb_config.
				pdcp_config.bitmask &
				RRC_PDCP_CONFIG_DISCARD_TIMER_PRESENT)
		{
			p_pdcp_cr_drb_entity->optional_elems_present |=
				RRC_PDCP_CR_DRB_CONFIG_DISC_TIMER_PRESENT;

			p_pdcp_cr_drb_entity->config_disc_timer.disc_timer =
				get_pdcp_disc_timer_from_enum(p_int_cr_drb_entity->
						uecc_llim_drb_config.drb_config.pdcp_config.discard_timer);
		}

		if (p_int_cr_drb_entity->uecc_llim_drb_config.
				drb_config.pdcp_config.bitmask &
				RRC_PDCP_CONFIG_RLC_UM_PDCP_SN_SIZE_PRESENT)
		{
			p_pdcp_cr_drb_entity->optional_elems_present |=
				RRC_PDCP_CR_DRB_CONFIG_SN_SIZE_PRESENT;

			p_pdcp_cr_drb_entity->config_sn_size.sn_size =
				get_pdcp_sn_size_from_enum(p_int_cr_drb_entity->
						uecc_llim_drb_config.drb_config.
						pdcp_config.rlc_um_pdcp_sn_size);
		}
		/* PSR Start */
		if (p_int_cr_drb_entity->uecc_llim_drb_config.drb_config.
				pdcp_config.bitmask &
				RRC_PDCP_CONFIG_RLC_AM_STATUS_REPORT_REQ_PRESENT)
		{
			p_pdcp_cr_drb_entity->optional_elems_present |=
				RRC_PDCP_CR_DRB_CONFIG_UE_ST_REPORT_REQUIRED_PRESENT;

			p_pdcp_cr_drb_entity->ue_st_rep_required.ue_st_rep_required =
				p_int_cr_drb_entity->uecc_llim_drb_config.drb_config.pdcp_config.
				rlc_am_status_report_required;
		}
		if (p_int_cr_drb_entity->uecc_llim_drb_config.drb_config.
				pdcp_config.bitmask &
				RRC_PDCP_CONFIG_RLC_AM_ENB_STATUS_REPORT_REQ_PRESENT)
		{
			p_pdcp_cr_drb_entity->optional_elems_present |=
				RRC_PDCP_CR_DRB_CONFIG_ST_REPORT_REQUIRED_PRESENT;

			p_pdcp_cr_drb_entity->st_rep_required.st_rep_required =
				p_int_cr_drb_entity->uecc_llim_drb_config.drb_config.pdcp_config.
				rlc_am_enb_status_report_required;
		}
		/* PSR End */

	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_pdcp_reconfig_drb_entities
 *   INPUT        : rrc_pdcp_rcfg_drb_entity_t           *p_pdcp_reconfig_drb_entity
 *                  rrm_drb_config_t       *p_drb_config
 *                  rrm_drb_config_t       *p_drb_config_old
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills PDCP TLV cr_drb_entities.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_pdcp_reconfig_drb_entities
(
 /* destination */
 rrc_pdcp_rcfg_drb_entity_t           *p_pdcp_reconfig_drb_entity,
 /* source */
 rrm_drb_config_t       *p_drb_config,
 rrm_drb_config_t       *p_drb_config_old
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	p_pdcp_reconfig_drb_entity->optional_elems_present = 0;

	p_pdcp_reconfig_drb_entity->lc_id = 
		p_drb_config->logical_channel_identity;

	if (p_drb_config->bitmask &
			RRM_DRB_CONFIG_RLC_CONFIG_PRESENT)
	{
		p_pdcp_reconfig_drb_entity->rb_direction = 
			get_rb_direction_from_drb_config(p_drb_config);
	}
	else
	{
		p_pdcp_reconfig_drb_entity->rb_direction = 
			get_rb_direction_from_drb_config_during_erab_modify(p_drb_config_old);
	}


	if (p_drb_config->bitmask &
			RRM_DRB_CONFIG_PDCP_CONFIG_PRESENT)
	{
		if (p_drb_config->pdcp_config.header_compression.
				bitmask &
				RRC_PDCP_HEADER_COMPRESSION_ROHC_CONFIG_PRESENT)
		{
			p_pdcp_reconfig_drb_entity->optional_elems_present |=
				RRC_PDCP_RCFG_DRB_CONFIG_ROHC_PRESENT;

			p_pdcp_reconfig_drb_entity->config_rohc.max_cid =
				p_drb_config->pdcp_config.header_compression.
				rohc_config.max_cid;
			p_pdcp_reconfig_drb_entity->config_rohc.profile_id =
				get_rohc_profile_id_from_rohc_config(&p_drb_config->pdcp_config.
						header_compression.rohc_config);
		}

		/* PSR Start */
		if (p_drb_config->pdcp_config.bitmask &
				RRC_PDCP_CONFIG_RLC_AM_STATUS_REPORT_REQ_PRESENT)
		{
			p_pdcp_reconfig_drb_entity->optional_elems_present |=
				RRC_PDCP_RCFG_DRB_CONFIG_UE_ST_REPORT_REQUIRED_PRESENT;

			p_pdcp_reconfig_drb_entity->ue_st_rep_required.ue_st_rep_required =
				p_drb_config->pdcp_config.
				rlc_am_status_report_required;
		}
		if (p_drb_config->pdcp_config.bitmask &
				RRC_PDCP_CONFIG_RLC_AM_ENB_STATUS_REPORT_REQ_PRESENT)
		{
			p_pdcp_reconfig_drb_entity->optional_elems_present |=
				RRC_PDCP_RCFG_DRB_CONFIG_ST_REPORT_REQUIRED_PRESENT;

			p_pdcp_reconfig_drb_entity->st_rep_required.st_rep_required =
				p_drb_config->pdcp_config.
				rlc_am_enb_status_report_required;
		}
		/* PSR End */

	}
	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: fill_mac_sr_config_info
 *   INPUT        : rrc_mac_sr_config_info_t                *p_dst_sr
 *                  rrc_phy_scheduling_request_config_t     *p_src_sr
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC SR configuration information
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_mac_sr_config_info
(
 rrc_mac_sr_config_info_t                *p_dst_sr,  /* destination */
 rrc_phy_scheduling_request_config_t     *p_src_sr   /* source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_dst_sr);
	RRC_ASSERT(PNULL != p_src_sr);

	p_dst_sr->optional_elems_present = 0;

	if (p_src_sr->bitmask & RRC_PHY_SCHEDULING_REQUEST_CONFIG_PARAM_PRESENT)
	{
		p_dst_sr->optional_elems_present |= RRC_MAC_SR_SETUP_INFO_PRESENT;

		p_dst_sr->request_type = MAC_SETUP;

		p_dst_sr->sr_setup_info.sr_pucch_resource_index =
			p_src_sr->scheduling_request_config_param.sr_pucch_resource_index;
		p_dst_sr->sr_setup_info.sr_configuration_index =
			p_src_sr->scheduling_request_config_param.sr_configuration_index;
	}
	else
	{
		p_dst_sr->request_type = MAC_RELEASE;
	}

	RRC_LLIM_UT_TRACE_EXIT();
}


/*tm7-8 fix*/
/******************************************************************************
 *   FUNCTION NAME: fill_mac_cqi_v920_info
 *   INPUT        : rrc_mac_cqi_info_t                      *p_dst_cqi
 *                  rrc_phy_cqi_report_config_v920_t        *p_src_cqi_v920
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC CQI V920 information
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_mac_cqi_v920_info
(
 rrc_mac_cqi_info_t                      *p_dst_cqi      /* destination */
 /*SPR 17777 +-*/
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_dst_cqi);
	/*RRC_ASSERT(PNULL != p_src_cqi_v920);*/ //COV

	/*p_dst_cqi->optional_elems_present = 0;*/
	p_dst_cqi->optional_elems_present |= RRC_MAC_CQI_REPORT_CONFIG_V920_PRESENT;

	p_dst_cqi->cqi_report_config_v920.optional_elems_present = 0;
	p_dst_cqi->cqi_report_config_v920.optional_elems_present |= RRC_MAC_CQI_REPORT_CONFIG_PMI_RI_REPORT_R9_PRESENT;
	/*p_dst_cqi->cqi_report_config_v920.rrc_mac_pmi_ri_report_r9.pmi_ri_report_r9 = p_src_cqi_v920->pmi_ri_report_r9;*/

	/*above line is commented to align as per RRC-MAC interface. At RRM-L3
	 * interface, 0 means SETUP, but at L3-MAC interface 1 means SETUP*/
	p_dst_cqi->cqi_report_config_v920.rrc_mac_pmi_ri_report_r9.pmi_ri_report_r9 = PMI_RI_REPORT_R9_MAC_SETUP;

	RRC_LLIM_UT_TRACE_EXIT();
}
/*tm7-8 fix*/


/******************************************************************************
 *   FUNCTION NAME: fill_mac_cqi_info
 *   INPUT        : rrc_mac_cqi_info_t                      *p_dst_cqi
 *                  rrc_phy_cqi_reporting_t                 *p_src_cqi
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC CQI information
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_mac_cqi_info
(
 rrc_mac_cqi_info_t                      *p_dst_cqi, /* destination */
 rrc_phy_cqi_reporting_t                 *p_src_cqi  /* source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_dst_cqi);
	RRC_ASSERT(PNULL != p_src_cqi);

	p_dst_cqi->optional_elems_present = 0;

	if (p_src_cqi->bitmask & RRC_PHY_CQI_REPORTING_MODE_APERIODIC_PRESENT)
	{
		p_dst_cqi->optional_elems_present |=
			RRC_MAC_CQI_APERIODIC_CONFIG_INFO_PRESENT;

		p_dst_cqi->cqi_aperiodic_config_info.cqi_aperiodic_mode =
			uemh_e2v_mac_cqi_reporting_mode_aperiodic(
					p_src_cqi->cqi_reporting_mode_aperiodic);
	}

	if (p_src_cqi->bitmask & RRC_PHY_CQI_REPORTING_PERIODIC_PRESENT)
	{
		p_dst_cqi->optional_elems_present |=
			RRC_MAC_CQI_PERIODIC_CONFIG_INFO_PRESENT;
		p_dst_cqi->cqi_periodic_config_info.optional_elems_present = 0;

		if (p_src_cqi->cqi_reporting_periodic.bitmask &
				RRC_PHY_CQI_REPORTING_PERIODIC_PARAM_PRESENT)
		{
			p_dst_cqi->cqi_periodic_config_info.optional_elems_present |=
				RRC_MAC_CQI_PMI_CONFIG_INDEX_INFO_PRESENT;

			p_dst_cqi->cqi_periodic_config_info.request_type = MAC_SETUP;

			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info.
				optional_elems_present = 0;

			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info.
				cqi_pmi_config_index =
				p_src_cqi->cqi_reporting_periodic.cqi_reporting_periodic_param.
				cqi_pmi_config_index;
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info.
				cqi_pucch_resource_index =
				p_src_cqi->cqi_reporting_periodic.cqi_reporting_periodic_param.
				cqi_pucch_resource_index;
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info.
				simultaneous_ack_nack_and_cqi =
				p_src_cqi->cqi_reporting_periodic.cqi_reporting_periodic_param.
				simultaneous_ack_nack_and_cqi;

			if (p_src_cqi->cqi_reporting_periodic.cqi_reporting_periodic_param.
					bitmask &
					RRC_PHY_CQI_RI_CONFIG_INDEX_PRESENT)
			{
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info.
					optional_elems_present |=
					RRC_MAC_RI_CONFIG_INDEX_INFO_PRESENT;
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info.
					ri_config_index_info.ri_config_index =
					p_src_cqi->cqi_reporting_periodic.
					cqi_reporting_periodic_param.ri_config_index;
			}

			if (p_src_cqi->cqi_reporting_periodic.cqi_reporting_periodic_param.
					cqi_format_indicator_periodic.bitmask &
					RRC_PHY_SUBBAND_CQI_PARAM_PRESENT)
			{
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info.
					optional_elems_present |= 
					RRC_MAC_CQI_FMT_IND_PERIODIC_SUBBAND_K_PRESENT;

				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info.
					cqi_fmt_ind_periodic_subband_k.
					cqi_format_indicator_periodic_subband_k =
					p_src_cqi->cqi_reporting_periodic.cqi_reporting_periodic_param.
					cqi_format_indicator_periodic.subband_cqi_param.k;

				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info.
					cqi_fmt_ind_periodic = RRC_MAC_PERIODIC_SUBBAND;
			}
			else
			{
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info.
					cqi_fmt_ind_periodic = RRC_MAC_PERIODIC_WIDEBAND;
			}



		}
		else
		{
			p_dst_cqi->cqi_periodic_config_info.request_type = MAC_RELEASE;
		}
	}

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: fill_mac_pusch_config_info
 *   INPUT        : rrc_mac_pusch_config_info_t              *p_dst_pusch_config
 *                  rrc_phy_pusch_configuration_dedicated_t  *p_src_pusch_config
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC PUSCH CONFIG information
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_mac_pusch_config_info
(
 rrc_mac_pusch_config_info_t              *p_dst_pusch_config, /* destination */
 rrc_phy_pusch_configuration_dedicated_t  *p_src_pusch_config  /* source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_dst_pusch_config);
	RRC_ASSERT(PNULL != p_src_pusch_config);

	p_dst_pusch_config->beta_offset_ack_index =
		p_src_pusch_config->beta_offset_ack_index;

	p_dst_pusch_config->beta_offset_ri_index =
		p_src_pusch_config->beta_offset_ri_index;

	p_dst_pusch_config->beta_offset_cqi_index =
		p_src_pusch_config->beta_offset_cqi_index;

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: llim_fill_response_code
 *   INPUT        : U32      *p_response_code,
 *                  U16       module_id,
 *                  U16       response
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills the response code received from lower layer with
 *                  module id into response code needs to be sent to UECC.
 *       
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void llim_fill_response_code
(
 U32      *p_response_code,
 U16       module_id,
 U16       response
 )
{
	*p_response_code = RRC_NULL;
	*p_response_code |= (U32)(module_id << 16);
	*p_response_code |= response ;

}

/******************************************************************************
 *   FUNCTION NAME: fill_uecc_llim_modify_lc_resp
 *   INPUT        : rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp
 *                  rrc_response_t                  response_code
 *                  rrc_response_t                  err_code
 *                  rrc_uecc_llim_modify_lc_req_t  *p_modify_lc_req
 *   OUTPUT       : none
 *   DESCRIPTION:
 *       Function fills UECC_LLIM_MODIFY_LC_RESP message with given response_code
 *       according to UECC_LLIM_MODIFY_LC_REQ
 *
 *   RETURNS:
 *
 ******************************************************************************/
static void fill_uecc_llim_modify_lc_resp
(
 rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp, /* destination */
 rrc_response_t                  response_code,    /* response code */
 rrc_response_t                  err_code,    /* response code */
 rrc_uecc_llim_modify_lc_req_t  *p_modify_lc_req   /* main source */
 )
{
	U16 drb_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_modify_lc_resp);
	RRC_ASSERT(PNULL != p_modify_lc_req);

	p_modify_lc_resp->cell_index                   = p_modify_lc_req->
		cell_index;
	p_modify_lc_resp->transaction_id               = p_modify_lc_req->
		transaction_id;
	p_modify_lc_resp->ue_index                     = p_modify_lc_req->ue_index;
	p_modify_lc_resp->response_code                = (rrc_response_et)response_code;

	p_modify_lc_resp->modify_drb_status_counter    =
		p_modify_lc_req->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
		drb_counter;

	for (drb_index = 0; drb_index < p_modify_lc_resp->modify_drb_status_counter;
			drb_index++)
	{
		p_modify_lc_resp->modify_drb_status[drb_index].lc_id =
			p_modify_lc_req->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
			uecc_llim_drb_config[drb_index].drb_config.logical_channel_identity;

		if (RRC_NO_ERROR != err_code)
		{
			llim_fill_response_code(
					&p_modify_lc_resp->modify_drb_status[drb_index].
					response,
					RRC_MODULE_ID,
					err_code);    
		}
		else
		{
			p_modify_lc_resp->modify_drb_status[drb_index].response = err_code;
		}
	}

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: fill_uecc_llim_add_lc_resp
 *   INPUT        : rrc_uecc_llim_add_lc_resp_t *p_add_lc_resp
 *                  rrc_response_t              response_code
 *                  rrc_response_t              err_code
 *                  rrc_uecc_llim_add_lc_req_t  *p_add_lc_req
 *   OUTPUT       : none
 *   DESCRIPTION:
 *       Function fills UECC_LLIM_ADD_LC_RESP message with given response_code
 *       according to UECC_LLIM_ADD_LC_REQ
 *
 *   RETURNS:
 *
 ******************************************************************************/
static void fill_uecc_llim_add_lc_resp
(
 rrc_uecc_llim_add_lc_resp_t *p_add_lc_resp, /* destination */
 rrc_response_t              response_code,  /* response code */
 rrc_response_t              err_code,  /* response code */
 rrc_uecc_llim_add_lc_req_t  *p_add_lc_req   /* main source */
 )
{
	U16 drb_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_add_lc_resp);
	RRC_ASSERT(PNULL != p_add_lc_req);

	p_add_lc_resp->cell_index                   = p_add_lc_req->cell_index;
	p_add_lc_resp->transaction_id               = p_add_lc_req->transaction_id;
	p_add_lc_resp->ue_index                     = p_add_lc_req->ue_index;
	p_add_lc_resp->response_code                = response_code;

	p_add_lc_resp->bitmask                      = 0;

	if (p_add_lc_req->bitmask & UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
	{
		p_add_lc_resp->bitmask |= UECC_LLIM_ADD_LC_RESP_SRB2_STATUS_PRESENT;

		p_add_lc_resp->create_srb2_status.lc_id     = p_add_lc_req->
			create_srb2_entity.lc_id;
		if (RRC_NO_ERROR != err_code)
		{
			llim_fill_response_code(
					&p_add_lc_resp->create_srb2_status.response,
					RRC_MODULE_ID,
					err_code);    
		}
		else
		{
			p_add_lc_resp->create_srb2_status.response  = err_code;
		}
	}

	p_add_lc_resp->create_drb_status_counter    = p_add_lc_req->
		create_drb_entity_counter;

	for (drb_index = 0; drb_index < p_add_lc_req->create_drb_entity_counter;
			drb_index++)
	{
		p_add_lc_resp->create_drb_status[drb_index].lc_id =
			p_add_lc_req->create_drb_entity[drb_index].uecc_llim_drb_config.
			drb_config.logical_channel_identity;
		if (RRC_NO_ERROR != err_code)
		{
			llim_fill_response_code(
					&p_add_lc_resp->create_drb_status[drb_index].response,
					RRC_MODULE_ID,
					err_code);    
		}
		else
		{
			p_add_lc_resp->create_drb_status[drb_index].response = err_code;
		}
		p_add_lc_resp->create_drb_status[drb_index].bitmask = 0;
		memset_wrapper(&p_add_lc_resp->create_drb_status[drb_index].s1u_response,
				0, sizeof(p_add_lc_resp->create_drb_status[drb_index].
					s1u_response));
	}

	RRC_LLIM_UT_TRACE_EXIT();
}
/* ERB RELEASE COMMAND START */ 
/******************************************************************************
 *   FUNCTION NAME: fill_uecc_llim_delete_lc_resp
 *   INPUT        : rrc_uecc_llim_delete_lc_resp_t *p_delete_lc_resp
 *                  rrc_response_et                 response_code
 *                  rrc_uecc_llim_delete_lc_req_t  *p_delete_lc_req
 *   OUTPUT       : none
 *   DESCRIPTION:
 *       Function fills UECC_LLIM_DELETE_LC_RESP message with given response_code
 *       according to UECC_LLIM_DELETE_LC_REQ
 *
 *   RETURNS:
 *
 ******************************************************************************/
static void fill_uecc_llim_delete_lc_resp
(
 rrc_uecc_llim_delete_lc_resp_t *p_delete_lc_resp, /* destination */
 rrc_response_et                 response_code,  /* response code */
 rrc_uecc_llim_delete_lc_req_t  *p_delete_lc_req   /* main source */
 )
{
	U16 drb_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_delete_lc_resp);
	RRC_ASSERT(PNULL != p_delete_lc_req);

	p_delete_lc_resp->cell_index                   = p_delete_lc_req->cell_index;
	p_delete_lc_resp->transaction_id               = p_delete_lc_req->
		transaction_id;
	p_delete_lc_resp->ue_index                     = p_delete_lc_req->ue_index;
	p_delete_lc_resp->response_code                = response_code;

	/* Attention: it is first time execute when rrrc_uecc_llim_delete_lc_resp_t
	 * fill with default SUCCESS for all LC */
	if (SUCCESS == response_code)
	{
		p_delete_lc_resp->delete_drb_entity_resp_counter = p_delete_lc_req->
			delete_drb_entity_counter;

		for (drb_index = 0; 
				drb_index < p_delete_lc_req->delete_drb_entity_counter;
				drb_index++)
		{
			p_delete_lc_resp->delete_drb_entity_resp[drb_index].lc_id =
				p_delete_lc_req->delete_drb_entity[drb_index].lc_id;
			p_delete_lc_resp->delete_drb_entity_resp[drb_index].response = 
				response_code;
		}
	}

	RRC_LLIM_UT_TRACE_EXIT();
}
/* ERB RELEASE COMMAND END */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_init_del_ue_op_and_del_ue
 *   INPUT        : rrc_llim_ue_ctx_t       *p_ue_ctx
 *                  uemh_fsm_del_op_root_et del_op_root
 *                  uemh_fsm_state_et       to_be_del_layers
 *                  rrc_ue_index_t          ue_index
 *                  rrc_transaction_id_t    transaction_id
 *                  rrc_llim_gl_ctx_t       *p_rrc_llim_gl_ctx,
 *                  rrc_cell_index_t         cell_index
 *   OUTPUT       : none               
 *   DESCRIPTION  : This function init delete operation and delete ue on lower layers.
 *
 *   RETURNS: 
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_init_del_ue_op_and_del_ue
(
 rrc_llim_ue_ctx_t       *p_ue_ctx,          /* ue context */
 /* specify why we start delete operation */
 uemh_fsm_del_op_root_et del_op_root,
 /* mark layers that should be deleted, usually current_state */
 uemh_fsm_state_et       to_be_del_layers,
 rrc_ue_index_t          ue_index,           /* identify ue */
 rrc_transaction_id_t    transaction_id,     /* identify transaction */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t       *p_rrc_llim_gl_ctx,
 rrc_cell_index_t         cell_index
 )
{
	rrc_uemh_delete_ue_op_param_t *p_delete_ue_op = PNULL;
	rrc_uemh_timer_buf_t guard_timer_data;

	RRC_LLIM_UT_TRACE_ENTER();

	p_ue_ctx->curr_op_param.p_del_ue = (rrc_uemh_delete_ue_op_param_t*)
		rrc_mem_get(sizeof(rrc_uemh_delete_ue_op_param_t));

	if (PNULL == p_ue_ctx->curr_op_param.p_del_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_del_ue is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	memset_wrapper(p_ue_ctx->curr_op_param.p_del_ue,0,
			sizeof(rrc_uemh_delete_ue_op_param_t));
	p_delete_ue_op = p_ue_ctx->curr_op_param.p_del_ue;

	/* Start delete operation. Init operation data */
	p_delete_ue_op->guard_timer                 = PNULL;
	p_delete_ue_op->transaction_id              = transaction_id;
	p_delete_ue_op->ue_index                    = ue_index;
	p_delete_ue_op->to_be_del_layers            = to_be_del_layers;
	p_delete_ue_op->del_op_root                 = del_op_root;
	/* Further initialization is done below in switch */
	p_delete_ue_op->cur_mask_to_be_del_layers   = 0;
	/*SPR_14411_fix Start */
	p_delete_ue_op->del_req_mask_to_lower_layers = RRC_NULL;
        /*Coverity Fix 88089 Start */
	p_delete_ue_op->deletion_proc_complete_status = UEMH_FSM_INVALID;
        /*Coverity Fix 88089 Stop */
	/*SPR_14411_fix Stop */


	/* 1. Set guard timer */
	guard_timer_data.auto_delete        = RRC_TRUE;
	guard_timer_data.target_submodule   = LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index           = ue_index;
	guard_timer_data.uemh_event         = UEMH_EVENT_DELETE_UE_TIMER_EXPIRED;
	guard_timer_data.cell_index         = cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Start timer [LLIM_DELETE_UE_ENTITY_TIMER] %u ms.",
			p_rrc_llim_gl_ctx->delete_ue_duration);

	p_delete_ue_op->guard_timer = rrc_start_timer(  p_rrc_llim_gl_ctx->
			delete_ue_duration,
			&guard_timer_data,
			sizeof(guard_timer_data),
			RRC_FALSE);

	/* 2. Send delete ue on lower layers */
	switch (to_be_del_layers)
	{
		case UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF:

		case UEMH_STATE_UE_ENTITY_IN_SERVICE:
		case UEMH_STATE_W_FOR_CONFIGURE_SECURITY_CNF:

		case UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF:
		case UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF:
		case UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF:
		case UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF:
		case UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF:
		case UEMH_STATE_W_FOR_PDCP_SUSPEND_UE_ENTITY_CNF: 
		case UEMH_STATE_W_FOR_MAC_RESET_UE_ENTITY_CNF:
		case UEMH_STATE_W_FOR_RLC_REESTABLISH_UE_ENTITY_CNF:
		case UEMH_STATE_W_FOR_PDCP_REESTABLISH_UE_ENTITY_CNF:
		case UEMH_STATE_W_FOR_RECONFIG_SECURITY_UE_ENTITY_CNF:
		case UEMH_STATE_W_FOR_PDCP_RESUME_UE_ENTITY_CNF:
		case UEMH_STATE_W_FOR_PHY_CHANGE_CRNTI_CNF:
		case UEMH_STATE_W_FOR_MAC_CHANGE_CRNTI_CNF:
		case UEMH_STATE_W_FOR_RLC_CHANGE_CRNTI_CNF:
		case UEMH_STATE_W_FOR_PDCP_CHANGE_CRNTI_CNF:
		case UEMH_STATE_W_FOR_DEL_ALL_LC_CNF:
			/* SPR 13856 Fix Start */
		case UEMH_STATE_LLIM_LL_ADD_LC_IN_SYNC_ONGOING:
		case UEMH_STATE_LLIM_LL_MODIFY_LC_IN_SYNC_ONGOING:
			/* SPR 13856 Fix Stop */
			{
				/*BUG 604 changes start*/
				if(p_ue_ctx->ho_type != HANDOVER_TYPE_INTRA_CELL)
				{
					rrc_s1u_delete_ue_entity_req_t s1u_delete_ue_entity_req;

					/* Delete on S1-U level: send RRC_S1U_DELETE_UE_ENTITY_REQ */
					s1u_delete_ue_entity_req.ue_index = ue_index;
					rrc_s1u_il_send_rrc_s1u_delete_ue_entity_req(
							&s1u_delete_ue_entity_req, 
							RRC_LLIM_MODULE_ID,
								RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,cell_index),
							transaction_id ,cell_index);

					RRC_ASSERT(UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF < 16);
					p_delete_ue_op->cur_mask_to_be_del_layers |= 1 <<
						UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF;
					/* delete on lower layers: continue */
				}
				/*BUG 604 changes stop*/
			}
			RRC_ASSERT(UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF < 16);
                       /*SPR_14411_fix Start */
                       p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
                       UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF;
                      /*SPR_14411_fix Stop */
			
			/* delete on lower layers: continue */

		case UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF:
			{
				rrc_pdcp_del_ue_entity_req_t pdcp_del_ue_entity_req;

				/* Delete on PDCP level: send RRC_PDCP_DELETE_UE_ENTITY_REQ */
				pdcp_del_ue_entity_req.ue_index = ue_index;
				rrc_pdcp_il_send_rrc_pdcp_del_ue_entity_req(
						&pdcp_del_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,cell_index),
						transaction_id,
						cell_index);
			}
			RRC_ASSERT(UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF < 16);
			/*SPR_16716_START*/
			/* In this case, delete message will not be sent to S1U
			 * but L3 waits for confirmation from PDCP and S1U 
			 * both before sending delete request to RLC. So, setting
			 * S1U response bitmask here. */
			p_delete_ue_op->cur_mask_to_be_del_layers |= 1 << 
				UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF;
			/*SPR_16716_END*/
			/*SPR_14411_fix Start */
			p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
                       UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF;

                       UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_PDCP_DELETE_UE_ENTITY_CNF );
	               break;
	              /*SPR_14411_fix Stop */

			/* delete on lower layers: continue */

		case UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF:
			{
				rrc_rlc_delete_ue_entity_req_t rlc_delete_ue_entity_req;

				/* Delete on RLC level: send RRC_RLC_DELETE_UE_ENTITY_REQ */
				rlc_delete_ue_entity_req.ue_index = ue_index;
				rrc_rlc_il_send_rrc_rlc_delete_ue_entity_req(
						&rlc_delete_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,cell_index),
						transaction_id,
						cell_index);
			}
			RRC_ASSERT(UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF < 16);
			/*SPR_16716_START*/
			/* In this case, delete message will not be sent to S1U, PDCP
			 * but L3 waits for confirmation from S1U, PDCP and RLC
			 * before sending delete request to MAC. So, setting
			 * S1U and PDCP response bitmask here. */
			p_delete_ue_op->cur_mask_to_be_del_layers |= (1 <<
					UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF);
			p_delete_ue_op->cur_mask_to_be_del_layers |= (1 <<
					UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF);
			/*SPR_16716_END*/

			/*SPR_14411_fix Start */
                        p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
                        UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF;
        
	                UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_RLC_DELETE_UE_ENTITY_CNF);
	                break;
	                /*SPR_14411_fix Stop */	
			/* delete on lower layers: continue */

		case UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF:
			{
				rrc_mac_delete_ue_entity_req_t  mac_delete_ue_entity_req;

				/* Delete on MAC level: send RRC_MAC_DELETE_UE_ENTITY_REQ */
				mac_delete_ue_entity_req.ue_index = ue_index;
				rrc_mac_il_send_rrc_mac_delete_ue_entity_req(
						&mac_delete_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,cell_index), 
						transaction_id, cell_index);
			}
			RRC_ASSERT(UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF < 16);
			/*SPR_16716_START*/
			/* In this case, delete message will not be sent to S1U and PDCP 
			 * but L3 waits for confirmation from S1U and PDCP
			 * before sending delete request to MAC. So, setting
			 * S1U and PDCP response bitmask here. */
			p_delete_ue_op->cur_mask_to_be_del_layers |= (1 <<
					UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF);
			p_delete_ue_op->cur_mask_to_be_del_layers |= (1 <<
					UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF);
			/*SPR_16716_END*/
			/*SPR_14411_fix Start */
			p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
				UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF;

			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_MAC_DELETE_UE_ENTITY_CNF);
			break;
			/*SPR_14411_fix Stop */
			/* delete on lower layers: continue */

		case UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF:
			{
				rrc_phy_delete_ue_entity_req_t  phy_delete_ue_entity_req;

				/* Delete on PHY level: send RRC_PHY_DELETE_UE_ENTITY_REQ */
				phy_delete_ue_entity_req.ue_index = ue_index;
				rrc_phy_il_send_rrc_phy_delete_ue_entity_req(
						&phy_delete_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,cell_index),
						transaction_id,
						cell_index);
			}
			RRC_ASSERT(UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF < 16);
			/*SPR_14411_fix Start */
        p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
            UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF;

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_PHY_DELETE_UE_ENTITY_CNF);
	/*SPR_14411_fix Stop */
			break;

		default:
			RRC_ASSERT(0);
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,
					"uemh_fsm_init_del_ue_op_and_del_ue: unexpected state!");
			break;
	}
 /*SPR_14411_fix Start */
//UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF);
    /*SPR_14411_fix Stop */
	

	RRC_LLIM_UT_TRACE_EXIT();
}

/*
 *   UEMH states
 */

/*
 *   UEMH_STATE_IDLE state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_idle_state_create_ue_req
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *    DESCRIPTION  : This function start creating ue on lower layers.
 *       state UEMH_STATE_IDLE; event UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_idle_state_create_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	U32 drb_index = 0;
	rrc_uecc_llim_create_ue_entity_resp_t *p_create_ue_resp = PNULL;
	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_entity_req =
		(rrc_uecc_llim_create_ue_entity_req_t *)p_msg;
	rrc_uemh_timer_buf_t                    guard_timer_data;
	rrc_phy_create_ue_entity_req_t          phy_create_ue_entity_req;
	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param;
	rrc_uecc_llim_create_ue_entity_resp_t create_ue_entity_resp;
	U8 index = RRC_NULL;
	/* coverity_fix_61992 start */
	memset_wrapper(&phy_create_ue_entity_req, 0, sizeof(rrc_phy_create_ue_entity_req_t)); 
	/* coverity_fix_61992 stop */
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_create_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       
	/*Memory Optimization */
	p_ue_ctx->curr_op_param.p_create_ue = (rrc_uemh_create_ue_op_param_t *)
		rrc_mem_get(sizeof(rrc_uemh_create_ue_op_param_t));

	if (PNULL == p_ue_ctx->curr_op_param.p_create_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_create_ue is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	memset_wrapper(&phy_create_ue_entity_req,0,
			sizeof(rrc_phy_create_ue_entity_req_t));
	memset_wrapper(p_ue_ctx->curr_op_param.p_create_ue,0,
			sizeof(rrc_uemh_create_ue_op_param_t));

	/* Special case on init operation */
	p_ue_ctx->curr_op_param.p_create_ue->guard_timer = PNULL;

	p_create_ue_param = &p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue;
	*p_create_ue_param = *p_create_ue_entity_req;

    /*SPR_19066_START*/
    if((UECC_LLIM_CREATE_UE_ENTITY_REQ_HO_TRIGGERED_FLAG & p_create_ue_param->bitmask) 
               && (p_create_ue_param->ho_triggered.ho_trigger))
    /*SPR_19066_END*/
	{
		p_ue_ctx->curr_op_param.p_rcfg_ue = (rrc_uemh_rcfg_ue_op_param_t*)
			rrc_mem_get(sizeof(rrc_uemh_rcfg_ue_op_param_t));
		if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
					"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}

		memset_wrapper(p_ue_ctx->curr_op_param.p_rcfg_ue, 0,
				sizeof(rrc_uemh_rcfg_ue_op_param_t));

		p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure = 
			RRC_LLIM_RECONFIG_HO_CREATE_UE_UECC_TRIGGERED_ROLLBACK_ON_GOING;

		if (!(p_create_ue_param->bitmask & 
					UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT) || 
				!(p_create_ue_param->bitmask & 
					UECC_LLIM_CREATE_DRB_ENTITY_LIST_PRESENT))
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,
					"HO Triggered but SRB2 or DRB info absent !!!");
			/* 2. send UECC_LLIM_CREATE_UE_ENTITY_RESP */
			create_ue_entity_resp.cell_index        = p_create_ue_param->cell_index;
			create_ue_entity_resp.transaction_id    = p_create_ue_param->
				transaction_id;
			create_ue_entity_resp.ue_index          = p_create_ue_param->ue_index;
			create_ue_entity_resp.response_code     = RRC_LLIM_INCORRECT_DATA_PASSED;

			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_create_ue_entity_req->ue_index),
					UECC_LLIM_CREATE_UE_ENTITY_RESP,
					sizeof(create_ue_entity_resp),
					&create_ue_entity_resp);

			rrc_mem_free (p_ue_ctx->curr_op_param.p_create_ue);
			p_ue_ctx->curr_op_param.p_create_ue = PNULL;
			rrc_mem_free (p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			return;
		}
	}

	if (p_create_ue_param->bitmask & 
			UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
	{
		p_ue_ctx->curr_op_param.p_create_ue->num_srb_to_create = 2;
	}
	else
	{
		p_ue_ctx->curr_op_param.p_create_ue->num_srb_to_create = 1;
	}
	p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create =
		(U8)p_create_ue_param->create_drb_entity_info.create_drb_entity_counter;

	RRC_LLIM_TRACE(RRC_INFO, "[ueid %d] NUM_DRB_TO_CREATE %d create_drb_entity_counter %d",
			p_ue_ctx->ue_index, p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create,
			p_create_ue_param->create_drb_entity_info.create_drb_entity_counter );

	p_create_ue_resp = 
		&p_ue_ctx->curr_op_param.p_create_ue->create_ue_resp;

	/* Init uecc llim create ue entity resp */
	memset_wrapper(p_create_ue_resp,0,
			sizeof(rrc_uecc_llim_create_ue_entity_resp_t));
	for (drb_index = 0; drb_index < 
			RRC_UECC_LLIM_MAX_CREATE_DRB; drb_index++)
	{
		p_create_ue_resp->create_drb_status[drb_index].response =
			RRC_SUCCESS;
	}

	/* 1. set guard timer */
	guard_timer_data.auto_delete = RRC_TRUE;
	guard_timer_data.target_submodule= LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index= p_create_ue_param->ue_index;
	guard_timer_data.uemh_event= UEMH_EVENT_CREATE_UE_TIMER_EXPIRED;
	guard_timer_data.cell_index= p_create_ue_entity_req->cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Start timer [LLIM_CREATE_UE_ENTITY_TIMER] %u ms.",
			p_rrc_llim_gl_ctx->create_ue_duration);

	p_ue_ctx->curr_op_param.p_create_ue->guard_timer =
		rrc_start_timer(p_rrc_llim_gl_ctx->create_ue_duration, &guard_timer_data
				, sizeof(guard_timer_data), RRC_FALSE);

	memset_wrapper(&phy_create_ue_entity_req, RRC_NULL, sizeof(rrc_phy_create_ue_entity_req_t));
	/* 2. send RRC_PHY_CREATE_UE_ENTITY_REQ */
	phy_create_ue_entity_req.ue_index = p_create_ue_param->
		ue_index;
	phy_create_ue_entity_req.physical_config_dedicated = p_create_ue_param->
		physical_config_dedicated;

	if (p_create_ue_param->bitmask & UECC_LLIM_CREATE_UE_ENTITY_SCELL_CONFIG_PRESENT)
	{
		/* Coverity Fix 62229 Start */
		if (p_create_ue_param->scell_config.bitmask &
				RRM_SCELL_ADD_MOD_LIST_PRESENT)
			/* Coverity Fix 62229 End */
		{
			phy_create_ue_entity_req.bitmask |= RRC_PHY_CREATE_SCELL_CONFIG_PRESENT;

			phy_create_ue_entity_req.rrc_phy_scell_config_list.count = 
				p_create_ue_param->scell_config.scell_add_mod_list.count;

			for (index = RRC_NULL; index < phy_create_ue_entity_req.rrc_phy_scell_config_list.
					count; index++)
			{
				phy_create_ue_entity_req.rrc_phy_scell_config_list.rrc_phy_scell_config[index].
					cell_index = p_create_ue_param->scell_config.scell_add_mod_list.
					rrc_scell_to_add_mod[index].cell_index;

				if (p_create_ue_param->scell_config.scell_add_mod_list.
						rrc_scell_to_add_mod[index].bitmask & 
						RRM_SCELL_ADD_MOD_RADIO_RES_CONFIG_DEDICATED_SCELL_PRESENT)
				{
					phy_create_ue_entity_req.rrc_phy_scell_config_list.rrc_phy_scell_config[index].
						bitmask |= RRC_PHY_CONFIG_DEDICATED_SCELL_PRESENT;

					l3_memcpy_wrapper(&phy_create_ue_entity_req.rrc_phy_scell_config_list.
							rrc_phy_scell_config[index].radio_res_config_dedicated_scell,
							&p_create_ue_param->scell_config.scell_add_mod_list.
							rrc_scell_to_add_mod[index].radio_res_config_dedicated_scell,
							sizeof(rrc_radio_res_config_dedicated_scell_t));
				}

				phy_create_ue_entity_req.rrc_phy_scell_config_list.rrc_phy_scell_config[index].
					bitmask |= RRC_PHY_CONFIG_OPERATION_LIST_PRESENT ;

				phy_create_ue_entity_req.rrc_phy_scell_config_list.rrc_phy_scell_config[index].
					operation_type = ADD_SCELL;
			}
		}
	}


	/* Set RNTI */
	phy_create_ue_entity_req.rnti = p_create_ue_param->crnti;

	rrc_phy_il_send_rrc_phy_create_ue_entity_req(&phy_create_ue_entity_req,
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,p_create_ue_param->cell_index), 
			p_create_ue_param->transaction_id,
			p_create_ue_param->cell_index);

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF);

	RRC_LLIM_UT_TRACE_EXIT();
}



/* SRS Start */
/*****************************************************************************
 * Function Name  : fill_srs_dedicated_config_info 
 * Inputs         : rrc_mac_srs_dedicated_setup_info_t    *srs_setup_info
 *                  rrc_phy_sounding_rs_ul_config_dedicated_param_t *phy_cfg
 * Outputs        : None
 * Returns        : None
 * Description    : This function fills thr srs dedeicated config info in to to 
 *                  srs_setup_info
 ********************************************************************************/
static void fill_srs_dedicated_config_info(
		rrc_mac_srs_dedicated_setup_info_t    *srs_setup_info,
		rrc_phy_sounding_rs_ul_config_dedicated_param_t    *phy_cfg)
{

	RRC_LLIM_UT_TRACE_ENTER();

	srs_setup_info->srs_bandwidth =
		phy_cfg->      
		srs_bandwidth;

	srs_setup_info->srs_hopping_bandwidth =
		phy_cfg->
		srs_hopping_bandwidth;

	srs_setup_info->freq_domain_position =
		phy_cfg->
		frequency_domain_position;

	srs_setup_info->duration =
		phy_cfg->
		duration;

	srs_setup_info->srs_config_index =
		phy_cfg->
		srs_configuration_index;

	srs_setup_info->transmission_comb =
		phy_cfg->
		transmission_comb;

	srs_setup_info->cyclic_shift =
		phy_cfg->
		cyclic_shift;

	RRC_LLIM_UT_TRACE_EXIT();

}

/* SRS Stop */

/******************************************************************************
 *   FUNCTION NAME: rrc_mac_fill_mac_main_long_drx_cycle_start_offset
 *
 *   DESCRIPTION:
 *       Function fills long_drx_cycle_start_offset in mac_main_config
 *
 *   RETURNS: None
 ******************************************************************************/
static void rrc_mac_fill_mac_main_long_drx_cycle_start_offset(
		rrc_long_drx_cycle_start_offset_t *p_long_drx_cycle_start_offset,
		rrc_mac_drx_setup_config_info_t   *p_drx_setup_config_info)
{
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_long_drx_cycle_start_offset);
	RRC_ASSERT(PNULL != p_drx_setup_config_info);

	if (p_long_drx_cycle_start_offset->bitmask & 
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_10_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_10; 

		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_10;
	}
	else if(p_long_drx_cycle_start_offset->bitmask &
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_20_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_20; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_20;
	}
	else if(p_long_drx_cycle_start_offset->bitmask &
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_32_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_32; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_32;
	}
	else if(p_long_drx_cycle_start_offset->bitmask &
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_40_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_40; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_40;
	}
	else if(p_long_drx_cycle_start_offset->bitmask &
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_64_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_64; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_64;
	}
	else if(p_long_drx_cycle_start_offset->bitmask &
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_80_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_80; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_80;
	}
	else if(p_long_drx_cycle_start_offset->bitmask &
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_128_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_128; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_128;
	}
	else if(p_long_drx_cycle_start_offset->bitmask &
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_160_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_160; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_160;
	}
	else if(p_long_drx_cycle_start_offset->bitmask &
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_256_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_256; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_256;
	}
	else if (p_long_drx_cycle_start_offset->bitmask &
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_320_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_320; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_320;
	}
	else if (p_long_drx_cycle_start_offset->bitmask & 
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_512_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_512; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_512;
	}
	else if (p_long_drx_cycle_start_offset->bitmask & 
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_640_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_640; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_640;
	}
	else if (p_long_drx_cycle_start_offset->bitmask & 
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_1024_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_1024; 
		p_drx_setup_config_info->drx_start_offset=  
			p_long_drx_cycle_start_offset->sf_1024;
	}
	else if (p_long_drx_cycle_start_offset->bitmask & 
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_1280_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_1280; 

		p_drx_setup_config_info->drx_start_offset = 
			p_long_drx_cycle_start_offset->sf_1280;
	}
	else if (p_long_drx_cycle_start_offset->bitmask & 
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_2048_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_2048; 

		p_drx_setup_config_info->drx_start_offset = 
			p_long_drx_cycle_start_offset->sf_2048;
	}
	else if (p_long_drx_cycle_start_offset->bitmask & 
			RRC_LONG_DRX_CYCLE_START_OFFSET_SF_2560_PRESENT)
	{
		p_drx_setup_config_info->long_drx_cycle =  RRC_MAC_SF_2560; 

		p_drx_setup_config_info->drx_start_offset = 
			p_long_drx_cycle_start_offset->sf_2560;
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: rrc_mac_fill_mac_main_config
 *
 *   DESCRIPTION:
 *       Function fills mac_main_config structure
 *
 *   RETURNS: None
 ******************************************************************************/
static void rrc_mac_fill_mac_main_config(
		rrc_uecc_llim_create_ue_entity_req_t  *p_create_ue_param,
		rrc_mac_create_ue_entity_req_t        *p_mac_create_ue_entity_req )
{
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_create_ue_param);
	RRC_ASSERT(PNULL != p_mac_create_ue_entity_req);

	p_mac_create_ue_entity_req->ue_index = p_create_ue_param->
		ue_index;

	p_mac_create_ue_entity_req->optional_elems_present |=
		RRC_MAC_ADD_UE_INFO_PRESENT;
	p_mac_create_ue_entity_req->add_ue_info.optional_elems_present = 0;

	p_mac_create_ue_entity_req->add_ue_info.crnti =
		p_create_ue_param->crnti;
	p_mac_create_ue_entity_req->add_ue_info.ue_priority =
		p_create_ue_param->mac_config.mac_main_config_extensions.
		ue_priority;
	p_mac_create_ue_entity_req->add_ue_info.dl_num_harq_process =
		p_create_ue_param->mac_config.mac_main_config_extensions.
		dl_num_harq_process;

	p_mac_create_ue_entity_req->add_ue_info.dl_i_mcs =
		p_create_ue_param->mac_config.mac_main_config_extensions.
		dl_i_mcs;

	p_mac_create_ue_entity_req->add_ue_info.dl_max_rb =
		p_create_ue_param->mac_config.mac_main_config_extensions.dl_max_rb;

	p_mac_create_ue_entity_req->add_ue_info.ul_i_mcs =
		p_create_ue_param->mac_config.mac_main_config_extensions.
		ul_i_mcs;

	p_mac_create_ue_entity_req->add_ue_info.transmission_mode =
		(U8)( p_create_ue_param->physical_config_dedicated.antenna_information.
				antenna_information_explicit_value.transmission_mode + 1);
	/*Bug_12240_fix_start*/
	if ((p_create_ue_param->physical_config_dedicated.
				bitmask & RRC_PHY_ANTENNA_INFO_R10_PRESENT) &&
			(p_create_ue_param->physical_config_dedicated.
			 antenna_info_r10.bitmask & 
			 RRC_ANTENNA_INFO_R10_EXPLICIT_VALUE_PRESENT))
	{
		p_mac_create_ue_entity_req->add_ue_info.transmission_mode =
			(U8)( p_create_ue_param->physical_config_dedicated.
					antenna_info_r10.explicit_value.transmission_mode + 1);
	}
	/*Bug_12240_fix_stop*/

	p_mac_create_ue_entity_req->add_ue_info.num_of_layer =
		p_create_ue_param->mac_config.mac_main_config_extensions.
		num_of_layer;
	p_mac_create_ue_entity_req->add_ue_info.code_book_index =
		p_create_ue_param->mac_config.mac_main_config_extensions.
		code_book_index;

	p_mac_create_ue_entity_req->add_ue_info.max_ul_harq_tx =
		p_create_ue_param->mac_config.mac_main_config_extensions.
		max_ul_harq_tx;

	if (p_create_ue_param->mac_config.bitmask &
			RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT)
	{
		p_mac_create_ue_entity_req->add_ue_info.time_allignment_timer =
			p_create_ue_param->mac_config.mac_main_config.
			time_alignment_timer_dedicated;

		/* Rel9 Upgrade Changes Start */
		if (p_create_ue_param->mac_config.mac_main_config.bitmask & 
				RRC_MAC_MAIN_CONFIG_SR_PROHIBIT_TIMER_R9_PRESENT)
		{
			p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
				RRC_MAC_SR_PROHBIT_TIMER_VALUE_V920_PRESENT;

			p_mac_create_ue_entity_req->add_ue_info.sr_prohbit_timer_value_v920.
				sr_prohibit_timer =
				p_create_ue_param->mac_config.mac_main_config.sr_prohibit_timer_r9;
		}

		/* Rel9 Upgrade Changes Stop */
	}

	if (RRM_MAC_MAIN_CONFIG_EXT_USER_LOCATION_TYPE_PRESENT &
			p_create_ue_param->mac_config.mac_main_config_extensions.bitmask)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_USER_LOCATION_TYPE_PRESENT;

		/* Fill USER_LOCATION_TYPE if present */
		p_mac_create_ue_entity_req->add_ue_info.user_location_type.
			user_location_type =
			p_create_ue_param->mac_config.mac_main_config_extensions.user_location_type;
	}

	/* Add ue info :drx config info */
	if ((p_create_ue_param->bitmask & 
				UECC_LLIM_CREATE_UE_ENTITY_REQ_MAC_CONFIG_PRESENT) && 
			(p_create_ue_param->mac_config.bitmask &  
			 RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
			(p_create_ue_param->mac_config.mac_main_config.bitmask &
			 RRC_MAC_MAIN_CONFIG_DRX_CONFIG_PRESENT))
	{
		/* Add ue info - drx_config_info present */
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_DRX_CONFIG_INFO_PRESENT;

		/* 1- for setup */
		if((1 == p_create_ue_param->mac_config.mac_main_config.
					drx_config.drx_config_type) && 
				(p_create_ue_param->mac_config.mac_main_config.
				 drx_config.bitmask & RRC_DRX_CONFIG_PARAM_PRESENT))
		{
			/*set bitmask - but not present in message */
			p_mac_create_ue_entity_req->add_ue_info.drx_config_info.bitmask |=
				RRC_DRX_CONFIG_PARAM_PRESENT;

			/* since drx_config_type is 1 */ 
			p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
				drx_config_type = 1;

			p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
				drx_setup_config_info.on_duration_timer = 
				p_create_ue_param->mac_config.mac_main_config.drx_config.
				drx_config_param.on_duration_timer;

			p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
				drx_setup_config_info.drx_inactivity_timer = 
				p_create_ue_param->mac_config.mac_main_config.drx_config.
				drx_config_param.drx_inactivity_timer;

			p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
				drx_setup_config_info.drx_retransmission_timer = 
				p_create_ue_param->mac_config.mac_main_config.drx_config.
				drx_config_param.drx_retransmission_timer;

			rrc_mac_fill_mac_main_long_drx_cycle_start_offset(
					&p_create_ue_param->mac_config.mac_main_config.drx_config.
					drx_config_param.long_drx_cycle_start_offset,
					&p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
					drx_setup_config_info);

			/* check short drx config present */
			if (p_create_ue_param->mac_config.mac_main_config.drx_config.
					drx_config_param.bitmask & RRC_DRX_CONFIG_SHORT_DRX_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
					drx_setup_config_info.bitmask |=
					RRC_MAC_DRX_SETUP_CONFIG_SHORT_DRX_CONFIG_PRESENT;

				p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
					drx_setup_config_info.short_drx.short_drx_cycle = 
					p_create_ue_param->mac_config.mac_main_config.drx_config.
					drx_config_param.short_drx.short_drx_cycle;

				p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
					drx_setup_config_info.short_drx.short_drx_cycle_timer = 
					p_create_ue_param->mac_config.mac_main_config.drx_config.
					drx_config_param.short_drx.short_drx_cycle_timer;
			}
			/* DRX_MAC_CE_CMD  Start */ 
			if (p_create_ue_param->mac_config.mac_main_config.drx_config.
					drx_config_param.bitmask & RRC_DRX_CONFIG_DRX_MAC_CE_CMD_TRIGGER_INFO_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
					drx_setup_config_info.bitmask |=
					RRC_MAC_DRX_SETUP_CONFIG_DRX_MAC_CE_CMD_TRIGGER_INFO_PRESENT;

				p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
					drx_setup_config_info.mac_ce_cmd_l2_trigger_info.drx_mac_ce_timer = 
					p_create_ue_param->mac_config.mac_main_config.drx_config.
					drx_config_param.drx_mac_ce_cmd_trigger_info.drx_mac_ce_timer;

				p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
					drx_setup_config_info.mac_ce_cmd_l2_trigger_info.drx_mac_ce_cmd_threshold = 
					p_create_ue_param->mac_config.mac_main_config.drx_config.
					drx_config_param.drx_mac_ce_cmd_trigger_info.drx_mac_ce_cmd_threshold;
			}
			/* DRX_MAC_CE_CMD  End */
		}
		else /* for release */
		{
			/* since drx_config_type is 0 */
			p_mac_create_ue_entity_req->add_ue_info.drx_config_info.
				drx_config_type = 0;
		}
	}
	/* UL_MU_MIMO Start */
	if (p_create_ue_param->mac_config.mac_main_config_extensions.bitmask &
			RRM_MAC_MAIN_CONFIG_EXT_UL_MU_MIMO_INFO_PRESENT)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_UL_MU_MIMO_INFO_PRESENT;

		/* Fill UL_MU_MIMO_INFO if present */
		p_mac_create_ue_entity_req->add_ue_info.ul_mu_mimo_info.
			ul_mu_mimo_status = p_create_ue_param->mac_config.mac_main_config_extensions.
			ul_mu_mimo_status;
	}
	/* UL_MU_MIMO Stop */

	/* min_ue_power start */
	if (p_create_ue_param->mac_config.mac_main_config.bitmask &
			RRC_MAC_MAIN_CONFIG_PHR_CONFIG_PRESENT)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_ADD_UE_PHR_TIMER_CONFIG_PRESENT;
		if (p_create_ue_param->mac_config.mac_main_config.phr_config.bitmask &
				RRC_PHR_CONFIG_PARAM_PRESENT)
		{  
			p_mac_create_ue_entity_req->add_ue_info.phr_timer_config.optional_elems_present |=
				RRC_MAC_PHR_TIMER_INFO_PRESENT;
			/* PHR setup */
			p_mac_create_ue_entity_req->add_ue_info.phr_timer_config.phrTimerConfigType =
				1;
			p_mac_create_ue_entity_req->add_ue_info.phr_timer_config.phrTimerInfo.periodicPHRTimer = 
				p_create_ue_param->mac_config.mac_main_config.phr_config.phr_config_param.
				periodic_phr_timer;

			p_mac_create_ue_entity_req->add_ue_info.phr_timer_config.phrTimerInfo.prohibitPHRTimer = 
				p_create_ue_param->mac_config.mac_main_config.phr_config.phr_config_param.
				prohibit_phr_timer;
		}
		else
		{
			/* PHR Release */
			p_mac_create_ue_entity_req->add_ue_info.phr_timer_config.phrTimerConfigType = RRC_NULL;
		}
	}

	if (p_create_ue_param->mac_config.mac_main_config_extensions.bitmask &
			RRM_MAC_MAIN_CONFIG_EXT_MIN_UE_POWER_PRESENT)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_MIN_UE_POWER_PRESENT;

		p_mac_create_ue_entity_req->add_ue_info.min_ue_power.minUePower = 
			p_create_ue_param->mac_config.mac_main_config_extensions.min_ue_power;
	}
	/* min_ue_power stop */

	/* eICIC ho changes start */
	if(p_create_ue_param->mac_config.mac_main_config_extensions.bitmask &
			RRM_MAC_MAN_CONFIG_EXT_DL_INTERFERENCE_INFO_PRESENT)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_DL_INTERFERENCE_INFO_PRESENT;

		p_mac_create_ue_entity_req->add_ue_info.rrc_mac_dl_interference_info.
			severe_dl_control_channel_interference =
			p_create_ue_param->mac_config.mac_main_config_extensions.dl_interference_info;

	}
	/* eICIC ho changes stop */

    /* SPR 21958 PUSCH RAT1 Support Start */
    if (p_create_ue_param->mac_config.mac_main_config.bitmask &
		    RRC_MAC_MAIN_CONFIG_UPLINK_RAT1_SUPPORT_INFO_PRESENT)
    {
        RRC_LLIM_TRACE(RRC_INFO,"is_uplink_rat1_supported value[%d]",p_create_ue_param->mac_config.mac_main_config.is_uplink_rat1_supported);

        p_mac_create_ue_entity_req->optional_elems_present |=
            RRC_MAC_ADD_RAT1_INFO_PRESENT;
        p_mac_create_ue_entity_req->uplink_rat1_info.is_uplink_rat1_supported =
            p_create_ue_param->mac_config.mac_main_config.is_uplink_rat1_supported;
    }
    /* SPR 21958 PUSCH RAT1 Support End */
	/* Fill pc_max */
	p_mac_create_ue_entity_req->add_ue_info.pc_max =
		p_create_ue_param->mac_config.mac_main_config_extensions.pc_max;

	/* Fill p_a  */
	p_mac_create_ue_entity_req->add_ue_info.p_a =
		p_create_ue_param->physical_config_dedicated.pdsch_configuration_dedicated.
		p_a;
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: rrc_mac_fill_phy_config_pdcch_config
 *
 *   DESCRIPTION:
 *       Function fills phy_config_dedicated PDCCH Config parameters
 *
 *   RETURNS: None
 ******************************************************************************/
static void rrc_mac_fill_phy_config_pdcch_config(
		rrc_uecc_llim_create_ue_entity_req_t  *p_create_ue_param,
		rrc_mac_create_ue_entity_req_t        *p_mac_create_ue_entity_req )
{
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_create_ue_param);
	RRC_ASSERT(PNULL != p_mac_create_ue_entity_req);

	/* Fill TPC_PDCCH_CONFIG_PUCCH if present */
	if (RRC_PHY_TPC_PDCCH_CONFIG_PUCCH_PRESENT &
			p_create_ue_param->physical_config_dedicated.bitmask)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_TPC_PDCCH_CONFIG_PUCCH_PRESENT;

		if (RRC_PHY_TPC_PDCCH_CONFIG_PARAM_PRESENT &
				p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pucch.bitmask)
		{
			p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pucch.release =
				RRC_FALSE; /* represents FALSE */

			p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pucch.bitmask =
				RRC_MAC_TPC_RNTI_INFO_PRESENT;

			rrc_unpack_U16(
					&p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.tpcRnti,
					p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
					tpc_rnti);

			if (TPC_INDEX_FORMAT_3_PRESENT &
					p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
					tpc_index.bitmask)
			{
				p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.tpcIndex =
					p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
					tpc_index.index_of_format3;

				p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.isConfiguredForDci3Or3A
					= DCI_FORMAT_3;  /* Configured for DCI 3 */
			}

			if (TPC_INDEX_FORMAT_3A_PRESENT &
					p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
					tpc_index.bitmask)
			{
				p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.tpcIndex =
					p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
					tpc_index.index_of_format3a;

				p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.isConfiguredForDci3Or3A
					= DCI_FORMAT_3A; /* Configured for DCI 3A */
			}

		}
		else
		{
			p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pucch.release =
				RRC_TRUE; /* represents TRUE */
		}
	}

	/* Fill TPC_PDCCH_CONFIG_PUSCH if present */
	if (RRC_PHY_TPC_PDCCH_CONFIG_PUSCH_PRESENT &
			p_create_ue_param->physical_config_dedicated.bitmask)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_TPC_PDCCH_CONFIG_PUSCH_PRESENT;

		if (RRC_PHY_TPC_PDCCH_CONFIG_PARAM_PRESENT &
				p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pusch.bitmask)
		{
			p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pusch.release =
				RRC_FALSE; /* represents FALSE */

			p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pusch.bitmask =
				RRC_MAC_TPC_RNTI_INFO_PRESENT;

			rrc_unpack_U16(
					&p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.tpcRnti,
					p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
					tpc_rnti);

			if (TPC_INDEX_FORMAT_3_PRESENT &
					p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
					tpc_index.bitmask)
			{
				p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.tpcIndex =
					p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
					tpc_index.index_of_format3;

				p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.isConfiguredForDci3Or3A
					= DCI_FORMAT_3;  /* Configured for DCI 3 */
			}

			if (TPC_INDEX_FORMAT_3A_PRESENT &
					p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
					tpc_index.bitmask)
			{
				p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.tpcIndex =
					p_create_ue_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
					tpc_index.index_of_format3a;

				p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.isConfiguredForDci3Or3A
					= DCI_FORMAT_3A; /* Configured for DCI 3A */
			}

		}
		else
		{
			p_mac_create_ue_entity_req->add_ue_info.tpc_pdcch_config_pusch.release =
				RRC_TRUE; /* represents TRUE */
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: rrc_mac_fill_phy_config_dedicated
 *
 *   DESCRIPTION:
 *       Function fills  phy_config_dedicated structure
 *
 *   RETURNS: None
 ******************************************************************************/
static void rrc_mac_fill_phy_config_dedicated(
		rrc_uecc_llim_create_ue_entity_req_t  *p_create_ue_param,
		rrc_mac_create_ue_entity_req_t        *p_mac_create_ue_entity_req )
{
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_create_ue_param);
	RRC_ASSERT(PNULL != p_mac_create_ue_entity_req);

	if (p_create_ue_param->physical_config_dedicated.bitmask &
			RRC_PHY_SCHEDULING_REQUEST_CONFIG_PRESENT)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_SR_CONFIG_INFO_PRESENT;

		fill_mac_sr_config_info(&p_mac_create_ue_entity_req->add_ue_info.
				sr_config_info,
				&p_create_ue_param->physical_config_dedicated.
				scheduling_request_config);
	}

	if (p_create_ue_param->physical_config_dedicated.bitmask &
			RRC_PHY_CQI_REPORTING_PRESENT)
	{
		if ((p_create_ue_param->physical_config_dedicated.
					cqi_reporting.bitmask & 
					RRC_PHY_CQI_REPORTING_PERIODIC_PRESENT) || 
				(p_create_ue_param->physical_config_dedicated.
				 cqi_reporting.bitmask &
				 RRC_PHY_CQI_REPORTING_MODE_APERIODIC_PRESENT))
		{    
			p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
				RRC_MAC_CQI_INFO_PRESENT;

			fill_mac_cqi_info(
					&p_mac_create_ue_entity_req->add_ue_info.cqi_info,
					&p_create_ue_param->
					physical_config_dedicated.cqi_reporting);
		}
	}

	/* Rel9 Upgrade Changes Start */
	if (p_create_ue_param->physical_config_dedicated.bitmask &
			RRC_PHY_CQI_REPORT_CONFIG_V920_PRESENT) 
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_CQI_INFO_PRESENT;

		p_mac_create_ue_entity_req->add_ue_info.cqi_info.optional_elems_present |=
			RRC_MAC_CQI_REPORT_CONFIG_V920_PRESENT;

		if (p_create_ue_param->physical_config_dedicated.cqi_report_config_v920.
				bitmask &
				RRC_PHY_CQI_MASK_R9_PRESENT)
		{
			p_mac_create_ue_entity_req->add_ue_info.cqi_info.cqi_report_config_v920.
				optional_elems_present |= 
				RRC_MAC_CQI_REPORT_CONFIG_CQI_MASK_R9_PRESENT;
			/* SPR 14459 Fix start */

			p_mac_create_ue_entity_req->add_ue_info.cqi_info.cqi_report_config_v920.
				rrc_mac_cqi_mask_r9.cqi_mask_r9 = 
				(U8)(p_create_ue_param->physical_config_dedicated.cqi_report_config_v920.
						cqi_mask_r9 );
			/* SPR 14459 Fix end */
		}

		if (p_create_ue_param->physical_config_dedicated.cqi_report_config_v920.
				bitmask &
				RRC_PHY_PMI_RI_REPORT_R9_PRESENT)
		{
			p_mac_create_ue_entity_req->add_ue_info.cqi_info.cqi_report_config_v920.
				optional_elems_present |= 
				RRC_MAC_CQI_REPORT_CONFIG_PMI_RI_REPORT_R9_PRESENT;

			/* SPR 14459 Fix start */
			p_mac_create_ue_entity_req->add_ue_info.cqi_info.cqi_report_config_v920.
				rrc_mac_pmi_ri_report_r9.pmi_ri_report_r9 =
				(U8)(p_create_ue_param->physical_config_dedicated.cqi_report_config_v920.
						pmi_ri_report_r9 );
			/* SPR 14459 Fix End */
		}
	}
	if (p_create_ue_param->physical_config_dedicated.bitmask &
			RRC_PHY_CQI_REPORT_CONFIG_R10_PRESENT)
	{
		if((p_create_ue_param->physical_config_dedicated.
					cqi_report_config_r10.bitmask &
					RRC_PHY_CQI_REPORT_CONFIG_R10_REPORT_APERIODIC_R10_PRESENT) ||
				(p_create_ue_param->physical_config_dedicated.
				 cqi_report_config_r10.bitmask &
				 RRC_PHY_CQI_REPORT_CONFIG_R10_REPORT_PERIODIC_R10_PRESENT))
		{
			p_mac_create_ue_entity_req->add_ue_info.
				optional_elems_present |=
				RRC_MAC_CQI_INFO_PRESENT;

			fill_mac_cqi_info_r10(
					&p_mac_create_ue_entity_req->
					add_ue_info.cqi_info,
					&p_create_ue_param->physical_config_dedicated.
					cqi_report_config_r10);
		}
	}

	if (RRC_PHY_PUSCH_CONFIGURATION_DEDICATED_PRESENT &
			p_create_ue_param->physical_config_dedicated.bitmask)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_PUSCH_CONFIG_INFO_PRESENT;

		fill_mac_pusch_config_info(
				&p_mac_create_ue_entity_req->add_ue_info.pusch_config_info,
				&p_create_ue_param->physical_config_dedicated.pusch_configuration_dedicated);
	}

	/***** TDD changes start *****/
	if (p_create_ue_param->physical_config_dedicated.bitmask &
			RRC_PHY_PUCCH_CONFIGURATION_DEDICATED_PRESENT)
	{

		if (RRC_PHY_TDD_ACK_NACK_FEEDBACK_MODE_PRESENT &
				p_create_ue_param->physical_config_dedicated.
				pucch_configuration_dedicated.bitmask )
		{
			RRC_LLIM_TRACE(RRC_INFO,"TDD ack nack feedback mode present during"\
					"UE admission");
			p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
				RRC_MAC_TDD_ACK_NACK_FEEDBACK_MODE_PRESENT;

			p_mac_create_ue_entity_req->add_ue_info.mac_tdd_ack_nack_feedback_mode.
				tdd_ack_nack_feedback_mode =
				p_create_ue_param->physical_config_dedicated.
				pucch_configuration_dedicated.tdd_ack_nack_feedback_mode;
		}
	}
	/***** TDD changes stop *****/

	/* CBSR Changes Start */
	if ((p_create_ue_param->bitmask &
				UECC_LLIM_CREATE_UE_ENTITY_PHY_CONFIG_DEDICATED_PRESENT) &&
			(p_create_ue_param->physical_config_dedicated.bitmask &
			 RRC_PHY_ANTENNA_INFORMATION_PRESENT) &&
			(p_create_ue_param->physical_config_dedicated.antenna_information.
			 bitmask &
			 RRC_PHY_ANTENNA_INFORMATION_EXPLICIT_VALUE_PRESENT) &&
			(p_create_ue_param->physical_config_dedicated.antenna_information.
			 antenna_information_explicit_value.bitmask & 
			 RRC_PHY_CODEBOOK_SUBSET_RESTRICTION_PRESENT))
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_CODEBOOK_SUBSET_RESTRICTION_PRESENT;

		p_mac_create_ue_entity_req->add_ue_info.codebook_subset_restriction.
			cbsr_type =
			(U8)p_create_ue_param->physical_config_dedicated.antenna_information.
			antenna_information_explicit_value.codebook_subset_restriction.
			type;

		l3_memcpy_wrapper(p_mac_create_ue_entity_req->add_ue_info.codebook_subset_restriction.
				cbsr_value,
				p_create_ue_param->physical_config_dedicated.antenna_information.
				antenna_information_explicit_value.codebook_subset_restriction.
				value,
				sizeof(p_mac_create_ue_entity_req->add_ue_info.codebook_subset_restriction.
					cbsr_value));
	}

	/*Bug_12240_fix_start*/
	if ((p_create_ue_param->bitmask &
				UECC_LLIM_CREATE_UE_ENTITY_PHY_CONFIG_DEDICATED_PRESENT) &&
			(p_create_ue_param->physical_config_dedicated.bitmask &
			 RRC_PHY_ANTENNA_INFO_R10_PRESENT) &&
			(p_create_ue_param->physical_config_dedicated.antenna_info_r10.
			 bitmask & RRC_ANTENNA_INFO_R10_EXPLICIT_VALUE_PRESENT) &&
			(p_create_ue_param->physical_config_dedicated.antenna_info_r10.
			 explicit_value.bitmask & 
			 RRM_CODEBOOK_SUBSET_RESTRICTION_PRESENT))
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_ADD_CODEBOOK_SUBSET_RESTRICTION_V1020_PRESENT;

		p_mac_create_ue_entity_req->add_ue_info.
			rrc_mac_codebook_subset_restriction_v1020.cbsr_type =
			rrc_calculate_cbsr_type(p_create_ue_param->
					physical_config_dedicated.antenna_info_r10.explicit_value.
					codebook_subset_restriction_r10.num_bits,
					p_create_ue_param->physical_config_dedicated.
					antenna_info_r10.explicit_value.transmission_mode);

		l3_memcpy_wrapper(p_mac_create_ue_entity_req->add_ue_info.
				rrc_mac_codebook_subset_restriction_v1020.cbsr_value,
				p_create_ue_param->physical_config_dedicated.antenna_info_r10.
				explicit_value.codebook_subset_restriction_r10.value,
				CBSR_MAX_VALUE_V1020);

	}
	/*Bug_12240_fix_stop*/

	/* SRS Start */
	if ((p_create_ue_param->bitmask &
				UECC_LLIM_CREATE_UE_ENTITY_PHY_CONFIG_DEDICATED_PRESENT) &&
			(p_create_ue_param->physical_config_dedicated.bitmask &
			 RRC_PHY_SOUNDING_RS_UL_CONFIG_DEDICATED_PRESENT))
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_SRS_DEDICATED_CONFIG_PRESENT;
		if(p_create_ue_param->physical_config_dedicated.
				sounding_rs_ul_config_dedicated.bitmask &
				RRC_PHY_SOUNDING_RS_UL_CONFIG_DEDICATED_PARAM_PRESENT)
		{

			p_mac_create_ue_entity_req->add_ue_info.srs_dedicated_config.optional_elems_present |= 
				RRC_MAC_SRS_DEDICATED_SETUP_INFO_PRESENT;

			p_mac_create_ue_entity_req->add_ue_info.srs_dedicated_config.config_type = 1;

			fill_srs_dedicated_config_info(
					&p_mac_create_ue_entity_req->add_ue_info.srs_dedicated_config.srs_dedicated_setup_info,
					&p_create_ue_param->physical_config_dedicated.
					sounding_rs_ul_config_dedicated.sounding_rs_ul_config_dedicated_param);
		}
		else
		{
			p_mac_create_ue_entity_req->add_ue_info.srs_dedicated_config.config_type = 0;
		}

	}
	/* SRS Stop */

	/* CLPC Start */

	/* Fill UPLINK_POWER_CONTROL_DEDICATED if present */
	if (RRC_PHY_UPLINK_POWER_CONTROL_DEDICATED_PRESENT &
			p_create_ue_param->physical_config_dedicated.bitmask)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_UPLINK_POWER_CONTROL_DEDICATED_PRESENT;

		p_mac_create_ue_entity_req->add_ue_info.uplink_power_control_dedicated.p0_ue_pusch =
			p_create_ue_param->physical_config_dedicated.uplink_power_control_dedicated.
			p0_ue_pusch;

		p_mac_create_ue_entity_req->add_ue_info.uplink_power_control_dedicated.delta_mcs_enabled =
			p_create_ue_param->physical_config_dedicated.uplink_power_control_dedicated.
			delta_mcs_enabled;

		p_mac_create_ue_entity_req->add_ue_info.uplink_power_control_dedicated.accumulation_enabled =
			p_create_ue_param->physical_config_dedicated.uplink_power_control_dedicated.
			accumulation_enabled;
	}

	RRC_LLIM_UT_TRACE_EXIT();
	rrc_mac_fill_phy_config_pdcch_config(p_create_ue_param, p_mac_create_ue_entity_req);
	/* CLPC Stop */
}

/******************************************************************************
 *   FUNCTION NAME: rrc_mac_fill_meas_config
 *
 *   DESCRIPTION:
 *       Function fills meas_config parameters
 *
 *   RETURNS: None
 ******************************************************************************/
static void rrc_mac_fill_meas_config(
		rrc_uecc_llim_create_ue_entity_req_t  *p_create_ue_param,
		rrc_mac_create_ue_entity_req_t        *p_mac_create_ue_entity_req )
{
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_create_ue_param);
	RRC_ASSERT(PNULL != p_mac_create_ue_entity_req);
	/* Add ue info - meas_gap_config_info */
	if ((p_create_ue_param->bitmask &
				UECC_LLIM_CREATE_UE_ENTITY_REQ_MEAS_CONFIG_PRESENT) && 
			(p_create_ue_param->meas_config.bitmask &
			 UE_ADM_MEAS_GAP_CONFIG_PRESENT))
	{
		/* Add ue info - meas_gap_config_info present
		   (in case of handover)*/
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |= 
			RRC_MAC_MEAS_GAP_CONFIG_INFO_PRESENT;

		/* 1 - for setup */
		if ((1 == p_create_ue_param->meas_config.meas_gap_config.meas_gap_config_type) &&
				(p_create_ue_param->meas_config.meas_gap_config.bitmask &
				 MEAS_GAP_CONFIG_SETUP_CONFIG_INFO_PRESENT ))
		{
			/* meas gap setup config info present */
			p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
				bitmask |= RRC_MAC_MEAS_GAP_CONFIG_MEAS_GAP_SETUP_CONFIG_INFO_PRESENT;

			p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
				meas_gap_config_type = 1;

			/* check for - meas gap pattern id 0 */
			if(p_create_ue_param->meas_config.meas_gap_config.
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP0_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 0;

				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = 
					p_create_ue_param->meas_config.meas_gap_config.setup_config_info.gp0; 
			}
			/* check for - meas gap pattern id 1 */
			else if(p_create_ue_param->meas_config.meas_gap_config.   
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP1_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 1;

				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = 
					p_create_ue_param->meas_config.meas_gap_config.setup_config_info.gp1; 
			}
            #ifdef ENDC_ENABLED
			/* check for - meas gap pattern id 4 */
			else if(p_create_ue_param->meas_config.meas_gap_config.   
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP4_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 4;

				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = 
					p_create_ue_param->meas_config.meas_gap_config.setup_config_info.gp4_r15; 
			}
			/* check for - meas gap pattern id 5 */
			else if(p_create_ue_param->meas_config.meas_gap_config.   
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP5_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 5;

				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = 
					p_create_ue_param->meas_config.meas_gap_config.setup_config_info.gp5_r15; 
			}
			/* check for - meas gap pattern id 6 */
			else if(p_create_ue_param->meas_config.meas_gap_config.   
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP6_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 6;

				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = 
					p_create_ue_param->meas_config.meas_gap_config.setup_config_info.gp6_r15; 
			}
			/* check for - meas gap pattern id 7 */
			else if(p_create_ue_param->meas_config.meas_gap_config.   
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP7_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 7;

				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = 
					p_create_ue_param->meas_config.meas_gap_config.setup_config_info.gp7_r15; 
			}
			/* check for - meas gap pattern id 8 */
			else if(p_create_ue_param->meas_config.meas_gap_config.   
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP8_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 8;

				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = 
					p_create_ue_param->meas_config.meas_gap_config.setup_config_info.gp8_r15; 
			}
			/* check for - meas gap pattern id 9 */
			else if(p_create_ue_param->meas_config.meas_gap_config.   
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP9_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 9;

				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = 
					p_create_ue_param->meas_config.meas_gap_config.setup_config_info.gp9_r15; 
			}
			/* check for - meas gap pattern id 10 */
			else if(p_create_ue_param->meas_config.meas_gap_config.   
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP10_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 10;

				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = 
					p_create_ue_param->meas_config.meas_gap_config.setup_config_info.gp10_r15; 
			}
			/* check for - meas gap pattern id 11 */
			else if(p_create_ue_param->meas_config.meas_gap_config.   
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP11_PRESENT)
			{
				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 11;

				p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = 
					p_create_ue_param->meas_config.meas_gap_config.setup_config_info.gp11_r15; 
			}
            #endif
		}
		else /* 0 - for release */
		{
			p_mac_create_ue_entity_req->add_ue_info.meas_gap_config_info.
				meas_gap_config_type = 0;
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: rrc_mac_fill_sps_config
 *
 *   DESCRIPTION:
 *       Function fills sps_config parameters
 *
 *   RETURNS: None
 ******************************************************************************/
static void rrc_mac_fill_sps_config(
		rrc_uecc_llim_create_ue_entity_req_t  *p_create_ue_param,
		rrc_mac_create_ue_entity_req_t        *p_mac_create_ue_entity_req )
{
	U32 drb_index = 0;
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_create_ue_param);
	RRC_ASSERT(PNULL != p_mac_create_ue_entity_req);

	/* SPS Start */
	if (p_create_ue_param->bitmask &
			UECC_LLIM_CREATE_UE_ENTITY_REQ_SPS_CONFIG_PRESENT)
	{
		p_mac_create_ue_entity_req->add_ue_info.optional_elems_present |=
			RRC_MAC_SPS_CONFIG_PRESENT;

		if (p_create_ue_param->sps_config.bitmask &
				RRC_SPS_CONFIG_SPS_CONFIG_DL_PRESENT)
		{
			p_mac_create_ue_entity_req->add_ue_info.sps_config.bitmask |=
				RRC_MAC_SPS_DL_INFO_PRESENT;

			if (p_create_ue_param->sps_config.sps_config_dl.bitmask &
					RRC_SPS_CONFIG_DL_PARAM_PRESENT)
			{    /* Setup */
				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.bitmask |=
					RRC_MAC_SPS_DL_SETUP_INFO_PRESENT;
				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.request_type =
					1; /* 1 - Setup */

				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
					semi_persist_sched_interval_dl = p_create_ue_param->sps_config.sps_config_dl.
					sps_config_dl_param.semi_persist_sched_interval_dl;

				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
					number_of_conf_sps_processes = p_create_ue_param->sps_config.sps_config_dl.
					sps_config_dl_param.number_of_conf_sps_processes;

				for (drb_index = 0; drb_index < p_create_ue_param->sps_config.sps_config_dl.
						sps_config_dl_param.n1_pucch_an_persist_list.count;
						drb_index++)
				{
					p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
						n1_pucch_an_persist[drb_index].n1_pucch_an_persist =
						p_create_ue_param->sps_config.sps_config_dl.sps_config_dl_param.
						n1_pucch_an_persist_list.n1_pucch_an_persist[drb_index];

					p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
						n1_pucch_an_persist_list_counter++;
				}
			}
			else
			{    /* Release */
				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.request_type =
					0; /* 0 - Release */
			}
			if (p_create_ue_param->sps_config.sps_config_dl.bitmask &
					RRC_SPS_CONFIG_DL_PARAM_MAX_SPS_HARQ_RETX)
			{
				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.bitmask |=
					RRC_MAC_MAX_SPS_HARQ_RETX_PRESENT;
				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
					max_sps_harq_retx.max_sps_harq_retx = p_create_ue_param->
					sps_config.sps_config_dl.max_sps_harq_retx;
			}
			if (p_create_ue_param->sps_config.sps_config_dl.bitmask &
					RRC_SPS_CONFIG_DL_PARAM_EXPLICIT_RELEASE_AFTER)
			{
				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.bitmask |=
					RRC_MAC_RRC_MAC_EXPLICIT_RELEASE_AFTER_PRESENT;
				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
					explicit_release_after.explicit_release_afte = p_create_ue_param->
					sps_config.sps_config_dl.expilcit_release_after;
			}
		}

		if (p_create_ue_param->sps_config.bitmask &
				RRC_SPS_CONFIG_SPS_CONFIG_UL_PRESENT)
		{
			p_mac_create_ue_entity_req->add_ue_info.sps_config.bitmask |=
				RRC_MAC_SPS_UL_INFO_PRESENT;

			if (p_create_ue_param->sps_config.sps_config_ul.bitmask &
					RRC_SPS_CONFIG_UL_PARAM_PRESENT)
			{    /* Setup */
				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_ul_info.bitmask |=
					RRC_MAC_SPS_UL_SETUP_INFO_PRESENT;
				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_ul_info.request_type =
					1; /* 1 - Setup */

				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
					semi_persist_sched_interval_ul = p_create_ue_param->sps_config.sps_config_ul.
					sps_config_ul_param.semi_persist_sched_interval_ul;

				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
					implicit_release_after = p_create_ue_param->sps_config.sps_config_ul.
					sps_config_ul_param.implicit_release_after;

				if (p_create_ue_param->sps_config.sps_config_ul.sps_config_ul_param.bitmask &
						RRC_SPS_CONFIG_UL_P_0_PERSISTENT_PRESENT)
				{
					p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						bitmask |=
						RRC_MAC_P_ZERO_PERSISTENT_PRESENT;

					p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						p_zero_persistent.p_zero_nominal_pusch_persistent = p_create_ue_param->sps_config.
						sps_config_ul.sps_config_ul_param.p_zero_persistent.p_zero_nominal_pusch_persistent;

					p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						p_zero_persistent.p_zero_ue_pusch_persistent = p_create_ue_param->sps_config.
						sps_config_ul.sps_config_ul_param.p_zero_persistent.p_zero_ue_pusch_persistent;
				}

				if (p_create_ue_param->sps_config.sps_config_ul.sps_config_ul_param.bitmask &
						RRC_SPS_CONFIG_UL_TWO_INTERVALS_CONFIG_PRESENT)
				{
					p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						bitmask |= RRC_MAC_TWO_INTERVALS_CONFIG_PRESENT;
					/* SPR:5994 start */
					p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						two_intervals_config.two_intervals_config = 1; 
					/* SPR:5994 stop */
				}
			}
			else
			{    /* Release */
				p_mac_create_ue_entity_req->add_ue_info.sps_config.sps_dl_info.request_type =
					0; /* 0 - Release */
			}
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
	/* SPS Stop */
}

/*
 *   UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_phy_create_ue_state_phy_cnf
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *    DESCRIPTION  : This function continue ue creation if PHY is OK.
 *       state UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_phy_create_ue_state_phy_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_create_ue_entity_resp_t create_ue_entity_resp;
	U32 drb_index = 0;
	rrc_phy_create_ue_entity_cnf_t          *p_phy_create_ue_entity_cnf =
		(rrc_phy_create_ue_entity_cnf_t *)p_msg;
	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param = PNULL;
	/* SPR 14562 Fix start */
	rrm_mac_config_t              *p_rrm_mac_config = PNULL;
	rrm_scell_config_t            *p_rrm_scell_config = PNULL;
	/* SPR 14562 Fix end */


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_phy_create_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_create_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_create_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_create_ue_param = &p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_create_ue_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (RRC_SUCCESS == p_phy_create_ue_entity_cnf->response)
	{
		rrc_mac_create_ue_entity_req_t mac_create_ue_entity_req;

		/* 1. send RRC_MAC_CREATE_UE_ENTITY_REQ */
		memset_wrapper(&mac_create_ue_entity_req, 0, sizeof
				(mac_create_ue_entity_req));

		RRC_ASSERT(p_create_ue_param->physical_config_dedicated.bitmask &
				RRC_PHY_ANTENNA_INFORMATION_PRESENT);
		RRC_ASSERT(p_create_ue_param->physical_config_dedicated.
				antenna_information.bitmask &
				RRC_PHY_ANTENNA_INFORMATION_EXPLICIT_VALUE_PRESENT);

		rrc_mac_fill_mac_main_config(p_create_ue_param, &mac_create_ue_entity_req);

		rrc_mac_fill_phy_config_dedicated(p_create_ue_param, &mac_create_ue_entity_req);

		rrc_mac_fill_meas_config(p_create_ue_param, &mac_create_ue_entity_req);

		/*TTI_BUNDLING Start*/
		if ((p_create_ue_param->bitmask & 
					UECC_LLIM_CREATE_UE_ENTITY_REQ_MAC_CONFIG_PRESENT) && 
				(p_create_ue_param->mac_config.bitmask &  
				 RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
				(p_create_ue_param->mac_config.mac_main_config.bitmask &
				 RRC_MAC_MAIN_CONFIG_UL_SCH_CONFIG_PRESENT))
		{
			/* Add ue info - _info present */
			mac_create_ue_entity_req.add_ue_info.optional_elems_present |=
				RRC_MAC_TTI_BUNDLING_INFO_PRESENT;
			mac_create_ue_entity_req.add_ue_info.tti_bundling.
				tti_bundling = 
				p_create_ue_param->mac_config.mac_main_config.ul_sch_config.
				tti_bundling;
		}
		/*TTI_BUNDLING Stop*/

		/* Qos changes start */
		/* Add ue info - ambr_qos_info*/
		if (UECC_LLIM_CREATE_UE_ENTITY_UE_AMBR_PRESENT & p_create_ue_param->bitmask)
		{
			mac_create_ue_entity_req.add_ue_info.optional_elems_present |= 
				RRC_MAC_AMBR_QOS_INFO_PRESENT;
			mac_create_ue_entity_req.add_ue_info.ambr_qos_info.dl_ambr = 
				p_create_ue_param->ue_ambr.dl_ambr;
			mac_create_ue_entity_req.add_ue_info.ambr_qos_info.ul_ambr = 
				p_create_ue_param->ue_ambr.ul_ambr;
		}
		/* Qos changes stop*/
		/* CBSR Changes Stop */
		/* HD-FDD start */
		if (UECC_LLIM_CREATE_UE_ENTITY_UE_HD_FDD_MODE_PRESENT & p_create_ue_param->bitmask)
		{
			mac_create_ue_entity_req.add_ue_info.optional_elems_present |= 
				RRC_MAC_CONFIG_RF_PARAMS_PRESENT;
			mac_create_ue_entity_req.add_ue_info.rf_params.halfDuplexFdd = 1;
		}
		/* HD-FDD stop */
		/* 36321_CR0538 start */
		if (UECC_LLIM_CREATE_UE_ENTITY_ACCESS_STRATUM_REL_PRESENT & p_create_ue_param->bitmask)
		{
			mac_create_ue_entity_req.add_ue_info.optional_elems_present |=
				RRC_MAC_UE_COMPLIANCE_INFO_PRESENT;
             /*SPR_19803_FIX_START*/
             /* Always R10 capability is sent to MAC as there is no difference 
              * in MAC handling for later release. */
             if ((p_create_ue_param->access_stratum_release >= RRM_REL_11) && 
                    (p_create_ue_param->access_stratum_release <= RRM_REL_SPARE1))
             {
                mac_create_ue_entity_req.add_ue_info.ue_compliance_release.ue_compliance_release =
                 rrm_rel10;
                 /* eMTC changes stop */
             }
             else
             {
			mac_create_ue_entity_req.add_ue_info.ue_compliance_release.ue_compliance_release =
				p_create_ue_param->access_stratum_release;
		}
             /*SPR_19803_FIX_STOP*/
        }
		/* 36321_CR0538 stop */

		mac_create_ue_entity_req.create_lc_req_counter = 0;

		fill_srb_mac_create_lc_req( &mac_create_ue_entity_req.create_lc_req[0],
				p_create_ue_param->create_srb1_entity.lc_id,
				&p_create_ue_param->create_srb1_entity.
				srb_config);
		++mac_create_ue_entity_req.create_lc_req_counter;


		/* Create LC */

		/*Add SRB2 creation info if present */
		if (p_create_ue_param->bitmask & 
				UECC_LLIM_CREATE_UE_ENTITY_CREATE_SRB2_INFO_PRESENT)
		{
			fill_srb_mac_create_lc_req(
					&mac_create_ue_entity_req.
					create_lc_req[mac_create_ue_entity_req.
					create_lc_req_counter],
					p_create_ue_param->create_srb2_entity.lc_id,
					&p_create_ue_param->create_srb2_entity.srb_config);

			++mac_create_ue_entity_req.create_lc_req_counter;
		}

		/*Add DRB creation info if present */
		if (p_create_ue_param->bitmask & 
				UECC_LLIM_CREATE_DRB_ENTITY_LIST_PRESENT)
		{
			for (drb_index = 0; drb_index < 
					p_create_ue_param->create_drb_entity_info.
					create_drb_entity_counter;
					++drb_index)
			{
				if (RRC_MAC_MAX_CREATE_LC > mac_create_ue_entity_req.create_lc_req_counter)
				{
					fill_drb_mac_create_lc_req(&mac_create_ue_entity_req.
							create_lc_req[mac_create_ue_entity_req.
							create_lc_req_counter],
							p_create_ue_param->create_drb_entity_info.
							create_drb_entity[drb_index].
							uecc_llim_drb_config.drb_config.
							logical_channel_identity,
							&p_create_ue_param->create_drb_entity_info.
							create_drb_entity[drb_index].uecc_llim_drb_config.
							drb_config);
					/*Fill the Qos_info  and GBR_Qos_info if it is HO triggered
					 * create_ue_entity */
       /*SPR_19066_START*/
                    if ((UECC_LLIM_CREATE_UE_ENTITY_REQ_HO_TRIGGERED_FLAG & 
                            p_create_ue_param->bitmask) &&  
                            (p_create_ue_param->ho_triggered.ho_trigger)) 
        /*SPR_19066_END*/
					{
						if(mac_create_ue_entity_req.create_lc_req_counter < 
								RRC_MAC_MAX_CREATE_LC)
						{
							fill_qos_info_mac_create_ue_entity (
									&mac_create_ue_entity_req.create_lc_req[mac_create_ue_entity_req.
									create_lc_req_counter],
									&p_create_ue_param->create_drb_entity_info.
									create_drb_entity[drb_index].uecc_llim_drb_config);
						}
					}
					++mac_create_ue_entity_req.create_lc_req_counter;
				}
			}
		}

		RRC_ASSERT(mac_create_ue_entity_req.create_lc_req_counter <=
				RRC_MAC_MAX_CREATE_LC);

		/*SPR:5084 start */
		/* Set UE Category If Present */
		if (p_create_ue_param->bitmask &
				UECC_LLIM_CREATE_UE_ENTITY_UE_CATEGORY_PRESENT)
		{
			mac_create_ue_entity_req.optional_elems_present |=
				RRC_MAC_ADD_UE_INFO_PRESENT;

			mac_create_ue_entity_req.add_ue_info.optional_elems_present |=
				RRC_MAC_ADD_UE_CATEGORY_INFO_PRESENT;

			mac_create_ue_entity_req.add_ue_info.ue_category_info.
				ue_category = p_create_ue_param->ue_category;
		}
        /*SPR_18803_START*/
        if (p_create_ue_param->bitmask &
                UECC_LLIM_CREATE_UE_ENTITY_RAT_1_SUPPORT_PRESENT)
        {
            mac_create_ue_entity_req.add_ue_info.optional_elems_present |=
                RRC_MAC_UE_CAPABILITY_ADDITIONAL_PARAM_PRESENT;

            mac_create_ue_entity_req.add_ue_info.ue_capability_additional_params.
                    rat_1_support = p_create_ue_param->rat_1_support; 
        }
        /*SPR_18803_END*/
		/*SPR:5084 stop */
		rrc_mac_fill_sps_config(p_create_ue_param, &mac_create_ue_entity_req);
		/* SPS Stop */

		/*Transmission_Mode_7_8 start*/
		if (p_create_ue_param->mac_config.mac_main_config_extensions.bitmask &
				RRM_MAC_MAIN_CONFIG_EXT_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT)
		{
			mac_create_ue_entity_req.add_ue_info.optional_elems_present |=
				RRC_MAC_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT;

			mac_create_ue_entity_req.add_ue_info.pdsch_epre_to_ue_rs_ratio.pdsch_epre_to_ue_rs_ratio = 
				p_create_ue_param->mac_config.mac_main_config_extensions.pdsch_epre_to_ue_rs_ratio;
		}
		/*Transmission_Mode_7_8 stop*/

        /* SPR 23209 FIXED START */
        if (p_create_ue_param->bitmask &
                UECC_LLIM_CREATE_UE_ENTITY_MOCN_OPERATOR_ID_PRESENT)
        {
            mac_create_ue_entity_req.optional_elems_present |=
                RRC_MAC_ADD_UE_INFO_PRESENT;
            mac_create_ue_entity_req.add_ue_info.optional_elems_present |=
                RRC_MAC_MOCN_OPERATOR_INFO_PRESENT;
            mac_create_ue_entity_req.add_ue_info.operator_info.operator_id =
                p_create_ue_param->operator_id;
            RRC_LLIM_TRACE(RRC_INFO,"API:RRC->MAC:RRC_MAC_CREATE_UE_ENTITY_REQ:[UE:%u]"
                    "OPERATOR_ID [%d] is sent to MAC",
                    mac_create_ue_entity_req.ue_index,
                    p_create_ue_param->operator_id);
        }
        else
        {
            RRC_LLIM_TRACE(RRC_INFO,"API:RRC->MAC:RRC_MAC_CREATE_UE_ENTITY_REQ:[UE:%u]"
                    "OPERATOR_ID is Not sent to MAC",
                    mac_create_ue_entity_req.ue_index);

        }
        /* SPR 23209 FIXED END */

		if ((p_create_ue_param->bitmask & 
					UECC_LLIM_CREATE_UE_ENTITY_PHY_CONFIG_DEDICATED_PRESENT ) && 
				(p_create_ue_param->physical_config_dedicated.bitmask & 
				 RRC_PHY_CONFIG_DEDICATED_EXTENDED_PRESENT))
		{
			if (p_create_ue_param->physical_config_dedicated.
					phy_physical_config_dedicated_extended.bitmask &
					RRC_PHY_PUCCH_CHANNEL_SELECTION_CONFIG_R10_PRESENT )
			{
				mac_create_ue_entity_req.add_ue_info.ca_optional_elems_present |= 
					RRC_MAC_RECONFIG_ADD_PUCCH_FORMAT_V1020_PRESENT;

				mac_create_ue_entity_req.add_ue_info.rrc_mac_pucch_format_r10.
					optional_elems_present |=
					RRC_MAC_PUCCH_CHANNEL_SELECTION_CONFIG_V1020_PRESENT;

				fill_mac_pucch_format(&p_create_ue_param->physical_config_dedicated.
						phy_physical_config_dedicated_extended.
						pucch_channel_selection_config_v1020 ,
						&mac_create_ue_entity_req.add_ue_info.rrc_mac_pucch_format_r10.
						rrc_mac_pucch_channel_selection_config_v1020);
			}
		}

		if (p_create_ue_param->bitmask & UECC_LLIM_CREATE_UE_ENTITY_R10_UE_CATEGORY_PRESENT)
		{
			mac_create_ue_entity_req.add_ue_info.ca_optional_elems_present |= 
				RRC_MAC_RECONFIG_ADD_UE_CATEGORY_V1020_PRESENT;

			mac_create_ue_entity_req.add_ue_info.rrc_mac_ue_category_v1020.ue_category_v1020 = 
				p_create_ue_param->rel10_ue_category;
		}

		if ((p_create_ue_param->bitmask & UECC_LLIM_CREATE_UE_ENTITY_REQ_MAC_CONFIG_PRESENT) 
				&& (p_create_ue_param->bitmask &  
					UECC_LLIM_CREATE_UE_ENTITY_SCELL_CONFIG_PRESENT))
		{
			mac_create_ue_entity_req.add_ue_info.ca_optional_elems_present |= 
				RRC_MAC_CA_RECONFIG_ADD_CONFIG_PRESENT;
			/* SPR 14562 Fix start */
			if(UECC_LLIM_CREATE_UE_ENTITY_REQ_MAC_CONFIG_PRESENT & p_create_ue_param->bitmask)
			{
				p_rrm_mac_config =  &p_create_ue_param->mac_config;
			}
			if(UECC_LLIM_CREATE_UE_ENTITY_SCELL_CONFIG_PRESENT & p_create_ue_param->bitmask)
			{
				p_rrm_scell_config = &p_create_ue_param->scell_config;
			}
			rrc_mac_fill_ca_config_ue_info(&mac_create_ue_entity_req.add_ue_info. 
					rrc_mac_carrier_aggr_config, 
					p_rrm_mac_config,
					p_rrm_scell_config,
					p_create_ue_param->scells_operation_list);
			/* SPR 14562 Fix end */
		}


		rrc_mac_il_send_rrc_mac_create_ue_entity_req(
				&mac_create_ue_entity_req, 
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_create_ue_param->cell_index),
				p_create_ue_param->transaction_id,
				p_create_ue_param->cell_index);

		UEMH_FSM_SET_STATE(p_ue_ctx, 
				UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF);
	}
	else
	{

		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_create_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_CREATE_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_create_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_create_ue->guard_timer = PNULL;
		}

		memset_wrapper(&create_ue_entity_resp, 0, sizeof(create_ue_entity_resp));

		/* 2. send UECC_LLIM_CREATE_UE_ENTITY_RESP */
		create_ue_entity_resp.cell_index        = p_create_ue_param->cell_index;
		create_ue_entity_resp.transaction_id    = p_create_ue_param->
			transaction_id;
		create_ue_entity_resp.ue_index          = p_create_ue_param->ue_index;
		create_ue_entity_resp.response_code     = RRC_LLIM_CREATE_UE_FAIL_PHY;

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_phy_create_ue_entity_cnf->ue_index),
				UECC_LLIM_CREATE_UE_ENTITY_RESP,
				sizeof(create_ue_entity_resp),
				&create_ue_entity_resp);

		rrc_mem_free (p_ue_ctx->curr_op_param.p_create_ue);
		p_ue_ctx->curr_op_param.p_create_ue = PNULL;
		if (p_ue_ctx->curr_op_param.p_rcfg_ue != PNULL)
		{
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}

		/* 3. delete from UE DB and free */
		rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,p_create_ue_param->ue_index,
				PNULL);

		rrc_mem_free(p_ue_ctx);
        /* SPR 20522 Fix Start */
		/* + Coverity 81470 */
	    p_ue_ctx = PNULL;
		/* - Coverity 81470 */
        /* SPR 20522 Fix End */
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_phy_change_crnti_state_phy_cnf
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *    DESCRIPTION  :   This function continue crnti change if PHY is OK.
 *       state UEMH_STATE_W_FOR_PHY_CHANGE_CRNTI_CNF;
 *       event UEMH_EVENT_PHY_CHANGE_CRNTI_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_phy_change_crnti_state_phy_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_change_crnti_resp_t* p_uecc_llim_change_crnti_resp = PNULL;
	rrc_mac_change_crnti_req_t* p_mac_change_crnti_req = PNULL;

	rrc_phy_change_crnti_cnf_t  *p_phy_change_crnti_cnf =
		(rrc_phy_change_crnti_cnf_t*)p_msg;

	rrc_uecc_llim_change_crnti_req_t  *p_change_crnti_param = PNULL; 

	rrc_uemh_timer_buf_t                    guard_timer_data;    
	rrc_return_t                      result = RRC_FAILURE;
	rrc_cell_index_t                  cell_index = RRC_INVALID_CELL_INDEX;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_phy_change_crnti_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_change_crnti) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_change_crnti is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_change_crnti_param = &p_ue_ctx->curr_op_param.p_change_crnti->change_crnti_req;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_change_crnti_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* 1. Stop guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_change_crnti->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CHANGE_CRNTI_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_change_crnti->guard_timer);
		p_ue_ctx->curr_op_param.p_change_crnti->guard_timer = PNULL;
	}
	do {
		if (RRC_SUCCESS == p_phy_change_crnti_cnf->response)
		{
			/* 1. set guard timer */
			guard_timer_data.auto_delete      = RRC_TRUE;
			guard_timer_data.target_submodule = LLIM_SUBMODULE_UEMH;
			guard_timer_data.ue_index = p_change_crnti_param->ue_index;
			guard_timer_data.uemh_event = 
				UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED;

			rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &cell_index);

			if ( RRC_INVALID_CELL_INDEX == cell_index )
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid_Cell_Index");
				RRC_LLIM_UT_TRACE_EXIT();
				return;
			}

			guard_timer_data.cell_index = cell_index;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
					"Start timer [LLIM_CHANGE_CRNTI_TIMER] %u ms.",
					p_rrc_llim_gl_ctx->change_crnti_duration);

			p_ue_ctx->curr_op_param.p_change_crnti->guard_timer =
				rrc_start_timer(p_rrc_llim_gl_ctx->change_crnti_duration,
						&guard_timer_data, sizeof(guard_timer_data), RRC_FALSE);

			/* Allocate memory for message */
			p_mac_change_crnti_req = (rrc_mac_change_crnti_req_t*)
				rrc_mem_get(sizeof(rrc_mac_change_crnti_req_t));

			if (PNULL == p_mac_change_crnti_req)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
						"Memory Allocation Fail to mac_change_crnti_req");
				break;
			}
			/* Init Operation */
			memset_wrapper(p_mac_change_crnti_req, RRC_NULL,
					sizeof(rrc_mac_change_crnti_req_t));

			/* Fill MAC_CHANGE_CRNTI_REQ */
			p_mac_change_crnti_req->ue_index = p_change_crnti_param->
				ue_index;
			p_mac_change_crnti_req->old_crnti = p_change_crnti_param->
				old_crnti;

			p_mac_change_crnti_req->new_crnti = p_change_crnti_param->
				new_crnti;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"MAC CHANGE OLD C-RNTI=[%u] and New C-RNTI=[%u]",
					p_mac_change_crnti_req->old_crnti,
					p_mac_change_crnti_req->new_crnti);

			/* 1. send RRC_MAC_CHANGE_CRNTI_REQ */
			rrc_mac_il_send_rrc_mac_change_crnti_req(
					p_mac_change_crnti_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_change_crnti_param->cell_index),
					p_change_crnti_param->transaction_id,
					p_change_crnti_param->cell_index);

			/* Switch state and wait for MAC CHANGE CRNTI CNF from MAC */ 
			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_MAC_CHANGE_CRNTI_CNF);

			/* Deallocate memory for mac_change_crnti_cnf */
			if (PNULL != p_mac_change_crnti_req)
			{
				rrc_mem_free(p_mac_change_crnti_req);
                /* SPR 20522 Fix Start */
				/* + Coverity 81461 */
				p_mac_change_crnti_req = PNULL;
				/* - Coverity 81461 */
                /* SPR 20522 Fix End */
			}
			result = RRC_SUCCESS;
		}
		else
		{
			/* Allocate memory for message */
			p_uecc_llim_change_crnti_resp = 
				(rrc_uecc_llim_change_crnti_resp_t*)
				rrc_mem_get(sizeof(rrc_uecc_llim_change_crnti_resp_t));

			if (PNULL == p_uecc_llim_change_crnti_resp)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
						"Memory Allocation Fail to UECC_LLIM_CHANGE_CRNTI_RESP");
				break;
			}
			/* Init Operation */
			memset_wrapper(p_uecc_llim_change_crnti_resp, RRC_NULL,
					sizeof(rrc_uecc_llim_change_crnti_resp_t));

			/* 2. send UECC_LLIM_CHANGE_CRNTI_RESP */
			p_uecc_llim_change_crnti_resp->cell_index =
				p_change_crnti_param->cell_index;
			p_uecc_llim_change_crnti_resp->transaction_id = 
				p_change_crnti_param->transaction_id;
			p_uecc_llim_change_crnti_resp->ue_index = 
				p_change_crnti_param->ue_index;
			/* Send Response code to UECC which is received in phy Cnf msg*/
			p_uecc_llim_change_crnti_resp->response_code = 
				p_phy_change_crnti_cnf->response;

			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_phy_change_crnti_cnf->ue_index),
					UECC_LLIM_CHANGE_CRNTI_RESP,
					sizeof(rrc_uecc_llim_change_crnti_resp_t),
					p_uecc_llim_change_crnti_resp);

			/* Switch to Ue In Service State */
			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			rrc_mem_free (p_ue_ctx->curr_op_param.p_change_crnti);
			p_ue_ctx->curr_op_param.p_change_crnti = PNULL;

			/* Deallocate Memory For UECC_LLIM_CHANGE_CRNTI_RESP */
			if (PNULL != p_uecc_llim_change_crnti_resp)
			{
				rrc_mem_free(p_uecc_llim_change_crnti_resp);
                /* SPR 20522 Fix Start */
				/* + Coverity 81461 */
				p_uecc_llim_change_crnti_resp = PNULL;
				/* - Coverity 81461 */
                /* SPR 20522 Fix End */
			}
			result = RRC_SUCCESS;
		}
	}while(0);
	if (RRC_SUCCESS != result)
	{
		if (PNULL != p_ue_ctx->curr_op_param.p_change_crnti->guard_timer)
		{
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_change_crnti->guard_timer);
			p_ue_ctx->curr_op_param.p_change_crnti->guard_timer = PNULL;
		}

		/* Switch to Ue In Service State */
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_mac_change_crnti_state_mac_cnf
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *    DESCRIPTION  :   This function continue crnti change if MAC is OK.
 *       state UEMH_STATE_W_FOR_MAC_CHANGE_CRNTI_CNF;
 *       event UEMH_EVENT_MAC_CHANGE_CRNTI_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_mac_change_crnti_state_mac_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_change_crnti_resp_t* p_uecc_llim_change_crnti_resp = PNULL;
	rrc_rlc_change_crnti_req_t* p_rlc_change_crnti_req = PNULL;

	rrc_mac_change_crnti_cnf_t  *p_mac_change_crnti_cnf =
		(rrc_mac_change_crnti_cnf_t*)p_msg;

	rrc_uecc_llim_change_crnti_req_t  *p_change_crnti_param = PNULL;

	rrc_uemh_timer_buf_t                    guard_timer_data;    
	rrc_return_t                      result = RRC_FAILURE;
	rrc_cell_index_t                  cell_index = RRC_INVALID_CELL_INDEX;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_mac_change_crnti_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_change_crnti) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_change_crnti is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_change_crnti_param = &p_ue_ctx->curr_op_param.p_change_crnti->change_crnti_req;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_change_crnti_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* 1. Stop guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_change_crnti->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CHANGE_CRNTI_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_change_crnti->guard_timer);
		p_ue_ctx->curr_op_param.p_change_crnti->guard_timer = PNULL;
	}

	do {
		if (RRC_SUCCESS == p_mac_change_crnti_cnf->response)
		{
			/* 1. set guard timer */
			guard_timer_data.auto_delete      = RRC_TRUE;
			guard_timer_data.target_submodule = LLIM_SUBMODULE_UEMH;
			guard_timer_data.ue_index = p_change_crnti_param->ue_index;
			guard_timer_data.uemh_event = 
				UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED;

			rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &cell_index);
			if ( RRC_INVALID_CELL_INDEX == cell_index )
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Cell Index");
				RRC_LLIM_UT_TRACE_EXIT();
				return;
			}

			guard_timer_data.cell_index = cell_index;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
					"Start timer [LLIM_CHANGE_CRNTI_TIMER] %u ms.",
					p_rrc_llim_gl_ctx->change_crnti_duration);

			p_ue_ctx->curr_op_param.p_change_crnti->guard_timer =
				rrc_start_timer(p_rrc_llim_gl_ctx->change_crnti_duration,
						&guard_timer_data, sizeof(guard_timer_data), RRC_FALSE);

			/* Allocate memory for message */
			p_rlc_change_crnti_req = (rrc_rlc_change_crnti_req_t*)
				rrc_mem_get(sizeof(rrc_rlc_change_crnti_req_t));

			if (PNULL == p_rlc_change_crnti_req)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
						"Memory Allocation Fail to rlc_change_crnti_req");
				break;
			}
			/* Init Operation */
			memset_wrapper(p_rlc_change_crnti_req, RRC_NULL,
					sizeof(rrc_rlc_change_crnti_req_t));

			/* Fill RLC_CHANGE_CRNTI_REQ */
			p_rlc_change_crnti_req->ue_index = p_change_crnti_param->
				ue_index;
			p_rlc_change_crnti_req->old_crnti = p_change_crnti_param->
				old_crnti;

			p_rlc_change_crnti_req->new_crnti = p_change_crnti_param->
				new_crnti;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"RLC CHANGE OLD C-RNTI=[%u] and New C-RNTI=[%u]",
					p_rlc_change_crnti_req->old_crnti,
					p_rlc_change_crnti_req->new_crnti);

			/* 1. send RRC_RLC_CHANGE_CRNTI_REQ */
			rrc_rlc_il_send_rrc_rlc_change_crnti_req(
					p_rlc_change_crnti_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_change_crnti_param->cell_index),
					p_change_crnti_param->transaction_id,
					p_change_crnti_param->cell_index);

			/* Switch state and wait for RLC CHANGE CRNTI CNF from RLC*/
			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_RLC_CHANGE_CRNTI_CNF);

			if (PNULL != p_rlc_change_crnti_req)
			{
				/* Deallocate memory for rlc_change_crnti_req */
				rrc_mem_free(p_rlc_change_crnti_req);
				/* +- Coverity 81287 */
			}
			result = RRC_SUCCESS;
		}
		else
		{
			/* Allocate memory for message */
			p_uecc_llim_change_crnti_resp = 
				(rrc_uecc_llim_change_crnti_resp_t*)
				rrc_mem_get(sizeof(rrc_uecc_llim_change_crnti_resp_t));

			if (PNULL == p_uecc_llim_change_crnti_resp)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
						"Memory Allocation Fail to UECC_LLIM_CHANGE_CRNTI_RESP");
				break;
			}
			/* Init Operation */
			memset_wrapper(p_uecc_llim_change_crnti_resp, RRC_NULL,
					sizeof(rrc_uecc_llim_change_crnti_resp_t));

			/* 2. send UECC_LLIM_CHANGE_CRNTI_RESP */
			p_uecc_llim_change_crnti_resp->cell_index = 
				p_change_crnti_param->cell_index;
			p_uecc_llim_change_crnti_resp->transaction_id = 
				p_change_crnti_param->transaction_id;
			p_uecc_llim_change_crnti_resp->ue_index = 
				p_change_crnti_param->ue_index;
			/* Send Response code to UECC which is received in MAC Cnf msg*/
			p_uecc_llim_change_crnti_resp->response_code = 
				p_mac_change_crnti_cnf->response;

			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_mac_change_crnti_cnf->ue_index),
					UECC_LLIM_CHANGE_CRNTI_RESP,
					sizeof(rrc_uecc_llim_change_crnti_resp_t),
					p_uecc_llim_change_crnti_resp);

			/* Switch to Ue In Service State */
			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			rrc_mem_free (p_ue_ctx->curr_op_param.p_change_crnti);
			p_ue_ctx->curr_op_param.p_change_crnti = PNULL;

			if (PNULL != p_uecc_llim_change_crnti_resp)
			{
				/* Deallocate Memory For UECC_LLIM_CHANGE_CRNTI_RESP */
				rrc_mem_free(p_uecc_llim_change_crnti_resp);
				/* +- Coverity 81287 */
			}

			result = RRC_SUCCESS;
		}
	}while(0);
	if (RRC_SUCCESS != result)
	{
		if (PNULL != p_ue_ctx->curr_op_param.p_change_crnti->guard_timer)
		{
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_change_crnti->guard_timer);
			p_ue_ctx->curr_op_param.p_change_crnti->guard_timer = PNULL;
		}

		/* Switch to Ue In Service State */
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_rlc_change_crnti_state_rlc_cnf
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *   DESCRIPTION  : This function continue crnti change if RLC is OK.
 *       state UEMH_STATE_W_FOR_RLC_CHANGE_CRNTI_CNF;
 *       event UEMH_EVENT_RLC_CHANGE_CRNTI_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_rlc_change_crnti_state_rlc_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_change_crnti_resp_t* p_uecc_llim_change_crnti_resp = PNULL;
	rrc_pdcp_change_crnti_req_t* p_pdcp_change_crnti_req = PNULL;

	rrc_rlc_change_crnti_cnf_t  *p_rlc_change_crnti_cnf =
		(rrc_rlc_change_crnti_cnf_t*)p_msg;

	rrc_uecc_llim_change_crnti_req_t  *p_change_crnti_param = PNULL;

	rrc_uemh_timer_buf_t                    guard_timer_data;    
	rrc_return_t                      result = RRC_FAILURE;
	rrc_cell_index_t                  cell_index = RRC_INVALID_CELL_INDEX;
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_rlc_change_crnti_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_change_crnti) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_change_crnti is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_change_crnti_param = &p_ue_ctx->curr_op_param.p_change_crnti->change_crnti_req;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_change_crnti_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* 1. Stop guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_change_crnti->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CHANGE_CRNTI_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_change_crnti->guard_timer);
		p_ue_ctx->curr_op_param.p_change_crnti->guard_timer = PNULL;
	}


	do {
		if (RRC_SUCCESS == p_rlc_change_crnti_cnf->response)
		{
			/* 1. set guard timer */
			guard_timer_data.auto_delete      = RRC_TRUE;
			guard_timer_data.target_submodule = LLIM_SUBMODULE_UEMH;
			guard_timer_data.ue_index = p_change_crnti_param->ue_index;
			guard_timer_data.uemh_event = 
				UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED;

			rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &cell_index);
			if ( RRC_INVALID_CELL_INDEX == cell_index )
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Cell Index");
				RRC_LLIM_UT_TRACE_EXIT();
				return;
			}

			guard_timer_data.cell_index = cell_index;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
					"Start timer [LLIM_CHANGE_CRNTI_TIMER] %u ms.",
					p_rrc_llim_gl_ctx->change_crnti_duration);

			/* Allocate memory for message */
			p_ue_ctx->curr_op_param.p_change_crnti->guard_timer =
				rrc_start_timer(p_rrc_llim_gl_ctx->change_crnti_duration,
						&guard_timer_data, sizeof(guard_timer_data), RRC_FALSE);

			/* Allocate memory for message */
			p_pdcp_change_crnti_req = (rrc_pdcp_change_crnti_req_t*)
				rrc_mem_get(sizeof(rrc_pdcp_change_crnti_req_t));

			if (PNULL == p_pdcp_change_crnti_req)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
						"Memory Allocation Fail to pdcp_change_crnti_req");
				break;
			}
			/* Init Operation */
			memset_wrapper(p_pdcp_change_crnti_req, RRC_NULL,
					sizeof(rrc_pdcp_change_crnti_req_t));

			/* Fill PDCP_CHANGE_CRNTI_REQ */
			p_pdcp_change_crnti_req->ue_index = p_change_crnti_param->
				ue_index;
			p_pdcp_change_crnti_req->old_crnti = p_change_crnti_param->
				old_crnti;

			p_pdcp_change_crnti_req->new_crnti = p_change_crnti_param->
				new_crnti;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"PDCP CHANGE OLD C-RNTI=[%u] and New C-RNTI=[%u]",
					p_pdcp_change_crnti_req->old_crnti,
					p_pdcp_change_crnti_req->new_crnti);

			/* 1. send RRC_PDCP_CHANGE_CRNTI_REQ */
			rrc_pdcp_il_send_rrc_pdcp_change_crnti_req(
					p_pdcp_change_crnti_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_change_crnti_param->cell_index),
					p_change_crnti_param->transaction_id,
					p_change_crnti_param->cell_index);

			/* Switch state and wait for PDCP CHANGE CRNTI CNF from PDCP */
			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_PDCP_CHANGE_CRNTI_CNF);

			if (PNULL != p_pdcp_change_crnti_req)
			{
                /* SPR 20522 Fix Start */
				/* Deallocate memory for pdcp_change_crnti_req */
				rrc_mem_free(p_pdcp_change_crnti_req);
				/* + Coverity 81594 */
				p_pdcp_change_crnti_req = PNULL;
				/* + Coverity 81594 */
                /* SPR 20522 Fix End: */
			}
			result = RRC_SUCCESS;
		}
		else
		{
			/* Allocate memory for message */
			p_uecc_llim_change_crnti_resp = 
				(rrc_uecc_llim_change_crnti_resp_t*)
				rrc_mem_get(sizeof(rrc_uecc_llim_change_crnti_resp_t));

			if (PNULL == p_uecc_llim_change_crnti_resp)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
						"Memory Allocation Fail to UECC_LLIM_CHANGE_CRNTI_RESP");
				break;
			}
			/* Init Operation */
			memset_wrapper(p_uecc_llim_change_crnti_resp, RRC_NULL,
					sizeof(rrc_uecc_llim_change_crnti_resp_t));

			/* 2. send UECC_LLIM_CHANGE_CRNTI_RESP */
			p_uecc_llim_change_crnti_resp->cell_index = 
				p_change_crnti_param->cell_index;
			p_uecc_llim_change_crnti_resp->transaction_id = 
				p_change_crnti_param->transaction_id;
			p_uecc_llim_change_crnti_resp->ue_index = 
				p_change_crnti_param->ue_index;
			/* Send Response code to UECC which is received in RLC Cnf msg*/
			p_uecc_llim_change_crnti_resp->response_code = 
				p_rlc_change_crnti_cnf->response;

			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_rlc_change_crnti_cnf->ue_index),
					UECC_LLIM_CHANGE_CRNTI_RESP,
					sizeof(rrc_uecc_llim_change_crnti_resp_t),
					p_uecc_llim_change_crnti_resp);

			/* Switch to Ue In Service State */
			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			rrc_mem_free (p_ue_ctx->curr_op_param.p_change_crnti);
			p_ue_ctx->curr_op_param.p_change_crnti = PNULL;

			if (PNULL != p_uecc_llim_change_crnti_resp)
			{
                /* SPR 20522 Fix Start */
				/* Deallocate Memory For UECC_LLIM_CHANGE_CRNTI_RESP */
				rrc_mem_free(p_uecc_llim_change_crnti_resp);
				/* + Coverity 81594 */
				p_uecc_llim_change_crnti_resp = PNULL;
				/* - Coverity 81594 */
                /* SPR 20522 Fix End */
			}
			result = RRC_SUCCESS;
		}
	}while(0);
	if (RRC_SUCCESS != result)
	{
		if (PNULL != p_ue_ctx->curr_op_param.p_change_crnti->guard_timer)
		{
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_change_crnti->guard_timer);
			p_ue_ctx->curr_op_param.p_change_crnti->guard_timer = PNULL;
		}

		/* Switch to Ue In Service State */
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_pdcp_change_crnti_state_pdcp_cnf
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *    DESCRIPTION  : This function send final response UECC module on the basis of PDCP cnf. 
 *       state UEMH_STATE_W_FOR_PDCP_CHANGE_CRNTI_CNF;
 *       event UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_pdcp_change_crnti_state_pdcp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_change_crnti_resp_t* p_uecc_llim_change_crnti_resp = PNULL;
	rrc_pdcp_change_crnti_cnf_t  *p_pdcp_change_crnti_cnf =
		(rrc_pdcp_change_crnti_cnf_t*)p_msg;

	rrc_uecc_llim_change_crnti_req_t  *p_change_crnti_param = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_change_crnti_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_change_crnti) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_change_crnti is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_change_crnti_param = &p_ue_ctx-> curr_op_param.p_change_crnti->change_crnti_req;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_change_crnti_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* 1. Stop guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_change_crnti->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CHANGE_CRNTI_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_change_crnti->guard_timer);
		p_ue_ctx->curr_op_param.p_change_crnti->guard_timer = PNULL;
	}

	do {
		/* Allocate memory for message */
		p_uecc_llim_change_crnti_resp = (rrc_uecc_llim_change_crnti_resp_t*)
			rrc_mem_get(sizeof(rrc_uecc_llim_change_crnti_resp_t));

		if (PNULL == p_uecc_llim_change_crnti_resp)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
					"Memory Allocation Fail to UECC_LLIM_CHANGE_CRNTI_RESP; unused variable p_rrc_llim_gl_ctx = %p",p_rrc_llim_gl_ctx);/*SPR 17777 +-*/
			break;
		}

		/* Init Operation */
		memset_wrapper(p_uecc_llim_change_crnti_resp, RRC_NULL,
				sizeof(rrc_uecc_llim_change_crnti_resp_t));

		/* 2. send UECC_LLIM_CHANGE_CRNTI_RESP */
		p_uecc_llim_change_crnti_resp->cell_index =
			p_change_crnti_param->cell_index;
		p_uecc_llim_change_crnti_resp->transaction_id = 
			p_change_crnti_param->transaction_id;
		p_uecc_llim_change_crnti_resp->ue_index = 
			p_change_crnti_param->ue_index;

		/* Send Response code to UECC which is received in pdcp cnf msg*/
		p_uecc_llim_change_crnti_resp->response_code = 
			p_pdcp_change_crnti_cnf->response;

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_pdcp_change_crnti_cnf->ue_index),
				UECC_LLIM_CHANGE_CRNTI_RESP,
				sizeof(rrc_uecc_llim_change_crnti_resp_t),
				p_uecc_llim_change_crnti_resp);
		rrc_mem_free (p_ue_ctx->curr_op_param.p_change_crnti);
		p_ue_ctx->curr_op_param.p_change_crnti = PNULL;

		if (PNULL != p_uecc_llim_change_crnti_resp)
		{
			/* Deallocate Memory For UECC_LLIM_CHANGE_CRNTI_RESP */
			rrc_mem_free(p_uecc_llim_change_crnti_resp);
            /* SPR 20522 Fix Start */
			/* + Coverity 81418 */
			p_uecc_llim_change_crnti_resp = PNULL;
			/* - Coverity 81418 */
            /* SPR 20522 Fix End */
		}

	}while(0);

	/* Switch to Ue In Service State */
	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_xxx_create_ue_state_timer_expired
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *   DESCRIPTION  : This function stop ue creation and delete ue.
 *       state any of:
 *       UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF,
 *       event UEMH_EVENT_CREATE_UE_TIMER_EXPIRED
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_xxx_create_ue_state_timer_expired
(
 rrc_timer_t         timer_id,           /* timer_id - unused */
 void                *p_timer_buf,       /* p_uemh_timer_buf - unused */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param = &p_ue_ctx->
		curr_op_param.p_create_ue->uecc_create_ue;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, " Unused variable in fsm p_timer_buf:%p timer_id :%p",
			p_timer_buf,timer_id);
	/* Timer expired and is not valid any more */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Timer [LLIM_CREATE_UE_ENTITY_TIMER] "
			"expired");
	p_ue_ctx->curr_op_param.p_create_ue->guard_timer = PNULL;

	/* 1. Set guard timer */
	/* 2. Delete on lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
			UEMH_FSM_CREATE_TE,
			UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx),
			p_create_ue_param->ue_index,
			p_create_ue_param->transaction_id,
			p_rrc_llim_gl_ctx,
			p_create_ue_param->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_xxx_change_crnti_state_timer_expired
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 * DESCRIPTION     : This function stop change crnti process and send response to UECC.
 *       state any of:
 *       UEMH_STATE_W_FOR_PHY_CHANGE_CRNTI_CNF,
 *       UEMH_STATE_W_FOR_MAC_CHANGE_CRNTI_CNF,
 *       UEMH_STATE_W_FOR_RLC_CHANGE_CRNTI_CNF,
 *       UEMH_STATE_W_FOR_PDCP_CHANGE_CRNTI_CNF,
 *       event UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_xxx_change_crnti_state_timer_expired
(
 rrc_timer_t         timer_id,           /* timer_id - unused */
 void                *p_timer_buf,       /* p_uemh_timer_buf - unused */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_change_crnti_resp_t uecc_llim_change_crnti_resp;
	rrc_uecc_llim_change_crnti_req_t  *p_change_crnti_param = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, " Unused variable in fsm"
			"p_timer_buf:%p timer_id :%p p_rrc_llim_gl_ctx:%p",
			p_timer_buf,timer_id,p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_change_crnti) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_change_crnti is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_change_crnti_param = &p_ue_ctx->curr_op_param.p_change_crnti->change_crnti_req;

	/*Timer expired and is not valid any more */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Timer [LLIM_CHANGE_CRNTI_TIMER]"
			"expired");
	p_ue_ctx->curr_op_param.p_change_crnti->guard_timer = PNULL;

	/* Init Operation */
	memset_wrapper(&uecc_llim_change_crnti_resp, RRC_NULL,
			sizeof(rrc_uecc_llim_change_crnti_resp_t));

	/*Fill UECC_LLIM_CHANGE_CRNTI_RESP */
	uecc_llim_change_crnti_resp.cell_index =
		p_change_crnti_param->cell_index;

	uecc_llim_change_crnti_resp.transaction_id = 
		p_change_crnti_param->transaction_id;

	uecc_llim_change_crnti_resp.ue_index =  
		p_change_crnti_param->ue_index;

	uecc_llim_change_crnti_resp.response_code = L3_FATAL;

	/*Send UECC_LLIM_CHANGE_CRNTI_RESP to UECC with response code(L3_FATAL) */
	rrc_llim_send_internal_msg(RRC_GET_UECC_MODULE_ID(p_change_crnti_param->ue_index),
			UECC_LLIM_CHANGE_CRNTI_RESP,
			sizeof(uecc_llim_change_crnti_resp),
			&uecc_llim_change_crnti_resp);

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	rrc_mem_free (p_ue_ctx->curr_op_param.p_change_crnti);
	p_ue_ctx->curr_op_param.p_change_crnti = PNULL;

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_xxx_create_ue_state_delete_ue_req
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *   DESCRIPTION  : This function stop ue creation and delete ue.
 *       state any of:
 *       UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF,
 *       event UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_xxx_create_ue_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_delete_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	/* 1. Stop guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_create_ue->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CREATE_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_create_ue->guard_timer);
		p_ue_ctx->curr_op_param.p_create_ue->guard_timer = PNULL;
	}

	/* 2. Set guard timer */
	/* 3. Delete on lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
			UEMH_FSM_DEL_REQ,
			UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx),
			p_delete_ue_entity_req->ue_index,
			p_delete_ue_entity_req->transaction_id,
			p_rrc_llim_gl_ctx,
			p_delete_ue_entity_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_phy_create_ue_state_delete_ue_req
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *    DESCRIPTION  :   This function stop ue creation and delete ue.
 *       state any of:
 *       UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF,
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_phy_create_ue_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;

	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param = &p_ue_ctx->
		curr_op_param.p_create_ue->uecc_create_ue;

	/* Bug 839 Fix Start */
	rrc_uecc_llim_ho_rach_rel_resource_ind_t rrc_uecc_llim_ho_rach_rel_resource_ind;
	/* Bug 839 Fix Stop */

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_delete_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	/* 1. Stop guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_create_ue->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CREATE_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_create_ue->guard_timer);
		p_ue_ctx->curr_op_param.p_create_ue->guard_timer = PNULL;
	}

	/* 2. Set guard timer */
	/* 3. Delete on lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */

	/* In case of HO also send to MAC DELETE UE Request to
	   free RACH RESOURCES */

    /*SPR_19066_START*/
    if ((UECC_LLIM_CREATE_UE_ENTITY_REQ_HO_TRIGGERED_FLAG & p_create_ue_param->bitmask)
          &&  (p_create_ue_param->ho_triggered.ho_trigger))
    /*SPR_19066_END*/
	{
		/* Bug 839 Fix Start */
		memset_wrapper(&rrc_uecc_llim_ho_rach_rel_resource_ind, 0,
				sizeof(rrc_uecc_llim_ho_rach_rel_resource_ind_t));

		rrc_uecc_llim_ho_rach_rel_resource_ind.cell_index =
			p_ue_ctx->cell_index;

		rrc_uecc_llim_ho_rach_rel_resource_ind.ue_index =
			p_ue_ctx->ue_index;

		rrc_uecc_llim_ho_rach_rel_resource_ind.transaction_id =
			p_delete_ue_entity_req->transaction_id;

		if (RRC_UECC_LLIM_UE_CTX_CRNTI_PRESENT &
				p_ue_ctx->bitmask)
		{
			rrc_uecc_llim_ho_rach_rel_resource_ind.bitmask =
				RRC_UECC_LLIM_HO_RACH_REL_RESOURCE_IND_CRNTI_PRESENT;
			rrc_uecc_llim_ho_rach_rel_resource_ind.crnti =
				p_ue_ctx->crnti;
		}

		uemh_send_mac_ho_rel_rach_res_ind (&rrc_uecc_llim_ho_rach_rel_resource_ind,
				p_rrc_llim_gl_ctx);

		uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
				UEMH_FSM_DEL_REQ,
				UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF,
				p_delete_ue_entity_req->ue_index,
				p_delete_ue_entity_req->transaction_id,
				p_rrc_llim_gl_ctx,
				p_create_ue_param->cell_index);
		/* Bug 839 Fix Stop */
	}else
	{
		uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
				UEMH_FSM_DEL_REQ,
				UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF,
				p_delete_ue_entity_req->ue_index,
				p_delete_ue_entity_req->transaction_id,
				p_rrc_llim_gl_ctx,
				p_create_ue_param->cell_index);

	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_xxx_create_ue_state_cleanup_req
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *   DESCRIPTION  : This function cleanups UEMH FSM.
 *        state any of:
 *       UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF,
 *       event UEMH_EVENT_OAMH_CLEANUP_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_xxx_create_ue_state_cleanup_req
(
 void                *p_api,             
 void                *p_msg,             
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_create_ue_op_param_t *p_create_ue_op = PNULL;
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	/*coverity fix start*/
	/*coverity fix stop*/

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p",p_api,p_msg);      


	if (PNULL == p_ue_ctx->curr_op_param.p_create_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_create_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_create_ue_op = p_ue_ctx->curr_op_param.p_create_ue;

	/* 1. Stop guard timer */
	if (PNULL != p_create_ue_op->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CREATE_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_create_ue_op->guard_timer);
		p_create_ue_op->guard_timer = PNULL;
	}

	if (p_ue_ctx->curr_op_param.p_rcfg_ue != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}

	rrc_mem_free(p_ue_ctx->curr_op_param.p_create_ue);
	p_ue_ctx->curr_op_param.p_create_ue = PNULL;

	/* 2 delete from UE DB and free */
	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx, p_ue_ctx->ue_index, PNULL);

	rrc_mem_free(p_ue_ctx);
    /* SPR 20522 Fix Start */
	/* + coverity 81494 */
	p_ue_ctx = PNULL;
    /* SPR 20522 Fix End */
	/* - coverity 81494 */

	RRC_LLIM_UT_TRACE_EXIT();
}

/*
 *   UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_mac_create_ue_state_mac_cnf
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *    DESCRIPTION  : This function continue ue creation if MAC is OK.
 *       state UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF;
 *       event UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_mac_create_ue_state_mac_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_mac_create_ue_entity_cnf_t          *p_mac_create_ue_entity_cnf =
		(rrc_mac_create_ue_entity_cnf_t *)p_msg;
	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param = PNULL;
	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t lc_index = RRC_NULL;
	rrc_uecc_llim_create_ue_entity_resp_t *p_create_ue_resp = PNULL;
	U8 trigger_ue_creation_at_mac_failed = 0;


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_mac_create_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_create_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_create_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_create_ue_param = &p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_create_ue_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_create_ue_resp = &p_ue_ctx->curr_op_param.
		p_create_ue->create_ue_resp;

	if (MAC_PARTIAL_SUCCESS == 
			p_mac_create_ue_entity_cnf->response_code)
	{
		if (p_mac_create_ue_entity_cnf->create_lc_error_counter)
		{
			if (p_mac_create_ue_entity_cnf->create_lc_error_counter
					== 
					(p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create +
					 p_ue_ctx->curr_op_param.p_create_ue->num_srb_to_create ))
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
						"Creation of all DRBs failed at MAC!!");
				trigger_ue_creation_at_mac_failed = 1;
			}
			else
			{
				/* Update num_drb_to_create to maintian num of drb left after
				   failure at a layer*/
				p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create = 
					(U8)(p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create - 
							p_mac_create_ue_entity_cnf->create_lc_error_counter);

				RRC_LLIM_TRACE(RRC_INFO, "[%s][ueid %d] NUM_DRB_TO_CREATE %d create_drb_entity_counter %d \n",
						__FUNCTION__,
						p_ue_ctx->ue_index, p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create,
						p_create_ue_param->create_drb_entity_info.create_drb_entity_counter );

				for (lc_index = 0; lc_index < p_mac_create_ue_entity_cnf->
						create_lc_error_counter; ++lc_index)
				{
					/* Check if SRB1 or SRB2 creation has failed */
					if ((p_create_ue_param->create_srb1_entity.lc_id ==
								p_mac_create_ue_entity_cnf->
								create_lc_error[lc_index].
								lch_id) || 
							(
							 (
							  (p_create_ue_param->bitmask &
							   UECC_LLIM_CREATE_UE_ENTITY_CREATE_SRB2_INFO_PRESENT
							  ) &&
							  (p_create_ue_param->create_srb2_entity.lc_id ==
							   p_mac_create_ue_entity_cnf->create_lc_error[
							   lc_index].lch_id)
							 )
							)
					   )
					{
						p_create_ue_resp->bitmask |= 
							UECC_LLIM_CREATE_SRB_ENTITY_ERROR_INFO_PRESENT;

						trigger_ue_creation_at_mac_failed = 1;

						RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
								"SRB Creation failed at MAC!!");
						break;
					}

					for (drb_index = 0; drb_index < p_create_ue_param->
							create_drb_entity_info.create_drb_entity_counter;
							++drb_index)
					{
						if (p_create_ue_param->create_drb_entity_info.
								create_drb_entity[drb_index].
								uecc_llim_drb_config.drb_config.
								logical_channel_identity ==
								p_mac_create_ue_entity_cnf->
								create_lc_error[lc_index].lch_id)
						{

							RRC_LLIM_TRACE(RRC_INFO, "[%s][ueid %d] CREATION of LCID %d failed at MAC\n",
									__FUNCTION__, p_ue_ctx->ue_index,
									p_mac_create_ue_entity_cnf->create_lc_error[lc_index].lch_id);

							if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
							{
								p_ue_ctx->curr_op_param.p_rcfg_ue = (rrc_uemh_rcfg_ue_op_param_t*)
									rrc_mem_get(sizeof(rrc_uemh_rcfg_ue_op_param_t));
								if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
								{
									RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
											"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL");
									RRC_LLIM_UT_TRACE_EXIT();
									return;
								}

								memset_wrapper(p_ue_ctx->curr_op_param.p_rcfg_ue, 0,
										sizeof(rrc_uemh_rcfg_ue_op_param_t));
							}

							/* Filling llim_drb_status for
							   Roll back operation of failed DRBs*/
							p_ue_ctx->curr_op_param.p_rcfg_ue->
								llim_drb_status[drb_index].
								lc_id =
								p_create_ue_param->create_drb_entity_info.
								create_drb_entity[drb_index].
								uecc_llim_drb_config.drb_config.
								logical_channel_identity;
							p_ue_ctx->curr_op_param.p_rcfg_ue->
								llim_drb_status[drb_index].
								drb_status = RRC_LLIM_DRB_FAILED_AT_MAC;

							p_create_ue_resp->create_drb_status[
								drb_index].lc_id = 
								p_create_ue_param->create_drb_entity_info.
								create_drb_entity[drb_index].
								uecc_llim_drb_config.drb_config.
								logical_channel_identity;
							p_create_ue_resp->create_drb_status[
								drb_index].response =
								RRC_LLIM_ADD_LC_FAIL_MAC;
							p_create_ue_resp->create_drb_status_counter++;
						}
					}
				}
			}
		}

		if (p_mac_create_ue_entity_cnf->create_ca_config_error_counter > RRC_NULL)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,
					"Scells Addition Partially Failed at MAC!!");
			trigger_ue_creation_at_mac_failed = RRC_TRUE;

			p_create_ue_resp->scell_addition_failed = RRC_TRUE;
		}
	}
	else if (MAC_FAILURE == p_mac_create_ue_entity_cnf->response_code)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"mac_create_ue_entity_cnf->response_code == Failure!!");
		trigger_ue_creation_at_mac_failed = RRC_TRUE;
	}

	/* SPS Start */
	if (p_mac_create_ue_entity_cnf->bitmask &
			RRC_MAC_SPS_CRNTI_INFO_PRESENT)
	{
		p_create_ue_resp->bitmask |= UECC_LLIM_CREATE_SRB_ENTITY_SPS_CRNTI_PRESENT;
		p_create_ue_resp->sps_crnti = 
			p_mac_create_ue_entity_cnf->sps_crnti_info.sps_crnti;
	}

	/* SPS Stop */

	if (!trigger_ue_creation_at_mac_failed)
	{
		/* If it's case of success or partial success */
		rrc_rlc_create_ue_entity_req_t rlc_create_ue_entity_req;

		RRC_ASSERT(p_create_ue_param->create_srb1_entity.srb_config.bitmask &
				RRM_SRB_CONFIG_AM_CONFIG_PRESENT);
		RRC_ASSERT(p_create_ue_param->create_srb1_entity.srb_config.
				srb_am_config.bitmask &
				RRM_SRB_AM_CONFIG_EXPLICIT_PRESENT);

		/* 1. send RRC_RLC_CREATE_UE_ENTITY_REQ */
		memset_wrapper(&rlc_create_ue_entity_req, 0, sizeof
				(rlc_create_ue_entity_req));
		rlc_create_ue_entity_req.ue_index = p_create_ue_param->ue_index;
		rlc_create_ue_entity_req.rnti = p_create_ue_param->crnti;

		rlc_create_ue_entity_req.num_create_tx_rx_am_rlc = 1;

		rlc_create_ue_entity_req.create_tx_rx_am_rlc[0].lc_id =
			p_create_ue_param->create_srb1_entity.lc_id;

		rlc_create_ue_entity_req.create_tx_rx_am_rlc[0].t_poll_retransmission =
			get_rlc_poll_retransmission_from_enum(p_create_ue_param->
					create_srb1_entity.srb_config.srb_am_config.am_config_explicit.
					ul_am_rlc.t_poll_retransmit);
		rlc_create_ue_entity_req.create_tx_rx_am_rlc[0].poll_pdu =
			get_rlc_poll_pdu_from_enum(p_create_ue_param->create_srb1_entity.
					srb_config.srb_am_config.am_config_explicit.ul_am_rlc.poll_pdu);
		rlc_create_ue_entity_req.create_tx_rx_am_rlc[0].poll_byte =
			get_rlc_poll_byte_from_enum(p_create_ue_param->create_srb1_entity.
					srb_config.srb_am_config.am_config_explicit.ul_am_rlc.poll_byte);
		rlc_create_ue_entity_req.create_tx_rx_am_rlc[0].max_re_tx_thrsh_ld =
			get_rlc_max_retx_threshold_from_enum(p_create_ue_param->
					create_srb1_entity.srb_config.srb_am_config.am_config_explicit.
					ul_am_rlc.max_retx_threshold);

		rlc_create_ue_entity_req.create_tx_rx_am_rlc[0].t_reordering =
			get_rlc_t_reordering_from_enum(p_create_ue_param->create_srb1_entity
					.srb_config.srb_am_config.am_config_explicit.dl_am_rlc.
					t_reordering);
		rlc_create_ue_entity_req.create_tx_rx_am_rlc[0].t_status_prohibit =
			get_rlc_t_status_prohibit_from_enum(p_create_ue_param->
					create_srb1_entity.srb_config.srb_am_config.am_config_explicit.
					dl_am_rlc.t_status_prohibit);

		/* If SRB2 present then add info in RLC CREATE UE ENTITY REQ*/
		if (p_create_ue_param->bitmask &
				UECC_LLIM_CREATE_UE_ENTITY_CREATE_SRB2_INFO_PRESENT)
		{
			RRC_ASSERT(p_create_ue_param->
					create_srb2_entity.srb_config.bitmask &
					RRM_SRB_CONFIG_AM_CONFIG_PRESENT);

			fill_create_part_srb_rlc_create_ue_entity_req(
					&rlc_create_ue_entity_req,
					p_create_ue_param-> create_srb2_entity.lc_id,
					&p_create_ue_param->create_srb2_entity.
					srb_config.srb_am_config);
		}

		for (drb_index = 0; drb_index < p_create_ue_param->
				create_drb_entity_info.create_drb_entity_counter; 
				++drb_index)
		{
			/* If LC creation failed at a previous layer ignore it */
			if (p_create_ue_resp->create_drb_status[drb_index].response >=
					RRC_LLIM_UE_ALREADY_EXIST)
			{
				continue;
			}
			RRC_ASSERT(p_create_ue_param->create_drb_entity_info.
					create_drb_entity[drb_index].
					uecc_llim_drb_config.drb_config.bitmask &
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT);

			fill_create_part_drb_rlc_create_ue_entity_req(
					&rlc_create_ue_entity_req,
					p_create_ue_param->create_drb_entity_info.
					create_drb_entity[drb_index].
					uecc_llim_drb_config.drb_config.
					logical_channel_identity,
					&p_create_ue_param->create_drb_entity_info.
					create_drb_entity[drb_index].uecc_llim_drb_config.
					drb_config.rlc_config_enb.rlc_config);
			/* Qos changes start*/
			/*Fill the qos related info*/
			fill_qos_info_rlc_create_ue_entity_req (
					&rlc_create_ue_entity_req, 
					drb_index, p_create_ue_param);
		}
		/* Filling UE AMBR Info*/

		if ((UECC_LLIM_CREATE_UE_ENTITY_REQ_HO_TRIGGERED_FLAG &
					p_create_ue_param->bitmask) &&
				(UECC_LLIM_CREATE_UE_ENTITY_UE_AMBR_PRESENT & 
				 p_create_ue_param->bitmask))
		{
			rlc_create_ue_entity_req.bitmask |= RRC_RLC_UE_BIT_RATE_PRESENT;

			rlc_create_ue_entity_req.rlc_ue_bit_rate_info.bit_rate_tx = 
				p_create_ue_param->ue_ambr.ul_ambr; 

			rlc_create_ue_entity_req.rlc_ue_bit_rate_info.bit_rate_rx = 
				p_create_ue_param->ue_ambr.dl_ambr; 
		}
		/* Qos changes stop*/

		/* SPS Start */
		if (UECC_LLIM_CREATE_SRB_ENTITY_SPS_CRNTI_PRESENT &
				p_create_ue_resp->bitmask)
		{
			/* Fill DL & UL SPS Info */
			rlc_create_ue_entity_req.bitmask |=
				RRC_RLC_SPS_CONFIG_PRESENT;

			if (p_create_ue_param->sps_config.bitmask &
					RRC_SPS_CONFIG_SPS_CONFIG_DL_PRESENT)
			{
				rlc_create_ue_entity_req.sps_config.optional_elems_present |= 
					RRC_RLC_SPS_DL_INFO_PRESENT;

				if (p_create_ue_param->sps_config.sps_config_dl.bitmask &
						RRC_SPS_CONFIG_DL_PARAM_PRESENT)
				{
					/* Setup */
					rlc_create_ue_entity_req.sps_config.sps_dl_info.request_type = 1; /* Setup */
					rlc_create_ue_entity_req.sps_config.sps_dl_info.optional_elems_present |= 
						RRC_RLC_SPS_DL_SETUP_INFO_PRESENT;
					rlc_create_ue_entity_req.sps_config.sps_dl_info.sps_dl_setup_info.
						semi_persistent_sched_interval_dl = 
						p_create_ue_param->sps_config.sps_config_dl.sps_config_dl_param.
						semi_persist_sched_interval_dl;
				}
				else
				{
					/* Release */
					rlc_create_ue_entity_req.sps_config.sps_dl_info.request_type = 0; /* Release */

				}
			}

			if (p_create_ue_param->sps_config.bitmask &
					RRC_SPS_CONFIG_SPS_CONFIG_UL_PRESENT)
			{
				rlc_create_ue_entity_req.sps_config.optional_elems_present |= 
					RRC_RLC_SPS_UL_INFO_PRESENT;

				if (p_create_ue_param->sps_config.sps_config_ul.bitmask &
						RRC_SPS_CONFIG_UL_PARAM_PRESENT)
				{
					/* Setup */
					rlc_create_ue_entity_req.sps_config.sps_ul_info.request_type = 1; /* Setup */
					rlc_create_ue_entity_req.sps_config.sps_ul_info.optional_elems_present |= 
						RRC_RLC_SPS_UL_SETUP_INFO_PRESENT;
					rlc_create_ue_entity_req.sps_config.sps_ul_info.sps_ul_setup_info.
						semi_persistent_sched_interval_ul = 
						p_create_ue_param->sps_config.sps_config_ul.sps_config_ul_param.
						semi_persist_sched_interval_ul;
				}
				else
				{
					/* Release */
					rlc_create_ue_entity_req.sps_config.sps_ul_info.request_type = 0; /* Release */
				}
			}
		}
		/* SPS Stop */


		RRC_ASSERT(rlc_create_ue_entity_req.num_create_tx_um_rlc <=
				RRC_RLC_MAX_NUM_LC);
		RRC_ASSERT(rlc_create_ue_entity_req.num_create_rx_um_rlc <=
				RRC_RLC_MAX_NUM_LC);
		RRC_ASSERT(rlc_create_ue_entity_req.num_create_tx_rx_um_rlc <=
				RRC_RLC_MAX_NUM_LC);
		RRC_ASSERT(rlc_create_ue_entity_req.num_create_tx_rx_am_rlc <=
				RRC_RLC_MAX_NUM_LC);

		rrc_rlc_il_send_rrc_rlc_create_ue_entity_req(
				&rlc_create_ue_entity_req, 
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_create_ue_param->cell_index),
				p_create_ue_param->transaction_id,
				p_create_ue_param->cell_index);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF);
	}
	else
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_create_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_CREATE_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_create_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_create_ue->guard_timer = PNULL;
		}

		/* 2. Set guard timer */
		/* 3. Delete on lower layers */
		/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
		uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
				UEMH_FSM_CREATE_FAIL,
				UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF,
				p_create_ue_param->ue_index,
				p_create_ue_param->transaction_id,
				p_rrc_llim_gl_ctx,
				p_create_ue_param->cell_index);
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/*
 *   UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_rlc_create_ue_state_rlc_cnf
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *   
 *   DESCRIPTION  : This function continue ue creation if RLC is OK.
 *       state UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF;
 *       event UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_rlc_create_ue_state_rlc_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
    U8 create_drb_entity_counter = 0;
    rrc_uecc_llim_create_ue_entity_resp_t *p_create_ue_resp = PNULL;
    rrc_rlc_create_ue_entity_cnf_t *p_rlc_create_ue_entity_cnf =
        (rrc_rlc_create_ue_entity_cnf_t *)p_msg;
    rrc_uecc_llim_create_ue_entity_req_t *p_create_ue_param = PNULL;
    U8 trigger_ue_creation_at_rlc_failed = 0;
    rrc_counter_t drb_index = RRC_NULL;
    rrc_counter_t lc_index = RRC_NULL;

    RRC_LLIM_UT_TRACE_ENTER();

    RRC_ASSERT(PNULL != p_api);
    RRC_ASSERT(PNULL != p_rlc_create_ue_entity_cnf);
    RRC_ASSERT(PNULL != p_ue_ctx);
    RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

    if (PNULL == p_ue_ctx->curr_op_param.p_create_ue) 
    {
        RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
                "p_ue_ctx->curr_op_param.p_create_ue is NULL - ignored");
        RRC_LLIM_UT_TRACE_EXIT();
        return;
    }
    p_create_ue_param = &p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue;

    /* Precondition - should be the same transaction */
    if (rrc_get_transaction_id(p_api) != p_create_ue_param->transaction_id)
    {
        RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
                "transaction_id - ignored");
        RRC_LLIM_UT_TRACE_EXIT();
        return;
    }

    p_create_ue_resp = &p_ue_ctx->curr_op_param.p_create_ue->create_ue_resp;

    if (RLC_PARTIAL_SUCCESS == p_rlc_create_ue_entity_cnf->response_code)
    {
        if (p_rlc_create_ue_entity_cnf->num_create_entity_error
                == (p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create +
                    p_ue_ctx->curr_op_param.p_create_ue->num_srb_to_create ))
        {
            RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
                    "Creation of all DRBs failed at MAC!!");
            trigger_ue_creation_at_rlc_failed = 1;
        }
        else
        {
            p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create = 
                (U8)(p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create - 
                        p_rlc_create_ue_entity_cnf->num_create_entity_error );

            RRC_LLIM_TRACE(RRC_INFO, "[%s][ueid %d] NUM_DRB_TO_CREATE %d create_drb_entity_counter %d \n",
                    __FUNCTION__,
                    p_ue_ctx->ue_index, p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create,
                    p_create_ue_param->create_drb_entity_info.create_drb_entity_counter );

            for (lc_index = 0; lc_index < p_rlc_create_ue_entity_cnf->
                    num_create_entity_error; ++lc_index)
            {
                if (
                        (p_create_ue_param->create_srb1_entity.lc_id ==
                         p_rlc_create_ue_entity_cnf->
                         create_error_entities[lc_index].lc_id) ||
                        ((p_create_ue_param->bitmask &
                          UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT) &&
                         (p_create_ue_param->create_srb2_entity.lc_id ==
                          p_rlc_create_ue_entity_cnf->
                          create_error_entities[lc_index].lc_id))
                   )
                {
                    p_create_ue_resp->bitmask |= 
                        UECC_LLIM_CREATE_SRB_ENTITY_ERROR_INFO_PRESENT;

                    trigger_ue_creation_at_rlc_failed = 1;

                    RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
                            "SRB Creation failed at RLC!!");
                    break;
                }

                for (drb_index = 0; drb_index < 
                        p_create_ue_param->create_drb_entity_info.
                        create_drb_entity_counter; ++drb_index)
                {
                    if (p_create_ue_param->create_drb_entity_info.
                            create_drb_entity[drb_index].uecc_llim_drb_config.
                            drb_config.logical_channel_identity ==
                            p_rlc_create_ue_entity_cnf->
                            create_error_entities[lc_index].lc_id)
                    {

                        RRC_LLIM_TRACE(RRC_INFO, "[%s][ueid %d] CREATION of LCID %d failed at RLC\n",
                                __FUNCTION__, p_ue_ctx->ue_index,
                                p_rlc_create_ue_entity_cnf->create_error_entities[lc_index].lc_id);

                        if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
                        {
                            p_ue_ctx->curr_op_param.p_rcfg_ue = (rrc_uemh_rcfg_ue_op_param_t*)
                                rrc_mem_get(sizeof(rrc_uemh_rcfg_ue_op_param_t));
                            if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
                            {
                                RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
                                        "p_ue_ctx->curr_op_param.p_rcfg_ue is NULL");
                                RRC_LLIM_UT_TRACE_EXIT();
                                return;
                            }

                            memset_wrapper(p_ue_ctx->curr_op_param.p_rcfg_ue, 0,
                                    sizeof(rrc_uemh_rcfg_ue_op_param_t));
                        }
                        /* Filling llim_drb_status for Roll back operation of failed DRBs*/
                        p_ue_ctx->curr_op_param.p_rcfg_ue->
                            llim_drb_status[drb_index].
                            lc_id =
                            p_create_ue_param->create_drb_entity_info.
                            create_drb_entity[drb_index].uecc_llim_drb_config.
                            drb_config.logical_channel_identity;
                        p_ue_ctx->curr_op_param.p_rcfg_ue->
                            llim_drb_status[drb_index].
                            drb_status = RRC_LLIM_DRB_FAILED_AT_RLC;

                        p_create_ue_resp->create_drb_status[drb_index].
                            lc_id = p_create_ue_param->create_drb_entity_info.  
                            create_drb_entity[drb_index].uecc_llim_drb_config.
                            drb_config.logical_channel_identity;
                        p_create_ue_resp->create_drb_status[drb_index].
                            response = RRC_LLIM_ADD_LC_FAIL_RLC;

                        p_create_ue_resp->create_drb_status_counter++;
                    }
                }
            }
        }
    }
    else if (RLC_FAILURE == p_rlc_create_ue_entity_cnf->response_code)
    {
        trigger_ue_creation_at_rlc_failed = 1;
        RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
                "rlc_create_ue_entity_cnf->response_code == Failure!!");
    }

    if (!trigger_ue_creation_at_rlc_failed)
    {
        rrc_pdcp_cr_ue_entity_req_t pdcp_cr_ue_entity_req;

        /* 1. send RRC_PDCP_CREATE_UE_ENTITY_REQ */
        memset_wrapper(&pdcp_cr_ue_entity_req, 0, sizeof(pdcp_cr_ue_entity_req));

        pdcp_cr_ue_entity_req.ue_index  = p_create_ue_param->ue_index;
        pdcp_cr_ue_entity_req.crnti     = p_create_ue_param->crnti;

        pdcp_cr_ue_entity_req.num_cr_srb_entity = 1;

        fill_pdcp_cr_srb_entities(&pdcp_cr_ue_entity_req.cr_srb_entities[0],
                &p_create_ue_param->create_srb1_entity);

        if (p_create_ue_param->bitmask &
                UECC_LLIM_CREATE_UE_ENTITY_CREATE_SRB2_INFO_PRESENT)
        {
            pdcp_cr_ue_entity_req.num_cr_srb_entity = 2;

            fill_pdcp_cr_srb_entities(  &pdcp_cr_ue_entity_req.
                    cr_srb_entities[1], &p_create_ue_param->create_srb2_entity);
        }

        /* Check if it's case of handover */
        /*SPR_19066_START*/
        if((UECC_LLIM_CREATE_UE_ENTITY_REQ_HO_TRIGGERED_FLAG & p_create_ue_param->bitmask)
                && (p_create_ue_param->ho_triggered.ho_trigger))
        {
            pdcp_cr_ue_entity_req.optional_elems_present |=
                RRC_PDCP_HO_TRIGGER_PRESENT;
            pdcp_cr_ue_entity_req.ho_triggered.ho_trigger = 1;

            if(RRC_PDCP_UE_INACTIVE_TIME_LAPSED_PRESENT &
                    p_create_ue_param->ho_triggered.optional_elems_present)
            {
                pdcp_cr_ue_entity_req.ho_triggered.rrc_ue_inactive_time_lapsed =
                    p_create_ue_param->ho_triggered.rrc_ue_inactive_time_lapsed;
                pdcp_cr_ue_entity_req.ho_triggered.optional_elems_present |=
                    RRC_PDCP_UE_INACTIVE_TIME_LAPSED_PRESENT;
            }
        }
        /*SPR_19066_END*/

        if( RRC_UECC_LLIM_MAX_CREATE_DRB >= p_create_ue_param->create_drb_entity_info.
                create_drb_entity_counter)
        {
            for (drb_index = 0; drb_index < 
                    p_create_ue_param->create_drb_entity_info.
                    create_drb_entity_counter; ++drb_index)
            {
                /* If LC creation failed at a previous layer ignore it */
                if (p_create_ue_resp->create_drb_status[drb_index].response >=
                        RRC_LLIM_UE_ALREADY_EXIST)
                {
                    continue;
                }
                if (RRC_PDCP_MAX_DRB >create_drb_entity_counter)
                {
                    fill_pdcp_cr_drb_entities(  &pdcp_cr_ue_entity_req.
                            cr_drb_entities[create_drb_entity_counter++], 
                            &p_create_ue_param->create_drb_entity_info.
                            create_drb_entity[drb_index]);
                }
                else
                {
                    RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Drb entity counter");
                    break;
                }
            }
        }
        else
        {
            RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "DRB count exceeds RRC_UECC_LLIM_MAX_CREATE_DRB");
            RRC_LLIM_UT_TRACE_EXIT();
            return;
        }
        pdcp_cr_ue_entity_req.num_cr_drb_entity = create_drb_entity_counter;
        if(UECC_LLIM_SRB_CONFIGURE_INTEGRITY_PROTECTION_PRESENT &
                p_create_ue_param->create_srb1_entity.bitmask)
        {
            pdcp_cr_ue_entity_req.optional_elems_present |=
                RRC_PDCP_CR_SRB_CONFIG_INT_PRESENT;
            pdcp_cr_ue_entity_req.config_integrity_protection =
                p_create_ue_param->create_srb1_entity.
                configure_integrity_protection;
        }

        if(UECC_LLIM_SRB_CONFIGURE_CIPHERING_PRESENT &
                p_create_ue_param->create_srb1_entity.bitmask)
        {
            pdcp_cr_ue_entity_req.optional_elems_present |=
                RRC_PDCP_CR_SRB_CONFIG_CIPH_PRESENT;
            pdcp_cr_ue_entity_req.config_srb_ciphering =
                p_create_ue_param->create_srb1_entity.
                configure_ciphering;
        }

        if((UECC_LLIM_CREATE_DRB_ENTITY_LIST_PRESENT & p_create_ue_param->bitmask) &&
                (UECC_LLIM_DRB_CONFIGURE_CIPHERING_PRESENT &
                 p_create_ue_param->create_drb_entity_info.create_drb_entity[0].bitmask))
        {
            pdcp_cr_ue_entity_req.optional_elems_present |=
                RRC_PDCP_CR_DRB_CONFIG_CIPH_PRESENT;
            pdcp_cr_ue_entity_req.config_drb_ciphering =
                p_create_ue_param->create_drb_entity_info.create_drb_entity[0].
                configure_ciphering;
        }

        /* SPS Start */
        if (UECC_LLIM_CREATE_SRB_ENTITY_SPS_CRNTI_PRESENT &
                p_create_ue_resp->bitmask)
        {
            /* Fill DL & UL SPS Info */
            pdcp_cr_ue_entity_req.optional_elems_present |=
                RRC_PDCP_SPS_CONFIG_PRESENT;

            if (p_create_ue_param->sps_config.bitmask &
                    RRC_SPS_CONFIG_SPS_CONFIG_DL_PRESENT)
            {
                pdcp_cr_ue_entity_req.sps_config.optional_elems_present |= 
                    RRC_PDCP_SPS_DL_INFO_PRESENT;

                if (p_create_ue_param->sps_config.sps_config_dl.bitmask &
                        RRC_SPS_CONFIG_DL_PARAM_PRESENT)
                {
                    /* Setup */
                    pdcp_cr_ue_entity_req.sps_config.sps_dl_info.request_type = 1; /* Setup */
                    pdcp_cr_ue_entity_req.sps_config.sps_dl_info.optional_elems_present |= 
                        RRC_RLC_SPS_DL_SETUP_INFO_PRESENT;
                    pdcp_cr_ue_entity_req.sps_config.sps_dl_info.sps_dl_setup_info.
                        semi_persistent_sched_interval_dl = 
                        p_create_ue_param->sps_config.sps_config_dl.sps_config_dl_param.
                        semi_persist_sched_interval_dl;
                }
                else
                {
                    /* Release */
                    pdcp_cr_ue_entity_req.sps_config.sps_dl_info.request_type = 0; /* Release */
                }
            }

            if (p_create_ue_param->sps_config.bitmask &
                    RRC_SPS_CONFIG_SPS_CONFIG_UL_PRESENT)
            {
                pdcp_cr_ue_entity_req.sps_config.optional_elems_present |= 
                    RRC_PDCP_SPS_UL_INFO_PRESENT;

                if (p_create_ue_param->sps_config.sps_config_ul.bitmask &
                        RRC_SPS_CONFIG_UL_PARAM_PRESENT)
                {
                    /* Setup */
                    pdcp_cr_ue_entity_req.sps_config.sps_ul_info.request_type = 1; /* Setup */
                    pdcp_cr_ue_entity_req.sps_config.sps_ul_info.optional_elems_present |= 
                        RRC_RLC_SPS_UL_SETUP_INFO_PRESENT;
                    pdcp_cr_ue_entity_req.sps_config.sps_ul_info.sps_ul_setup_info.
                        semi_persistent_sched_interval_ul = 
                        p_create_ue_param->sps_config.sps_config_ul.sps_config_ul_param.
                        semi_persist_sched_interval_ul;
                }
                else
                {
                    /* Release */
                    pdcp_cr_ue_entity_req.sps_config.sps_ul_info.request_type = 0; /* Release */
                }
            }
        }
        /*SPR_17121_START*/
        if(p_create_ue_param->bitmask & 
                UECC_LLIM_CREATE_UE_ENTITY_MACI_REQ_PRESENT)
        {
            l3_memcpy_wrapper(&(pdcp_cr_ue_entity_req.mac_i_req),
                    &(p_create_ue_param->mac_i_req),
                    sizeof(rrc_mac_i_msg_t));		
            pdcp_cr_ue_entity_req.optional_elems_present |= 
                RRC_PDCP_CONFIG_MACI_REQ_PRESENT;
        }
        /*SPR_17121_END*/
        /* SPS Stop */

        /*SPR_19066_START*/
        if (p_create_ue_param->bitmask & 
                UECC_LLIM_CREATE_UE_ENTITY_UE_INACTIVITY_TIMER_PRESENT)
        {
            pdcp_cr_ue_entity_req.optional_elems_present |=
                RRC_PDCP_UE_INACTIVITY_TIMER_CONFIG_PRESENT;

            pdcp_cr_ue_entity_req.ue_inactivity_timer.ue_inactive_time_config =
                p_create_ue_param->ue_inactivity_timer.ue_inactive_time_config;
        }
        /*SPR_19066_END*/

        rrc_pdcp_il_send_rrc_pdcp_cr_ue_entity_req( &pdcp_cr_ue_entity_req,
                RRC_LLIM_MODULE_ID,
                RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_create_ue_param->cell_index),
                p_create_ue_param->transaction_id,
                p_create_ue_param->cell_index);

        UEMH_FSM_SET_STATE(p_ue_ctx,
                UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF);
    }
    else 
    {
        /* 1. Stop guard timer */
        if (PNULL != p_ue_ctx->curr_op_param.p_create_ue->guard_timer)
        {
            RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
                    "[LLIM_CREATE_UE_ENTITY_TIMER]");
            rrc_stop_timer(p_ue_ctx->curr_op_param.p_create_ue->guard_timer);
            p_ue_ctx->curr_op_param.p_create_ue->guard_timer = PNULL;
        }

        /* 2. Set guard timer */
        /* 3. Delete on lower layers */
        /* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
        uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
                UEMH_FSM_CREATE_FAIL,
                UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF,
                p_create_ue_param->ue_index,
                p_create_ue_param->transaction_id,
                p_rrc_llim_gl_ctx,
                p_create_ue_param->cell_index);
    }

    RRC_LLIM_UT_TRACE_EXIT();
}

/*
 *   UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_pdcp_create_ue_state_pdcp_cnf
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *   DESCRIPTION  : This function report about successfully ue creation if PDCP is OK.
 *       state UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_pdcp_create_ue_state_pdcp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_create_ue_entity_resp_t *p_create_ue_resp = PNULL;
	U8 tunnel_count = 0;
	U8 total_tunnel_count = 0;
	U8 trigger_ue_creation_at_pdcp_failed = 0;
	rrc_pdcp_cr_ue_entity_cnf_t             *p_pdcp_cr_ue_entity_cnf =
		(rrc_pdcp_cr_ue_entity_cnf_t *)p_msg;
	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param = PNULL;
	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t srb_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_cr_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_create_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_create_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_create_ue_param = &p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue;
	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_create_ue_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}


	p_create_ue_resp = 
		&p_ue_ctx->curr_op_param.p_create_ue->create_ue_resp;

	if (PDCP_PARTIAL_SUCCESS == p_pdcp_cr_ue_entity_cnf->response_code)
	{ 
		if (p_pdcp_cr_ue_entity_cnf->num_cr_drb_entity_error
				==p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
					"Creation of all DRBs failed at PDCP !!");
			trigger_ue_creation_at_pdcp_failed = 1;
		}
		else
		{
			p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create = 
				(U8)(p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create -
						p_pdcp_cr_ue_entity_cnf->num_cr_drb_entity_error);

			RRC_LLIM_TRACE(RRC_INFO, "[%s][ueid %d] NUM_DRB_TO_CREATE %d create_drb_entity_counter %d \n",
					__FUNCTION__,
					p_ue_ctx->ue_index, p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create,
					p_create_ue_param->create_drb_entity_info.create_drb_entity_counter );

			for (srb_index = 0; srb_index < p_pdcp_cr_ue_entity_cnf->
					num_cr_srb_entity_error; ++srb_index)
			{
				if ((p_create_ue_param->create_srb1_entity.lc_id ==
							p_pdcp_cr_ue_entity_cnf->
							cr_srb_error_entities[srb_index].lc_id) ||
						((p_create_ue_param->bitmask &
						  UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT) &&
						 (p_create_ue_param->create_srb2_entity.lc_id ==
						  p_pdcp_cr_ue_entity_cnf->
						  cr_srb_error_entities[srb_index].lc_id)))

				{
					p_create_ue_resp->bitmask |= 
						UECC_LLIM_CREATE_SRB_ENTITY_ERROR_INFO_PRESENT;

					trigger_ue_creation_at_pdcp_failed = 1;

					RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
							"SRB Creation failed at PDCP!!");
					break;

				}

			}

			if (!trigger_ue_creation_at_pdcp_failed)
			{ 
				U8 lc_index = 0;
				/* All channels statuses were set to RRC_SUCCESS,
				 *  now fail only specific channels */
				for (lc_index = 0; 
						lc_index < p_pdcp_cr_ue_entity_cnf->num_cr_drb_entity_error;
						lc_index++)
				{
					for (drb_index = 0; 
							drb_index < 
							p_create_ue_param->create_drb_entity_info.create_drb_entity_counter;
							++drb_index)
					{

						if (p_create_ue_param->create_drb_entity_info.
								create_drb_entity[drb_index].
								uecc_llim_drb_config.drb_config.
								logical_channel_identity ==
								p_pdcp_cr_ue_entity_cnf->cr_drb_error_entities
								[lc_index].lc_id)
						{

							RRC_LLIM_TRACE(RRC_INFO, "[%s][ueid %d] CREATION of LCID %d failed at PDCP\n",
									__FUNCTION__, p_ue_ctx->ue_index,
									p_pdcp_cr_ue_entity_cnf->cr_drb_error_entities [lc_index].lc_id);
							if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
							{
								p_ue_ctx->curr_op_param.p_rcfg_ue = (rrc_uemh_rcfg_ue_op_param_t*)
									rrc_mem_get(sizeof(rrc_uemh_rcfg_ue_op_param_t));
								if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
								{
									RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
											"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL");
									RRC_LLIM_UT_TRACE_EXIT();
									return;
								}

								memset_wrapper(p_ue_ctx->curr_op_param.p_rcfg_ue, 0,
										sizeof(rrc_uemh_rcfg_ue_op_param_t));
							}

							/* Filling llim_drb_status for Roll back operation of 
							   failed DRBs*/
							p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[
								drb_index].lc_id =
								p_create_ue_param->create_drb_entity_info.
								create_drb_entity[drb_index].uecc_llim_drb_config.
								drb_config.logical_channel_identity;
							p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[
								drb_index].drb_status = RRC_LLIM_DRB_FAILED_AT_PDCP;

							p_create_ue_resp->create_drb_status[
								drb_index].lc_id = 
								p_create_ue_param->create_drb_entity_info.
								create_drb_entity[drb_index].uecc_llim_drb_config.
								drb_config.logical_channel_identity;
							p_create_ue_resp->create_drb_status[
								drb_index].response =
								RRC_LLIM_ADD_LC_FAIL_PDCP;
							p_create_ue_resp->create_drb_status_counter ++;
						}
					}
				}
			}
		}
	}
	else if (PDCP_FAILURE == p_pdcp_cr_ue_entity_cnf->response_code)
	{
		trigger_ue_creation_at_pdcp_failed = 1;
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"pdcp_cr_ue_entity_cnf->response_code == FAILURE");
	}

	if (!trigger_ue_creation_at_pdcp_failed)
	{
		/*BUG 604 changes start*/
		/*SPR_17121_START*/
		if(p_pdcp_cr_ue_entity_cnf->optional_elems_present & 
				RRC_PDCP_CONFIG_MACI_RESP_PRESENT)
		{
			/* Store maci in local ue context at llim */
			p_ue_ctx->mac_i = p_pdcp_cr_ue_entity_cnf->mac_i.mac_i;
			p_ue_ctx->bitmask |= RRC_UECC_LLIM_MAC_I_PRESENT; 
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE( RRC_DETAILED,
					"MACI not recieved in create_ue_entity_cnf");
		}
		/*SPR_17121_END*/
		if((UECC_LLIM_CREATE_UE_ENTITY_HO_TYPE_PRESENT & p_create_ue_param->bitmask)
				&& (HANDOVER_TYPE_INTRA_CELL == p_create_ue_param->ho_type))
		{
			/* send UECC_LLIM_CREATE_UE_ENTITY_RESP */
			p_create_ue_resp->cell_index        = p_create_ue_param->cell_index;
			p_create_ue_resp->transaction_id    = p_create_ue_param->transaction_id;
			p_create_ue_resp->ue_index          = p_create_ue_param->ue_index;
			p_create_ue_resp->response_code     = RRC_SUCCESS;

			/*SPR_17121_START*/
			p_create_ue_resp->mac_i.mac_i = p_pdcp_cr_ue_entity_cnf->mac_i.mac_i; 
			p_create_ue_resp->bitmask |= UECC_LLIM_CREATE_UE_ENTITY_RESP_MACI_PRESENT;
			/*SPR_17121_END*/
			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_create_ue_resp->ue_index),
					UECC_LLIM_CREATE_UE_ENTITY_RESP,
					sizeof(rrc_uecc_llim_create_ue_entity_resp_t),
					p_create_ue_resp);

			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			rrc_mem_free (p_ue_ctx->curr_op_param.p_create_ue);
			p_ue_ctx->curr_op_param.p_create_ue = PNULL;
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue)
			{
				rrc_mem_free (p_ue_ctx->curr_op_param.p_rcfg_ue);
				p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			}
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
		/*BUG 604 changes stop*/
		rrc_s1u_create_ue_entity_req_t s1u_create_ue_entity_req;

		/* 1. send RRC_S1U_CREATE_UE_ENTITY_REQ */
		memset_wrapper(&s1u_create_ue_entity_req, 0, sizeof
				(s1u_create_ue_entity_req));

		s1u_create_ue_entity_req.ue_index  = p_create_ue_param->ue_index;

		for (drb_index = 0; 
				drb_index < p_create_ue_param->create_drb_entity_info.
				create_drb_entity_counter; ++drb_index)
		{
			/* If LC creation failed at a previous layer ignore it */
			if (p_create_ue_resp->create_drb_status[drb_index].response >=
					RRC_LLIM_UE_ALREADY_EXIST)
			{
				continue;
			}

			s1u_create_ue_entity_req.setup_sap_req[
				s1u_create_ue_entity_req.num_setup_sap_req].bitmask = 0;

			/* LCID */
			s1u_create_ue_entity_req.setup_sap_req[
				s1u_create_ue_entity_req.num_setup_sap_req].lc_id =
				p_create_ue_param->create_drb_entity_info.
				create_drb_entity[drb_index].uecc_llim_drb_config.
				drb_config.logical_channel_identity;

			/* QOS ID */
			s1u_create_ue_entity_req.setup_sap_req[
				s1u_create_ue_entity_req.num_setup_sap_req].qos_id =
				p_create_ue_param->create_drb_entity_info.
				create_drb_entity[drb_index].uecc_llim_drb_config.
				drb_config.s1u_config.qos_id;

			/* QOS PROFILE */
			s1u_create_ue_entity_req.setup_sap_req[
				s1u_create_ue_entity_req.num_setup_sap_req].bitmask |=
				RRC_S1U_IE_SETUP_QOS_PROFILE_PRESENT;
			s1u_create_ue_entity_req.setup_sap_req[
				s1u_create_ue_entity_req.num_setup_sap_req].qos_profile.
				allocation_retention_priority =
				p_create_ue_param->create_drb_entity_info.
				create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
				s1u_config.qos_profile.allocation_retention_priority;
			s1u_create_ue_entity_req.setup_sap_req[
				s1u_create_ue_entity_req.num_setup_sap_req].qos_profile.
				qos_profile_data_length =
				p_create_ue_param->create_drb_entity_info.
				create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
				s1u_config.qos_profile.qos_profile_data_size;
			l3_memcpy_wrapper(s1u_create_ue_entity_req.setup_sap_req[
					s1u_create_ue_entity_req.num_setup_sap_req].
					qos_profile.qos_profile_data,
					p_create_ue_param->create_drb_entity_info.
					create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
					s1u_config.qos_profile.qos_profile_data,
					sizeof(s1u_create_ue_entity_req.setup_sap_req[
						s1u_create_ue_entity_req.num_setup_sap_req].
						qos_profile.qos_profile_data));

			/* SEQ FLAG */
			s1u_create_ue_entity_req.setup_sap_req[
				s1u_create_ue_entity_req.num_setup_sap_req].bitmask |=
				RRC_S1U_IE_SETUP_SEQ_FLAG_PRESENT;
			s1u_create_ue_entity_req.setup_sap_req[
				s1u_create_ue_entity_req.num_setup_sap_req].seq_flag.disable =
				p_create_ue_param->create_drb_entity_info.
				create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
				s1u_config.seq_flag;

			/* REORDERING REQD */
			s1u_create_ue_entity_req.setup_sap_req[
				s1u_create_ue_entity_req.num_setup_sap_req].bitmask |=
				RRC_S1U_IE_SETUP_REORDERING_REQD_PRESENT;
			s1u_create_ue_entity_req.setup_sap_req[
				s1u_create_ue_entity_req.num_setup_sap_req].reordering_reqd.
				reordering_reqd =
				p_create_ue_param->create_drb_entity_info.
				create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
				s1u_config.reordering_reqd;

			/* TUNNEL INFO */
			total_tunnel_count = (U8)(s1u_create_ue_entity_req.setup_sap_req[
					s1u_create_ue_entity_req.num_setup_sap_req].num_tunnel_info =
					p_create_ue_param->create_drb_entity_info.
					create_drb_entity[drb_index].drb_s1u_info.tunnel_list_count);

			for (tunnel_count =0; tunnel_count < total_tunnel_count;
					tunnel_count++)
			{
				/* HO Integration Fix */
				s1u_create_ue_entity_req.setup_sap_req[
					s1u_create_ue_entity_req.num_setup_sap_req].
					tunnel_info[tunnel_count].sap_flag =
					p_create_ue_param->create_drb_entity_info.
					create_drb_entity[drb_index].drb_s1u_info.
					tunnel_info_list[tunnel_count].sap_flag;

				s1u_create_ue_entity_req.setup_sap_req[
					s1u_create_ue_entity_req.num_setup_sap_req].
					tunnel_info[tunnel_count].bitmask |= 
					RRC_S1U_IE_TUNNEL_INFO_TEID_PEER_PRESENT;
				s1u_create_ue_entity_req.setup_sap_req[
					s1u_create_ue_entity_req.num_setup_sap_req].
					tunnel_info[tunnel_count].teid_peer.teid = 
					p_create_ue_param->create_drb_entity_info.
					create_drb_entity[drb_index].drb_s1u_info.
					tunnel_info_list[0].teid_peer;

				s1u_create_ue_entity_req.setup_sap_req[
					s1u_create_ue_entity_req.num_setup_sap_req].
					tunnel_info[tunnel_count].bitmask |= 
					RRC_S1U_IE_TUNNEL_INFO_TRANSPORT_ADDR_PRESENT;
				s1u_create_ue_entity_req.setup_sap_req[
					s1u_create_ue_entity_req.num_setup_sap_req].
					tunnel_info[tunnel_count].transport_addr.
					data_length =
					p_create_ue_param->create_drb_entity_info.
					create_drb_entity[drb_index].drb_s1u_info.
					tunnel_info_list[0].transport_addr.data_length;
				l3_memcpy_wrapper(s1u_create_ue_entity_req.setup_sap_req[
						s1u_create_ue_entity_req.num_setup_sap_req].
						tunnel_info[tunnel_count].
						transport_addr.data,
						p_create_ue_param->create_drb_entity_info.
						create_drb_entity[drb_index].drb_s1u_info.
						tunnel_info_list[0].transport_addr.data,
						sizeof(s1u_create_ue_entity_req.setup_sap_req[
							s1u_create_ue_entity_req.num_setup_sap_req].
							tunnel_info[tunnel_count].
							transport_addr.data));
			}

			s1u_create_ue_entity_req.num_setup_sap_req++;
		}


		rrc_s1u_il_send_rrc_s1u_create_ue_entity_req(&s1u_create_ue_entity_req,
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_create_ue_param->cell_index),
				p_create_ue_param->transaction_id,
				p_create_ue_param->cell_index);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF);
	}
	else
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_create_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_CREATE_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_create_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_create_ue->guard_timer = PNULL;
		}

		/* 2. Set guard timer */
		/* 3. Delete on lower layers */
		/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
		uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
				UEMH_FSM_CREATE_FAIL,
				UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF,
				p_create_ue_param->ue_index,
				p_create_ue_param->transaction_id,
				p_rrc_llim_gl_ctx,
				p_create_ue_param->cell_index);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/*
 *   UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_s1u_create_ue_state_s1u_cnf
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *   DESCRIPTION   : This function report about successfully ue creation if S1-U is OK.
 *       state UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF;
 *       event UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_s1u_create_ue_state_s1u_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	/* coverity_fix_54724_start */
	U8 drb_index = 0, lc_index = 0;
	U8 tunnel_count = 0;
	U8 total_tunnel_count = 0;
	rrc_s1u_create_ue_entity_cnf_t          *p_s1u_create_ue_entity_cnf =
		(rrc_s1u_create_ue_entity_cnf_t *)p_msg;
	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param = PNULL;
	rrc_uecc_llim_create_ue_entity_resp_t   *p_create_ue_resp = PNULL;
	/*Mukesh*/
	rrc_bool_et result = RRC_FALSE;
	rrc_cell_index_t cell_index = RRC_INVALID_CELL_INDEX;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_s1u_create_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_create_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_create_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_create_ue_param = &p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue;
	p_create_ue_resp = &p_ue_ctx->curr_op_param.
		p_create_ue->create_ue_resp;
	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_create_ue_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}


	if (S1U_SUCCESS == p_s1u_create_ue_entity_cnf->response_code)
	{

		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_create_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_CREATE_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_create_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_create_ue->guard_timer = PNULL;
		}

		for (lc_index = 0; lc_index < p_s1u_create_ue_entity_cnf->
				num_setup_sap_cnf; ++lc_index)
		{
			for (drb_index = 0; drb_index < p_create_ue_param->
					create_drb_entity_info.create_drb_entity_counter; ++drb_index)
			{
				if (p_create_ue_param->create_drb_entity_info.
						create_drb_entity[drb_index].uecc_llim_drb_config.
						drb_config.logical_channel_identity ==
						p_s1u_create_ue_entity_cnf->setup_sap_cnf[lc_index].lc_id)
				{
					total_tunnel_count = (U8) (p_s1u_create_ue_entity_cnf->
							setup_sap_cnf[lc_index].num_sap_cnf);

					if ((S1U_SUCCESS == p_s1u_create_ue_entity_cnf->
								setup_sap_cnf[lc_index].cause) &&
							(total_tunnel_count) &&
							(p_s1u_create_ue_entity_cnf->setup_sap_cnf[
							 lc_index].tunnel_info_cnf[0].bitmask &
							 RRC_S1U_IE_TUNNEL_INFO_CNF_TEID_SELF_PRESENT) )
					{
						p_create_ue_resp->create_drb_status[drb_index].bitmask |=
							UECC_LLIM_CREATE_LC_STATUS_S1U_RESPONSE_PRESENT;

						for (tunnel_count = 0 ; tunnel_count < total_tunnel_count;
								tunnel_count++)
						{
							p_create_ue_resp->create_drb_status[drb_index].
								s1u_response.tunnel_info_cnf[tunnel_count].cause =
								p_s1u_create_ue_entity_cnf->setup_sap_cnf[
								lc_index].tunnel_info_cnf[tunnel_count].cause;

							p_create_ue_resp->create_drb_status[drb_index].
								s1u_response.tunnel_info_cnf[tunnel_count].
								rb_direction =
								p_s1u_create_ue_entity_cnf->setup_sap_cnf[
								lc_index].tunnel_info_cnf[tunnel_count].
								rb_direction;

							if (p_s1u_create_ue_entity_cnf->setup_sap_cnf[
									lc_index].tunnel_info_cnf[tunnel_count].bitmask &
									RRC_S1U_IE_TUNNEL_INFO_CNF_TEID_SELF_PRESENT)
							{
								p_create_ue_resp->create_drb_status[drb_index].
									s1u_response.tunnel_info_cnf[tunnel_count].
									bitmask |=
									RRC_UECC_LLIM_S1U_TUNNEL_INFO_CNF_TEID_SELF_PRESENT;
								p_create_ue_resp->create_drb_status[drb_index].
									s1u_response.tunnel_info_cnf[tunnel_count].
									teid_self =
									p_s1u_create_ue_entity_cnf->setup_sap_cnf[
									lc_index].tunnel_info_cnf[tunnel_count].
									teid_self.teid;
							}
							if (p_s1u_create_ue_entity_cnf->setup_sap_cnf[
									lc_index].tunnel_info_cnf[tunnel_count].
									bitmask &
									RRC_S1U_IE_TUNNEL_INFO_CNF_TEID_PEER_PRESENT)
							{
								p_create_ue_resp->create_drb_status[drb_index].
									s1u_response.tunnel_info_cnf[tunnel_count].
									bitmask |=
									RRC_UECC_LLIM_S1U_TUNNEL_INFO_CNF_TEID_PEER_PRESENT;
								p_create_ue_resp->create_drb_status[drb_index].
									s1u_response.tunnel_info_cnf[tunnel_count].
									teid_peer =
									p_s1u_create_ue_entity_cnf->setup_sap_cnf[
									lc_index].tunnel_info_cnf[tunnel_count].
									teid_peer.teid;
							}
							if (p_s1u_create_ue_entity_cnf->setup_sap_cnf[
									lc_index].tunnel_info_cnf[tunnel_count].bitmask &
									RRC_S1U_IE_TUNNEL_INFO_CNF_TRANSPORT_ADDR_PRESENT)
							{
								p_create_ue_resp->create_drb_status[drb_index].
									s1u_response.tunnel_info_cnf[
									tunnel_count].bitmask |=
									RRC_UECC_LLIM_S1U_TUNNEL_INFO_CNF_TRANSPORT_ADDRESS_PRESENT;
								l3_memcpy_wrapper(p_create_ue_resp->create_drb_status[
										drb_index].s1u_response.
										tunnel_info_cnf[tunnel_count].
										transport_addr.data,
										p_s1u_create_ue_entity_cnf->setup_sap_cnf[
										lc_index].tunnel_info_cnf[tunnel_count].
										transport_addr.data,
										p_s1u_create_ue_entity_cnf->setup_sap_cnf[
										lc_index].tunnel_info_cnf[tunnel_count].
										transport_addr.data_length);

								p_create_ue_resp->create_drb_status[
									drb_index].s1u_response.
									tunnel_info_cnf[tunnel_count].
									transport_addr.data_length = 
									p_s1u_create_ue_entity_cnf->setup_sap_cnf[
									lc_index].tunnel_info_cnf[tunnel_count].
									transport_addr.data_length;
							}
						}
						p_create_ue_resp->create_drb_status[
							drb_index].lc_id = 
							p_create_ue_param->create_drb_entity_info.
							create_drb_entity[drb_index].uecc_llim_drb_config.
							drb_config.logical_channel_identity;
						p_create_ue_resp->create_drb_status[drb_index].
							s1u_response.tunnel_info_cnf_count = 
							total_tunnel_count;
						p_create_ue_resp->create_drb_status_counter++;
					}
					else
					{

						RRC_LLIM_TRACE(RRC_INFO, "[%s][ueid %d] CREATION of LCID %d failed at S1U\n",
								__FUNCTION__, p_ue_ctx->ue_index,
								p_create_ue_param->create_drb_entity_info.
								create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
								logical_channel_identity);

						/* Filling llim_drb_status for Roll back operation of 
						   failed DRBs*/
						if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
						{
							p_ue_ctx->curr_op_param.p_rcfg_ue = (rrc_uemh_rcfg_ue_op_param_t*)
								rrc_mem_get(sizeof(rrc_uemh_rcfg_ue_op_param_t));
							if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
							{
								RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
										"Memory Allocation Failure");
								RRC_LLIM_UT_TRACE_EXIT();
								return;
							}

							memset_wrapper(p_ue_ctx->curr_op_param.p_rcfg_ue, 0,
									sizeof(rrc_uemh_rcfg_ue_op_param_t));
						}
						p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[
							drb_index].lc_id =
							p_create_ue_param->create_drb_entity_info.
							create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
							logical_channel_identity;
						p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[
							drb_index].drb_status = RRC_LLIM_DRB_FAILED_AT_S1U;

						p_create_ue_resp->create_drb_status[
							drb_index].lc_id = 
							p_create_ue_param->create_drb_entity_info.
							create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
							logical_channel_identity;
						p_create_ue_resp->create_drb_status[drb_index].response =
							RRC_LLIM_ADD_LC_FAIL_S1U;
						p_create_ue_resp->create_drb_status_counter++;

						p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create--;

					}
				}
			}
		}


		RRC_LLIM_TRACE(RRC_INFO, "[ueid %d] NUM_DRB_TO_CREATE %d create_drb_entity_counter %d",
				p_ue_ctx->ue_index, p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create,
				p_create_ue_param->create_drb_entity_info.create_drb_entity_counter );

		if( p_ue_ctx->curr_op_param.p_create_ue->num_drb_to_create !=
				p_create_ue_param->create_drb_entity_info.
				create_drb_entity_counter)
		{

			p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				transaction_id = p_create_ue_param->transaction_id;

			rrc_llim_get_cell_index(p_rrc_llim_gl_ctx, p_api, &cell_index);
			if ( RRC_INVALID_CELL_INDEX != cell_index )
			{
				result =  start_uecc_trigered_roll_back_for_ho_create_ue(p_ue_ctx,
						cell_index);
			}
		}
		if(RRC_FALSE == result )
		{
			/* 2. send UECC_LLIM_CREATE_UE_ENTITY_RESP */
			p_create_ue_resp->cell_index        = p_create_ue_param->
				cell_index;
			p_create_ue_resp->transaction_id    = p_create_ue_param->
				transaction_id;
			p_create_ue_resp->ue_index          = p_create_ue_param->ue_index;
			p_create_ue_resp->response_code     = RRC_SUCCESS;

			/*SPR_17121_START*/
			if(p_ue_ctx->bitmask & RRC_UECC_LLIM_MAC_I_PRESENT)
			{
				p_create_ue_resp->mac_i.mac_i = p_ue_ctx->mac_i ; 
				p_create_ue_resp->bitmask |= UECC_LLIM_CREATE_UE_ENTITY_RESP_MACI_PRESENT;
			}
			/*SPR_17121_END*/
			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_create_ue_resp->ue_index),
					UECC_LLIM_CREATE_UE_ENTITY_RESP,
					sizeof(rrc_uecc_llim_create_ue_entity_resp_t),
					p_create_ue_resp);

			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			rrc_mem_free (p_ue_ctx->curr_op_param.p_create_ue);
			p_ue_ctx->curr_op_param.p_create_ue = PNULL;
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue)
			{
				rrc_mem_free (p_ue_ctx->curr_op_param.p_rcfg_ue);
				p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			}
		}

	}
	else
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_create_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_CREATE_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_create_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_create_ue->guard_timer = PNULL;
		}

		/* 2. Set guard timer */
		/* 3. Delete on lower layers */
		/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
		uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
				UEMH_FSM_CREATE_FAIL,
				/* SPR_5689 Start */
				UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF
				/* SPR_5689 Stop */
				,
				p_create_ue_param->ue_index,
				p_create_ue_param->transaction_id,
				p_rrc_llim_gl_ctx,
				p_create_ue_param->cell_index);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}
/* coverity_fix_54724_stop */

/*
 *   UEMH_STATE_UE_ENTITY_IN_SERVICE state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_delete_ue_req
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *   DESCRIPTION  : This function delete ue.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);   

	/*BUG 604 changes start*/
	if ((p_delete_ue_entity_req->bitmask & 
				UECC_LLIM_DELETE_UE_ENTITY_HO_TYPE_PRESENT ) &&
			(p_delete_ue_entity_req->ho_type == HANDOVER_TYPE_INTRA_CELL))
	{
		p_ue_ctx->ho_type = p_delete_ue_entity_req->ho_type;
	}
	/*BUG 604 changes stop*/
	/* SPR 21458 Start */
	p_ue_ctx->l2_instance_reset_flag = p_delete_ue_entity_req->l2_instance_reset_flag;
	/* SPR 21458 End */
	/* 1. Set guard timer */
	/* 2. Delete on lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
			UEMH_FSM_DEL_REQ,
			UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx),
			p_delete_ue_entity_req->ue_index,
			p_delete_ue_entity_req->transaction_id,
			p_rrc_llim_gl_ctx,
			p_delete_ue_entity_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_add_lc_fill_sps_config
 *
 *   DESCRIPTION:
 *       Function fills sps_config parameters for add_lc
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_add_lc_fill_sps_config(
		rrc_uecc_llim_add_lc_req_t     *p_add_lc_param,
		rrc_mac_reconfigure_ue_entity_req_t  *p_mac_reconfigure_ue_entity_req)
{
	rrc_counter_t                           drb_index = RRC_NULL;
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_add_lc_param);
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_req);

	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_SPS_CONFIG_PRESENT)
	{
		p_mac_reconfigure_ue_entity_req->optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_SPS_CONFIG_PRESENT;

		if (p_add_lc_param->sps_config.bitmask &
				RRC_SPS_CONFIG_SPS_CONFIG_DL_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.bitmask |=
				RRC_MAC_SPS_DL_INFO_PRESENT;

			if (p_add_lc_param->sps_config.sps_config_dl.bitmask &
					RRC_SPS_CONFIG_DL_PARAM_PRESENT)
			{    /* Setup */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.bitmask |=
					RRC_MAC_SPS_DL_SETUP_INFO_PRESENT;
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.request_type =
					1; /* 1 - Setup */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
					semi_persist_sched_interval_dl = p_add_lc_param->sps_config.sps_config_dl.
					sps_config_dl_param.semi_persist_sched_interval_dl;

				/*sps_fix*/
				if (RRC_SPS_CONFIG_DL_PARAM_EXPLICIT_RELEASE_AFTER & p_add_lc_param->sps_config.sps_config_dl.bitmask)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
						explicit_release_after.explicit_release_afte = p_add_lc_param->sps_config.sps_config_dl.expilcit_release_after;
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.bitmask |= 
						RRC_MAC_RRC_MAC_EXPLICIT_RELEASE_AFTER_PRESENT;
				}

				if (RRC_SPS_CONFIG_DL_PARAM_MAX_SPS_HARQ_RETX & p_add_lc_param->sps_config.sps_config_dl.bitmask)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
						max_sps_harq_retx.max_sps_harq_retx = p_add_lc_param->sps_config.sps_config_dl.max_sps_harq_retx;
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.bitmask |= 
						RRC_MAC_MAX_SPS_HARQ_RETX_PRESENT;
				}
				/*sps_fix*/

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
					number_of_conf_sps_processes = p_add_lc_param->sps_config.sps_config_dl.
					sps_config_dl_param.number_of_conf_sps_processes;

				for (drb_index = 0; drb_index < p_add_lc_param->sps_config.sps_config_dl.
						sps_config_dl_param.n1_pucch_an_persist_list.count;
						drb_index++)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
						n1_pucch_an_persist[drb_index].n1_pucch_an_persist =
						p_add_lc_param->sps_config.sps_config_dl.sps_config_dl_param.
						n1_pucch_an_persist_list.n1_pucch_an_persist[drb_index];

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
						n1_pucch_an_persist_list_counter++;
				}
			}
			else
			{    /* Release */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.request_type =
					0; /* 0 - Release */
			}
		}

		if (p_add_lc_param->sps_config.bitmask &
				RRC_SPS_CONFIG_SPS_CONFIG_UL_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.bitmask |=
				RRC_MAC_SPS_UL_INFO_PRESENT;

			if (p_add_lc_param->sps_config.sps_config_ul.bitmask &
					RRC_SPS_CONFIG_UL_PARAM_PRESENT)
			{    /* Setup */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.bitmask |=
					RRC_MAC_SPS_UL_SETUP_INFO_PRESENT;
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.request_type =
					1; /* 1 - Setup */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
					semi_persist_sched_interval_ul = p_add_lc_param->sps_config.sps_config_ul.
					sps_config_ul_param.semi_persist_sched_interval_ul;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
					implicit_release_after = p_add_lc_param->sps_config.sps_config_ul.
					sps_config_ul_param.implicit_release_after;

				if (p_add_lc_param->sps_config.sps_config_ul.sps_config_ul_param.bitmask &
						RRC_SPS_CONFIG_UL_P_0_PERSISTENT_PRESENT)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						bitmask |=
						RRC_MAC_P_ZERO_PERSISTENT_PRESENT;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						p_zero_persistent.p_zero_nominal_pusch_persistent = p_add_lc_param->sps_config.
						sps_config_ul.sps_config_ul_param.p_zero_persistent.p_zero_nominal_pusch_persistent;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						p_zero_persistent.p_zero_ue_pusch_persistent = p_add_lc_param->sps_config.
						sps_config_ul.sps_config_ul_param.p_zero_persistent.p_zero_ue_pusch_persistent;
				}

				if (p_add_lc_param->sps_config.sps_config_ul.sps_config_ul_param.bitmask &
						RRC_SPS_CONFIG_UL_TWO_INTERVALS_CONFIG_PRESENT)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						bitmask |= RRC_MAC_TWO_INTERVALS_CONFIG_PRESENT;
					/* SPR:5994 start */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						two_intervals_config.two_intervals_config = 1;
					/* SPR:5994 stop */
				}
			}
			else
			{    /* Release */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.request_type =
					0; /* 0 - Release */
			}
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_add_lc_fill_phy_config_dedicated
 *
 *   DESCRIPTION:
 *       Function fills phy_config_dedicated parameters for add_lc
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_add_lc_fill_phy_config_dedicated(
		rrc_uecc_llim_add_lc_req_t     *p_add_lc_param,
		rrc_mac_reconfigure_ue_entity_req_t  *p_mac_reconfigure_ue_entity_req)
{
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_add_lc_param);
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_req);

	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT)
	{
		if (p_add_lc_param->physical_config_dedicated.bitmask &
				RRC_PHY_CQI_REPORTING_PRESENT)
		{
			if ((p_add_lc_param->physical_config_dedicated.
						cqi_reporting.bitmask & 
						RRC_PHY_CQI_REPORTING_PERIODIC_PRESENT) ||
					(p_add_lc_param->physical_config_dedicated.
					 cqi_reporting.bitmask &
					 RRC_PHY_CQI_REPORTING_MODE_APERIODIC_PRESENT))
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_RECONF_CQI_INFO_PRESENT;

				fill_mac_cqi_info(&p_mac_reconfigure_ue_entity_req->
						reconfig_ue_info.cqi_info,
						&p_add_lc_param->physical_config_dedicated.
						cqi_reporting);
			}
		}

		/* Rel9 Upgrade Changes Start */
		if (p_add_lc_param->physical_config_dedicated.bitmask &
				RRC_PHY_CQI_REPORT_CONFIG_V920_PRESENT) 
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_RECONF_CQI_INFO_PRESENT;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.cqi_info.optional_elems_present |=
				RRC_MAC_CQI_REPORT_CONFIG_V920_PRESENT;

			if (p_add_lc_param->physical_config_dedicated.cqi_report_config_v920.
					bitmask &
					RRC_PHY_CQI_MASK_R9_PRESENT)
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.cqi_info.cqi_report_config_v920.
					optional_elems_present |= 
					RRC_MAC_CQI_REPORT_CONFIG_CQI_MASK_R9_PRESENT;
				/* SPR 14459 Fix start */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.cqi_info.cqi_report_config_v920.
					rrc_mac_cqi_mask_r9.cqi_mask_r9 = 
					(U8)(p_add_lc_param->physical_config_dedicated.cqi_report_config_v920.
							cqi_mask_r9 );
				/* SPR 14459 Fix End */
			}

			if (p_add_lc_param->physical_config_dedicated.cqi_report_config_v920.
					bitmask &
					RRC_PHY_PMI_RI_REPORT_R9_PRESENT)
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.cqi_info.cqi_report_config_v920.
					optional_elems_present |= 
					RRC_MAC_CQI_REPORT_CONFIG_PMI_RI_REPORT_R9_PRESENT;
				/* SPR 14459 Fix start */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.cqi_info.cqi_report_config_v920.
					rrc_mac_pmi_ri_report_r9.pmi_ri_report_r9 =
					(U8)(p_add_lc_param->physical_config_dedicated.cqi_report_config_v920.
							pmi_ri_report_r9 );
				/* SPR 14459 Fix End */
			}
		}

		if (p_add_lc_param->physical_config_dedicated.bitmask &
				RRC_PHY_SCHEDULING_REQUEST_CONFIG_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_RECONF_SR_CONFIG_INFO_PRESENT;

			fill_mac_sr_config_info(&p_mac_reconfigure_ue_entity_req->
					reconfig_ue_info.sr_config_info,
					&p_add_lc_param->physical_config_dedicated.
					scheduling_request_config);
		}

		if ( (p_add_lc_param->physical_config_dedicated.bitmask
					& RRC_PHY_ANTENNA_INFORMATION_PRESENT) &&
				(p_add_lc_param->physical_config_dedicated.antenna_information.
				 bitmask
				 & RRC_PHY_ANTENNA_INFORMATION_EXPLICIT_VALUE_PRESENT) )
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_TX_MODE_INFO_PRESENT;
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tx_mode_info.
				transmission_mode =
				(U8) ( p_add_lc_param->physical_config_dedicated.
						antenna_information.antenna_information_explicit_value.
						transmission_mode + 1);
		}
		/*BUG_11164_START*/
		if ((p_add_lc_param->physical_config_dedicated.bitmask &
					RRC_PHY_ANTENNA_INFO_R10_PRESENT) &&
				p_add_lc_param->physical_config_dedicated.antenna_info_r10.
				bitmask & RRC_ANTENNA_INFO_R10_EXPLICIT_VALUE_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_TX_MODE_INFO_PRESENT;
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tx_mode_info.
				transmission_mode =
				(U8) (p_add_lc_param->physical_config_dedicated.antenna_info_r10.
						explicit_value.transmission_mode + 1);
		}
		/*BUG_11164_STOP*/

		/* Fill P0_UE_PUSCH if present */
		if (RRC_PHY_UPLINK_POWER_CONTROL_DEDICATED_PRESENT &
				p_add_lc_param->physical_config_dedicated.bitmask)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
				RRC_MAC_P0_UE_PUSCH_PRESENT;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.p0_ue_pusch.p0_ue_pusch = 
				p_add_lc_param->physical_config_dedicated.uplink_power_control_dedicated.
				p0_ue_pusch;
		}

		/* Fill PDSCH_CONFIG_INFO if present */
		if (RRC_PHY_PDSCH_CONFIGURATION_DEDICATED_PRESENT &
				p_add_lc_param->physical_config_dedicated.bitmask)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
				RRC_MAC_PDSCH_CONFIG_INFO_PRESENT;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.pdsch_config_info.p_a =
				p_add_lc_param->physical_config_dedicated.pdsch_configuration_dedicated.p_a;
		}

		/* Fill PUSCH_CONFIG if present */
		if (RRC_PHY_PUSCH_CONFIGURATION_DEDICATED_PRESENT &
				p_add_lc_param->physical_config_dedicated.bitmask)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
				RRC_MAC_RECONFIG_PUSCH_CONFIG_INFO_PRESENT;

			fill_mac_pusch_config_info(
					&p_mac_reconfigure_ue_entity_req->reconfig_ue_info.pusch_config_info,
					&p_add_lc_param->physical_config_dedicated.pusch_configuration_dedicated);
		}
		if((p_add_lc_param->physical_config_dedicated.
					cqi_report_config_r10.bitmask &
					RRC_PHY_CQI_REPORT_CONFIG_R10_REPORT_APERIODIC_R10_PRESENT) ||
				(p_add_lc_param->physical_config_dedicated.
				 cqi_report_config_r10.bitmask &
				 RRC_PHY_CQI_REPORT_CONFIG_R10_REPORT_PERIODIC_R10_PRESENT))
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_RECONF_CQI_INFO_PRESENT;

			fill_mac_cqi_info_r10(
					&p_mac_reconfigure_ue_entity_req->
					reconfig_ue_info.cqi_info,
					&p_add_lc_param->physical_config_dedicated.
					cqi_report_config_r10);
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fill_mac_config_drx_config
 *
 *   DESCRIPTION:
 *       Function fills mac_config DRX_Config parameters
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_fill_mac_config_drx_config(
		rrc_uecc_llim_add_lc_req_t     *p_add_lc_param,
		rrc_mac_reconfigure_ue_entity_req_t  *p_mac_reconfigure_ue_entity_req)
{
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_add_lc_param);
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_req);

	/* reconfig ue info :drx config info */
	if ((p_add_lc_param->bitmask & 
				UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG_PRESENT) && 
			(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
			 bitmask & RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
			(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
			 mac_main_config.bitmask & RRC_MAC_MAIN_CONFIG_DRX_CONFIG_PRESENT))
	{
		/* Add Lc Req - drx_config_info present */
		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
			optional_elems_present |=
			RRC_MAC_RECONFIG_DRX_CONFIG_INFO_PRESENT;

		/* 1- for setup */
		if((1 == p_add_lc_param->mac_config
					[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].mac_main_config.
					drx_config.drx_config_type) && 
				(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
				 mac_main_config.drx_config.bitmask & RRC_DRX_CONFIG_PARAM_PRESENT))
		{
			/* Set bitmask */
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
				bitmask |= RRC_MAC_DRX_CONFIG_DRX_SETUP_CONFIG_INFO_PRESENT; 

			/* since drx_config_type is 1 */ 
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
				drx_config_type = 1;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
				drx_setup_config_info.on_duration_timer = 
				p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
				mac_main_config.drx_config.drx_config_param.on_duration_timer;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
				drx_setup_config_info.drx_inactivity_timer = 
				p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
				mac_main_config.drx_config.drx_config_param.drx_inactivity_timer;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
				drx_setup_config_info.drx_retransmission_timer = 
				p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
				mac_main_config.drx_config.drx_config_param.drx_retransmission_timer;

			rrc_mac_fill_mac_main_long_drx_cycle_start_offset(
					&p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config.drx_config.drx_config_param.long_drx_cycle_start_offset,
					&p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_setup_config_info);

			/* check short drx config present */
			if (p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config.drx_config.
					drx_config_param.bitmask & RRC_DRX_CONFIG_SHORT_DRX_PRESENT)
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_setup_config_info.bitmask |=
					RRC_MAC_DRX_SETUP_CONFIG_SHORT_DRX_CONFIG_PRESENT;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_setup_config_info.short_drx.short_drx_cycle = 
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config.drx_config.
					drx_config_param.short_drx.short_drx_cycle;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_setup_config_info.short_drx.short_drx_cycle_timer = 
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config.drx_config.
					drx_config_param.short_drx.short_drx_cycle_timer;
			}
			/* DRX_MAC_CE_CMD  Start */ 
			if (p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config.drx_config.
					drx_config_param.bitmask & RRC_DRX_CONFIG_DRX_MAC_CE_CMD_TRIGGER_INFO_PRESENT)
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_setup_config_info.bitmask |=
					RRC_MAC_DRX_SETUP_CONFIG_DRX_MAC_CE_CMD_TRIGGER_INFO_PRESENT;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_setup_config_info.mac_ce_cmd_l2_trigger_info.drx_mac_ce_timer = 
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config.drx_config.
					drx_config_param.drx_mac_ce_cmd_trigger_info.drx_mac_ce_timer;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_setup_config_info.mac_ce_cmd_l2_trigger_info.drx_mac_ce_cmd_threshold = 
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config.drx_config.
					drx_config_param.drx_mac_ce_cmd_trigger_info.drx_mac_ce_cmd_threshold;
			}
			/* DRX_MAC_CE_CMD  End */
		}
		else /* for release */
		{
			/* since drx_config_type is 0 */
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
				drx_config_type = 0;
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fill_mac_phy_meas_config_info
 *
 *   DESCRIPTION:
 *       Function fills mac_config phy_config_dedicated meas_config parameters
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_fill_mac_phy_meas_config_info(
		rrc_uecc_llim_add_lc_req_t     *p_add_lc_param,
		rrc_mac_reconfigure_ue_entity_req_t  *p_mac_reconfigure_ue_entity_req)
{
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_add_lc_param);
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_req);

	if ( (p_add_lc_param->bitmask & 
				UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG_PRESENT) ||
			(p_add_lc_param->bitmask &
			 UECC_LLIM_ADD_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT) ||
			(p_add_lc_param->bitmask & 
			 UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG_PRESENT))
	{
		p_mac_reconfigure_ue_entity_req->optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		uemh_add_lc_fill_phy_config_dedicated(p_add_lc_param, p_mac_reconfigure_ue_entity_req);

		/* Check - mac config present */
		if (p_add_lc_param->bitmask &
				UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_DL_MAX_RB_INFO_PRESENT;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.dl_max_rb_info.
				dl_max_rb =
				p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
				mac_main_config_extensions.dl_max_rb;
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_NUM_OF_LAYER_INFO_PRESENT;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.num_of_layer_info.
				num_of_layer =
				p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
				mac_main_config_extensions.num_of_layer;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_CODE_BOOK_INDEX_INFO_PRESENT;
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.code_book_index_info.
				code_book_index =
				p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
				mac_main_config_extensions.code_book_index;

            /*spr_21014_changes_start*/
            if((p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].bitmask & RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
                (p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].mac_main_config.bitmask &
                 RRC_MAC_MAIN_CONFIG_UL_SCH_CONFIG_PRESENT) &&
                (p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].mac_main_config.ul_sch_config.bitmask &
                 RRC_UL_SCH_CONFIG_MAX_HARQ_TX_PRESENT))
            {
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
                    optional_elems_present |=
                    RRC_MAC_RECONFIG_MAX_UL_HARQ_TX_PRESENT;

                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
                    max_ul_harq_tx_info.max_ul_harq_tx =
                    p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
                    mac_main_config.ul_sch_config.max_harq_tx;
            }
            /*spr_21014_changes_end*/

            /* SPR 16938 Fix start */
            if(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].mac_main_config_extensions.bitmask &
                    RRM_MAC_MAIN_CONFIG_EXT_PC_MAX_PRESENT)
            {
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
                    optional_elems_present |=
                    RRC_MAC_RECONFIG_PC_MAX_CONFIG_INFO_PRESENT;
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
                    pc_max_info.pc_max =
                    p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
                    mac_main_config_extensions.pc_max;
            }
            /* SPR 16938 Fix end */
			/*Transmission_mode_7_8 start*/   
			if(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config_extensions.bitmask &
					RRM_MAC_MAIN_CONFIG_EXT_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT)
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_RECONFIG_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT;
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.pdsch_epre_to_ue_rs_ratio.
					pdsch_epre_to_ue_rs_ratio =
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config_extensions.pdsch_epre_to_ue_rs_ratio;
			}
			/*Transmission_mode_7_8 stop*/

			/* Fill TAT if received in message */
			if(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].bitmask
					& RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT)
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_TIME_ALIGNMENT_TIME_INFO_PRESENT;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
					time_alignment_timer_info.time_alignment_timer =
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config.time_alignment_timer_dedicated;
			}

			/*TTI_BUNDLING Start*/
			/* reconfig ue info :tti bundling info */
			if ((p_add_lc_param->bitmask & 
						UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG_PRESENT) && 
					(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					 bitmask & RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
					(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					 mac_main_config.bitmask & RRC_MAC_MAIN_CONFIG_UL_SCH_CONFIG_PRESENT))
			{
				/* Add Lc Req - tti_bundling_info present */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
					optional_elems_present |= RRC_MAC_RECONFIG_TTI_BUNDLING_INFO_PRESENT;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tti_bundling.
					tti_bundling = 
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config.ul_sch_config.tti_bundling;
			}
			/*TTI_BUNDLING Stop*/

			uemh_fill_mac_config_drx_config(p_add_lc_param, p_mac_reconfigure_ue_entity_req);

			/* Rel9 Upgrade Changes Start */
			if (p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG]
					.mac_main_config.bitmask & 
					RRC_MAC_MAIN_CONFIG_SR_PROHIBIT_TIMER_R9_PRESENT)
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
					RRC_MAC_RECONFIG_SR_PROHBIT_TIMER_VALUE_V920_PRESENT;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sr_prohbit_timer_value_v920.
					sr_prohibit_timer =
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG]
					.mac_main_config.sr_prohibit_timer_r9;
			}

			/* Rel9 Upgrade Changes Stop */
		}
		/* Check for meas config */
		if ((p_add_lc_param->bitmask & UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG_PRESENT) &&
				(p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].bitmask & 
				 UE_ADM_MEAS_GAP_CONFIG_PRESENT))
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
				RRC_MAC_RECONFIG_MEAS_GAP_CONFIG_INFO_PRESENT;

			/* 1 - meas config gap setup */
			if ((1 == p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.meas_gap_config_type) && 
					(p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.bitmask & 
					 MEAS_GAP_CONFIG_SETUP_CONFIG_INFO_PRESENT))
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
					bitmask |= RRC_MAC_MEAS_GAP_CONFIG_MEAS_GAP_SETUP_CONFIG_INFO_PRESENT;

				/* Assign meas gap config type - 1 */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
					meas_gap_config_type = 1;

				/* pattern id 0 */
				if (p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.setup_config_info.bitmask & MEAS_GAP_CONFIG_GP0_PRESENT)
				{ 
					/* Assign - pattern id 0 */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 0;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_add_lc_param->
						meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.
						setup_config_info.gp0; 

				}
				/* pattern id 1 */
				else if (p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP1_PRESENT)   
				{
					/* Assign - pattern id 1 */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 1;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_add_lc_param->
						meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.
						setup_config_info.gp1; 
				}
                #ifdef ENDC_ENABLED
				/* pattern id 4 */
				else if (p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP4_PRESENT)   
				{
					/* Assign - pattern id 4 */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 4;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_add_lc_param->
						meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.
						setup_config_info.gp4_r15; 
				}
				/* pattern id 5 */
				else if (p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP5_PRESENT)   
				{
					/* Assign - pattern id 5 */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 5;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_add_lc_param->
						meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.
						setup_config_info.gp5_r15; 
				}
				/* pattern id 6 */
				else if (p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP6_PRESENT)   
				{
					/* Assign - pattern id 6 */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 6;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_add_lc_param->
						meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.
						setup_config_info.gp6_r15; 
				}
				/* pattern id 7 */
				else if (p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP7_PRESENT)   
				{
					/* Assign - pattern id 7 */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 7;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_add_lc_param->
						meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.
						setup_config_info.gp7_r15; 
				}
				/* pattern id 8 */
				else if (p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP8_PRESENT)   
				{
					/* Assign - pattern id 8 */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 8;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_add_lc_param->
						meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.
						setup_config_info.gp8_r15; 
				}
				/* pattern id 9 */
				else if (p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP9_PRESENT)   
				{
					/* Assign - pattern id 9 */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 9;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_add_lc_param->
						meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.
						setup_config_info.gp9_r15; 
				}
				/* pattern id 10 */
				else if (p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP10_PRESENT)   
				{
					/* Assign - pattern id 10 */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 10;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_add_lc_param->
						meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.
						setup_config_info.gp10_r15; 
				}
				/* pattern id 11 */
				else if (p_add_lc_param->meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP11_PRESENT)   
				{
					/* Assign - pattern id 11 */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 11;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_add_lc_param->
						meas_config[UECC_LLIM_ADD_LC_REQ_NEW_MEAS_CONFIG].meas_gap_config.
						setup_config_info.gp11_r15; 
				}
                #endif
			}
			/* 0 - meas config gap release */
			else
			{
				/* Assign meas gap config type - 0 */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
					meas_gap_config_type = 0;
			}

			/* Fill TAT if received in message */
			if(p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].bitmask & 
					RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT)
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_TIME_ALIGNMENT_TIME_INFO_PRESENT;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
					time_alignment_timer_info.time_alignment_timer =
					p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
					mac_main_config.time_alignment_timer_dedicated;
			}
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_add_lc_req
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *   DESCRIPTION  : This function partially reconfigure lower layers and add LC.
 *                  state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *                  event UEMH_EVENT_UECC_ADD_LC_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_add_lc_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	/* coverity_fix_54712_start */
	rrc_uecc_llim_add_lc_req_t              *p_add_lc_req =
		(rrc_uecc_llim_add_lc_req_t *)p_msg;
	rrc_uemh_timer_buf_t                    guard_timer_data;
	rrc_mac_reconfigure_ue_entity_req_t     mac_reconfigure_ue_entity_req;
	rrc_uecc_llim_add_lc_req_t              *p_add_lc_param = PNULL;
	rrc_counter_t                           drb_index = RRC_NULL;

	rrc_return_et                           response_code = RRC_FAILURE;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_add_lc_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p",p_api);     

	p_ue_ctx->curr_op_param.p_rcfg_ue = (rrc_uemh_rcfg_ue_op_param_t*)
		rrc_mem_get (sizeof(rrc_uemh_rcfg_ue_op_param_t));

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/* Special case on init operation */
	memset_wrapper(p_ue_ctx->curr_op_param.p_rcfg_ue, 0, 
			sizeof(*p_ue_ctx->curr_op_param.p_rcfg_ue));

	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	*p_add_lc_param = *p_add_lc_req;
	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;

	/* ATTENTON: Fill all channels status with default status RRC_SUCCESS */
	fill_uecc_llim_add_lc_resp(&p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp,
			SUCCESS, RRC_NO_ERROR,p_add_lc_req);

	/* 1. set guard timer */
	guard_timer_data.auto_delete        = RRC_TRUE;
	guard_timer_data.target_submodule   = LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index           = p_add_lc_param->ue_index;
	guard_timer_data.uemh_event         = UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED;
	guard_timer_data.cell_index         = p_add_lc_req->cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Start timer [LLIM_RECONFIG_UE_ENTITY_TIMER] %u ms.",
			p_rrc_llim_gl_ctx->reconfig_ue_duration);

	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer =
		rrc_start_timer(p_rrc_llim_gl_ctx->reconfig_ue_duration,
				&guard_timer_data,sizeof(guard_timer_data), RRC_FALSE);

	p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
		RRC_LLIM_RECONFIG_ADD_LC_ON_GOING;

	/* 2. send RRC_MAC_RECONFIGURE_UE_ENTITY_REQ */
	memset_wrapper(&mac_reconfigure_ue_entity_req, 0, sizeof
			(mac_reconfigure_ue_entity_req));

	mac_reconfigure_ue_entity_req.optional_elems_present = 0;
	mac_reconfigure_ue_entity_req.ue_index = p_add_lc_param->
		ue_index;

	/* Set UE Category If Present */
	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_UE_CATEGORY_PRESENT)
	{
		mac_reconfigure_ue_entity_req.optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present =
			0;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_UE_CATEGORY_INFO_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.ue_category_info.
			ue_category = p_add_lc_param->ue_category;
	}
    /*SPR_18803_START*/
    if(p_add_lc_param->bitmask &
            UECC_LLIM_ADD_LC_REQ_RAT_1_SUPPORT_PRESENT)
    {
		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_UE_CAPABILITY_ADDITIONAL_PARAM_PRESENT;

        mac_reconfigure_ue_entity_req.reconfig_ue_info.ue_capability_additional_params.
            rat_1_support = p_add_lc_param->rat_1_support; 
    }
    /*SPR_18803_END*/
	/* HD-FDD start */
	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_UE_HD_FDD_MODE_PRESENT)
	{
		mac_reconfigure_ue_entity_req.optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_RF_PARAMS_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.rf_params.halfDuplexFdd = 1;
	}
	/* HD-FDD stop */
	/* min_ue_power start */
	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG_PRESENT && (p_add_lc_param->
				mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].mac_main_config.bitmask &
				RRC_MAC_MAIN_CONFIG_PHR_CONFIG_PRESENT))
	{
		mac_reconfigure_ue_entity_req.optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;
		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_PHR_TIMER_CONFIG_PRESENT;

		if ( p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].mac_main_config.
				phr_config.bitmask & RRC_PHR_CONFIG_PARAM_PRESENT)
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.phr_timer_config.optional_elems_present |=
				RRC_MAC_PHR_TIMER_INFO_PRESENT;
			mac_reconfigure_ue_entity_req.reconfig_ue_info.phr_timer_config.phrTimerConfigType = 1;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.phr_timer_config.phrTimerInfo.periodicPHRTimer =
				p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].mac_main_config.
				phr_config.phr_config_param.periodic_phr_timer;
			mac_reconfigure_ue_entity_req.reconfig_ue_info.phr_timer_config.phrTimerInfo.prohibitPHRTimer =    
				p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].mac_main_config.
				phr_config.phr_config_param.prohibit_phr_timer;
		}
		else
		{
			/* PHR Release */
			mac_reconfigure_ue_entity_req.reconfig_ue_info.phr_timer_config.phrTimerConfigType = RRC_NULL;
		}
	}
	/* min_ue_power stop */            
    /* SPR 21958 PUSCH RAT1 Support Start */ 
    if (p_add_lc_param->bitmask &
		    UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG_PRESENT && (p_add_lc_param->
			    mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].mac_main_config.bitmask &
			    RRC_MAC_MAIN_CONFIG_UPLINK_RAT1_SUPPORT_INFO_PRESENT))
    {
        RRC_LLIM_TRACE(RRC_INFO,"is_uplink_rat1_supported value[%d]",
            p_add_lc_param->mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].mac_main_config.is_uplink_rat1_supported);
        
        mac_reconfigure_ue_entity_req.optional_elems_present |=
            RRC_MAC_RECONFIG_RAT1_INFO_PRESENT;

        mac_reconfigure_ue_entity_req.uplink_rat1_info.is_uplink_rat1_supported = p_add_lc_param->
            mac_config[UECC_LLIM_ADD_LC_REQ_NEW_MAC_CONFIG].
            mac_main_config.is_uplink_rat1_supported;
    }
    /* SPR 21958 PUSCH RAT1 Support End */
	/*Qos changes START*/
	/*Fill the Ue specific AMBR info*/
	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_UE_AMBR_PRESENT)
	{
		mac_reconfigure_ue_entity_req.optional_elems_present |= 
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_AMBR_QOS_INFO_PRESENT;
		mac_reconfigure_ue_entity_req.reconfig_ue_info.ambr_qos_info.dl_ambr = 
			p_add_lc_param->ue_ambr.dl_ambr;
		mac_reconfigure_ue_entity_req.reconfig_ue_info.ambr_qos_info.ul_ambr = 
			p_add_lc_param->ue_ambr.ul_ambr;
	}
	/*Qos changes END*/
	/* 36321_CR0538 start */
	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_UE_ACCESS_STRATUM_REL_PRESENT)
	{
		mac_reconfigure_ue_entity_req.optional_elems_present |= 
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;
		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_UE_COMPLIANCE_INFO_PRESENT;
        /*SPR_19803_FIX_START*/
        /* Always R10 capability is sent to MAC as there is no difference 
         * in MAC handling for later release.*/
        if ((p_add_lc_param->access_stratum_release >= RRM_REL_11) && 
                (p_add_lc_param->access_stratum_release <= RRM_REL_SPARE1))
        {
            mac_reconfigure_ue_entity_req.reconfig_ue_info.ue_compliance_release.
                ue_compliance_release = rrm_rel10;
            /* eMTC changes stop */
        }
        else
        {
            mac_reconfigure_ue_entity_req.reconfig_ue_info.ue_compliance_release.
                ue_compliance_release = p_add_lc_param->access_stratum_release;
        }
        /*SPR_19803_FIX_STOP*/
	}
	/* 36321_CR0538 stop */

	uemh_fill_mac_phy_meas_config_info(p_add_lc_param, &mac_reconfigure_ue_entity_req);

	/* Create LC */
	mac_reconfigure_ue_entity_req.create_lc_req_counter = 0;

	if (p_add_lc_param->bitmask & UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
	{
		fill_srb_mac_create_lc_req(
				&mac_reconfigure_ue_entity_req.
				create_lc_req[mac_reconfigure_ue_entity_req.create_lc_req_counter],
				p_add_lc_param->create_srb2_entity.lc_id,
				&p_add_lc_param->create_srb2_entity.srb_config);

		++mac_reconfigure_ue_entity_req.create_lc_req_counter;
	}
/*NR_DC Code Changes Start*/
    if(p_add_lc_param->bitmask &
            UECC_LLIM_ADD_LC_REQ_CREATE_DRB_INFO_PRESENT)
    {
        for (drb_index = 0; drb_index < p_add_lc_param->create_drb_entity_counter;
                ++drb_index)
        {
            fill_drb_mac_create_lc_req(&mac_reconfigure_ue_entity_req.
                    create_lc_req[mac_reconfigure_ue_entity_req.create_lc_req_counter],
                    p_add_lc_param->create_drb_entity[drb_index].uecc_llim_drb_config.
                    drb_config.logical_channel_identity,
                    &p_add_lc_param->create_drb_entity[drb_index].uecc_llim_drb_config.
                    drb_config);

            /* Fill the QOS info*/        
            fill_qos_mac_create_lc_req (&mac_reconfigure_ue_entity_req.
                    create_lc_req[mac_reconfigure_ue_entity_req.create_lc_req_counter], 
                    &p_add_lc_param->create_drb_entity[drb_index]);

            ++mac_reconfigure_ue_entity_req.create_lc_req_counter;
        }
    }
/*NR_DC Code Changes Stop*/

	RRC_ASSERT(mac_reconfigure_ue_entity_req.create_lc_req_counter <=
			RRC_MAC_MAX_CREATE_LC);


	/* SRS Start */

	if ((p_add_lc_param->bitmask &
				UECC_LLIM_ADD_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT) &&
			(p_add_lc_param->physical_config_dedicated.bitmask &
			 RRC_PHY_SOUNDING_RS_UL_CONFIG_DEDICATED_PRESENT))
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_SRS_DEDICATED_CONFIG_PRESENT;

		mac_reconfigure_ue_entity_req.optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		if(p_add_lc_param->physical_config_dedicated.
				sounding_rs_ul_config_dedicated.bitmask &
				RRC_PHY_SOUNDING_RS_UL_CONFIG_DEDICATED_PARAM_PRESENT)
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.config_type =
				1;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.optional_elems_present |=
				RRC_MAC_SRS_DEDICATED_SETUP_INFO_PRESENT;

			fill_srs_dedicated_config_info(
					&mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.srs_dedicated_setup_info,
					&p_add_lc_param->physical_config_dedicated.
					sounding_rs_ul_config_dedicated.sounding_rs_ul_config_dedicated_param);
		}
		else
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.config_type =
				0;
		}
	}

	/* SRS Stop */

	/* CBSR Changes Start */
	if ((p_add_lc_param->bitmask &
				/*Bug_12240_fix_start*/
				UECC_LLIM_ADD_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT) &&
			/*Bug_12240_fix_stop*/
			(p_add_lc_param->physical_config_dedicated.bitmask &
			 RRC_PHY_ANTENNA_INFORMATION_PRESENT) &&
			(p_add_lc_param->physical_config_dedicated.antenna_information.
			 bitmask &
			 RRC_PHY_ANTENNA_INFORMATION_EXPLICIT_VALUE_PRESENT) &&
			(p_add_lc_param->physical_config_dedicated.antenna_information.
			 antenna_information_explicit_value.bitmask & 
			 RRC_PHY_CODEBOOK_SUBSET_RESTRICTION_PRESENT))
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_CODEBOOK_SUBSET_RESTRICTION_PRESENT;

		mac_reconfigure_ue_entity_req.optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.codebook_subset_restriction.
			cbsr_type =
			(U8)p_add_lc_param->physical_config_dedicated.antenna_information.
			antenna_information_explicit_value.codebook_subset_restriction.
			type;

		l3_memcpy_wrapper(mac_reconfigure_ue_entity_req.reconfig_ue_info.codebook_subset_restriction.
				cbsr_value,
				p_add_lc_param->physical_config_dedicated.antenna_information.
				antenna_information_explicit_value.codebook_subset_restriction.
				value,
				sizeof(mac_reconfigure_ue_entity_req.reconfig_ue_info.codebook_subset_restriction.
					cbsr_value));

	}
	/* CBSR Changes Stop */

	/*Bug_12240_fix_start*/
	if ((p_add_lc_param->bitmask & 
				UECC_LLIM_ADD_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT) &&
			(p_add_lc_param->physical_config_dedicated.bitmask &
			 RRC_PHY_ANTENNA_INFO_R10_PRESENT) &&
			(p_add_lc_param->physical_config_dedicated.antenna_info_r10.
			 bitmask &
			 RRC_ANTENNA_INFO_R10_EXPLICIT_VALUE_PRESENT) &&
			(p_add_lc_param->physical_config_dedicated.antenna_info_r10.
			 explicit_value.bitmask & 
			 RRM_CODEBOOK_SUBSET_RESTRICTION_PRESENT))
	{
		mac_reconfigure_ue_entity_req.optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_CODEBOOK_SUBSET_RESTRICTION_V1020_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.
			rrc_mac_codebook_subset_restriction_v1020.cbsr_type =
			rrc_calculate_cbsr_type(p_add_lc_param->physical_config_dedicated.
					antenna_info_r10.explicit_value.
					codebook_subset_restriction_r10.num_bits,
					p_add_lc_param->physical_config_dedicated.
					antenna_info_r10.explicit_value.transmission_mode);

		l3_memcpy_wrapper(mac_reconfigure_ue_entity_req.reconfig_ue_info.
				rrc_mac_codebook_subset_restriction_v1020.
				cbsr_value,
				p_add_lc_param->physical_config_dedicated.antenna_info_r10.
				explicit_value.codebook_subset_restriction_r10.value,
				CBSR_MAX_VALUE_V1020);
	}
	/*Bug_12240_fix_stop*/

	/* CLPC Start */


	/* Fill TPC_PDCCH_CONFIG_PUCCH if present */
	if (RRC_PHY_TPC_PDCCH_CONFIG_PUCCH_PRESENT &
			p_add_lc_param->physical_config_dedicated.bitmask)
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_TPC_PDCCH_CONFIG_PUCCH_PRESENT;

		if (RRC_PHY_TPC_PDCCH_CONFIG_PARAM_PRESENT &
				p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.bitmask)
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pucch.release =
				RRC_FALSE; /* represents FALSE */

			mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pucch.bitmask =
				RRC_MAC_TPC_RNTI_INFO_PRESENT;

			rrc_unpack_U16(
					&mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.tpcRnti,
					p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
					tpc_rnti);

			if (TPC_INDEX_FORMAT_3_PRESENT &
					p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
					tpc_index.bitmask)
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.tpcIndex =
					p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
					tpc_index.index_of_format3;

				mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.isConfiguredForDci3Or3A
					= DCI_FORMAT_3;  /* Configured for DCI 3 */
			}

			if (TPC_INDEX_FORMAT_3A_PRESENT &
					p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
					tpc_index.bitmask)
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.tpcIndex =
					p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
					tpc_index.index_of_format3a;

				mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.isConfiguredForDci3Or3A
					= DCI_FORMAT_3A; /* Configured for DCI 3A */
			}

		}
		else
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pucch.release =
				RRC_TRUE; /* represents TRUE */
		}
	}


	/* Fill TPC_PDCCH_CONFIG_PUSCH if present */
	if (RRC_PHY_TPC_PDCCH_CONFIG_PUSCH_PRESENT &
			p_add_lc_param->physical_config_dedicated.bitmask)
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_TPC_PDCCH_CONFIG_PUSCH_PRESENT;

		if (RRC_PHY_TPC_PDCCH_CONFIG_PARAM_PRESENT &
				p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.bitmask)
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pusch.release =
				RRC_FALSE; /* represents FALSE */

			mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pusch.bitmask =
				RRC_MAC_TPC_RNTI_INFO_PRESENT;

			rrc_unpack_U16(
					&mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.tpcRnti,
					p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
					tpc_rnti);

			if (TPC_INDEX_FORMAT_3_PRESENT &
					p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
					tpc_index.bitmask)
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.tpcIndex =
					p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
					tpc_index.index_of_format3;

				mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.isConfiguredForDci3Or3A
					= DCI_FORMAT_3;  /* Configured for DCI 3 */
			}

			if (TPC_INDEX_FORMAT_3A_PRESENT &
					p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
					tpc_index.bitmask)
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.tpcIndex =
					p_add_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
					tpc_index.index_of_format3a;

				mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.isConfiguredForDci3Or3A
					= DCI_FORMAT_3A; /* Configured for DCI 3A */
			}

		}
		else
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.tpc_pdcch_config_pusch.release =
				RRC_TRUE; /* represents TRUE */
		}
	}
	/*tm7-8 fix*/
	if (p_add_lc_param->physical_config_dedicated.bitmask &
			RRC_PHY_CQI_REPORT_CONFIG_V920_PRESENT)
	{
		if (p_add_lc_param->physical_config_dedicated.
				cqi_report_config_v920.bitmask & 
				RRC_PHY_PMI_RI_REPORT_R9_PRESENT)
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_RECONF_CQI_INFO_PRESENT;

			fill_mac_cqi_v920_info(&mac_reconfigure_ue_entity_req.
					reconfig_ue_info.cqi_info);/*SPR 17777 +-*/
		}
	}
	/*tm7-8 fix*/
    /* SPR 23457/23458 Fix Start */ 
    if(!p_ue_ctx->mocn_operator_id_already_configured)
    {
        if(p_add_lc_param->bitmask & 
                UECC_LLIM_ADD_LC_REQ_MOCN_OPERATOR_ID_PRESENT)
        {
            mac_reconfigure_ue_entity_req.reconfig_ue_info.
                optional_elems_present |= RRC_MAC_RECONFIG_OPERATOR_ID_INFO_PRESENT;

            mac_reconfigure_ue_entity_req.reconfig_ue_info.
                operator_info.operator_id = p_add_lc_param->operator_id;
            p_ue_ctx->mocn_operator_id_already_configured = 1;
        }
    }
    else
    {
		RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED,"[RRC_MAC_RECONFIGURE_UE_ENTITY_REQ] "
                "Either Operator Id is already applied on the UE or MOCN is disabled, "
                "No need to send operator id in MAC UE Reconfig");
    }
    /* SPR 23457/23458 Fix End */ 

	/* CLPC Stop */

	/* SPS Start */
	uemh_add_lc_fill_sps_config(p_add_lc_param, &mac_reconfigure_ue_entity_req);
	/* SPS Stop */


	response_code = rrc_mac_il_send_rrc_mac_reconfigure_ue_entity_req(
			&mac_reconfigure_ue_entity_req, 
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_add_lc_param->cell_index),
			p_add_lc_param->transaction_id,
			p_add_lc_param->cell_index);


	if(RRC_SUCCESS == response_code)
	{
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF);
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"Unable to send "
				"MAC reconfig UE entity req");
/*SPR 16135 Fix Start */
          /*Stop Timer*/
        if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
        {
            RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
                    "[LLIM_RECONFIG_UE_ENTITY_TIMER]");
            rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
            p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
        }

        fill_uecc_llim_add_lc_resp(
                &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp,
                L3_FATAL,
                RRC_INVALID_RESPONSE_RECEIVED,
                p_add_lc_param
                );

        /* 2. send UECC_LLIM_ADD_LC_RESP */
        rrc_llim_send_internal_msg( 
                RRC_GET_UECC_MODULE_ID(p_add_lc_param->ue_index), UECC_LLIM_ADD_LC_RESP,
                sizeof(rrc_uecc_llim_add_lc_resp_t), 
                &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp);

        UEMH_FSM_SET_STATE(p_ue_ctx,
                UEMH_STATE_UE_ENTITY_IN_SERVICE);

        rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
        p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
/*SPR 16135 Fix Stop */
	}

	RRC_LLIM_UT_TRACE_EXIT();
}
/* coverity_fix_54712_stop */

/* ERB RELEASE COMMAND START */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_delete_lc_req
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *   DESCRIPTION  :
 *       This function delete LC at Lower Layers.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_DELETE_LC_REQ
 *
 *   RETURNS      : None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_delete_lc_req
(
 void*                p_api,             /* p_api */
 void*                p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t*   p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t*   p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_lc_req_t*        p_delete_lc_req =
		(rrc_uecc_llim_delete_lc_req_t *)p_msg;
	rrc_uecc_llim_delete_lc_req_t*        p_delete_lc_param = PNULL;
	rrc_uemh_timer_buf_t                    guard_timer_data;
	rrc_mac_reconfigure_ue_entity_req_t     mac_reconfigure_ue_entity_req;
	rrc_s1u_reconfigure_ue_entity_req_t s1u_reconfigure_ue_entity_req;
	rrc_pdcp_reconf_ue_entity_req_t pdcp_reconf_ue_entity_req;
	rrc_rlc_reconfig_ue_entity_req_t rlc_reconfig_ue_entity_req;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_delete_lc_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p",p_api);

	p_ue_ctx->curr_op_param.p_rcfg_ue = (rrc_uemh_rcfg_ue_op_param_t*)
		rrc_mem_get (sizeof(rrc_uemh_rcfg_ue_op_param_t));
	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/* Special case on init operation */
	memset_wrapper(p_ue_ctx->curr_op_param.p_rcfg_ue, 0, 
			sizeof(*p_ue_ctx->curr_op_param.p_rcfg_ue));
	p_delete_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_delete_lc;

	*p_delete_lc_param = *p_delete_lc_req;
	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL; 

	/* ATTENTON: Fill uecc_llim_delete_lc_resp with default 
	 * status SUCCESS */
	fill_uecc_llim_delete_lc_resp(
			&p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp, SUCCESS, p_delete_lc_req);

	/* 1. set guard timer */
	guard_timer_data.auto_delete      = RRC_TRUE;
	guard_timer_data.target_submodule = LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index         = p_delete_lc_param->ue_index;
	guard_timer_data.uemh_event       = UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED;
	guard_timer_data.cell_index = p_delete_lc_req->cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Start timer [LLIM_RECONFIG_UE_ENTITY_TIMER] %u ms.",
			p_rrc_llim_gl_ctx->reconfig_ue_duration);

	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer =
		rrc_start_timer(p_rrc_llim_gl_ctx->reconfig_ue_duration,
				&guard_timer_data, sizeof(guard_timer_data), RRC_FALSE);

	do {
		/* 1. Delete Lc on MAC layer: Build and send 
		 *  RRC_MAC_RECONFIGURE_UE_ENTITY_REQ */
		if (RRC_SUCCESS != 
				rrc_mac_build_and_send_delete_lc_req(
					&mac_reconfigure_ue_entity_req, p_delete_lc_param))
		{ 
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,
					"Build and Send [MAC_RECONFIGURE_UE_ENTITY_REQ]: Failed");
			break;
		}

		/* After Sending RRC_MAC_RECONFIGURE_UE_ENTITY_REQ
		 * set corresponding bit in cur_mask_lc_to_be_tracked_layers */
		RRC_ASSERT(UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			1 << UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF;

		/* 2. Delete LC on S1-U layer: Build and send
		 *  RRC_S1U_RECONFIGURE_UE_ENTITY_REQ */
		if (RRC_SUCCESS != 
				rrc_s1u_build_and_send_delete_lc_req(
					&s1u_reconfigure_ue_entity_req, p_delete_lc_param))
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,
					"Build and Send [S1U_RECONFIGURE_UE_ENTITY_REQ]: Failed");
			break;
		}

		/* After Sending RRC_S1U_RECONFIGURE_UE_ENTITY_REQ
		 * set corresponding bit in cur_mask_lc_to_be_tracked_layers */
		RRC_ASSERT(UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			1 << UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF;

		/* 3. Delete LC on PDCP layer: Build and send
		 *  RRC_PDCP_RECONFIG_UE_ENTITY_REQ */
		if (RRC_SUCCESS != 
				rrc_pdcp_build_and_send_delete_lc_req(
					&pdcp_reconf_ue_entity_req, p_delete_lc_param))
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,
					"Build and Send [PDCP_RECONFIGURE_UE_ENTITY_REQ]: Failed");
			break;
		}
#ifdef ENDC_ENABLED
        /*OPTION3X Changes Start*/
        if(pdcp_reconf_ue_entity_req.num_del_drb_entity)
        /*OPTION3X Changes End*/
#endif
        {
		/* After Sending RRC_PDCP_RECONFIGURE_UE_ENTITY_REQ
		 * set corresponding bit in cur_mask_lc_to_be_tracked_layers */
		RRC_ASSERT(UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			1 << UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF;
        }

		/* 4. Delete LC on RLC layer: 
		 *  Build and Send RRC_RLC_RECONFIG_UE_ENTITY_REQ */
		if (RRC_SUCCESS != 
				rrc_rlc_build_and_send_delete_lc_req(
					&rlc_reconfig_ue_entity_req, p_delete_lc_param))
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,
					"Build and Send [RLC_RECONFIGURE_UE_ENTITY_REQ]: Failed");
			break;
		}

		/* After Sending RRC_RLC_RECONFIGURE_UE_ENTITY_REQ
		 * set corresponding bit in cur_mask_lc_to_be_tracked_layers */
		RRC_ASSERT(UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			1 << UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF;


		/* Finally change to state UEMH_STATE_W_FOR_DEL_ALL_LC_CNF
		 * and wait from all lower layer(L2) SUCCESS or FAILURE
		 * from any one of (L2)layer */                                      
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_DEL_ALL_LC_CNF);

	} while (0);

	RRC_LLIM_UT_TRACE_EXIT();
}
/* ERB RELEASE COMMAND END */

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_cfg_security_req
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *    DESCRIPTION  : This function starts configuring ue security on lower layers.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_cfg_security_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_configure_security_req_t   *p_cfg_security_req =
		(rrc_uecc_llim_configure_security_req_t *)p_msg;
	rrc_uemh_timer_buf_t                    guard_timer_data;
	rrc_pdcp_reconf_ue_entity_req_t         pdcp_reconfig_ue_entity_req;
	rrc_uemh_cfg_ue_security_op_param_t     *p_cfg_ue_security_param    = PNULL;
	rrc_pdcp_rcfg_srb_entity_t              *p_rcfg_srb_entity          = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_cfg_security_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p",p_api);     

	p_ue_ctx->curr_op_param.p_cfg_ue_security = (rrc_uemh_cfg_ue_security_op_param_t*)
		rrc_mem_get(sizeof(rrc_uemh_cfg_ue_security_op_param_t));
	if (PNULL == p_ue_ctx->curr_op_param.p_cfg_ue_security) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_cfg_ue_security is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_cfg_ue_security_param = p_ue_ctx->curr_op_param.p_cfg_ue_security;
	memset_wrapper(p_cfg_ue_security_param, 0, 
			sizeof(rrc_uemh_cfg_ue_security_op_param_t));

	p_cfg_ue_security_param->uecc_cfg_security  = *p_cfg_security_req;
	p_cfg_ue_security_param->guard_timer        = PNULL;

	/* 1. start guard timer */
	guard_timer_data.auto_delete        = RRC_TRUE;
	guard_timer_data.target_submodule   = LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index           = p_cfg_security_req->ue_index;
	guard_timer_data.uemh_event         = UEMH_EVENT_SECURITY_TIMER_EXPIRED;
	guard_timer_data.cell_index         = p_cfg_security_req->cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Start timer [LLIM_CONFIG_UE_SECURITY_TIMER] %u ms.",
			p_rrc_llim_gl_ctx->config_ue_security_duration);

	p_cfg_ue_security_param->guard_timer =
		rrc_start_timer(p_rrc_llim_gl_ctx->config_ue_security_duration,
				&guard_timer_data, sizeof(guard_timer_data), RRC_FALSE);

	/* 2. send PDCP_RECONFIG_UE_ENTITY_REQ */
	memset_wrapper(&pdcp_reconfig_ue_entity_req, 0, sizeof
			(rrc_pdcp_reconf_ue_entity_req_t));

	pdcp_reconfig_ue_entity_req.ue_index                = p_cfg_security_req->
		ue_index;
	pdcp_reconfig_ue_entity_req.num_reconfig_srb_entity = 1;

	p_rcfg_srb_entity = &pdcp_reconfig_ue_entity_req.rcfg_srb_entities[0];

	p_rcfg_srb_entity->optional_elems_present   = 0;
	/* Event UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ can
	 *  configure security only on SRB1 side */
	p_rcfg_srb_entity->lc_id                    = RRC_SRB1_LC_ID;

	if (p_cfg_security_req->bitmask &
			RRC_UECC_LLIM_SECURITY_CONFIG_INTEGRITY_PROTECTION_PRESENT)
	{
		pdcp_reconfig_ue_entity_req.optional_elems_present |=
			RRC_PDCP_CR_SRB_CONFIG_INT_PRESENT;
		pdcp_reconfig_ue_entity_req.config_integrity_protection
			=
			p_cfg_security_req->configure_integrity;
		p_rcfg_srb_entity->rb_direction     =
			RRC_PDCP_RB_DIR_BOTH;
	}

	if (p_cfg_security_req->bitmask &
			RRC_UECC_LLIM_SECURITY_CONFIG_CIPHERING_PRESENT)
	{
		pdcp_reconfig_ue_entity_req.optional_elems_present |=
			RRC_PDCP_CR_SRB_CONFIG_CIPH_PRESENT;
		pdcp_reconfig_ue_entity_req.config_srb_ciphering
			=
			p_cfg_security_req->configure_ciphering_info.configure_ciphering;

		p_rcfg_srb_entity->rb_direction =
			p_cfg_security_req->
			configure_ciphering_info.rb_direction;
	}
	/*SPR_17121_START*/
	if(p_cfg_security_req->bitmask & 
			UECC_LLIM_CONFIGURE_SECURITY_MACI_REQ_PRESENT)
	{
		l3_memcpy_wrapper(&(pdcp_reconfig_ue_entity_req.mac_i_req),
				&(p_cfg_security_req->mac_i_req),
				sizeof(rrc_mac_i_msg_t));		
		pdcp_reconfig_ue_entity_req.optional_elems_present |= 
			RRC_PDCP_RECONFIG_MACI_REQ_PRESENT;
	}
	/*SPR_17121_END*/
	if(RRC_SUCCESS != rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req( 
				&pdcp_reconfig_ue_entity_req,
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_cfg_security_req->cell_index),
				p_cfg_security_req->transaction_id,
				p_cfg_security_req->cell_index))
	{
		RRC_LLIM_TRACE(RRC_ERROR,
				"[%s]Unable to send pdcp_reconf_ue_entity_req ..",__FUNCTION__);
	}
	else
	{
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_CONFIGURE_SECURITY_CNF);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_cleanup_req
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *   DESCRIPTION  : This function cleanups UEMH FSM.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_OAMH_CLEANUP_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_cleanup_req
(
 void                *p_api,             
 void                *p_msg,             
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	/*coverity fix start*/
	/*coverity fix stop*/

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p",p_api,p_msg);      

	uemh_cleanup_ue_ctx(p_ue_ctx);    

	/* 1. delete from UE DB and free */
	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,p_ue_ctx->ue_index,
			PNULL);

	rrc_mem_free(p_ue_ctx);
    /* SPR 20522 Fix Start */
	/* + Coverity 81408 */
	p_ue_ctx = PNULL;
	/* - Coverity 81408 */
    /* SPR 20522 Fix End */
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_s1u_error_ind
 *   INPUT        : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUT       : none                  
 *
 *    DESCRIPTION  :  This function cleanups UEMH FSM.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_S1U_ERROR_IND
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_s1u_error_ind
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_s1u_error_ind_t   *p_s1u_error_ind = PNULL;
	rrc_uecc_llim_s1u_error_ind_t uecc_s1u_error_ind;
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_ue_ctx);

	/* Coverity Fix 61222*/
	memset_wrapper(&uecc_s1u_error_ind, 0, sizeof
			(rrc_uecc_llim_s1u_error_ind_t));

	p_s1u_error_ind = (rrc_s1u_error_ind_t *)p_msg;

	/* UECC_LLIM_S1U_ERROR_IND */
	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, 
			&uecc_s1u_error_ind.cell_index);

	uecc_s1u_error_ind.ue_index    = p_s1u_error_ind->ue_index;
	uecc_s1u_error_ind.lc_id       = p_s1u_error_ind->lc_id;

	rrc_llim_send_internal_msg(
			RRC_GET_UECC_MODULE_ID(p_s1u_error_ind->ue_index),
			UECC_LLIM_S1U_ERROR_IND,
			sizeof(rrc_uecc_llim_s1u_error_ind_t),
			&uecc_s1u_error_ind);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: update_drb_fail_status
 *   INPUTS       :  rrc_llim_ue_ctx_t           *p_ue_ctx
 *                   U16                           drb_index
 *                   U16                           drb_status
 *   OUTPUTS      : None
 *   DESCRIPTION  : This function updates the lc_id and status for a particular lc.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void update_drb_fail_status
(
 rrc_llim_ue_ctx_t           *p_ue_ctx,/* ue context */
 U16                           drb_index,
 U16                           drb_status
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	/*Storing the status*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
		drb_status &=(U16)(~(1 << drb_status));

	/*The current lc id has failed*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
		drb_modify_fail = RRC_TRUE;

	RRC_LLIM_UT_TRACE_EXIT();

}
/******************************************************************************
 *   FUNCTION NAME: update_drb_pass_status
 *   INPUTS       : rrc_llim_ue_ctx_t           *p_ue_ctx
 *                  U16                           drb_index
 *                  rrc_lc_id_t                  lc_id
 *                  rrc_llim_drb_status_et       drb_status
 *   OUTPUTS      : None
 *   DESCRIPTION  : This function updates the lc_id and status for a particular lc.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void update_drb_pass_status
(
 rrc_llim_ue_ctx_t           *p_ue_ctx,/* ue context */
 U16                           drb_index,
 rrc_lc_id_t                  lc_id,
 rrc_llim_drb_status_et       drb_status
 )
{
	/*Storing the lc_id in ue_ctx*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
		lc_id = lc_id;

	/*Storing the status*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
		drb_status |= (U16)(1 << drb_status);
}

/******************************************************************************
 *   FUNCTION NAME: uemh_modify_lc_mac_config
 *
 *   DESCRIPTION:
 *       Function fills mac_config parameters for modify lc
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_modify_lc_mac_config(
		rrc_uecc_llim_modify_drb_version_t   *p_modify_lc_param,
		rrc_mac_reconfigure_ue_entity_req_t  *p_mac_reconfigure_ue_entity_req)
{

	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_modify_lc_param);
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_req);

	/* Check for mac config */
	if (p_modify_lc_param->bitmask & 
			UECC_LLIM_MODIFY_LC_REQ_MAC_CONFIG_PRESENT) 
	{
		p_mac_reconfigure_ue_entity_req->optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
			optional_elems_present |= RRC_NULL;

		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
			optional_elems_present |=
			RRC_MAC_DL_MAX_RB_INFO_PRESENT;
		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.dl_max_rb_info.
			dl_max_rb =
			p_modify_lc_param->mac_config.
			mac_main_config_extensions.dl_max_rb;
		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
			optional_elems_present |=
			RRC_MAC_NUM_OF_LAYER_INFO_PRESENT;
		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
			num_of_layer_info.num_of_layer =
			p_modify_lc_param->mac_config.mac_main_config_extensions.
			num_of_layer;

		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
			optional_elems_present |=
			RRC_MAC_CODE_BOOK_INDEX_INFO_PRESENT;
		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
			code_book_index_info.code_book_index =
			p_modify_lc_param->mac_config.mac_main_config_extensions.
			code_book_index;

		/* Fill TAT if received in message */
		if (p_modify_lc_param->mac_config.bitmask &
				RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_TIME_ALIGNMENT_TIME_INFO_PRESENT;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				time_alignment_timer_info.time_alignment_timer =
				p_modify_lc_param->mac_config.
				mac_main_config.time_alignment_timer_dedicated;
		}

		/*TTI_BUNDLING Start*/
		/* tti bundling */
		if ((p_modify_lc_param->
					mac_config.bitmask & RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
				(p_modify_lc_param->
				 mac_config.mac_main_config.bitmask & RRC_MAC_MAIN_CONFIG_UL_SCH_CONFIG_PRESENT))
		{
			/* tti_bundling_info present */
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_RECONFIG_TTI_BUNDLING_INFO_PRESENT;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tti_bundling.
				tti_bundling = 
				p_modify_lc_param->mac_config.
				mac_main_config.ul_sch_config.tti_bundling;
		}
		/*TTI_BUNDLING Stop*/

		/* drx config */
		if ((p_modify_lc_param->
					mac_config.bitmask & RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
				(p_modify_lc_param->
				 mac_config.mac_main_config.bitmask & RRC_MAC_MAIN_CONFIG_DRX_CONFIG_PRESENT))
		{
			/* drx_config_info present */
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_RECONFIG_DRX_CONFIG_INFO_PRESENT;

			/* 1- for setup */
			if((1 == p_modify_lc_param->
						mac_config.mac_main_config.drx_config.drx_config_type) && 
					(p_modify_lc_param->
					 mac_config.mac_main_config.drx_config.bitmask
					 & RRC_DRX_CONFIG_PARAM_PRESENT))
			{
				/* Set bitmask */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					bitmask |= RRC_MAC_DRX_CONFIG_DRX_SETUP_CONFIG_INFO_PRESENT;

				/* since drx_config_type is 1 */ 
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_config_type = 1;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_setup_config_info.on_duration_timer = 
					p_modify_lc_param->mac_config.
					mac_main_config.drx_config.drx_config_param.on_duration_timer;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_setup_config_info.drx_inactivity_timer = 
					p_modify_lc_param->mac_config.
					mac_main_config.drx_config.drx_config_param.drx_inactivity_timer;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_setup_config_info.drx_retransmission_timer = 
					p_modify_lc_param->mac_config.
					mac_main_config.drx_config.drx_config_param.drx_retransmission_timer;

				rrc_mac_fill_mac_main_long_drx_cycle_start_offset(
						&p_modify_lc_param->mac_config.mac_main_config.drx_config.
						drx_config_param.long_drx_cycle_start_offset,
						&p_mac_reconfigure_ue_entity_req->reconfig_ue_info.
						drx_config_info.drx_setup_config_info);

				/* check short drx config present */
				if (p_modify_lc_param->mac_config.
						mac_main_config.drx_config.
						drx_config_param.bitmask & RRC_DRX_CONFIG_SHORT_DRX_PRESENT)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
						drx_setup_config_info.bitmask |=
						RRC_MAC_DRX_SETUP_CONFIG_SHORT_DRX_CONFIG_PRESENT;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
						drx_setup_config_info.short_drx.short_drx_cycle = 
						p_modify_lc_param->mac_config.
						mac_main_config.drx_config.
						drx_config_param.short_drx.short_drx_cycle;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
						drx_setup_config_info.short_drx.short_drx_cycle_timer = 
						p_modify_lc_param->mac_config.
						mac_main_config.drx_config.
						drx_config_param.short_drx.short_drx_cycle_timer;
				}
				/* DRX_MAC_CE_CMD  Start */ 
				if (p_modify_lc_param->mac_config.
						mac_main_config.drx_config.
						drx_config_param.bitmask & RRC_DRX_CONFIG_DRX_MAC_CE_CMD_TRIGGER_INFO_PRESENT)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
						drx_setup_config_info.bitmask |=
						RRC_MAC_DRX_SETUP_CONFIG_DRX_MAC_CE_CMD_TRIGGER_INFO_PRESENT;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
						drx_setup_config_info.mac_ce_cmd_l2_trigger_info.drx_mac_ce_timer = 
						p_modify_lc_param->mac_config.
						mac_main_config.drx_config.
						drx_config_param.drx_mac_ce_cmd_trigger_info.drx_mac_ce_timer;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
						drx_setup_config_info.mac_ce_cmd_l2_trigger_info.drx_mac_ce_cmd_threshold = 
						p_modify_lc_param->mac_config.
						mac_main_config.drx_config.
						drx_config_param.drx_mac_ce_cmd_trigger_info.drx_mac_ce_cmd_threshold;
				}
				/* DRX_MAC_CE_CMD  End */
			}
			else /* for release */
			{
				/* since drx_config_type is 0 */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.drx_config_info.
					drx_config_type = 0;
			}
		}
	}
	/* CA start */
	/* Check for meas config */
	if (p_modify_lc_param->bitmask &
			UECC_LLIM_MODIFY_LC_REQ_MEAS_GAP_CONFIG_PRESENT) 
	{
		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_MEAS_GAP_CONFIG_INFO_PRESENT;

		/* 1 - meas config gap setup */
		if ((1 == p_modify_lc_param->
					meas_gap_config.meas_gap_config_type) && 
				(p_modify_lc_param->meas_gap_config.bitmask & 
				 MEAS_GAP_CONFIG_SETUP_CONFIG_INFO_PRESENT))
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
				bitmask |= RRC_MAC_MEAS_GAP_CONFIG_MEAS_GAP_SETUP_CONFIG_INFO_PRESENT;

			/* Assign meas gap config type - 1 */
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
				meas_gap_config_type = 1;

			/* pattern id 0 */
			if (p_modify_lc_param->meas_gap_config.
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP0_PRESENT)
			{ 
				/* Assign - pattern id 0 */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 0;

				/* Assign - gap_offset */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = p_modify_lc_param->
					meas_gap_config.setup_config_info.gp0; 
			}
			/* pattern id 1 */
			else if (p_modify_lc_param->meas_gap_config.
					setup_config_info.bitmask & MEAS_GAP_CONFIG_GP1_PRESENT)   
			{
				/* Assign - pattern id 1 */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_pattern_id = 1;

				/* Assign - gap_offset */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
					meas_gap_setup_config_info.gap_offset = p_modify_lc_param->
					meas_gap_config.setup_config_info.gp1; 
			}
            #ifdef ENDC_ENABLED
	        /* pattern id 4 */
			else if (p_modify_lc_param->
					meas_gap_config.setup_config_info.bitmask & 
					MEAS_GAP_CONFIG_GP4_PRESENT)   
            {
                /* Assign - pattern id 4 */
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_pattern_id = 4;

                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_offset = p_modify_lc_param->
                    meas_gap_config.setup_config_info.gp4_r15; 
            }
			/* pattern id 5 */
			else if (p_modify_lc_param->
					meas_gap_config.setup_config_info.bitmask & 
					MEAS_GAP_CONFIG_GP5_PRESENT)   
            {
                /* Assign - pattern id 5 */
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_pattern_id = 5;

                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_offset = p_modify_lc_param->
                    meas_gap_config.setup_config_info.gp5_r15; 
            }
			/* pattern id 6 */
			else if (p_modify_lc_param->
					meas_gap_config.setup_config_info.bitmask & 
					MEAS_GAP_CONFIG_GP6_PRESENT)   
            {
                /* Assign - pattern id 6 */
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_pattern_id = 6;

                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_offset = p_modify_lc_param->
                    meas_gap_config.setup_config_info.gp6_r15; 
            }
			/* pattern id 7 */
			else if (p_modify_lc_param->
					meas_gap_config.setup_config_info.bitmask & 
                    MEAS_GAP_CONFIG_GP7_PRESENT)   
            {
                /* Assign - pattern id 7 */
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_pattern_id = 7;

                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_offset = p_modify_lc_param->
                    meas_gap_config.setup_config_info.gp7_r15; 
            }
			/* pattern id 8 */
			else if (p_modify_lc_param->
					meas_gap_config.setup_config_info.bitmask & 
                    MEAS_GAP_CONFIG_GP8_PRESENT)   
            {
                /* Assign - pattern id 8 */
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_pattern_id = 8;

                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_offset = p_modify_lc_param->
                    meas_gap_config.setup_config_info.gp8_r15; 
            }
			/* pattern id 9 */
			else if (p_modify_lc_param->
					meas_gap_config.setup_config_info.bitmask & 
                    MEAS_GAP_CONFIG_GP9_PRESENT)   
            {
                /* Assign - pattern id 9 */
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_pattern_id = 9;

                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_offset = p_modify_lc_param->
                    meas_gap_config.setup_config_info.gp9_r15; 
            }
			/* pattern id 10 */
			else if (p_modify_lc_param->
					meas_gap_config.setup_config_info.bitmask & 
                    MEAS_GAP_CONFIG_GP10_PRESENT)   
            {
                /* Assign - pattern id 10 */
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_pattern_id = 10;

                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_offset = p_modify_lc_param->
                    meas_gap_config.setup_config_info.gp10_r15; 
            }
			/* pattern id 11 */
			else if (p_modify_lc_param->
					meas_gap_config.setup_config_info.bitmask & 
                    MEAS_GAP_CONFIG_GP11_PRESENT)   
            {
                /* Assign - pattern id 11 */
                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_pattern_id = 11;

                p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
                    meas_gap_setup_config_info.gap_offset = p_modify_lc_param->
                    meas_gap_config.setup_config_info.gp11_r15; 
            }
            #endif
		}
		/* 0 - meas config gap release */
		else
		{
			/* Assign meas gap config type - 0 */
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.meas_gap_config_info.
				meas_gap_config_type = 0;
		}
	}
	/*CA end */
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_modify_lc_phy_config_dedicated
 *
 *   DESCRIPTION:
 *       Function fills phy_config_dedicated parameters for modify lc
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_modify_lc_phy_config_dedicated(
		rrc_uecc_llim_modify_drb_version_t   *p_modify_lc_param,
		rrc_mac_reconfigure_ue_entity_req_t  *p_mac_reconfigure_ue_entity_req)
{

	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_modify_lc_param);
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_req);

	/* Fill PDSCH_CONFIG_INFO if present */
	if (p_modify_lc_param->bitmask &
			UECC_LLIM_MODIFY_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT)
	{
		if (RRC_PHY_PDSCH_CONFIGURATION_DEDICATED_PRESENT &
				p_modify_lc_param->physical_config_dedicated.bitmask)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
				RRC_MAC_PDSCH_CONFIG_INFO_PRESENT;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.pdsch_config_info.p_a =
				p_modify_lc_param->physical_config_dedicated.pdsch_configuration_dedicated.p_a;
		}

		/* Fill P0_UE_PUSCH if present */
		if (RRC_PHY_UPLINK_POWER_CONTROL_DEDICATED_PRESENT &
				p_modify_lc_param->physical_config_dedicated.bitmask)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
				RRC_MAC_P0_UE_PUSCH_PRESENT;

			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.p0_ue_pusch.p0_ue_pusch = 
				p_modify_lc_param->physical_config_dedicated.uplink_power_control_dedicated.
				p0_ue_pusch;
		}

		/* Fill TPC_PDCCH_CONFIG_PUCCH if present */
		if (RRC_PHY_TPC_PDCCH_CONFIG_PUCCH_PRESENT &
				p_modify_lc_param->physical_config_dedicated.bitmask)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
				RRC_MAC_TPC_PDCCH_CONFIG_PUCCH_PRESENT;

			if (RRC_PHY_TPC_PDCCH_CONFIG_PARAM_PRESENT &
					p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.bitmask)
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pucch.release =
					RRC_FALSE; /* represents FALSE */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pucch.bitmask =
					RRC_MAC_TPC_RNTI_INFO_PRESENT;

				rrc_unpack_U16(
						&p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.tpcRnti,
						p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
						tpc_rnti);

				if (TPC_INDEX_FORMAT_3_PRESENT &
						p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
						tpc_index.bitmask)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.tpcIndex =
						p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
						tpc_index.index_of_format3;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.isConfiguredForDci3Or3A
						= DCI_FORMAT_3;  /* Configured for DCI 3 */
				}

				if (TPC_INDEX_FORMAT_3A_PRESENT &
						p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
						tpc_index.bitmask)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.tpcIndex =
						p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pucch.tpc_pdcch_config_param.
						tpc_index.index_of_format3a;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pucch.tpc_rnti_info.isConfiguredForDci3Or3A
						= DCI_FORMAT_3A; /* Configured for DCI 3A */
				}
			}
			else
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pucch.release =
					RRC_TRUE; /* represents TRUE */
			}
		}

		/* Fill TPC_PDCCH_CONFIG_PUSCH if present */
		if (RRC_PHY_TPC_PDCCH_CONFIG_PUSCH_PRESENT &
				p_modify_lc_param->physical_config_dedicated.bitmask)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
				RRC_MAC_TPC_PDCCH_CONFIG_PUSCH_PRESENT;

			if (RRC_PHY_TPC_PDCCH_CONFIG_PARAM_PRESENT &
					p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.bitmask)
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pusch.release =
					RRC_FALSE; /* represents FALSE */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pusch.bitmask =
					RRC_MAC_TPC_RNTI_INFO_PRESENT;

				rrc_unpack_U16(
						&p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.tpcRnti,
						p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
						tpc_rnti);

				if (TPC_INDEX_FORMAT_3_PRESENT &
						p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
						tpc_index.bitmask)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.tpcIndex =
						p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
						tpc_index.index_of_format3;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.isConfiguredForDci3Or3A
						= DCI_FORMAT_3;  /* Configured for DCI 3 */
				}

				if (TPC_INDEX_FORMAT_3A_PRESENT &
						p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
						tpc_index.bitmask)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.tpcIndex =
						p_modify_lc_param->physical_config_dedicated.tpc_pdcch_config_pusch.tpc_pdcch_config_param.
						tpc_index.index_of_format3a;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pusch.tpc_rnti_info.isConfiguredForDci3Or3A
						= DCI_FORMAT_3A; /* Configured for DCI 3A */
				}
			}
			else
			{
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.tpc_pdcch_config_pusch.release =
					RRC_TRUE; /* represents TRUE */
			}
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: 
 *   uemh_fsm_in_service_uecc_trigerred_rb_mac_reconfig_modify_lc_req
 *   INPUTS      : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS     : None
 *   DESCRIPTION :
 *       This function check if MAC configuration for any lc is present or not.
 *       If present then it fills and sends the Modify lc message to MAC when 
 *       uecc trigerrs rollback in ue_in_service state.
 *
 *   RETURNS:
 *       SUCCESS or FAILURE or L3_FATAL
 *
 ******************************************************************************/
static rrc_response_et 
uemh_fsm_in_service_uecc_trigerred_rb_mac_reconfig_modify_lc_req
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{

	rrc_uecc_llim_modify_rollback_req_t        *p_modify_lc_rollback   = PNULL;
	rrc_uecc_llim_modify_drb_version_t         *p_modify_lc_param = PNULL;
	/* SPR 14562 Fix start */
	rrm_mac_config_t              *p_rrm_mac_config = PNULL;
	rrm_scell_config_t            *p_rrm_scell_config = PNULL;
	/* SPR 14562 Fix end */


	rrc_mac_reconfigure_ue_entity_req_t     mac_reconfigure_ue_entity_req;

	rrc_counter_t                           drb_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	p_modify_lc_rollback = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback;

	memset_wrapper(&mac_reconfigure_ue_entity_req,
			0,
			sizeof(rrc_mac_reconfigure_ue_entity_req_t));

	mac_reconfigure_ue_entity_req.ue_index = p_modify_lc_rollback->
		ue_index;
	p_modify_lc_param =
		&p_modify_lc_rollback->
		modify_drb_entity;

	/*Reconfigure LC*/
	mac_reconfigure_ue_entity_req.reconfigure_lc_req_counter = RRC_NULL;

	if (RRC_UECC_LLIM_MAX_DRB >= p_modify_lc_param->drb_counter)
	{
		for (drb_index = 0; drb_index <
				p_modify_lc_param->drb_counter;
				++drb_index)
		{
			if ((p_modify_lc_param->uecc_llim_drb_config[drb_index].drb_config.
						bitmask & RRM_DRB_CONFIG_RLC_CONFIG_PRESENT)&&
					(RRC_MAC_MAX_RECONFIGURE_LC > mac_reconfigure_ue_entity_req.reconfigure_lc_req_counter))
			{
				fill_drb_mac_reconfig_lc_req(
						&mac_reconfigure_ue_entity_req.
						reconfigure_lc_req[mac_reconfigure_ue_entity_req.
						reconfigure_lc_req_counter],
						&p_modify_lc_param->uecc_llim_drb_config[drb_index].drb_config);

				++mac_reconfigure_ue_entity_req.reconfigure_lc_req_counter;
			}
			else
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid reconfigure_lc_req_counter");
				break;
			}
		}
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "DRB count exceeds MAX_ERAB_COUNT");
		RRC_LLIM_UT_TRACE_EXIT();
		return FAILURE;
	}
	RRC_ASSERT(mac_reconfigure_ue_entity_req.reconfigure_lc_req_counter <=
			RRC_MAC_MAX_RECONFIGURE_LC);
	/*securitykey*/
	/*Fills the AMBR info in case of Modify_lc*/
	if (p_modify_lc_param->bitmask & UECC_LLIM_MODIFY_LC_REQ_UE_AMBR_PRESENT)
	{
		mac_reconfigure_ue_entity_req.optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.
			optional_elems_present |= 
			RRC_MAC_RECONFIG_AMBR_QOS_INFO_PRESENT;
		mac_reconfigure_ue_entity_req.reconfig_ue_info.ambr_qos_info.
			dl_ambr = p_modify_lc_param->ue_ambr.dl_ambr;
		mac_reconfigure_ue_entity_req.reconfig_ue_info.ambr_qos_info.
			ul_ambr = p_modify_lc_param->ue_ambr.ul_ambr;
	}  
	/*securitykey*/

	uemh_modify_lc_mac_config(p_modify_lc_param, &mac_reconfigure_ue_entity_req);

	/*Transmission_mode_7_8 start*/
	if (p_modify_lc_param->bitmask & 
			UECC_LLIM_MODIFY_LC_REQ_MAC_CONFIG_PRESENT) 
	{
		if(p_modify_lc_param->mac_config.mac_main_config_extensions.bitmask & 
				RRM_MAC_MAIN_CONFIG_EXT_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT) 
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_RECONFIG_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT;
			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				pdsch_epre_to_ue_rs_ratio.pdsch_epre_to_ue_rs_ratio =
				p_modify_lc_param->mac_config.mac_main_config_extensions.
				pdsch_epre_to_ue_rs_ratio;
		}
	}
	/*Transmission_mode_7_8 stop*/
	/* CLPC Start */
	uemh_modify_lc_phy_config_dedicated(p_modify_lc_param, &mac_reconfigure_ue_entity_req);
	/* CLPC Stop */

	if (p_modify_lc_param->physical_config_dedicated.bitmask &
			RRC_PHY_CQI_REPORTING_PRESENT)
	{
		if ((p_modify_lc_param->physical_config_dedicated.
					cqi_reporting.bitmask & 
					RRC_PHY_CQI_REPORTING_PERIODIC_PRESENT) ||
				(p_modify_lc_param->physical_config_dedicated.
				 cqi_reporting.bitmask &
				 RRC_PHY_CQI_REPORTING_MODE_APERIODIC_PRESENT))
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_RECONF_CQI_INFO_PRESENT;

			fill_mac_cqi_info(&mac_reconfigure_ue_entity_req.
					reconfig_ue_info.cqi_info,
					&p_modify_lc_param->physical_config_dedicated.
					cqi_reporting);
		}
		/* SPR 12554 Fix Start */
		else
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_RECONF_CQI_INFO_PRESENT;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.cqi_info.
				optional_elems_present = 0;
		}
		/* SPR 12554 Fix Stop */
	}

	/*tm7-8 fix*/
	if (p_modify_lc_param->physical_config_dedicated.bitmask &
			RRC_PHY_CQI_REPORT_CONFIG_V920_PRESENT)
	{
		if (p_modify_lc_param->physical_config_dedicated.
				cqi_report_config_v920.bitmask & 
				RRC_PHY_PMI_RI_REPORT_R9_PRESENT)
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_RECONF_CQI_INFO_PRESENT;

			fill_mac_cqi_v920_info(&mac_reconfigure_ue_entity_req.
					reconfig_ue_info.cqi_info);/*SPR 17777 +-*/
		}
	}
	/*tm7-8 fix*/

	if (p_modify_lc_param->physical_config_dedicated.bitmask &
			RRC_PHY_SCHEDULING_REQUEST_CONFIG_PRESENT)
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.
			optional_elems_present |= RRC_MAC_RECONF_SR_CONFIG_INFO_PRESENT;

		fill_mac_sr_config_info(&mac_reconfigure_ue_entity_req.
				reconfig_ue_info.sr_config_info,
				&p_modify_lc_param->physical_config_dedicated.
				scheduling_request_config);
	}

	if(p_modify_lc_param->bitmask & 
			UECC_LLIM_MODIFY_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT ) 
	{
		if (p_modify_lc_param->physical_config_dedicated.bitmask &
				RRC_PHY_CQI_REPORT_CONFIG_R10_PRESENT)
		{
			if((p_modify_lc_param->physical_config_dedicated.
						cqi_report_config_r10.bitmask &
						RRC_PHY_CQI_REPORT_CONFIG_R10_REPORT_APERIODIC_R10_PRESENT) ||
					(p_modify_lc_param->physical_config_dedicated.
					 cqi_report_config_r10.bitmask &
					 RRC_PHY_CQI_REPORT_CONFIG_R10_REPORT_PERIODIC_R10_PRESENT))
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_RECONF_CQI_INFO_PRESENT;

				fill_mac_cqi_info_r10(
						&mac_reconfigure_ue_entity_req.
						reconfig_ue_info.cqi_info,
						&p_modify_lc_param->physical_config_dedicated.
						cqi_report_config_r10);
			}
		}
	}


	if ((p_modify_lc_param->physical_config_dedicated.bitmask &
				RRC_PHY_ANTENNA_INFORMATION_PRESENT) &&
			(p_modify_lc_param->physical_config_dedicated.antenna_information.bitmask & 
			 RRC_PHY_ANTENNA_INFORMATION_EXPLICIT_VALUE_PRESENT) )
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.
			optional_elems_present |= RRC_MAC_TX_MODE_INFO_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.tx_mode_info.
			transmission_mode =
			(U8) ( p_modify_lc_param->physical_config_dedicated.
					antenna_information.antenna_information_explicit_value.
					transmission_mode + 1);
	}
	/*BUG_11164_START*/
	if ((p_modify_lc_param->physical_config_dedicated.bitmask &
				RRC_PHY_ANTENNA_INFO_R10_PRESENT) && 
			p_modify_lc_param->physical_config_dedicated.antenna_info_r10.
			bitmask & RRC_ANTENNA_INFO_R10_EXPLICIT_VALUE_PRESENT)
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.
			optional_elems_present |=
			RRC_MAC_TX_MODE_INFO_PRESENT;
		mac_reconfigure_ue_entity_req.reconfig_ue_info.tx_mode_info.
			transmission_mode = 
			(U8) (p_modify_lc_param->physical_config_dedicated.antenna_info_r10.
					explicit_value.transmission_mode + 1); 
	}
	/*BUG_11164_STOP*/
	if (p_modify_lc_param->physical_config_dedicated.bitmask &
			RRC_PHY_SOUNDING_RS_UL_CONFIG_DEDICATED_PRESENT)
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_SRS_DEDICATED_CONFIG_PRESENT;

		mac_reconfigure_ue_entity_req.optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		if(p_modify_lc_param->physical_config_dedicated.
				sounding_rs_ul_config_dedicated.bitmask &
				RRC_PHY_SOUNDING_RS_UL_CONFIG_DEDICATED_PARAM_PRESENT)
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.config_type = 1;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.optional_elems_present |=
				RRC_MAC_SRS_DEDICATED_SETUP_INFO_PRESENT;

			fill_srs_dedicated_config_info(
					&mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.srs_dedicated_setup_info,
					&p_modify_lc_param->physical_config_dedicated.
					sounding_rs_ul_config_dedicated.sounding_rs_ul_config_dedicated_param);
		}
		else
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.config_type = 0;
		}
	}


	if(p_modify_lc_rollback->bitmask &
			UECC_LLIM_MODIFY_LC_REQ_R10_UE_CATEGORY_PRESENT)
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.ca_optional_elems_present |=
			RRC_MAC_RECONFIG_ADD_UE_CATEGORY_V1020_PRESENT;
		mac_reconfigure_ue_entity_req.reconfig_ue_info.
			rrc_mac_ue_category_v1020.ue_category_v1020 = 
			p_modify_lc_rollback->rel10_ue_category;
	}

	if((p_modify_lc_param->bitmask &
				UECC_LLIM_MODIFY_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT) &&
			(p_modify_lc_param->physical_config_dedicated.bitmask &
			 RRC_PHY_CONFIG_DEDICATED_EXTENDED_PRESENT) &&
			(p_modify_lc_param->physical_config_dedicated.
			 phy_physical_config_dedicated_extended.bitmask &
			 RRC_PHY_PUCCH_CHANNEL_SELECTION_CONFIG_R10_PRESENT))
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.ca_optional_elems_present |=
			RRC_MAC_RECONFIG_ADD_PUCCH_FORMAT_V1020_PRESENT;
		mac_reconfigure_ue_entity_req.reconfig_ue_info.
			rrc_mac_pucch_format_r10.optional_elems_present |=
			RRC_MAC_PUCCH_CHANNEL_SELECTION_CONFIG_V1020_PRESENT;

		fill_mac_pucch_format(&p_modify_lc_param->physical_config_dedicated.
				phy_physical_config_dedicated_extended.
				pucch_channel_selection_config_v1020,
				&mac_reconfigure_ue_entity_req.reconfig_ue_info.
				rrc_mac_pucch_format_r10.
				rrc_mac_pucch_channel_selection_config_v1020);

	}
	if(p_modify_lc_param->bitmask & 
			UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT)
	{
		mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
			RRC_MAC_EXTENDED_RECONFIG_UE_INFO_PRESENT;

		mac_reconfigure_ue_entity_req.reconfig_ue_info.
			ca_optional_elems_present |=
			RRC_MAC_CA_RECONFIG_ADD_CONFIG_PRESENT;
		/* SPR 14562 Fix start */
		if(UECC_LLIM_MODIFY_LC_REQ_MAC_CONFIG_PRESENT & p_modify_lc_param->bitmask)
		{
			p_rrm_mac_config =&p_modify_lc_param->mac_config; 
		}
		if(UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT & p_modify_lc_param->bitmask)
		{
			p_rrm_scell_config = &p_modify_lc_param->scell_config;
		}
		rrc_mac_fill_ca_config_ue_info(
				&mac_reconfigure_ue_entity_req.reconfig_ue_info.
				rrc_mac_carrier_aggr_config,
				p_rrm_mac_config,
				p_rrm_scell_config,
				p_modify_lc_rollback->scells_operation_list);
		/* SPR 14562 Fix end */ 
	}
	/*CA_END*/

	if(RRC_NULL != mac_reconfigure_ue_entity_req.optional_elems_present ||
			RRC_NULL != mac_reconfigure_ue_entity_req.
			reconfigure_lc_req_counter )
	{
		/*Sending with new Transaction Id*/
		if (RRC_SUCCESS == rrc_mac_il_send_rrc_mac_reconfigure_ue_entity_req(
					&mac_reconfigure_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_modify_lc_rollback->cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback.
					transaction_id,
					p_modify_lc_rollback->cell_index))
		{
			RRC_LLIM_TRACE(RRC_INFO,"MAC Reconfig sent..");
			return SUCCESS;
		}
		else
		{
			RRC_LLIM_TRACE(RRC_WARNING,"Unable to send MAC Reconfig");
			return L3_FATAL;
		}
	}
	else
	{
		RRC_LLIM_TRACE(RRC_INFO,"MAC configuration Not present for any LC");
		return FAILURE;
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: 
 *   uemh_fsm_in_service_uecc_trigerred_rb_phy_reconfig_modify_lc_req
 *   INPUTS      : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS     : None
 *   DESCRIPTION :
 *       This function check if PHY configuration for any lc is present or not.
 *       If present then it fills and sends the Modify lc message to PHY when 
 *       uecc trigerrs rollback in ue_in_service state.
 *
 *   RETURNS:
 *       SUCCESS or FAILURE or L3_FATAL
 *
 ******************************************************************************/
static rrc_response_et 
uemh_fsm_in_service_uecc_trigerred_rb_phy_reconfig_modify_lc_req
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	rrc_uecc_llim_modify_rollback_req_t        *p_modify_lc_rollback = PNULL;
	rrc_uecc_llim_modify_drb_version_t         *p_modify_lc_param = PNULL;
	rrc_phy_reconfig_ue_entity_req_t            phy_reconfig_ue_entity_req;

	p_modify_lc_rollback = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback;

	memset_wrapper(&phy_reconfig_ue_entity_req, 0,
			sizeof(rrc_phy_reconfig_ue_entity_req_t));

	phy_reconfig_ue_entity_req.ue_index = p_modify_lc_rollback->ue_index;

	p_modify_lc_param = &p_modify_lc_rollback->modify_drb_entity;

	/* Check for PHY config */
	if (p_modify_lc_param->bitmask & 
			UECC_LLIM_MODIFY_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT) 
	{
		l3_memcpy_wrapper(&phy_reconfig_ue_entity_req.physical_config_dedicated, 
				&p_modify_lc_param->physical_config_dedicated, 
				sizeof(rrc_phy_physical_config_dedicated_t));
	}
	/* CA start */ 
	if(p_modify_lc_param->bitmask &
			UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT)
	{
		phy_reconfig_ue_entity_req.bitmask |= RRC_PHY_SCELL_CONFIG_PRESENT;
		rrc_fill_phy_scell_config_list(&phy_reconfig_ue_entity_req.
				rrc_phy_scell_config_list,&p_modify_lc_param->scell_config,
				p_modify_lc_rollback->scells_operation_list);

	}

	if((p_modify_lc_param->bitmask &
				UECC_LLIM_MODIFY_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT)
			|| 
			(p_modify_lc_param->bitmask &
			 UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT))
	{

		/* CA end */ 
		/*Sending with new Transaction Id*/
		if (RRC_SUCCESS == rrc_phy_il_send_rrc_phy_reconfig_ue_entity_req(
					&phy_reconfig_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,p_modify_lc_rollback->cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback.
					transaction_id,
					p_modify_lc_rollback->cell_index))
		{
			RRC_LLIM_TRACE(RRC_INFO,"PHY Reconfig sent..");
			return SUCCESS;
		}
		else
		{
			RRC_LLIM_TRACE(RRC_WARNING,"Unable to send PHY Reconfig");
			return L3_FATAL;
		}
	}
	else
	{
		RRC_LLIM_TRACE(RRC_INFO,"PHY configuration Not present in function[%s]",  __FUNCTION__);
		return FAILURE;
	}
}

/******************************************************************************
 *   FUNCTION NAME: uemh_modify_lc_fill_drb_info
 *
 *   DESCRIPTION:
 *       Function fills DRB related parameters for modify lc
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_modify_lc_fill_drb_info(
		rrc_llim_ue_ctx_t   *p_ue_ctx,
		rrc_uecc_llim_modify_lc_req_t        *p_modify_lc_req,
		rrc_uecc_llim_modify_drb_version_t   *p_modify_lc_param,
		rrc_mac_reconfigure_ue_entity_req_t  *p_mac_reconfigure_ue_entity_req,
		rrc_bool_et                          *found)
{
	rrc_counter_t                           drb_index = RRC_NULL;
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_modify_lc_param);
	RRC_ASSERT(PNULL != p_modify_lc_req);
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_req);

	for (drb_index = 0; drb_index <
			p_modify_lc_param->drb_counter &&
			p_mac_reconfigure_ue_entity_req->reconfigure_lc_req_counter < RRC_MAC_MAX_RECONFIGURE_LC;
			++drb_index)
	{
		if((RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING == 
					p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure) ||

				((RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_GOING == 
				  p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)   &&
				 (RRC_TRUE == p_ue_ctx->curr_op_param.p_rcfg_ue->
				  llim_drb_status[drb_index].drb_modify_fail)))
		{  
			/* Roll back all modified DRBs*/
			if(p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status & (1 << RRC_LLIM_DRB_PASSED_AT_MAC))
			{
				if (RRC_MAC_MAX_RECONFIGURE_LC > 
						p_mac_reconfigure_ue_entity_req->reconfigure_lc_req_counter)
				{
					fill_drb_mac_reconfig_lc_req(
							&p_mac_reconfigure_ue_entity_req->
							reconfigure_lc_req[p_mac_reconfigure_ue_entity_req->
							reconfigure_lc_req_counter],
							&p_modify_lc_param->uecc_llim_drb_config[drb_index].drb_config);

					/*Qos changes START */
					if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT & p_modify_lc_param->
								uecc_llim_drb_config[drb_index].drb_config.bitmask)&& 
							(BEARER_TYPE_GBR == p_modify_lc_param->uecc_llim_drb_config
							 [drb_index].drb_config.bearer_type))
					{    
						fill_gbr_qos_mac_reconfig_lc_req(
								&p_mac_reconfigure_ue_entity_req->
								reconfigure_lc_req[p_mac_reconfigure_ue_entity_req->
								reconfigure_lc_req_counter],
								&p_modify_lc_param->uecc_llim_drb_config[drb_index]);
					}
					/*Qos changes END */
					++p_mac_reconfigure_ue_entity_req->reconfigure_lc_req_counter;
				}
			}
		}
		else if(RRC_TRUE != p_ue_ctx->curr_op_param.p_rcfg_ue->
				llim_drb_status[drb_index].drb_modify_fail &&
				(p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
				 drb_status & (1 << RRC_LLIM_DRB_PASSED_AT_MAC) ||

				 (~p_modify_lc_req->modify_drb_entity[
				  RRC_UECC_NEW_DRB_CONFIG_VERSION].uecc_llim_drb_config[drb_index].
				  drb_config.bitmask & RRM_DRB_CONFIG_RLC_CONFIG_PRESENT)))
		{
			*found = RRC_TRUE;
		}
		else if (p_modify_lc_param->uecc_llim_drb_config[drb_index].drb_config.
				bitmask & RRM_DRB_CONFIG_RLC_CONFIG_PRESENT &&
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING)
		{
			if ((p_modify_lc_req->modify_drb_entity[
						RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						rlc_config_enb.rlc_config.bitmask !=
						p_modify_lc_req->modify_drb_entity[
						RRC_UECC_OLD_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						rlc_config_enb.rlc_config.bitmask) && 
					(RRC_NULL != p_modify_lc_req->modify_drb_entity[
					 RRC_UECC_NEW_DRB_CONFIG_VERSION].
					 uecc_llim_drb_config[drb_index].drb_config.
					 rlc_config_enb.rlc_config.bitmask))
			{
				RRC_LLIM_TRACE(RRC_ERROR,
						"Different RLC MODE's configuration Received");
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_modify_fail = RRC_TRUE;
			}
			/* SPR:7369 start */
			else if (RRC_RLC_CONFIG_QCI_LENGTH_PRESENT & p_modify_lc_param->uecc_llim_drb_config[drb_index].drb_config.rlc_config_enb.bitmask)
				/* SPR:7369 stop */
			{
				if (RRC_MAC_MAX_RECONFIGURE_LC > 
						p_mac_reconfigure_ue_entity_req->reconfigure_lc_req_counter)
				{
					/* SPR:7369 start*/
					if((RRC_NULL != p_modify_lc_param->uecc_llim_drb_config[drb_index].
								drb_config.rlc_config_enb.rlc_config.bitmask)|| ((RRC_NULL == p_modify_lc_param->uecc_llim_drb_config[drb_index].
										drb_config.rlc_config_enb.rlc_config.bitmask)&& ((UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT &
												p_modify_lc_param->uecc_llim_drb_config[drb_index].bitmask) && 
											(RRC_GBR_QOS_INFO_PRESENT & p_modify_lc_param->uecc_llim_drb_config[drb_index].
											 qos_info.bitmask))))
						/* SPR:7369 start*/
					{
						fill_drb_mac_reconfig_lc_req(
								&p_mac_reconfigure_ue_entity_req->
								reconfigure_lc_req[p_mac_reconfigure_ue_entity_req->
								reconfigure_lc_req_counter],
								&p_modify_lc_param->uecc_llim_drb_config[drb_index].
								drb_config);

						update_drb_pass_status(
								p_ue_ctx, 
								drb_index, 
								p_modify_lc_param->uecc_llim_drb_config[drb_index].
								drb_config.logical_channel_identity,
								RRC_LLIM_DRB_PASSED_AT_MAC);
						/*Qos changes START */
						if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT & p_modify_lc_param->
									uecc_llim_drb_config[drb_index].drb_config.bitmask)&&
								(BEARER_TYPE_GBR == p_modify_lc_param->uecc_llim_drb_config[drb_index].
								 drb_config.bearer_type))
						{    
							fill_gbr_qos_mac_reconfig_lc_req(
									&p_mac_reconfigure_ue_entity_req->
									reconfigure_lc_req[p_mac_reconfigure_ue_entity_req->
									reconfigure_lc_req_counter],
									&p_modify_lc_param->uecc_llim_drb_config[drb_index]);
						}
						/*Qos changes END */ 
						/*SPR:7325 start*/
						++p_mac_reconfigure_ue_entity_req->reconfigure_lc_req_counter;

						/*SPR:7325 stop*/
					}
				}
			}
		}
	}

	RRC_ASSERT(p_mac_reconfigure_ue_entity_req->reconfigure_lc_req_counter <=
			RRC_MAC_MAX_RECONFIGURE_LC);
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_modify_lc_fill_sps_config
 *
 *   DESCRIPTION:
 *       Function fills sps_config parameters for modify lc
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_modify_lc_fill_sps_config(
		rrc_uecc_llim_modify_lc_req_t        *p_modify_lc_req,
		rrc_mac_reconfigure_ue_entity_req_t  *p_mac_reconfigure_ue_entity_req)
{
	rrc_counter_t                           drb_index = RRC_NULL;
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_modify_lc_req);
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_req);

	if (p_modify_lc_req->bitmask &
			UECC_LLIM_MODIFY_LC_REQ_SPS_CONFIG_PRESENT)
	{
		p_mac_reconfigure_ue_entity_req->optional_elems_present |=
			RRC_MAC_RECONFIG_UE_INFO_PRESENT;

		p_mac_reconfigure_ue_entity_req->reconfig_ue_info.optional_elems_present |=
			RRC_MAC_RECONFIG_SPS_CONFIG_PRESENT;

		if (p_modify_lc_req->sps_config.bitmask &
				RRC_SPS_CONFIG_SPS_CONFIG_DL_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.bitmask |=
				RRC_MAC_SPS_DL_INFO_PRESENT;

			if (p_modify_lc_req->sps_config.sps_config_dl.bitmask &
					RRC_SPS_CONFIG_DL_PARAM_PRESENT)
			{

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.bitmask |=
					RRC_MAC_SPS_DL_SETUP_INFO_PRESENT;
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.request_type =
					1; /* 1 - Setup */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
					semi_persist_sched_interval_dl = p_modify_lc_req->sps_config.sps_config_dl.
					sps_config_dl_param.semi_persist_sched_interval_dl;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
					number_of_conf_sps_processes = p_modify_lc_req->sps_config.sps_config_dl.
					sps_config_dl_param.number_of_conf_sps_processes;
				for (drb_index = 0; drb_index < p_modify_lc_req->sps_config.sps_config_dl.
						sps_config_dl_param.n1_pucch_an_persist_list.count;
						drb_index++)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
						n1_pucch_an_persist[drb_index].n1_pucch_an_persist =
						p_modify_lc_req->sps_config.sps_config_dl.sps_config_dl_param.
						n1_pucch_an_persist_list.n1_pucch_an_persist[drb_index];

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.sps_dl_setup_info.
						n1_pucch_an_persist_list_counter++;
				}
			}
			else
			{    /* Release */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.request_type =
					0; /* 0 - Release */
			}
		}

		if (p_modify_lc_req->sps_config.bitmask &
				RRC_SPS_CONFIG_SPS_CONFIG_UL_PRESENT)
		{
			p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.bitmask |=
				RRC_MAC_SPS_UL_INFO_PRESENT;

			if (p_modify_lc_req->sps_config.sps_config_ul.bitmask &
					RRC_SPS_CONFIG_UL_PARAM_PRESENT)
			{    /* Setup */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.bitmask |=
					RRC_MAC_SPS_UL_SETUP_INFO_PRESENT;
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.request_type =
					1; /* 1 - Setup */

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
					semi_persist_sched_interval_ul = p_modify_lc_req->sps_config.sps_config_ul.
					sps_config_ul_param.semi_persist_sched_interval_ul;

				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
					implicit_release_after = p_modify_lc_req->sps_config.sps_config_ul.
					sps_config_ul_param.implicit_release_after;

				if (p_modify_lc_req->sps_config.sps_config_ul.sps_config_ul_param.bitmask &
						RRC_SPS_CONFIG_UL_P_0_PERSISTENT_PRESENT)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						bitmask |=
						RRC_MAC_P_ZERO_PERSISTENT_PRESENT;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						p_zero_persistent.p_zero_nominal_pusch_persistent = p_modify_lc_req->sps_config.
						sps_config_ul.sps_config_ul_param.p_zero_persistent.p_zero_nominal_pusch_persistent;

					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						p_zero_persistent.p_zero_ue_pusch_persistent = p_modify_lc_req->sps_config.
						sps_config_ul.sps_config_ul_param.p_zero_persistent.p_zero_ue_pusch_persistent;
				}
				if (p_modify_lc_req->sps_config.sps_config_ul.sps_config_ul_param.bitmask &
						RRC_SPS_CONFIG_UL_TWO_INTERVALS_CONFIG_PRESENT)
				{
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						bitmask |= RRC_MAC_TWO_INTERVALS_CONFIG_PRESENT;
					/* SPR:5994 start */
					p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_ul_info.sps_ul_setup_info.
						two_intervals_config.two_intervals_config = 1;
					/* SPR:5994 stop */ 
				}
			}
			else
			{    /* Release */
				p_mac_reconfigure_ue_entity_req->reconfig_ue_info.sps_config.sps_dl_info.request_type =
					0; /* 0 - Release */
			}
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: build_and_send_mac_reconfig_modify_lc_req
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check if MAC configuration for any lc is present or not.
 *       If present then it fills and sends the Modify lc message to MAC.
 *
 *   RETURNS:
 *       RRC_SUCCESS or RRC_FAILURE
 *
 ******************************************************************************/
static rrc_response_et build_and_send_mac_reconfig_modify_lc_req
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	rrc_uecc_llim_modify_lc_req_t              *p_modify_lc_req   = PNULL;
	rrc_uecc_llim_modify_drb_version_t         *p_modify_lc_param = PNULL;
	/* SPR 14562 Fix start */
	rrm_mac_config_t              *p_rrm_mac_config = PNULL;
	rrm_scell_config_t            *p_rrm_scell_config = PNULL;
	/* SPR 14562 Fix end */


	rrc_mac_reconfigure_ue_entity_req_t     mac_reconfigure_ue_entity_req;

	rrc_bool_et                             found = RRC_FALSE;
	RRC_LLIM_UT_TRACE_ENTER();

	p_modify_lc_req = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;

	memset_wrapper(&mac_reconfigure_ue_entity_req,
			0,
			sizeof(rrc_mac_reconfigure_ue_entity_req_t));

	mac_reconfigure_ue_entity_req.ue_index = p_modify_lc_req->
		ue_index;


	if(RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		p_modify_lc_param =
			&p_modify_lc_req->
			modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION];
		/* SPR 12352 Fix reverted */
	}
	else
	{
		p_modify_lc_param =
			&p_modify_lc_req->
			modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION];
	}
	mac_reconfigure_ue_entity_req.reconfigure_lc_req_counter = RRC_NULL;

	uemh_modify_lc_fill_drb_info(p_ue_ctx, p_modify_lc_req,
			p_modify_lc_param, &mac_reconfigure_ue_entity_req, &found);

	if(RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_GOING != 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ||
			RRC_FALSE == found)
	{
		/* SPR 12352 Fix Reverted */
		/*These parameters should not be reconfigured in case of LLIM
		  initiated Roll Back*/
		if ((p_modify_lc_param->bitmask & 
					UECC_LLIM_MODIFY_LC_REQ_MAC_CONFIG_PRESENT) ||
				(p_modify_lc_param->bitmask & 
				 UECC_LLIM_MODIFY_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT) ||
				(p_modify_lc_param->bitmask & 
				 UECC_LLIM_MODIFY_LC_REQ_MEAS_GAP_CONFIG_PRESENT) ||
				(p_modify_lc_param->bitmask &
				 UECC_LLIM_MODIFY_LC_REQ_UE_AMBR_PRESENT) ||
				(p_modify_lc_param->bitmask &
				 UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT)
		   )
		{
			mac_reconfigure_ue_entity_req.optional_elems_present |=
				RRC_MAC_RECONFIG_UE_INFO_PRESENT;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present = RRC_NULL;
			/*CA_RE_ESTAB_START*/
			/*flag is only true while configuriong lower layer during
			 * reestablishment procdeure*/

			if (RRC_TRUE != p_modify_lc_req->add_scell_info_mac_phy)
				/*CA_RE_ESTAB_STOP*/
			{
				/* Qos changes START */
				/*Fills the AMBR info in case of Modify_lc*/
				if (p_modify_lc_param->bitmask & UECC_LLIM_MODIFY_LC_REQ_UE_AMBR_PRESENT)
				{
					mac_reconfigure_ue_entity_req.optional_elems_present |=
						RRC_MAC_RECONFIG_UE_INFO_PRESENT;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.
						optional_elems_present |= 
						RRC_MAC_RECONFIG_AMBR_QOS_INFO_PRESENT;
					mac_reconfigure_ue_entity_req.reconfig_ue_info.ambr_qos_info.
						dl_ambr = p_modify_lc_param->ue_ambr.dl_ambr;
					mac_reconfigure_ue_entity_req.reconfig_ue_info.ambr_qos_info.
						ul_ambr = p_modify_lc_param->ue_ambr.ul_ambr;
				}  
				/* Qos changes END */
				/* SPR 12352 Fix Reverted */


				uemh_modify_lc_mac_config(p_modify_lc_param, &mac_reconfigure_ue_entity_req);

				/* CLPC Start */
				uemh_modify_lc_phy_config_dedicated(p_modify_lc_param, &mac_reconfigure_ue_entity_req);
				/* CLPC Stop */

				if (p_modify_lc_param->bitmask &
						UECC_LLIM_MODIFY_LC_REQ_MAC_CONFIG_PRESENT)
				{
					/*Dynamic_ue_reconfig +*/
					/*SPR_7583 start*/
					if(p_modify_lc_param->mac_config.mac_main_config_extensions.bitmask & 
							RRM_MAC_MAIN_CONFIG_EXT_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT) 
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							optional_elems_present |=
							RRC_MAC_RECONFIG_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT;
						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							pdsch_epre_to_ue_rs_ratio.pdsch_epre_to_ue_rs_ratio =
							p_modify_lc_param->mac_config.mac_main_config_extensions.
							pdsch_epre_to_ue_rs_ratio;
					}
					/*SPR_7583 stop*/
                    /*spr_21014_changes_start*/
                    if((p_modify_lc_param->bitmask & UECC_LLIM_MODIFY_LC_REQ_MAC_CONFIG_PRESENT) &&
                        (p_modify_lc_param->mac_config.bitmask & RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
                        (p_modify_lc_param->mac_config.mac_main_config.bitmask & RRC_MAC_MAIN_CONFIG_UL_SCH_CONFIG_PRESENT) &&
                        (p_modify_lc_param->mac_config.mac_main_config.ul_sch_config.bitmask & RRC_UL_SCH_CONFIG_MAX_HARQ_TX_PRESENT))
                    {
                        mac_reconfigure_ue_entity_req.reconfig_ue_info.
                            optional_elems_present |=
                            RRC_MAC_RECONFIG_MAX_UL_HARQ_TX_PRESENT;
                        mac_reconfigure_ue_entity_req.reconfig_ue_info.
                            max_ul_harq_tx_info.max_ul_harq_tx =
                            p_modify_lc_param->mac_config.mac_main_config.ul_sch_config.max_harq_tx;
                    }
                    /*spr_21014_changes_end*/

                    /* SPR 16938 Fix start */
                    if(p_modify_lc_param->mac_config.mac_main_config_extensions.bitmask &
                        RRM_MAC_MAIN_CONFIG_EXT_PC_MAX_PRESENT )
                    {
                        mac_reconfigure_ue_entity_req.reconfig_ue_info.
                            optional_elems_present |=
                            RRC_MAC_RECONFIG_PC_MAX_CONFIG_INFO_PRESENT;
                        mac_reconfigure_ue_entity_req.reconfig_ue_info.
                            pc_max_info.pc_max =
                            p_modify_lc_param->mac_config.mac_main_config_extensions.
                            pc_max;
                    }
                    /* SPR 16938 Fix end */
					/* eICIC ue reconfig changes start */
					if((p_modify_lc_param->mac_config.mac_main_config_extensions.bitmask &
								RRM_MAC_MAN_CONFIG_EXT_DL_INTERFERENCE_INFO_PRESENT))
					{


						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							optional_elems_present |=
							RRC_MAC_RECONFIG_ADD_DL_INTERFERENCE_INFO_PRESENT;

						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							rrc_mac_dl_interference_info.severe_dl_control_channel_interference =
							p_modify_lc_param->mac_config.mac_main_config_extensions.
							dl_interference_info;
					}
					/* eICIC ue reconfig changes stop */
					if ((p_modify_lc_param->mac_config.bitmask &
								RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
							(p_modify_lc_param->mac_config.mac_main_config.bitmask &
							 RRC_MAC_MAIN_CONFIG_PHR_CONFIG_PRESENT))	
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
							RRC_MAC_RECONFIG_PHR_TIMER_CONFIG_PRESENT;

						if(p_modify_lc_param->mac_config.mac_main_config.phr_config.bitmask & RRC_PHR_CONFIG_PARAM_PRESENT)
						{
							/* SPR:8367 start */
							mac_reconfigure_ue_entity_req.reconfig_ue_info.phr_timer_config.phrTimerConfigType = 1;
							/* SPR:8367 stop */
							mac_reconfigure_ue_entity_req.reconfig_ue_info.phr_timer_config.optional_elems_present |= RRC_MAC_PHR_TIMER_INFO_PRESENT;

							mac_reconfigure_ue_entity_req.reconfig_ue_info.phr_timer_config.phrTimerInfo.periodicPHRTimer= 
								p_modify_lc_param->mac_config.mac_main_config.phr_config.phr_config_param.periodic_phr_timer;
							/* SPR:8367 start */
							mac_reconfigure_ue_entity_req.reconfig_ue_info.phr_timer_config.phrTimerInfo.prohibitPHRTimer= 
								p_modify_lc_param->mac_config.mac_main_config.phr_config.phr_config_param.prohibit_phr_timer;
							/* SPR:8367 stop */
						}
						/* SPR:8367 start */
						else
						{
							mac_reconfigure_ue_entity_req.reconfig_ue_info.phr_timer_config.phrTimerConfigType = RRC_NULL;
						}
						/* SPR:8367 stop */
					}

					if ((p_modify_lc_param->mac_config.bitmask &
								RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) && 
							(p_modify_lc_param->mac_config.mac_main_config.bitmask &
							 RRC_MAC_MAIN_CONFIG_SR_PROHIBIT_TIMER_R9_PRESENT))
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
							RRC_MAC_RECONFIG_SR_PROHBIT_TIMER_VALUE_V920_PRESENT;

						mac_reconfigure_ue_entity_req.reconfig_ue_info.sr_prohbit_timer_value_v920.
							sr_prohibit_timer =
							p_modify_lc_param->mac_config.mac_main_config.sr_prohibit_timer_r9;
					}
					/*Dynamic_ue_reconfig -*/
				}

				/* CLPC Start */

				/*Dynamic_ue_reconfig +*/
				/* SPR 14562 Fix */ 
				if(p_modify_lc_param->bitmask &UECC_LLIM_MODIFY_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT)
				{
					if ((p_modify_lc_param->physical_config_dedicated.bitmask &
								RRC_PHY_ANTENNA_INFO_V920_PRESENT) &&
							(p_modify_lc_param->physical_config_dedicated.antenna_info_v920.bitmask &
							 RRC_PHY_CODEBOOK_SUBSET_RESTRICTION_V920_PRESENT) )
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							optional_elems_present |= RRC_MAC_RECONFIG_CODEBOOK_SUBSET_RESTRICTION_V920_PRESENT;

						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							codebook_subset_restriction_v920.cbsr_type = 
							(U8)p_modify_lc_param->physical_config_dedicated.
							antenna_info_v920.codebook_subset_restriction_v920.type;

						l3_memcpy_wrapper(mac_reconfigure_ue_entity_req.reconfig_ue_info.
								codebook_subset_restriction_v920.cbsr_value,
								p_modify_lc_param->physical_config_dedicated.
								antenna_info_v920.codebook_subset_restriction_v920.value,
								sizeof(mac_reconfigure_ue_entity_req.reconfig_ue_info.
									codebook_subset_restriction_v920.cbsr_value));
					}

					if (RRC_PHY_PUSCH_CONFIGURATION_DEDICATED_PRESENT &
							p_modify_lc_param->physical_config_dedicated.bitmask)
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
							RRC_MAC_RECONFIG_PUSCH_CONFIG_INFO_PRESENT;

						fill_mac_pusch_config_info(
								&mac_reconfigure_ue_entity_req.reconfig_ue_info.pusch_config_info,
								&p_modify_lc_param->physical_config_dedicated.pusch_configuration_dedicated);
					}
					/*Dynamic_ue_reconfig -*/
					/* CLPC Stop */

					if (p_modify_lc_param->physical_config_dedicated.bitmask &
							RRC_PHY_CQI_REPORTING_PRESENT)
					{
						if ((p_modify_lc_param->physical_config_dedicated.
									cqi_reporting.bitmask & 
									RRC_PHY_CQI_REPORTING_PERIODIC_PRESENT) ||
								(p_modify_lc_param->physical_config_dedicated.
								 cqi_reporting.bitmask &
								 RRC_PHY_CQI_REPORTING_MODE_APERIODIC_PRESENT))
						{
							mac_reconfigure_ue_entity_req.reconfig_ue_info.
								optional_elems_present |=
								RRC_MAC_RECONF_CQI_INFO_PRESENT;

							fill_mac_cqi_info(&mac_reconfigure_ue_entity_req.
									reconfig_ue_info.cqi_info,
									&p_modify_lc_param->physical_config_dedicated.
									cqi_reporting);
						}
						/* SPR 12554 Fix Start */
						else
						{
							mac_reconfigure_ue_entity_req.reconfig_ue_info.
								optional_elems_present |=
								RRC_MAC_RECONF_CQI_INFO_PRESENT;

							mac_reconfigure_ue_entity_req.reconfig_ue_info.cqi_info.
								optional_elems_present = 0;
						}
						/* SPR 12554 Fix Stop */
					}

					/*tm7-8 fix*/
					if (p_modify_lc_param->physical_config_dedicated.bitmask &
							RRC_PHY_CQI_REPORT_CONFIG_V920_PRESENT)
					{
						if (p_modify_lc_param->physical_config_dedicated.
								cqi_report_config_v920.bitmask & 
								RRC_PHY_PMI_RI_REPORT_R9_PRESENT)
						{
							mac_reconfigure_ue_entity_req.reconfig_ue_info.
								optional_elems_present |=
								RRC_MAC_RECONF_CQI_INFO_PRESENT;

							fill_mac_cqi_v920_info(&mac_reconfigure_ue_entity_req.
									reconfig_ue_info.cqi_info);/*SPR 17777 +-*/
						}
					}
					/*tm7-8 fix*/


					if (p_modify_lc_param->physical_config_dedicated.bitmask &
							RRC_PHY_CQI_REPORT_CONFIG_R10_PRESENT)
					{
						if((p_modify_lc_param->physical_config_dedicated.
									cqi_report_config_r10.bitmask &
									RRC_PHY_CQI_REPORT_CONFIG_R10_REPORT_APERIODIC_R10_PRESENT) ||
								(p_modify_lc_param->physical_config_dedicated.
								 cqi_report_config_r10.bitmask &
								 RRC_PHY_CQI_REPORT_CONFIG_R10_REPORT_PERIODIC_R10_PRESENT))
						{
							mac_reconfigure_ue_entity_req.reconfig_ue_info.
								optional_elems_present |=
								RRC_MAC_RECONF_CQI_INFO_PRESENT;

							fill_mac_cqi_info_r10(
									&mac_reconfigure_ue_entity_req.
									reconfig_ue_info.cqi_info,
									&p_modify_lc_param->physical_config_dedicated.
									cqi_report_config_r10);
						}
					}


					if (p_modify_lc_param->physical_config_dedicated.bitmask &
							RRC_PHY_SCHEDULING_REQUEST_CONFIG_PRESENT)
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							optional_elems_present |= RRC_MAC_RECONF_SR_CONFIG_INFO_PRESENT;

						fill_mac_sr_config_info(&mac_reconfigure_ue_entity_req.
								reconfig_ue_info.sr_config_info,
								&p_modify_lc_param->physical_config_dedicated.
								scheduling_request_config);
					}

					if ((p_modify_lc_param->physical_config_dedicated.bitmask &
								RRC_PHY_ANTENNA_INFORMATION_PRESENT) &&
							(p_modify_lc_param->physical_config_dedicated.antenna_information.bitmask & 
							 RRC_PHY_ANTENNA_INFORMATION_EXPLICIT_VALUE_PRESENT) )
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							optional_elems_present |= RRC_MAC_TX_MODE_INFO_PRESENT;

						mac_reconfigure_ue_entity_req.reconfig_ue_info.tx_mode_info.
							transmission_mode =
							(U8) ( p_modify_lc_param->physical_config_dedicated.
									antenna_information.antenna_information_explicit_value.
									transmission_mode + 1);
						/*SPR 13581 Fix Start*/
						if(p_modify_lc_param->physical_config_dedicated.antenna_information.antenna_information_explicit_value.bitmask &
								RRC_PHY_CODEBOOK_SUBSET_RESTRICTION_PRESENT)
						{
							mac_reconfigure_ue_entity_req.reconfig_ue_info.
								optional_elems_present |= RRC_MAC_RECONFIG_CODEBOOK_SUBSET_RESTRICTION_PRESENT;	

							mac_reconfigure_ue_entity_req.reconfig_ue_info.
								codebook_subset_restriction.cbsr_type =
								(U8)p_modify_lc_param->physical_config_dedicated.
								antenna_information.antenna_information_explicit_value.codebook_subset_restriction.type;


							l3_memcpy_wrapper(mac_reconfigure_ue_entity_req.reconfig_ue_info.
									codebook_subset_restriction.cbsr_value,
									p_modify_lc_param->physical_config_dedicated.
									antenna_information.antenna_information_explicit_value.codebook_subset_restriction.value,
									sizeof(mac_reconfigure_ue_entity_req.reconfig_ue_info.
										codebook_subset_restriction.cbsr_value));

						}

						/*SPR 13581 Fix Stop*/
					}
					/*BUG_11164_START*/
					if ((p_modify_lc_param->physical_config_dedicated.bitmask &
								RRC_PHY_ANTENNA_INFO_R10_PRESENT) &&
							p_modify_lc_param->physical_config_dedicated.antenna_info_r10.
							bitmask & RRC_ANTENNA_INFO_R10_EXPLICIT_VALUE_PRESENT)
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							optional_elems_present |=
							RRC_MAC_TX_MODE_INFO_PRESENT;
						mac_reconfigure_ue_entity_req.reconfig_ue_info.tx_mode_info.
							transmission_mode =
							(U8) (p_modify_lc_param->physical_config_dedicated.antenna_info_r10.
									explicit_value.transmission_mode + 1);
					}
					/*BUG_11164_STOP*/

					/*Dynamic_ue_reconfig +*/
					if ((p_modify_lc_param->physical_config_dedicated.bitmask &
								RRC_PHY_ANTENNA_INFO_V920_PRESENT) &&
							(p_modify_lc_param->physical_config_dedicated.antenna_info_v920.bitmask &
							 RRC_PHY_CODEBOOK_SUBSET_RESTRICTION_V920_PRESENT) )
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							optional_elems_present |= RRC_MAC_RECONFIG_CODEBOOK_SUBSET_RESTRICTION_V920_PRESENT;

						mac_reconfigure_ue_entity_req.reconfig_ue_info.
							codebook_subset_restriction_v920.cbsr_type = 
							(U8)p_modify_lc_param->physical_config_dedicated.
							antenna_info_v920.codebook_subset_restriction_v920.type;

						l3_memcpy_wrapper(mac_reconfigure_ue_entity_req.reconfig_ue_info.
								codebook_subset_restriction_v920.cbsr_value,
								p_modify_lc_param->physical_config_dedicated.
								antenna_info_v920.codebook_subset_restriction_v920.value,
								sizeof(mac_reconfigure_ue_entity_req.reconfig_ue_info.
									codebook_subset_restriction_v920.cbsr_value));
					}

					if (RRC_PHY_PUSCH_CONFIGURATION_DEDICATED_PRESENT &
							p_modify_lc_param->physical_config_dedicated.bitmask)
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
							RRC_MAC_RECONFIG_PUSCH_CONFIG_INFO_PRESENT;

						fill_mac_pusch_config_info(
								&mac_reconfigure_ue_entity_req.reconfig_ue_info.pusch_config_info,
								&p_modify_lc_param->physical_config_dedicated.pusch_configuration_dedicated);
					}
					/*Dynamic_ue_reconfig -*/

					if (p_modify_lc_param->physical_config_dedicated.bitmask &
							RRC_PHY_SOUNDING_RS_UL_CONFIG_DEDICATED_PRESENT)
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
							RRC_MAC_RECONFIG_SRS_DEDICATED_CONFIG_PRESENT;

						mac_reconfigure_ue_entity_req.optional_elems_present |=
							RRC_MAC_RECONFIG_UE_INFO_PRESENT;

						if(p_modify_lc_param->physical_config_dedicated.
								sounding_rs_ul_config_dedicated.bitmask &
								RRC_PHY_SOUNDING_RS_UL_CONFIG_DEDICATED_PARAM_PRESENT)
						{
							mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.config_type = 1;

							mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.optional_elems_present |=
								RRC_MAC_SRS_DEDICATED_SETUP_INFO_PRESENT;

							fill_srs_dedicated_config_info(
									&mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.srs_dedicated_setup_info,
									&p_modify_lc_param->physical_config_dedicated.
									sounding_rs_ul_config_dedicated.sounding_rs_ul_config_dedicated_param);
						}
						else
						{
							mac_reconfigure_ue_entity_req.reconfig_ue_info.srs_dedicated_config.config_type = 0;
						}
					}
				}
				/* SPS Start */
				uemh_modify_lc_fill_sps_config(p_modify_lc_req, &mac_reconfigure_ue_entity_req);
				/* SPS Stop */
			}

			if(p_modify_lc_req->bitmask &
					UECC_LLIM_MODIFY_LC_REQ_R10_UE_CATEGORY_PRESENT)
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.ca_optional_elems_present |=
					RRC_MAC_RECONFIG_ADD_UE_CATEGORY_V1020_PRESENT;
				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					rrc_mac_ue_category_v1020.ue_category_v1020 = 
					p_modify_lc_req->rel10_ue_category;
			}

			if((p_modify_lc_param->bitmask &
						UECC_LLIM_MODIFY_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT) &&
					(p_modify_lc_param->physical_config_dedicated.bitmask &
					 RRC_PHY_CONFIG_DEDICATED_EXTENDED_PRESENT) &&
					(p_modify_lc_param->physical_config_dedicated.
					 phy_physical_config_dedicated_extended.bitmask &
					 RRC_PHY_PUCCH_CHANNEL_SELECTION_CONFIG_R10_PRESENT))
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.ca_optional_elems_present |=
					RRC_MAC_RECONFIG_ADD_PUCCH_FORMAT_V1020_PRESENT;
				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					rrc_mac_pucch_format_r10.optional_elems_present |=
					RRC_MAC_PUCCH_CHANNEL_SELECTION_CONFIG_V1020_PRESENT;

				fill_mac_pucch_format(&p_modify_lc_param->physical_config_dedicated.
						phy_physical_config_dedicated_extended.
						pucch_channel_selection_config_v1020,
						&mac_reconfigure_ue_entity_req.reconfig_ue_info.
						rrc_mac_pucch_format_r10.
						rrc_mac_pucch_channel_selection_config_v1020);

			}
			if(p_modify_lc_param->bitmask & 
					UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT)
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					ca_optional_elems_present |=
					RRC_MAC_CA_RECONFIG_ADD_CONFIG_PRESENT;
				/* SPR 14562 Fix */
				if(UECC_LLIM_MODIFY_LC_REQ_MAC_CONFIG_PRESENT & p_modify_lc_param->bitmask)
				{
					p_rrm_mac_config =&p_modify_lc_param->mac_config; 
				}
				if(UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT & p_modify_lc_param->bitmask)
				{
					p_rrm_scell_config = &p_modify_lc_param->scell_config;
				}
				rrc_mac_fill_ca_config_ue_info(
						&mac_reconfigure_ue_entity_req.reconfig_ue_info.
						rrc_mac_carrier_aggr_config,
						p_rrm_mac_config,
						p_rrm_scell_config,
						p_modify_lc_req->scells_operation_list);
			}


		}
	}

	if(RRC_NULL != mac_reconfigure_ue_entity_req.optional_elems_present ||
			RRC_NULL != mac_reconfigure_ue_entity_req.
			reconfigure_lc_req_counter )
	{
		if(p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING)
		{
			/*Sending with new Transaction Id*/
			if (RRC_SUCCESS == rrc_mac_il_send_rrc_mac_reconfigure_ue_entity_req(
						&mac_reconfigure_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_modify_lc_req->cell_index),
						p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback.
						transaction_id,
						p_modify_lc_req->cell_index))
			{
				RRC_LLIM_TRACE(RRC_INFO,"MAC Reconfig sent..");
				return SUCCESS;
			}
			else
			{
				RRC_LLIM_TRACE(RRC_WARNING,"Unable to send MAC Reconfig");
				return L3_FATAL;
			}
		}
		else
		{
			if(RRC_SUCCESS == rrc_mac_il_send_rrc_mac_reconfigure_ue_entity_req(
						&mac_reconfigure_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_modify_lc_req->cell_index),
						p_modify_lc_req->transaction_id,
						p_modify_lc_req->cell_index))
			{

				RRC_LLIM_TRACE(RRC_INFO,"MAC Reconfig sent..");

				if(RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == 
						p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
				{
					UEMH_FSM_SET_STATE(p_ue_ctx, 
							UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF);
				}
				return SUCCESS;
			}
			else
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Unable to send MAC reconfig"
						" UE for Modifying LC");
				return L3_FATAL;

			}

		}
	}
	else
	{
		RRC_LLIM_TRACE(RRC_INFO,"MAC configuration Not present for any LC");
		return FAILURE;
	}
	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: 
 *       uemh_fsm_in_service_uecc_trigerred_rb_rlc_reconfig_modify_lc_req
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check if RLC configuration for any lc is present or not.
 *       If present then it fills and sends the Modify lc message to RLC.
 *
 *   RETURNS:
 *       RRC_SUCCESS or RRC_FAILURE
 *
 ******************************************************************************/
static rrc_response_et 
uemh_fsm_in_service_uecc_trigerred_rb_rlc_reconfig_modify_lc_req
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{

	rrc_uecc_llim_modify_rollback_req_t     *p_modify_lc_param  = PNULL;

	rrc_rlc_reconfig_ue_entity_req_t rlc_reconfig_ue_entity_req;

	rrc_bool_et     found      = RRC_FALSE;
	U8              drb_index  = RRC_NULL;        
	rrc_bool_et     modify_ambr = RRC_FALSE;

	p_modify_lc_param =&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback;

	memset_wrapper(&rlc_reconfig_ue_entity_req,
			0,
			sizeof(rlc_reconfig_ue_entity_req));

    /* SPR_20915 - Fix - Starts */
    /*check RLC configuration for each DRB*/
    for (drb_index = 0;
        ((RRC_UECC_LLIM_MAX_DRB >= p_modify_lc_param->modify_drb_entity.drb_counter) &&
        (drb_index < p_modify_lc_param->modify_drb_entity.drb_counter));
        ++drb_index)
    /* SPR_20915 - Fix - Ends */
	{
		if(p_modify_lc_param->
				modify_drb_entity.uecc_llim_drb_config[drb_index].
				drb_config.bitmask &
				RRM_DRB_CONFIG_RLC_CONFIG_PRESENT)
		{
			fill_reconfigure_part_drb_rlc_reconfig_ue_entity_req(
					&rlc_reconfig_ue_entity_req,
					p_modify_lc_param->
					modify_drb_entity.uecc_llim_drb_config[drb_index].
					drb_config.logical_channel_identity,
					&p_modify_lc_param->
					modify_drb_entity.uecc_llim_drb_config[drb_index].
					drb_config.rlc_config_enb.rlc_config
                    );

			found = RRC_TRUE;
		}
	}
	/*securitykey*/
	/* fill the AMBR info*/
	if((p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING) &&
			(UECC_LLIM_MODIFY_LC_REQ_UE_AMBR_PRESENT & p_modify_lc_param->
			 modify_drb_entity.bitmask))
	{
		rlc_reconfig_ue_entity_req.bitmask |=
			RRC_RLC_RECONFIG_UE_BIT_RATE_INFO_PRESENT;
		rlc_reconfig_ue_entity_req.rlc_ue_bit_rate_info.bit_rate_tx =
			p_modify_lc_param->modify_drb_entity.ue_ambr.ul_ambr;
		rlc_reconfig_ue_entity_req.rlc_ue_bit_rate_info.bit_rate_rx =
			p_modify_lc_param->modify_drb_entity.ue_ambr.dl_ambr;
		modify_ambr = RRC_TRUE;
	}

	/*securitykey*/

	if ((RRC_TRUE == found)  || (RRC_TRUE == modify_ambr))
	{
		/*Sending with new Transaction Id*/
		if (RRC_SUCCESS == rrc_rlc_il_send_rrc_rlc_reconfig_ue_entity_req(
					&rlc_reconfig_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_modify_lc_param->cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback.
					transaction_id,
					p_modify_lc_param->cell_index))
		{
			RRC_LLIM_TRACE(RRC_INFO,"RLC Reconfig sent..");
		}
		else
		{
			RRC_LLIM_TRACE(RRC_WARNING,"Unable to send RLC Reconfig");
			return L3_FATAL;
		}
		return SUCCESS;
	}
	else
	{
		return FAILURE;
	}

}


/******************************************************************************
 *   FUNCTION NAME: build_and_send_rlc_reconfig_modify_lc_req
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check if RLC configuration for any lc is present or not.
 *       If present then it fills and sends the Modify lc message to RLC.
 *
 *   RETURNS:
 *       RRC_SUCCESS or RRC_FAILURE
 *
 ******************************************************************************/
static rrc_response_et build_and_send_rlc_reconfig_modify_lc_req
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{

	rrc_uecc_llim_modify_lc_req_t              *p_modify_lc_param  = PNULL;

	rrc_rlc_reconfig_ue_entity_req_t rlc_reconfig_ue_entity_req;

	rrc_bool_et     found      = RRC_FALSE;
	rrc_bool_et     modify_ambr = RRC_FALSE;
	U8              drb_index  = RRC_NULL;        

	p_modify_lc_param =&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;

	memset_wrapper(&rlc_reconfig_ue_entity_req,
			0,
			sizeof(rlc_reconfig_ue_entity_req));


	rlc_reconfig_ue_entity_req.ue_index = 
		p_modify_lc_param->ue_index;

	/*check RLC configuration for each DRB*/
	for (drb_index = 0; 
			drb_index < p_modify_lc_param->
			modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
			drb_counter; 
			++drb_index)
	{
		/*This condition takes care of UECC Triggered Rollback OR
		  LLIM Triggered Rollback for DRBs whose Reconfig got failed at MAC*/
		if((p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
					RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING)
				||
				((p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				  RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_GOING &&
				  (RRC_TRUE ==
				   p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
				   drb_modify_fail))))
		{  
			/* Roll back all modified DRBs*/
			if(p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status & (1 << RRC_LLIM_DRB_PASSED_AT_RLC))
			{ 
				fill_reconfigure_part_drb_rlc_reconfig_ue_entity_req(
						&rlc_reconfig_ue_entity_req,
						p_modify_lc_param->
						modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						logical_channel_identity,
						&p_modify_lc_param->
						modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						rlc_config_enb.rlc_config
                        );
				/*Qos changes START*/
				fill_qos_info_rlc_reconfig_ue_entity_req_modify_lc_req(
						&rlc_reconfig_ue_entity_req, drb_index, 
						p_modify_lc_param, RRC_UECC_OLD_DRB_CONFIG_VERSION
						);
				/*Qos changes END*/      

				found = RRC_TRUE;
			}
		}
		/*This condition takes care of RLC Reconfig in normal case*/
		else if(RRC_TRUE !=
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
				drb_modify_fail &&
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING)
		{
			if(p_modify_lc_param->
					modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
					uecc_llim_drb_config[drb_index].drb_config.bitmask &
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT)
			{
				fill_reconfigure_part_drb_rlc_reconfig_ue_entity_req(
						&rlc_reconfig_ue_entity_req,
						p_modify_lc_param->
						modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						logical_channel_identity,
						&p_modify_lc_param->
						modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						rlc_config_enb.rlc_config
                        );

				/*setting the PASSED STATUS bit corres to RRC_LLIM_DRB_PASSED_AT_RLC*/
				update_drb_pass_status(
						p_ue_ctx,
						drb_index,
						p_modify_lc_param->modify_drb_entity[
						RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].
						drb_config.logical_channel_identity,
						RRC_LLIM_DRB_PASSED_AT_RLC);

				/*Qos changes START*/
				fill_qos_info_rlc_reconfig_ue_entity_req_modify_lc_req(
						&rlc_reconfig_ue_entity_req, drb_index, 
						p_modify_lc_param, RRC_UECC_NEW_DRB_CONFIG_VERSION 
						);
				/*Qos changes END*/        
				found = RRC_TRUE;
			}
		}
	}
	/*Qos changes START*/

	/* fill the AMBR info*/
	if((p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_GOING) && 
			(UECC_LLIM_MODIFY_LC_REQ_UE_AMBR_PRESENT & p_modify_lc_param->
			 modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].bitmask))
	{
		rlc_reconfig_ue_entity_req.bitmask |= 
			RRC_RLC_RECONFIG_UE_BIT_RATE_INFO_PRESENT;
		rlc_reconfig_ue_entity_req.rlc_ue_bit_rate_info.bit_rate_tx = 
			p_modify_lc_param->modify_drb_entity
			[RRC_UECC_OLD_DRB_CONFIG_VERSION].ue_ambr.ul_ambr;
		rlc_reconfig_ue_entity_req.rlc_ue_bit_rate_info.bit_rate_rx = 
			p_modify_lc_param->modify_drb_entity
			[RRC_UECC_OLD_DRB_CONFIG_VERSION].ue_ambr.dl_ambr;
		modify_ambr = RRC_TRUE;
	}
	else if ((RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == 
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure) && 
			(p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
			 bitmask & UECC_LLIM_MODIFY_LC_REQ_UE_AMBR_PRESENT))
	{
		rlc_reconfig_ue_entity_req.bitmask |= 
			RRC_RLC_RECONFIG_UE_BIT_RATE_INFO_PRESENT;
		rlc_reconfig_ue_entity_req.rlc_ue_bit_rate_info.bit_rate_tx = 
			p_modify_lc_param->modify_drb_entity
			[RRC_UECC_NEW_DRB_CONFIG_VERSION].ue_ambr.ul_ambr;
		rlc_reconfig_ue_entity_req.rlc_ue_bit_rate_info.bit_rate_rx = 
			p_modify_lc_param->modify_drb_entity
			[RRC_UECC_NEW_DRB_CONFIG_VERSION].ue_ambr.dl_ambr;
		modify_ambr = RRC_TRUE;
	}
	/*Qos changes END*/ 

	if ((RRC_TRUE == found) || (RRC_TRUE == modify_ambr))
	{
		if(p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING)
		{
			/*Sending with new Transaction Id*/
			if (RRC_SUCCESS == rrc_rlc_il_send_rrc_rlc_reconfig_ue_entity_req(
						&rlc_reconfig_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_modify_lc_param->cell_index),
						p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback.
						transaction_id,
						p_modify_lc_param->cell_index))
			{
				RRC_LLIM_TRACE(RRC_INFO,"RLC Reconfig sent..");
			}
			else
			{
				RRC_LLIM_TRACE(RRC_WARNING,"Unable to send RLC Reconfig");
				return L3_FATAL;
			}
		}
		else
		{
			/*Sending with Current Transaction Id*/
			if (RRC_SUCCESS ==  rrc_rlc_il_send_rrc_rlc_reconfig_ue_entity_req(
						&rlc_reconfig_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_modify_lc_param->cell_index),
						p_modify_lc_param->transaction_id,
						p_modify_lc_param->cell_index))
			{
				RRC_LLIM_TRACE(RRC_INFO,"RLC Reconfig sent..");
			}
			else
			{
				RRC_LLIM_TRACE(RRC_WARNING,"Unable to send RLC Reconfig");
				return L3_FATAL;
			}


			if(p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
					RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING)
			{
				UEMH_FSM_SET_STATE(p_ue_ctx, 
						UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF);
			}
		}
		return SUCCESS;
	}
	else
	{
		return FAILURE;
	}

}


/******************************************************************************
 *   FUNCTION NAME: fill_s1u_reconfig_ue_modify_lc_paramters
 *   INPUTS       : rrc_s1u_ie_relay_setup_sap_req_t  *p_setup_sap_req
 *                  rrm_drb_config_t *p_drb_config
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function fills the S1U related parameters for DRB.
 *   RETURNS:
 *       None
 *
 ******************************************************************************/

static void fill_s1u_reconfig_ue_modify_lc_paramters(
		rrc_s1u_ie_relay_setup_sap_req_t  *p_setup_sap_req,
		rrm_drb_config_t *p_drb_config)
{

	RRC_LLIM_UT_TRACE_ENTER();
	p_setup_sap_req->bitmask = RRC_NULL;

	p_setup_sap_req->lc_id =
		p_drb_config->logical_channel_identity;

	p_setup_sap_req->qos_id =
		p_drb_config->s1u_config.qos_id;

	p_setup_sap_req->num_tunnel_info = 1;

	p_setup_sap_req->tunnel_info[0].sap_flag =
		p_drb_config->s1u_config.sap_flags;

	p_setup_sap_req->bitmask |=
		RRC_S1U_IE_SETUP_QOS_PROFILE_PRESENT;
	p_setup_sap_req->qos_profile.
		allocation_retention_priority =
		p_drb_config->
		s1u_config.qos_profile.allocation_retention_priority;

	p_setup_sap_req->qos_profile.
		qos_profile_data_length =
		p_drb_config->
		s1u_config.qos_profile.qos_profile_data_size;

	l3_memcpy_wrapper(p_setup_sap_req->qos_profile.qos_profile_data,
			p_drb_config->s1u_config.qos_profile.
			qos_profile_data,
			sizeof(p_setup_sap_req->
				qos_profile.qos_profile_data));

	p_setup_sap_req->bitmask |=
		RRC_S1U_IE_SETUP_SEQ_FLAG_PRESENT;
	p_setup_sap_req->seq_flag.disable =
		p_drb_config->
		s1u_config.seq_flag;

	p_setup_sap_req->bitmask |=
		RRC_S1U_IE_SETUP_REORDERING_REQD_PRESENT;
	p_setup_sap_req->reordering_reqd.
		reordering_reqd =
		p_drb_config->
		s1u_config.reordering_reqd;

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: 
 *   uemh_fsm_in_service_uecc_trigerred_rb_pdcp_reconfig_modify_lc_req
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check if PDCP configuration for any lc is present or not.
 *       If present then it fills and sends the Modify lc message to PDCP.
 *
 *   RETURNS:
 *       RRC_SUCCESS or RRC_FAILURE
 *
 ******************************************************************************/
static rrc_response_et 
uemh_fsm_in_service_uecc_trigerred_rb_pdcp_reconfig_modify_lc_req
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	rrc_uecc_llim_modify_rollback_req_t        *p_modify_lc_param  = PNULL;

	rrc_pdcp_reconf_ue_entity_req_t             pdcp_reconf_ue_entity_req;

	rrc_counter_t                               drb_index = RRC_NULL;

	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback;

	/* 1. send RRC_PDCP_RECONFIG_UE_ENTITY_REQ */
	memset_wrapper(&pdcp_reconf_ue_entity_req, 0, sizeof
			(pdcp_reconf_ue_entity_req));
	pdcp_reconf_ue_entity_req.ue_index = p_modify_lc_param->ue_index;
	for (drb_index = 0; 
			drb_index < p_modify_lc_param->
			modify_drb_entity.drb_counter; 
			++drb_index)
	{
		fill_pdcp_reconfig_drb_entities(  &pdcp_reconf_ue_entity_req.
				rcfg_drb_entities[pdcp_reconf_ue_entity_req.
				num_reconfig_drb_entity],
				&p_modify_lc_param->
				modify_drb_entity.uecc_llim_drb_config[drb_index].drb_config,
				&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc.
				modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].
				uecc_llim_drb_config[drb_index].drb_config);

		if(RRC_NULL != pdcp_reconf_ue_entity_req.rcfg_drb_entities[
				pdcp_reconf_ue_entity_req.num_reconfig_drb_entity].
				optional_elems_present)
		{
			++pdcp_reconf_ue_entity_req.num_reconfig_drb_entity;
		}

	}

	RRC_ASSERT(pdcp_reconf_ue_entity_req.num_reconfig_drb_entity <=
			RRC_PDCP_MAX_DRB);

	if(RRC_NULL != pdcp_reconf_ue_entity_req.num_reconfig_drb_entity)
	{
		/*Sending With New Transaction ID */
		if(RRC_SUCCESS == rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
					&pdcp_reconf_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_modify_lc_param->cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback.
					transaction_id,
					p_modify_lc_param->cell_index))
		{
			RRC_LLIM_TRACE(RRC_INFO,"PDCP Reconfig sent for Modify LC..");
			return SUCCESS;
		}
		else
		{
			RRC_LLIM_TRACE(RRC_WARNING,"Unable to send PDCP Reconfig for"
					" Modify LC");
			return L3_FATAL;
		}
		return SUCCESS;
	}
	else
	{
		return FAILURE;
	}
}


/******************************************************************************
 *   FUNCTION NAME: build_and_send_pdcp_reconfig_modify_lc_req
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check if PDCP configuration for any lc is present or not.
 *       If present then it fills and sends the Modify lc message to PDCP.
 *
 *   RETURNS:
 *       RRC_SUCCESS or RRC_FAILURE
 *
 ******************************************************************************/
static rrc_response_et build_and_send_pdcp_reconfig_modify_lc_req
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	rrc_uecc_llim_modify_lc_req_t              *p_modify_lc_param  = PNULL;

	rrc_pdcp_reconf_ue_entity_req_t             pdcp_reconf_ue_entity_req;

	rrc_counter_t                               drb_index = RRC_NULL;

	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;

	/* 1. send RRC_PDCP_RECONFIG_UE_ENTITY_REQ */
	memset_wrapper(&pdcp_reconf_ue_entity_req, 0, sizeof
			(pdcp_reconf_ue_entity_req));

	pdcp_reconf_ue_entity_req.ue_index = p_modify_lc_param->ue_index;

	for (drb_index = 0; 
			drb_index < p_modify_lc_param->
			modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
			drb_counter; 
			++drb_index)
	{

		if((p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
					RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING)
				||
				((p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				  RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_GOING &&
				  (RRC_TRUE == p_ue_ctx->curr_op_param.p_rcfg_ue->
				   llim_drb_status[drb_index].drb_modify_fail))))
		{
			if(p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status & (1 << RRC_LLIM_DRB_PASSED_AT_PDCP))
			{
				fill_pdcp_reconfig_drb_entities(  &pdcp_reconf_ue_entity_req.
						rcfg_drb_entities[pdcp_reconf_ue_entity_req.
						num_reconfig_drb_entity],
						&p_modify_lc_param->
						modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config,
						&p_modify_lc_param->
						modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config);

				++pdcp_reconf_ue_entity_req.num_reconfig_drb_entity;
			}
		}
		else if(RRC_TRUE !=
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
				drb_modify_fail &&
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING)
		{
			fill_pdcp_reconfig_drb_entities(  &pdcp_reconf_ue_entity_req.
					rcfg_drb_entities[pdcp_reconf_ue_entity_req.
					num_reconfig_drb_entity],
					&p_modify_lc_param->
					modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
					uecc_llim_drb_config[drb_index].drb_config,
					&p_modify_lc_param->
					modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].
					uecc_llim_drb_config[drb_index].drb_config);

			if(RRC_NULL != pdcp_reconf_ue_entity_req.rcfg_drb_entities[
					pdcp_reconf_ue_entity_req.num_reconfig_drb_entity].
					optional_elems_present)
			{
				update_drb_pass_status(
						p_ue_ctx,
						drb_index,
						pdcp_reconf_ue_entity_req.
						rcfg_drb_entities[pdcp_reconf_ue_entity_req.
						num_reconfig_drb_entity].lc_id,
						RRC_LLIM_DRB_PASSED_AT_PDCP);

				++pdcp_reconf_ue_entity_req.num_reconfig_drb_entity;

			}
		}
	}

	RRC_ASSERT(pdcp_reconf_ue_entity_req.num_reconfig_drb_entity <=
			RRC_PDCP_MAX_DRB);
	if(RRC_NULL != pdcp_reconf_ue_entity_req.num_reconfig_drb_entity)
	{
		if(p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING)
		{
			/*Sending With New Transaction ID */
			if(RRC_SUCCESS == rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
						&pdcp_reconf_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_modify_lc_param->cell_index),
						p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback.
						transaction_id,
						p_ue_ctx->cell_index))
			{
				RRC_LLIM_TRACE(RRC_INFO,"PDCP Reconfig sent for Modify LC..");
				return SUCCESS;
			}
			else
			{
				RRC_LLIM_TRACE(RRC_WARNING,"Unable to send PDCP Reconfig for"
						" Modify LC");
				return L3_FATAL;
			}
		}
		else
		{
			/*Sending With Current Transaction ID */
			if(RRC_SUCCESS == rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
						&pdcp_reconf_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_modify_lc_param->cell_index),
						p_modify_lc_param->transaction_id,
						p_modify_lc_param->cell_index))
			{
				RRC_LLIM_TRACE(RRC_INFO,"PDCP Reconfig sent for Modify LC..");

				if(p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
						RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING)
				{
					UEMH_FSM_SET_STATE(p_ue_ctx,
							UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF);
				}
				return SUCCESS;
			}
			else
			{
				return L3_FATAL;
			}
		}
	}
	else
	{
		return FAILURE;
	}
}

/******************************************************************************
 *   FUNCTION NAME: 
 *   uemh_fsm_in_service_uecc_trigerred_rb_s1u_reconfig_modify_lc_req
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check if S1U configuration for any lc is present or not.
 *       If present then it fills and sends the Modify lc message to S1U.
 *
 *   RETURNS:
 *       RRC_SUCCESS or RRC_FAILURE
 *
 ******************************************************************************/
static rrc_response_et
uemh_fsm_in_service_uecc_trigerred_rb_s1u_reconfig_modify_lc_req
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	rrc_uecc_llim_modify_rollback_req_t        *p_modify_lc_param  = PNULL;

	rrc_s1u_reconfigure_ue_entity_req_t         s1u_reconf_ue_entity_req;

	rrc_counter_t                               drb_index = RRC_NULL; 

	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback;
	/* 1. send RRC_S1U_RECONFIGURE_UE_ENTITY_REQ */
	memset_wrapper(&s1u_reconf_ue_entity_req, 0, sizeof
			(s1u_reconf_ue_entity_req));

	s1u_reconf_ue_entity_req.ue_index           = 
		p_modify_lc_param->ue_index;
	s1u_reconf_ue_entity_req.num_setup_sap_req  = RRC_NULL; 


	if (RRC_UECC_LLIM_MAX_DRB >= p_modify_lc_param->modify_drb_entity.
			drb_counter)
	{
		for (drb_index = 0; 
				drb_index < p_modify_lc_param->
				modify_drb_entity.drb_counter &&
				drb_index < RRC_UECC_LLIM_MAX_DRB; 
				++drb_index)
		{
			if ((RRM_DRB_CONFIG_S1U_CONFIG_PRESENT &   
						p_modify_lc_param->
						modify_drb_entity.uecc_llim_drb_config[drb_index].
						drb_config.bitmask)&&
					(RRC_S1U_MAX_NUM_LC > s1u_reconf_ue_entity_req.num_setup_sap_req))
			{
				fill_s1u_reconfig_ue_modify_lc_paramters(
						&s1u_reconf_ue_entity_req.setup_sap_req[
						s1u_reconf_ue_entity_req.num_setup_sap_req],
						&p_modify_lc_param->
						modify_drb_entity.uecc_llim_drb_config[drb_index].drb_config);

				++s1u_reconf_ue_entity_req.num_setup_sap_req;
			}
			else
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid num_setup_sap_req");
				break;
			}
		}
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "DRB index exceeds MAX_ERAB_COUNT");
		RRC_LLIM_UT_TRACE_EXIT();
		return FAILURE;
	}

	RRC_ASSERT(s1u_reconf_ue_entity_req.num_setup_sap_req <=
			RRC_S1U_MAX_NUM_LC);

	if (RRC_NULL != s1u_reconf_ue_entity_req.num_setup_sap_req)
	{
		if (RRC_SUCCESS == rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
					&s1u_reconf_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_modify_lc_param->cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback.
					transaction_id,
					p_modify_lc_param->cell_index))
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"S1U reconfig UE sent for"
					" Modify LC");
			return SUCCESS;
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Unable to send S1U"
					" reconfig UE sent for Modify LC");
			return L3_FATAL;
		}
		return SUCCESS;
	}
	else
	{
		return FAILURE;
	}

}

/******************************************************************************
 *   FUNCTION NAME: build_and_send_s1u_reconfig_modify_lc_req
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check if S1U configuration for any lc is present or not.
 *       If present then it fills and sends the Modify lc message to S1U.
 *
 *   RETURNS:
 *       RRC_SUCCESS or RRC_FAILURE
 *
 ******************************************************************************/
static rrc_response_et build_and_send_s1u_reconfig_modify_lc_req
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	rrc_uecc_llim_modify_lc_req_t              *p_modify_lc_param  = PNULL;

	rrc_s1u_reconfigure_ue_entity_req_t         s1u_reconf_ue_entity_req;

	rrc_counter_t                               drb_index = RRC_NULL; 

	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;
	/* 1. send RRC_S1U_RECONFIGURE_UE_ENTITY_REQ */
	memset_wrapper(&s1u_reconf_ue_entity_req, 0, sizeof
			(s1u_reconf_ue_entity_req));


	s1u_reconf_ue_entity_req.ue_index           = 
		p_modify_lc_param->ue_index;

	s1u_reconf_ue_entity_req.num_setup_sap_req  = RRC_NULL; 


	for (drb_index = 0; 
			drb_index < p_modify_lc_param->
			modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
			drb_counter && 
			s1u_reconf_ue_entity_req.num_setup_sap_req < RRC_S1U_MAX_NUM_LC; 
			++drb_index)
	{
		if((p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
					RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING)
				||
				((p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				  RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_GOING &&
				  (RRC_TRUE == p_ue_ctx->curr_op_param.p_rcfg_ue->
				   llim_drb_status[drb_index].drb_modify_fail))))
		{
			if((p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
						drb_status &
						(1 << RRC_LLIM_DRB_PASSED_AT_S1U)) &&
					(RRC_S1U_MAX_NUM_LC > s1u_reconf_ue_entity_req.num_setup_sap_req))
			{
				fill_s1u_reconfig_ue_modify_lc_paramters(
						&s1u_reconf_ue_entity_req.setup_sap_req[
						s1u_reconf_ue_entity_req.num_setup_sap_req],
						&p_modify_lc_param->
						modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config);
				++s1u_reconf_ue_entity_req.num_setup_sap_req;
			}
		}
		else if(RRC_TRUE != p_ue_ctx->curr_op_param.p_rcfg_ue->
				llim_drb_status[drb_index].drb_modify_fail &&
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING)
		{


			if ((RRM_DRB_CONFIG_S1U_CONFIG_PRESENT &   
						p_modify_lc_param->
						modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.bitmask) &&
					(RRC_S1U_MAX_NUM_LC > 
					 s1u_reconf_ue_entity_req.num_setup_sap_req))
			{
				fill_s1u_reconfig_ue_modify_lc_paramters(
						&s1u_reconf_ue_entity_req.setup_sap_req[
						s1u_reconf_ue_entity_req.num_setup_sap_req],
						&p_modify_lc_param->
						modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config);

				++s1u_reconf_ue_entity_req.num_setup_sap_req;

				update_drb_pass_status(
						p_ue_ctx, 
						drb_index, 
						p_modify_lc_param->modify_drb_entity[
						RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						logical_channel_identity,
						RRC_LLIM_DRB_PASSED_AT_S1U);
			}
		}
	}

	RRC_ASSERT(s1u_reconf_ue_entity_req.num_setup_sap_req <=
			RRC_S1U_MAX_NUM_LC);

	if (RRC_NULL != s1u_reconf_ue_entity_req.num_setup_sap_req)
	{
		if(p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
				RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING)
		{
			if (RRC_SUCCESS == rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
						&s1u_reconf_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_modify_lc_param->cell_index),
						p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback.
						transaction_id,
						p_modify_lc_param->cell_index))
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"S1U reconfig UE sent for"
						" Modify LC");
				return SUCCESS;
			}
			else
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Unable to send S1U"
						" reconfig UE sent for Modify LC");
				return L3_FATAL;
			}
		}
		else
		{
			if(RRC_SUCCESS == rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
						&s1u_reconf_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_modify_lc_param->cell_index),
						p_modify_lc_param->transaction_id,
						p_modify_lc_param->cell_index))
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"S1U reconfig UE sent for"
						" Modify LC");
			}
			else
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Unable to send S1U"
						" reconfig UE sent for Modify LC");
				return L3_FATAL;
			}
			if(p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
					RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING)
			{
				UEMH_FSM_SET_STATE(p_ue_ctx,
						UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF);
			}
			return SUCCESS;
		}
	}
	else
	{
		return FAILURE;
	}

}

/******************************************************************************
 *   FUNCTION NAME: build_and_send_phy_reconfig_modify_lc_req
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check if PHY configuration for any lc is present or not.
 *       If present then it fills and sends the Modify lc message to PHY.
 *
 *   RETURNS:
 *       RRC_SUCCESS or RRC_FAILURE
 *
 ******************************************************************************/
static rrc_response_et build_and_send_phy_reconfig_modify_lc_req
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	rrc_uecc_llim_modify_lc_req_t           *p_modify_lc_req   = PNULL;
	rrc_uecc_llim_modify_drb_version_t      *p_modify_lc_param = PNULL;
	rrc_phy_reconfig_ue_entity_req_t         phy_reconfig_ue_entity_req;
	U8 found = RRC_FALSE;
	p_modify_lc_req = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;

	memset_wrapper(&phy_reconfig_ue_entity_req, 0,
			sizeof(rrc_phy_reconfig_ue_entity_req_t));

	phy_reconfig_ue_entity_req.ue_index = p_modify_lc_req->
		ue_index;

	if(RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		p_modify_lc_param = &p_modify_lc_req->
			modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION];
	}
	else
	{
		p_modify_lc_param = &p_modify_lc_req->
			modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION];
	}

	if(RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_GOING != 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/*These parameters should not be reconfigured in case of LLIM
		  initiated Roll Back*/
		if ((p_modify_lc_param->bitmask & 
					UECC_LLIM_MODIFY_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT) &&
				/*CA_RE_ESTAB_START*/
				(RRC_TRUE != p_modify_lc_req->add_scell_info_mac_phy))
			/*CA_RE_ESTAB_STOP*/
		{
			l3_memcpy_wrapper(&phy_reconfig_ue_entity_req.physical_config_dedicated, 
					&p_modify_lc_param->physical_config_dedicated,
					sizeof(rrc_phy_physical_config_dedicated_t));
			found = RRC_TRUE;

		}
		if(p_modify_lc_param->bitmask &
				UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT)
		{
			phy_reconfig_ue_entity_req.bitmask |= RRC_PHY_SCELL_CONFIG_PRESENT;
			rrc_fill_phy_scell_config_list(&phy_reconfig_ue_entity_req.
					rrc_phy_scell_config_list,&p_modify_lc_param->scell_config,
					p_modify_lc_req->scells_operation_list);
			found = RRC_TRUE;

		}
		if (RRC_TRUE == found)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"PHY reconfig"
					" params present in Modiy LC Request");

		}    
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"PHY reconfig"
					" params not present in Modiy LC Request");
			return FAILURE;
		}
	}

	if(p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ==
			RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING)
	{
		/*Sending with new Transaction Id*/
		if (RRC_SUCCESS == rrc_phy_il_send_rrc_phy_reconfig_ue_entity_req(
					&phy_reconfig_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,p_modify_lc_req->cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback.
					transaction_id,
					p_modify_lc_req->cell_index))
		{
			RRC_LLIM_TRACE(RRC_INFO,"PHY Reconfig sent..");
			return SUCCESS;
		}
		else
		{
			RRC_LLIM_TRACE(RRC_WARNING,"Unable to send PHY Reconfig");
			return L3_FATAL;
		}
	}
	else
	{
		if(RRC_SUCCESS == rrc_phy_il_send_rrc_phy_reconfig_ue_entity_req(
					&phy_reconfig_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,p_modify_lc_req->cell_index),
					p_modify_lc_req->transaction_id,
					p_modify_lc_req->cell_index))
		{

			RRC_LLIM_TRACE(RRC_INFO,"PHY Reconfig sent..");
			if(RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == 
					p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
			{
				UEMH_FSM_SET_STATE(p_ue_ctx, 
						UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF);
			}
			return SUCCESS;
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Unable to send PHY reconfig"
					" UE entity req to PHY");
			return L3_FATAL;
		}
	}
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_modify_lc_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg 
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function partially reconfigure lower layers and add LC.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_MODIFY_LC_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_modify_lc_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_modify_lc_req_t              *p_modify_lc_req    = PNULL;

	rrc_uecc_llim_modify_lc_resp_t             *p_modify_lc_resp    = PNULL;

	rrc_uemh_timer_buf_t                    guard_timer_data;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm :%p",p_api);      

	p_ue_ctx->curr_op_param.p_rcfg_ue = (rrc_uemh_rcfg_ue_op_param_t*)
		rrc_mem_get (sizeof(rrc_uemh_rcfg_ue_op_param_t));
	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	memset_wrapper(p_ue_ctx->curr_op_param.p_rcfg_ue, 0,
			sizeof(*p_ue_ctx->curr_op_param.p_rcfg_ue));

	p_modify_lc_req = (rrc_uecc_llim_modify_lc_req_t *)p_msg;

	/*Storing modify lc req in ue_ctx*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc = *p_modify_lc_req;

	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;

	p_modify_lc_resp =  &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	/*MODIFY LC Procedure Ongoing*/   
	p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
		RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING;

	/* ATTENTON: Fill all channels status with default status RRC_SUCCESS */
	fill_uecc_llim_modify_lc_resp(
			&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp,
			SUCCESS,
			RRC_NO_ERROR,
			p_modify_lc_req);

	/* 1. set guard timer */
	guard_timer_data.auto_delete        = RRC_TRUE;
	guard_timer_data.target_submodule   = LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index           = p_modify_lc_req->ue_index;
	guard_timer_data.uemh_event         = UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED;
	guard_timer_data.cell_index         = p_modify_lc_req->cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Start timer [LLIM_RECONFIG_UE_ENTITY_TIMER] %u ms.",
			p_rrc_llim_gl_ctx->reconfig_ue_duration);

	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer =
		rrc_start_timer(p_rrc_llim_gl_ctx->reconfig_ue_duration,
				&guard_timer_data,sizeof(guard_timer_data), RRC_FALSE);

	if(FAILURE == 
			build_and_send_mac_reconfig_modify_lc_req(p_ue_ctx))
	{
		RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for Modify LC"
				" request at MAC");

		if(FAILURE == 
				build_and_send_rlc_reconfig_modify_lc_req(p_ue_ctx))
		{
			RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for"
					" Modify LC request at RLC");

			if (FAILURE == 
					build_and_send_pdcp_reconfig_modify_lc_req(p_ue_ctx)) 
			{
				RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for"
						" Modify LC request at PDCP");

				if (FAILURE == 
						build_and_send_s1u_reconfig_modify_lc_req(p_ue_ctx)) 
				{
					RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for"
							" Modify LC request at S1u");
					if(FAILURE == 
							build_and_send_phy_reconfig_modify_lc_req(p_ue_ctx))
					{
						RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for Modify LC"
								" request at PHY");

						RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Configurations for Modify LC "
								"are not present for any Layer");

						/*Stop Timer*/
						if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
						{
							RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
									"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
							rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
							p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
						}

						fill_uecc_llim_modify_lc_resp(
								p_modify_lc_resp, 
								RRC_FAILURE,   /* response code */
								RRC_NO_ERROR,
								p_modify_lc_req); /* main source */

						rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_req->ue_index), 
								UECC_LLIM_MODIFY_LC_RESP,
								sizeof(*p_modify_lc_resp), 
								p_modify_lc_resp);
						UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
						rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
						p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
					}
				}
			}
		}
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/* JANEN_START */

/* SPR 16087 Start */
/******************************************************************************
*   FUNCTION NAME: uemh_fsm_ue_s1u_end_marker_ind
*       
 *   INPUTS       : void                *p_api
 *                  void                *p_msg 
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
*       This function sends PDCP_SN_HFN_STATUS_REQ to PDCP
*       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
*       event UEMH_EVENT_UECC_SN_HFN_STATUS_REQ
*
*   RETURNS:
*       None
*
******************************************************************************/

static void uemh_fsm_ue_s1u_end_marker_ind
/* SPR 16087 Stop */
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )

{

	rrc_s1u_end_marker_ind_t *p_s1u_end_marker_ind =
		(rrc_s1u_end_marker_ind_t *)p_msg;
	rrc_uecc_llim_s1u_end_marker_ind_t
		uecc_llim_s1u_end_marker_ind;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_s1u_end_marker_ind);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm %p",
			p_ue_ctx);

	/* Build UECC_LLIM_S1U_END_MARKER_IND msg */

	memset_wrapper(&uecc_llim_s1u_end_marker_ind, 0,
			sizeof(uecc_llim_s1u_end_marker_ind));

	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, 
			&uecc_llim_s1u_end_marker_ind.cell_index);

	uecc_llim_s1u_end_marker_ind.ue_index = p_s1u_end_marker_ind->ue_index;
	uecc_llim_s1u_end_marker_ind.lc_id = p_s1u_end_marker_ind->lc_id;
	uecc_llim_s1u_end_marker_ind.teid_self = p_s1u_end_marker_ind->teid_self;

	if (p_s1u_end_marker_ind->bitmask &
			RRC_S1U_END_MARKER_IND_TRANSPORT_ADDR_PRESENT )
	{

		uecc_llim_s1u_end_marker_ind.transport_addr.data_length =
			p_s1u_end_marker_ind->transport_addr.data_length;
		l3_memcpy_wrapper( uecc_llim_s1u_end_marker_ind.transport_addr.data,
				p_s1u_end_marker_ind->transport_addr.data,
				uecc_llim_s1u_end_marker_ind.transport_addr.data_length);
	}

	/* Send UECC_LLIM_S1U_END_MARKER_IND msg to UECC */
	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_s1u_end_marker_ind->ue_index),
			UECC_LLIM_S1U_END_MARKER_IND,
			sizeof(uecc_llim_s1u_end_marker_ind),
			&uecc_llim_s1u_end_marker_ind);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_sn_hfn_status_req
 *   INPUTS       : void                *p_api
 *                  void                *p_msg 
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       uemh_fsm_ue_in_service_state_sn_hfn_status_req
 *       This function sends PDCP_SN_HFN_STATUS_REQ to PDCP
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_SN_HFN_STATUS_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/


static void uemh_fsm_ue_in_service_state_sn_hfn_status_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )

{
	rrc_transaction_id_t    transaction_id;
	rrc_uecc_llim_sn_hfn_status_req_t    *p_sn_hfn_status_req=
		(rrc_uecc_llim_sn_hfn_status_req_t *)p_msg;
	rrc_pdcp_sn_hfn_status_req_t          pdcp_sn_hfn_status_req;
	/* lossy ho changes start */
	U16 lossy_drb_cnt = RRC_NULL;
	/* lossy ho changes stop */

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_sn_hfn_status_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:%p p_rrc_llim_gl_ctx=%p",p_api,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/
	/* Build and send PDCP_SN_HFN_STATUS_REQ msg to PDCP*/

	memset_wrapper(&pdcp_sn_hfn_status_req, 0,
			sizeof(pdcp_sn_hfn_status_req));


	pdcp_sn_hfn_status_req.ue_index = p_sn_hfn_status_req->ue_index;
	pdcp_sn_hfn_status_req.sn_hfn_required 
		= p_sn_hfn_status_req->sn_hfn_required;
	transaction_id = p_sn_hfn_status_req->transaction_id ; 

	/* lossy ho start */
	pdcp_sn_hfn_status_req.num_lossy_drb_entity = 
		p_sn_hfn_status_req->lossy_drb_counter;

	for( lossy_drb_cnt=0; lossy_drb_cnt < 
			pdcp_sn_hfn_status_req.num_lossy_drb_entity; lossy_drb_cnt++)
	{
		pdcp_sn_hfn_status_req.lossy_ho_required[lossy_drb_cnt].lc_id =
			p_sn_hfn_status_req->lossy_lc_id[lossy_drb_cnt];
	}

	/* lossy ho end */
	rrc_pdcp_il_send_rrc_pdcp_sn_hfn_status_req(&pdcp_sn_hfn_status_req,
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_sn_hfn_status_req->cell_index),
			transaction_id,
			p_sn_hfn_status_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();

}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_mac_i_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg 
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends the PDCP_MAC_I_REQ to external module PDCP
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_MAC_I_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/



static void uemh_fsm_ue_in_service_state_mac_i_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{

	U16 mac_i_cntr = RRC_NULL;
	rrc_transaction_id_t    transaction_id;
	rrc_uecc_llim_mac_i_req_t               *p_mac_i_req =
		(rrc_uecc_llim_mac_i_req_t *)p_msg;
	static rrc_pdcp_mac_i_req_t                    pdcp_mac_i_req;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_mac_i_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:%p p_rrc_llim_gl_ctx=%p",p_api,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/  
	/* Build PDCP_MAC_I_REQ  msg */

	memset_wrapper(&pdcp_mac_i_req, 0,
			sizeof(pdcp_mac_i_req));
	pdcp_mac_i_req.ue_index = p_mac_i_req->ue_index;
	pdcp_mac_i_req.lc_id = p_mac_i_req->lc_id;
	pdcp_mac_i_req.rb_direction = p_mac_i_req->rb_direction;
	pdcp_mac_i_req.num_message = p_mac_i_req->message_count;

	for( mac_i_cntr=0; mac_i_cntr < pdcp_mac_i_req.num_message;
			mac_i_cntr++)
	{

		pdcp_mac_i_req.message[mac_i_cntr].cell_identity_data_length =
			(rrc_counter_t)(sizeof(U32));

		pdcp_mac_i_req.message[mac_i_cntr].encoded_var_short_mac_i_data_length =
			p_mac_i_req->message[mac_i_cntr].num_of_bytes;


		l3_memcpy_wrapper(pdcp_mac_i_req.message[mac_i_cntr].cell_identity,
				(const void *)&(p_mac_i_req->message[mac_i_cntr].cell_identity),
				pdcp_mac_i_req.message[mac_i_cntr].
				cell_identity_data_length);

		l3_memcpy_wrapper(pdcp_mac_i_req.message[mac_i_cntr].encoded_var_short_mac_i,
				p_mac_i_req->message[mac_i_cntr].encodedVarShortMac,
				pdcp_mac_i_req.message[mac_i_cntr].
				encoded_var_short_mac_i_data_length);
	}

	/* Send PDCP_MAC_I_REQ  msg */
	transaction_id = p_mac_i_req->transaction_id;
	rrc_pdcp_il_send_rrc_pdcp_mac_i_req(&pdcp_mac_i_req,
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_mac_i_req->cell_index),
			transaction_id, 
			p_mac_i_req->cell_index);
	RRC_LLIM_UT_TRACE_EXIT();

}
/*SPR_19066_START*/
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_pdcp_ho_prep_info_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends the PDCP_HO_PREP_INFO_REQ to external module PDCP
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_PDCP_HO_PREP_INFO_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_pdcp_ho_prep_info_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{

    U16 mac_i_cntr = RRC_NULL;
    rrc_transaction_id_t    transaction_id;
    rrc_uecc_llim_ho_prep_info_req_t               *p_ho_prep_info =
        (rrc_uecc_llim_ho_prep_info_req_t *)p_msg;
    static rrc_pdcp_ho_prep_info_req_t                    pdcp_ho_prep_info;

    RRC_LLIM_UT_TRACE_ENTER();

    RRC_ASSERT(PNULL != p_api);
    RRC_ASSERT(PNULL != p_ho_prep_info);
    RRC_ASSERT(PNULL != p_ue_ctx);
    RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
    RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);
    /* Build pdcp_ho_prep_info  msg */
    memset_wrapper(&pdcp_ho_prep_info, 0,
            sizeof(pdcp_ho_prep_info));

    pdcp_ho_prep_info.ue_index = p_ho_prep_info->ue_index;

    if(RRC_UECC_LLIM_MACI_MSG_REQ_PRESENT & p_ho_prep_info->bitmask)
    {
        pdcp_ho_prep_info.mac_i_msg_req.lc_id = p_ho_prep_info->mac_i_msg_req.lc_id;
        pdcp_ho_prep_info.mac_i_msg_req.rb_direction = p_ho_prep_info->mac_i_msg_req.rb_direction;
        pdcp_ho_prep_info.mac_i_msg_req.num_message = p_ho_prep_info->mac_i_msg_req.message_count;

        for( mac_i_cntr=0; mac_i_cntr < pdcp_ho_prep_info.mac_i_msg_req.num_message;
                mac_i_cntr++)
        {

            pdcp_ho_prep_info.mac_i_msg_req.message[mac_i_cntr].cell_identity_data_length =
                (rrc_counter_t)(sizeof(U32));
            pdcp_ho_prep_info.mac_i_msg_req.message[mac_i_cntr].encoded_var_short_mac_i_data_length =
                p_ho_prep_info->mac_i_msg_req.message[mac_i_cntr].num_of_bytes;
            l3_memcpy_wrapper(pdcp_ho_prep_info.mac_i_msg_req.message[mac_i_cntr].cell_identity,
                    (const void *)&(p_ho_prep_info->mac_i_msg_req.message[mac_i_cntr].cell_identity),
                    pdcp_ho_prep_info.mac_i_msg_req.message[mac_i_cntr].
                    cell_identity_data_length);

            l3_memcpy_wrapper(pdcp_ho_prep_info.mac_i_msg_req.message[mac_i_cntr].encoded_var_short_mac_i,
                    p_ho_prep_info->mac_i_msg_req.message[mac_i_cntr].encodedVarShortMac,
                    pdcp_ho_prep_info.mac_i_msg_req.message[mac_i_cntr].
                    encoded_var_short_mac_i_data_length);
        }
        pdcp_ho_prep_info.optional_elems_present |= RRC_PDCP_MACI_MSG_REQ_PRESENT;
    }
    if(RRC_UECC_LLIM_HO_PREP_INACTIVE_TIME_REQ_PRESENT & p_ho_prep_info->bitmask)
    {
        pdcp_ho_prep_info.ue_inactive_time_val = p_ho_prep_info->ue_inactive_time_val;
        pdcp_ho_prep_info.optional_elems_present |= RRC_PDCP_HO_PREP_UE_INACTIVE_TIME_REQ_PRESENT;
    }
    /* Send pdcp_ho_prep_info  msg */
    transaction_id = p_ho_prep_info->transaction_id;
    RRC_LLIM_TRACE(RRC_INFO,"API:RRC->PDCP:RRC_PDCP_HO_PREP_INFO_REQ:[UE:%u]",
            pdcp_ho_prep_info.ue_index);

    if (RRC_FAILURE == rrc_pdcp_il_send_rrc_pdcp_ho_prep_info_req(&pdcp_ho_prep_info,
                RRC_LLIM_MODULE_ID,
                RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID, p_ho_prep_info->cell_index),
                transaction_id,p_ho_prep_info->cell_index))
    {
        RRC_LLIM_TRACE(RRC_ERROR,"Fail to send RRC_PDCP_HO_PREP_INFO_REQ");
    }
    else
    {
        RRC_LLIM_TRACE(RRC_ERROR,"Successfully send RRC_PDCP_HO_PREP_INFO_REQ");
    }
}
/*SPR_19066_END*/

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_data_buffer_stop_ind
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg 
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends PDCP_DATA_BUFFER_STOP_IND to the PDCP.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/

static void uemh_fsm_ue_in_service_state_data_buffer_stop_ind
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
    rrc_transaction_id_t    transaction_id;
    rrc_uecc_llim_data_buffer_stop_ind_t *p_uecc_llim_data_buffer_stop_ind =
        (rrc_uecc_llim_data_buffer_stop_ind_t *)p_msg;
    rrc_pdcp_data_buffer_stop_ind_t pdcp_data_buffer_stop_ind;

    RRC_LLIM_UT_TRACE_ENTER();

    RRC_ASSERT(PNULL != p_api);
    RRC_ASSERT(PNULL != p_uecc_llim_data_buffer_stop_ind);
    RRC_ASSERT(PNULL != p_ue_ctx);
    RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

    RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm p_api:%p p_ue_ctx:%p p_rrc_llim_gl_ctx=%p",
            p_api,p_ue_ctx,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/

    /* Build and send PDCP_DATA_BUFFER_STOP_IND to the PDCP */

    memset_wrapper(&pdcp_data_buffer_stop_ind, 0,
            sizeof(pdcp_data_buffer_stop_ind));
    pdcp_data_buffer_stop_ind.ue_index = p_uecc_llim_data_buffer_stop_ind->ue_index;
    transaction_id = p_uecc_llim_data_buffer_stop_ind->transaction_id;

    rrc_pdcp_il_send_rrc_pdcp_data_buffer_stop_ind(&pdcp_data_buffer_stop_ind,
            RRC_LLIM_MODULE_ID,
            RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID, p_uecc_llim_data_buffer_stop_ind->cell_index),
            transaction_id,
            p_uecc_llim_data_buffer_stop_ind->cell_index);
    RRC_LLIM_UT_TRACE_EXIT();
}

/*SPR_19066_START*/
/*Code Removed */
/*SPR_19066_END*/

/******************************************************************************
 *       FUNCTION NAME: uemh_fsm_ue_in_service_state_re_est_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg 
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends RLC_RE_ESTABLISH_UE_ENTITY_REQ to RLC.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_re_est_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	U16 lc_id_index = RRC_NULL;
	rrc_transaction_id_t    transaction_id;
	rrc_uecc_llim_re_establish_ue_entity_req_t
		*p_llim_re_establish_ue_entity_req =
		(rrc_uecc_llim_re_establish_ue_entity_req_t *)p_msg;
	rrc_rlc_re_establish_ue_entity_req_t    rlc_re_establish_ue_entity_req;

	RRC_LLIM_UT_TRACE_ENTER();


	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_llim_re_establish_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:%p p_rrc_llim_gl_ctx=%p"
            ,p_api,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/

	/* Build and send RLC_RE_ESTABLISH_UE_ENTITY_REQ to RLC */

	memset_wrapper(&rlc_re_establish_ue_entity_req, 0,
			sizeof(rlc_re_establish_ue_entity_req));


	rlc_re_establish_ue_entity_req.ue_index =
		p_llim_re_establish_ue_entity_req->ue_index;
	rlc_re_establish_ue_entity_req.num_entity_lc_id =
		p_llim_re_establish_ue_entity_req->lc_id_list.lc_count;

	for ( lc_id_index =0;
			lc_id_index< rlc_re_establish_ue_entity_req.num_entity_lc_id;
			lc_id_index++)
	{
		rlc_re_establish_ue_entity_req.entity_lcids[lc_id_index].bitmask = 0;

		rlc_re_establish_ue_entity_req.entity_lcids[lc_id_index].
			lc_id = p_llim_re_establish_ue_entity_req->lc_id_list.
			lc_id_state[lc_id_index].lc_id;
		if( RLC_FREEZE == p_llim_re_establish_ue_entity_req->lc_id_list.
				lc_id_state[lc_id_index].state)
		{
			rlc_re_establish_ue_entity_req.entity_lcids[lc_id_index].bitmask |= 
				RRC_RLC_LC_STATE_PRESENT;
			rlc_re_establish_ue_entity_req.entity_lcids[lc_id_index].lc_state.
				state = p_llim_re_establish_ue_entity_req->lc_id_list.
				lc_id_state[lc_id_index].state;
		}
	}

	transaction_id = p_llim_re_establish_ue_entity_req->transaction_id;
	rrc_rlc_il_send_rrc_rlc_re_establish_ue_entity_req(
			&rlc_re_establish_ue_entity_req,
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_llim_re_establish_ue_entity_req->cell_index),
			transaction_id,
			p_llim_re_establish_ue_entity_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();

}
/******************************************************************************
 *    FUNCTION NAME:uemh_fsm_ue_in_service_state_resume_ue_entity_req 
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg 
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends PDCP_RESUME_UE_ENTITY_REQ to PDCP.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_resume_ue_entity_req 
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_resume_ue_entity_req_t* 
		p_llim_resume_ue_entity_req = 
		(rrc_uecc_llim_resume_ue_entity_req_t*)p_msg;  

	rrc_uecc_llim_resume_ue_entity_req_t*
		p_llim_resume_ue_entity_param = PNULL;

	rrc_uemh_timer_buf_t     guard_timer_data;
	rrc_pdcp_resume_ue_entity_req_t*   p_pdcp_resume_ue_entity_req = PNULL;
	rrc_transaction_id_t    transaction_id;
	rrc_counter_t          counter = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_llim_resume_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	p_ue_ctx->curr_op_param.p_resume_ue = (rrc_uemh_resume_ue_op_param_t*)
		rrc_mem_get (sizeof(rrc_uemh_resume_ue_op_param_t));
	if (PNULL == p_ue_ctx->curr_op_param.p_resume_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_resume_ue is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/* Special case on init operation */
	memset_wrapper(p_ue_ctx->curr_op_param.p_resume_ue, RRC_NULL, 
			sizeof(*p_ue_ctx->curr_op_param.p_resume_ue));

	/* Points to resume ue entity */
	p_llim_resume_ue_entity_param = 
		&p_ue_ctx->curr_op_param.p_resume_ue->resume_ue_entity_req;

	/* Store Received Request From UECC To reconfigure new security for UE*/
	*p_llim_resume_ue_entity_param = *p_llim_resume_ue_entity_req;

	/* 1. set guard timer */
	guard_timer_data.auto_delete      = RRC_TRUE;
	guard_timer_data.target_submodule = LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index         = p_llim_resume_ue_entity_param->ue_index;
	/* Here use another timer */
	guard_timer_data.uemh_event       = UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED;
	guard_timer_data.cell_index       = p_llim_resume_ue_entity_req->cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Start timer [LLIM_RESUME_UE_ENTITY_TIMER] %u ms.",
			p_rrc_llim_gl_ctx->resume_ue_duration);

	p_ue_ctx->curr_op_param.p_resume_ue->guard_timer =
		rrc_start_timer(p_rrc_llim_gl_ctx->resume_ue_duration, 
				&guard_timer_data, sizeof(guard_timer_data), RRC_FALSE);


	do {
		/* Allocate memory for message */
		p_pdcp_resume_ue_entity_req = 
			(rrc_pdcp_resume_ue_entity_req_t*)
			rrc_mem_get(sizeof(rrc_pdcp_resume_ue_entity_req_t));

		if (PNULL == p_pdcp_resume_ue_entity_req)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
					"Memory Allocation Fail to pdcp_resume_ue_entity_req");
			break;
		}
		/* Init Operation */
		memset_wrapper(p_pdcp_resume_ue_entity_req, RRC_NULL,
				sizeof(rrc_pdcp_resume_ue_entity_req_t));


		p_pdcp_resume_ue_entity_req->ue_index =
			p_llim_resume_ue_entity_param->ue_index;

		/* Resume Direction Either Uplink or Both */
		p_pdcp_resume_ue_entity_req->resume_direction = 
			p_llim_resume_ue_entity_param->resume_direction;

		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"PDCP Re-sume direction [%u]", 
				p_pdcp_resume_ue_entity_req->resume_direction);

		for (counter =0 ;
				counter < p_llim_resume_ue_entity_param->rb_info.lc_count;
				counter++)
		{
			p_pdcp_resume_ue_entity_req->resume_rb_entities[counter].lc_id = 
				p_llim_resume_ue_entity_param->rb_info.lc_id[counter];
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"PDCP Re-sume [%u]", 
					p_pdcp_resume_ue_entity_req->resume_rb_entities[counter].lc_id);

		}
		p_pdcp_resume_ue_entity_req->num_resume_rb_entity = counter;
		transaction_id = p_llim_resume_ue_entity_param->transaction_id;
		rrc_pdcp_il_send_rrc_pdcp_resume_ue_entity_req(
				p_pdcp_resume_ue_entity_req,
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_llim_resume_ue_entity_req->cell_index),
				transaction_id,
				p_llim_resume_ue_entity_req->cell_index); 

		UEMH_FSM_SET_STATE(p_ue_ctx, 
				UEMH_STATE_W_FOR_PDCP_RESUME_UE_ENTITY_CNF);

		if (PNULL != p_pdcp_resume_ue_entity_req)
		{
			/* Deallocate memory */
			rrc_mem_free(p_pdcp_resume_ue_entity_req);
            /* SPR 20522 Fix Start */
			/* + Coverity 81406 */
			p_pdcp_resume_ue_entity_req = PNULL;
			/* - Coverity 81406 */
            /* SPR 20522 Fix End */
		}

	} while (0);

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *    FUNCTION NAME:uemh_fsm_ue_in_service_state_reconfig_security_ue_entity_req 
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg 
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends PDCP_RECONFIGURE_UE_ENTITY_REQ to PDCP.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_reconfig_security_ue_entity_req 
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_reconfig_security_req_t* 
		p_llim_reconfig_security_req = 
		(rrc_uecc_llim_reconfig_security_req_t*)p_msg;  

	rrc_uecc_llim_reconfig_security_req_t*
		p_llim_reconfig_security_ue_entity_param = PNULL;

	rrc_uemh_timer_buf_t     guard_timer_data;
	rrc_pdcp_reconf_ue_entity_req_t*   p_pdcp_reconfig_ue_entity_req = PNULL;
	rrc_transaction_id_t    transaction_id;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_llim_reconfig_security_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	p_ue_ctx->curr_op_param.p_recfg_ue_security = (rrc_uemh_recfg_ue_security_op_param_t*)
		rrc_mem_get(sizeof(rrc_uemh_recfg_ue_security_op_param_t));
	if (PNULL == p_ue_ctx->curr_op_param.p_recfg_ue_security) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_recfg_ue_security is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/* Special case on init operation */
	memset_wrapper(p_ue_ctx->curr_op_param.p_recfg_ue_security, RRC_NULL, 
			sizeof(*p_ue_ctx->curr_op_param.p_recfg_ue_security));

	p_llim_reconfig_security_ue_entity_param = 
		&p_ue_ctx->curr_op_param.p_recfg_ue_security->recfg_security_req;

	/* Store Received Request From UECC To reconfigure new security for UE*/
	*p_llim_reconfig_security_ue_entity_param = *p_llim_reconfig_security_req;

	/* 1. set guard timer */
	guard_timer_data.auto_delete      = RRC_TRUE;
	guard_timer_data.target_submodule = LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index         = p_llim_reconfig_security_req->ue_index;
	guard_timer_data.uemh_event = 
		UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED;
	guard_timer_data.cell_index       = p_llim_reconfig_security_req->cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Start timer [LLIM_RECONFIG_SECURITY_UE_ENTITY_TIMER] %u ms.",
			p_rrc_llim_gl_ctx->reconfig_security_ue_duration);

	p_ue_ctx->curr_op_param.p_recfg_ue_security->guard_timer =
		rrc_start_timer(p_rrc_llim_gl_ctx->reconfig_security_ue_duration,
				&guard_timer_data, sizeof(guard_timer_data), RRC_FALSE);


	do {
		p_pdcp_reconfig_ue_entity_req = 
			(rrc_pdcp_reconf_ue_entity_req_t*)
			rrc_mem_get(sizeof(rrc_pdcp_reconf_ue_entity_req_t));
		if (PNULL == p_pdcp_reconfig_ue_entity_req)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
					"Memory Allocation Failed for pdcp_reconfig_ue_entity_req");
			break;
		}
		/* Init Operation */
		memset_wrapper(p_pdcp_reconfig_ue_entity_req, RRC_NULL,
				sizeof(rrc_pdcp_reconf_ue_entity_req_t));


		p_pdcp_reconfig_ue_entity_req->ue_index =
			p_llim_reconfig_security_ue_entity_param->ue_index;

		/* Fill new integrity info in pdcp_reconfig_ue_entity_req message */
		if (p_llim_reconfig_security_ue_entity_param->bitmask &
				RRC_UECC_LLIM_RECONFIG_SECURITY_REQ_RECONFIG_INTEGRITY_PRESENT)
		{
			p_pdcp_reconfig_ue_entity_req->optional_elems_present |=
				RRC_PDCP_CR_SRB_CONFIG_INT_PRESENT;

			p_pdcp_reconfig_ue_entity_req->config_integrity_protection =
				p_llim_reconfig_security_ue_entity_param->reconfig_integrity;
		}

		/* Fill srb ciphering info in pdcp_reconfig_ue_entity_req message */
		if (p_llim_reconfig_security_ue_entity_param->bitmask &
				RRC_UECC_LLIM_RECONFIG_SECURITY_REQ_RECONFIG_SRB_CIPHERING_PRESENT)
		{
			p_pdcp_reconfig_ue_entity_req->optional_elems_present |=
				RRC_PDCP_CR_SRB_CONFIG_CIPH_PRESENT;

			p_pdcp_reconfig_ue_entity_req->config_srb_ciphering =
				p_llim_reconfig_security_ue_entity_param->
				reconfig_srb_ciphering;
		}
		/* Fill srb ciphering info in pdcp_reconfig_ue_entity_req message */
		if (p_llim_reconfig_security_ue_entity_param->bitmask &
				RRC_UECC_LLIM_RECONFIG_SECURITY_REQ_RECONFIG_DRB_CIPHERING_PRESENT)
		{
			p_pdcp_reconfig_ue_entity_req->optional_elems_present |=
				RRC_PDCP_CR_DRB_CONFIG_CIPH_PRESENT;

			p_pdcp_reconfig_ue_entity_req->config_drb_ciphering =
				p_llim_reconfig_security_ue_entity_param->
				reconfig_drb_ciphering;
		}

		/* Fill configure security offset info in pdcp_reconfig_ue_entity_req message */
		if (p_llim_reconfig_security_ue_entity_param->bitmask &
				RRC_UECC_LLIM_RECONFIG_SECURITY_REQ_CONFIGURE_SECURITY_OFFSET_PRESENT)
		{
			p_pdcp_reconfig_ue_entity_req->optional_elems_present |=
				RRC_PDCP_SECURITY_OFFSET_PRESENT;

			p_pdcp_reconfig_ue_entity_req->pdcp_security_offset.configure_sec_offset =
				p_llim_reconfig_security_ue_entity_param->configure_security_offset;
		}
		/*SPR_17121_START*/
		/* Populate MAC-I */
		if(p_llim_reconfig_security_ue_entity_param->bitmask & 
				UECC_LLIM_RECONFIGURE_SECURITY_MACI_REQ_PRESENT)
		{
			l3_memcpy_wrapper(&(p_pdcp_reconfig_ue_entity_req->mac_i_req),
					&(p_llim_reconfig_security_ue_entity_param->mac_i_req),
					sizeof(rrc_mac_i_msg_t));		
			p_pdcp_reconfig_ue_entity_req->optional_elems_present |= 
				RRC_PDCP_RECONFIG_MACI_REQ_PRESENT;
		}
		/*SPR_17121_END*/

		transaction_id = p_llim_reconfig_security_ue_entity_param->transaction_id;
		if(RRC_SUCCESS == rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
					p_pdcp_reconfig_ue_entity_req,
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_llim_reconfig_security_ue_entity_param->cell_index),
					transaction_id,
					p_llim_reconfig_security_ue_entity_param->cell_index))
		{
			UEMH_FSM_SET_STATE(p_ue_ctx, 
					UEMH_STATE_W_FOR_RECONFIG_SECURITY_UE_ENTITY_CNF);
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR, 
					"Fail to send PDCP_RECONFIG_UE_ENTITY_REQ"
					"(for new security keys)");
		}

		/* Deallocate Memory */
		rrc_mem_free(p_pdcp_reconfig_ue_entity_req);
        /* SPR 20522 Fix Start */
		/* + Coverity 81597 */
		p_pdcp_reconfig_ue_entity_req = PNULL;
        /* SPR 20522 Fix End */
		/* - Coverity 81597 */
	} while (0);

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *    FUNCTION NAME: uemh_fsm_ue_in_service_state_reestablishment_ue_entity_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg 
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends RLC_RE_ESTABLISH_UE_ENTITY_REQ to RLC.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_reestablishment_ue_entity_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_re_establish_ue_entity_req_t
		*p_llim_re_establish_ue_entity_req =
		(rrc_uecc_llim_re_establish_ue_entity_req_t *)p_msg;

	rrc_uecc_llim_re_establish_ue_entity_req_t
		*p_llim_re_establish_ue_entity_param = PNULL; 

	rrc_uemh_timer_buf_t                    guard_timer_data;
	rrc_rlc_re_establish_ue_entity_req_t*   
		p_rlc_re_establish_ue_entity_req = PNULL;
	rrc_transaction_id_t    transaction_id;
	rrc_counter_t  counter = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_llim_re_establish_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	p_ue_ctx->curr_op_param.p_reestablish_ue = (rrc_uemh_reestablish_ue_op_param_t*)
		rrc_mem_get (sizeof(rrc_uemh_reestablish_ue_op_param_t));

	if (PNULL == p_ue_ctx->curr_op_param.p_reestablish_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_reestablish_ue is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* Special case on init operation */
	memset_wrapper(p_ue_ctx->curr_op_param.p_reestablish_ue, 0, 
			sizeof(*p_ue_ctx->curr_op_param.p_reestablish_ue));

	p_llim_re_establish_ue_entity_param = 
		&p_ue_ctx->curr_op_param.p_reestablish_ue->uecc_reestablish_ue;

	/* Store Received Request From UECC To Reestablish UE*/
	*p_llim_re_establish_ue_entity_param = *p_llim_re_establish_ue_entity_req;

	/* 1. set guard timer */
	guard_timer_data.auto_delete      = RRC_TRUE;
	guard_timer_data.target_submodule = LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index         = p_llim_re_establish_ue_entity_req->ue_index;
	guard_timer_data.uemh_event       = UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED;
	guard_timer_data.cell_index       = p_llim_re_establish_ue_entity_req->cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Start timer [LLIM_REESTABLISH_UE_ENTITY_TIMER] %u ms.",
			p_rrc_llim_gl_ctx->reestablish_ue_duration);

	p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer =
		rrc_start_timer(p_rrc_llim_gl_ctx->reestablish_ue_duration, 
				&guard_timer_data, sizeof(guard_timer_data), RRC_FALSE);
        /* SPR 18926 Fix Start */
        if (RRC_FALSE == p_llim_re_establish_ue_entity_param->rlc_reestablish_required)
        {
                /* Sending Reestablish req to PDCP only for SRB2 and DRBs.
 *                  * As, Reestablish req to RLC is already sent for SRB1, SRB2 and DRBs
 *                                   * So no need to send it again for RLC.*/
                /* Build and Send PDCP_RE_ESTABLISH_UE_ENTITY_REQ to PDCP */
                if (RRC_SUCCESS ==
                                build_and_send_pdcp_re_establish_ue_entity_req(p_ue_ctx))
                {
                        UEMH_FSM_SET_STATE(p_ue_ctx,
                                        UEMH_STATE_W_FOR_PDCP_REESTABLISH_UE_ENTITY_CNF);
                }
                RRC_LLIM_UT_TRACE_EXIT();
                return;
        }
        /* SPR 18926 Fix Stop */

	do {
		/* Memory allocate for (rrc_rlc_re_establish_ue_entity_req_t)*/
		p_rlc_re_establish_ue_entity_req =
			(rrc_rlc_re_establish_ue_entity_req_t*)
			rrc_mem_get(sizeof(rrc_rlc_re_establish_ue_entity_req_t));

		if (PNULL == p_rlc_re_establish_ue_entity_req)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
					"Memory allocation failure for" 
					"rlc_re_establish_ue_entity_req");
			break;
		} 
		/* Init Operation */
		memset_wrapper(p_rlc_re_establish_ue_entity_req, RRC_NULL,
				sizeof(rrc_rlc_re_establish_ue_entity_req_t));


		p_rlc_re_establish_ue_entity_req->ue_index =
			p_llim_re_establish_ue_entity_param->ue_index;

		for (counter = 0;
				counter < p_llim_re_establish_ue_entity_param->lc_id_list.lc_count;
				counter++)
		{
			p_rlc_re_establish_ue_entity_req->entity_lcids[counter].lc_id =
				p_llim_re_establish_ue_entity_param->
				lc_id_list.lc_id_state[counter].lc_id;
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"RLC RE-ESTABLISH=[%u]",
					p_rlc_re_establish_ue_entity_req->entity_lcids[counter].lc_id);
		   /*SPR 15738 Fix Start*/
                   if(RLC_LLIM_FREEZE == 
			p_llim_re_establish_ue_entity_param->lc_id_list.lc_id_state[counter].state)
                   {
                   	p_rlc_re_establish_ue_entity_req->entity_lcids[counter].bitmask 
				|= RRC_RLC_LC_STATE_PRESENT; 
                   	p_rlc_re_establish_ue_entity_req->entity_lcids[counter].lc_state.state =
                       		RLC_FREEZE;
                   }
		   /*SPR 15738 Fix Stop*/

		}
		p_rlc_re_establish_ue_entity_req->num_entity_lc_id = counter;
		transaction_id = p_llim_re_establish_ue_entity_param->transaction_id;

		rrc_rlc_il_send_rrc_rlc_re_establish_ue_entity_req(
				p_rlc_re_establish_ue_entity_req,
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_llim_re_establish_ue_entity_param->cell_index),
				transaction_id,
				p_llim_re_establish_ue_entity_param->cell_index);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_RLC_REESTABLISH_UE_ENTITY_CNF);

		if (PNULL != p_rlc_re_establish_ue_entity_req)
		{
			/* Deallocate memory */
			rrc_mem_free(p_rlc_re_establish_ue_entity_req);
            /* SPR 20522 Fix Start */
			/* + Coverity 81535 */
			p_rlc_re_establish_ue_entity_req = PNULL;
			/* - Coverity 81535 */
            /* SPR 20522 Fix End */
		}

	} while (0);
	RRC_LLIM_UT_TRACE_EXIT();

}

/******************************************************************************
 *    FUNCTION NAME: uemh_fsm_ue_in_service_state_change_crnti_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg 
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends PHY_CHANGE_CRNTI_REQ to PHY.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_CHANGE_CRNTI_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_change_crnti_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_change_crnti_req_t *p_llim_change_crnti_req = PNULL;
	rrc_uecc_llim_change_crnti_req_t *p_llim_change_crnti_param = PNULL;
	rrc_phy_change_crnti_req_t* p_phy_change_crnti_req = PNULL;

	rrc_uemh_timer_buf_t                    guard_timer_data;
	rrc_return_t            result = RRC_FAILURE;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	/* Point to UECC_LLIM_CHANGE_CRNTI_REQ */
	p_llim_change_crnti_req = (rrc_uecc_llim_change_crnti_req_t*)p_msg;



	p_ue_ctx->curr_op_param.p_change_crnti = (rrc_uemh_change_crnti_op_param_t*)
		rrc_mem_get (sizeof(rrc_uemh_change_crnti_op_param_t));
	if (PNULL == p_ue_ctx->curr_op_param.p_change_crnti) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_change_crnti is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/* Special case on init operation */
	memset_wrapper(p_ue_ctx->curr_op_param.p_change_crnti, RRC_NULL, 
			sizeof(rrc_uemh_change_crnti_op_param_t));

	p_llim_change_crnti_param = 
		&p_ue_ctx->curr_op_param.p_change_crnti->change_crnti_req;

	*p_llim_change_crnti_param = *p_llim_change_crnti_req;

	/* 1. set guard timer */
	guard_timer_data.auto_delete      = RRC_TRUE;
	guard_timer_data.target_submodule = LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index         = p_llim_change_crnti_req->ue_index;
	guard_timer_data.uemh_event       = UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED;
	guard_timer_data.cell_index       = p_llim_change_crnti_req->cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Start timer [LLIM_CHANGE_CRNTI_TIMER] %u ms.",
			p_rrc_llim_gl_ctx->change_crnti_duration);

	p_ue_ctx->curr_op_param.p_change_crnti->guard_timer =
		rrc_start_timer(p_rrc_llim_gl_ctx->change_crnti_duration, 
				&guard_timer_data, sizeof(guard_timer_data), RRC_FALSE);

	do {
		/* Memory allocate for (rrc_phy_change_crnti_req_t)*/
		p_phy_change_crnti_req =
			(rrc_phy_change_crnti_req_t*)
			rrc_mem_get(sizeof(rrc_phy_change_crnti_req_t));

		if (PNULL == p_phy_change_crnti_req)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
					"Memory allocation failure for" 
					"rrc_phy_change_crnti_req_t");
			break;
		} 
		/* Init Operation */
		memset_wrapper(p_phy_change_crnti_req, RRC_NULL,
				sizeof(rrc_phy_change_crnti_req_t));


		/* Fill Ue Index */
		p_phy_change_crnti_req->ue_index = 
			p_llim_change_crnti_param->ue_index;
		/* Fill Old C-RNTI */
		p_phy_change_crnti_req->old_crnti = 
			p_llim_change_crnti_param->old_crnti;

		/* Fill New-CRNTI */
		p_phy_change_crnti_req->new_crnti = 
			p_llim_change_crnti_param->new_crnti;

		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
				"PHY CHANGE OLD C-RNTI=[%u] and New C-RNTI=[%u]",
				p_phy_change_crnti_req->old_crnti,
				p_phy_change_crnti_req->new_crnti);

		rrc_phy_il_send_rrc_phy_change_crnti_req(
				p_phy_change_crnti_req,
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,p_llim_change_crnti_param->cell_index),
				p_llim_change_crnti_param->transaction_id,
				p_llim_change_crnti_param->cell_index);
		/* Switch state and wait for PHY CHANGE CRNTI CNF from phy */
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_PHY_CHANGE_CRNTI_CNF);

		if (PNULL != p_phy_change_crnti_req)
		{
			/* Deallocate memory */
			rrc_mem_free(p_phy_change_crnti_req);
            /* SPR 20522 Fix Start */
			/* Coverity ID 81617 Fix Start*/
			 p_phy_change_crnti_req = PNULL; 
			/* Coverity ID 81617 Fix End*/
            /* SPR 20522 Fix End */
		}
		result = RRC_SUCCESS;
	} while (0);
	if (RRC_SUCCESS != result)
	{
		if (PNULL != p_ue_ctx->curr_op_param.p_change_crnti->guard_timer)
		{
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_change_crnti->guard_timer);
			p_ue_ctx->curr_op_param.p_change_crnti->guard_timer = PNULL;
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();

}
/******************************************************************************
 *   FUNCTION NAME: build_and_send_pdcp_re_establish_ue_entity_req
 *   INPUTS       :rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION: This function build and send re-establish req to pdcp
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static rrc_return_et build_and_send_pdcp_re_establish_ue_entity_req(
		rrc_llim_ue_ctx_t  *p_ue_ctx)
{
	rrc_uecc_llim_re_establish_ue_entity_req_t*
		p_reestablish_ue_entity_req = PNULL;
	rrc_pdcp_re_establish_ue_entity_req_t* 
		p_pdcp_re_establish_ue_entity_req = PNULL;

	rrc_return_et  response = RRC_FAILURE;
	U16  lc_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_ue_ctx);

	p_reestablish_ue_entity_req = 
		&p_ue_ctx->curr_op_param.p_reestablish_ue->uecc_reestablish_ue;

	do {
		p_pdcp_re_establish_ue_entity_req = 
			(rrc_pdcp_re_establish_ue_entity_req_t*)
			rrc_mem_get(sizeof(rrc_pdcp_re_establish_ue_entity_req_t));

		if (PNULL == p_pdcp_re_establish_ue_entity_req)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
					"Memory Allocation failure to"
					"pdcp_re_establish_ue_entity_req");
			break;
		}
		/* 1. send RRC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ */
		memset_wrapper(p_pdcp_re_establish_ue_entity_req, RRC_NULL, sizeof
				(rrc_pdcp_re_establish_ue_entity_req_t));


		/* Ue Index */
		p_pdcp_re_establish_ue_entity_req->ue_index = 
			p_reestablish_ue_entity_req->ue_index;

		for (lc_index = 0; 
				lc_index < p_reestablish_ue_entity_req->lc_id_list.lc_count;
				lc_index++)
		{
                        /* SPR 18926 Fix Start */
                        /* Sending PDCP reestablish req to PDCP for Only SRB1 */
                        if (RRC_TRUE == p_reestablish_ue_entity_req->rlc_reestablish_required)
                        {
                                p_pdcp_re_establish_ue_entity_req->re_est_rb_entities[lc_index].lc_id =
                                        p_reestablish_ue_entity_req->lc_id_list.lc_id_state[lc_index].lc_id;
                                RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"PDCP RE-ESTABLISH=[%u]",
                                                p_pdcp_re_establish_ue_entity_req->re_est_rb_entities[lc_index].lc_id);
                                lc_index++;
                                break;
                        }
                        /* SPR 18926 Fix Stop */

			p_pdcp_re_establish_ue_entity_req->re_est_rb_entities[lc_index].lc_id =
				p_reestablish_ue_entity_req->lc_id_list.lc_id_state[lc_index].lc_id;
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"PDCP RE-ESTABLISH=[%u]",
					p_pdcp_re_establish_ue_entity_req->re_est_rb_entities[lc_index].lc_id);
		}
		/* Total No. of rbs to re-establish */
		p_pdcp_re_establish_ue_entity_req->num_re_est_rb_entity = lc_index;

		response = rrc_pdcp_il_send_rrc_pdcp_re_establish_ue_entity_req(
				p_pdcp_re_establish_ue_entity_req, 
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_reestablish_ue_entity_req->cell_index),
				p_reestablish_ue_entity_req->transaction_id,
				p_reestablish_ue_entity_req->cell_index);

		if (PNULL != p_pdcp_re_establish_ue_entity_req)
		{
			/* Deallocate memory */
			rrc_mem_free(p_pdcp_re_establish_ue_entity_req);
			/* + Coverity 81547 */
            /* SPR 20522 Fix Start */
			p_pdcp_re_establish_ue_entity_req = PNULL;
            /* SPR 20522 Fix End */
			/* - Coverity 81547 */
		}

	}while(0);

	RRC_LLIM_UT_TRACE_EXIT();
	return response;
}
/*
 *   UEMH_STATE_W_FOR_RLC_REESTABLISH_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_rlc_reestablish_ue_state_rlc_cnf 
 *   INPUTS       : void                *p_api 
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue ue reestablish if RLC is OK.
 *       state UEMH_STATE_W_FOR_RLC_REESTABLISH_UE_ENTITY_CNF;
 *       event UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_rlc_reestablish_ue_state_rlc_cnf(
		void                *p_api,             /* p_api */
		void                *p_msg,             /* p_msg */
		rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
		/* Pointer to the LLIM global context data */
		rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
		)
{
	rrc_uecc_llim_re_establish_ue_entity_resp_t 
		uecc_llim_re_establish_ue_entity_resp;
	rrc_uecc_llim_re_establish_ue_entity_req_t *p_reestablish_ue_param = PNULL;
	rrc_counter_t lc_index = RRC_NULL;

	rrc_rlc_re_establish_ue_entity_cnf_t *p_rlc_re_establish_ue_entity_cnf =
		(rrc_rlc_re_establish_ue_entity_cnf_t *)p_msg;

	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

    /*SPR_18186_START*/
    if (PNULL == p_ue_ctx->curr_op_param.p_reestablish_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
                "p_ue_ctx->curr_op_param.p_reestablish_ue is NULL - ignored");
    /*SPR_18186_END*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_reestablish_ue_param = 
		&p_ue_ctx->curr_op_param.p_reestablish_ue->uecc_reestablish_ue;

	memset_wrapper(&uecc_llim_re_establish_ue_entity_resp, RRC_NULL,
			sizeof(rrc_uecc_llim_re_establish_ue_entity_resp_t));

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_reestablish_ue_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored; unused variable p_rrc_llim_gl_ctx=%p"
                ,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (RLC_SUCCESS == p_rlc_re_establish_ue_entity_cnf->response_code)
	{
		/* RLF was detected by MAC, so MAC reset is already sent to MAC */
		/* Build and Send PDCP_RE_ESTABLISH_UE_ENTITY_REQ to PDCP */
		if (RRC_SUCCESS == 
				build_and_send_pdcp_re_establish_ue_entity_req(p_ue_ctx))
		{
			UEMH_FSM_SET_STATE(p_ue_ctx,
					UEMH_STATE_W_FOR_PDCP_REESTABLISH_UE_ENTITY_CNF);
		}
	}
	else if (RLC_PARTIAL_SUCCESS == 
			p_rlc_re_establish_ue_entity_cnf->response_code)
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_REESTABLISH_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer = PNULL;
		}

		/* Fill top level response code */
		uecc_llim_re_establish_ue_entity_resp.response_code = 
			p_rlc_re_establish_ue_entity_cnf->response_code;

		for (lc_index = 0; 
				lc_index < p_rlc_re_establish_ue_entity_cnf->num_error_entity;
				lc_index++)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"Lc_id=[%u] failed at RLC", 
					p_rlc_re_establish_ue_entity_cnf->
					error_entities[lc_index].lc_id);

			uecc_llim_re_establish_ue_entity_resp.rb_error_info[lc_index].lc_id = 
				p_rlc_re_establish_ue_entity_cnf->
				error_entities[lc_index].lc_id;

			llim_fill_response_code(
					&uecc_llim_re_establish_ue_entity_resp.rb_error_info[lc_index].response,
					RRC_RLC_MODULE_ID,
					p_rlc_re_establish_ue_entity_cnf->
					error_entities[lc_index].response);
		}
		/* Fill error list */
		uecc_llim_re_establish_ue_entity_resp.bitmask |= 
			UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP_RB_ERROR_INFO_PRESENT;
		uecc_llim_re_establish_ue_entity_resp.rb_error_counter = lc_index;

		rrc_llim_send_internal_msg(RRC_GET_UECC_MODULE_ID(p_rlc_re_establish_ue_entity_cnf->ue_index),
				UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP,
				sizeof(rrc_uecc_llim_re_establish_ue_entity_resp_t),
				&uecc_llim_re_establish_ue_entity_resp);

		/* switch to UEMH_STATE_UE_ENTITY_IN_SERVICE state */
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free (p_ue_ctx->curr_op_param.p_reestablish_ue);
		p_ue_ctx->curr_op_param.p_reestablish_ue = PNULL;
	}
	else if (RLC_FAILURE == p_rlc_re_establish_ue_entity_cnf->response_code)
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_REESTABLISH_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer = PNULL;
		}

		for (lc_index = 0; 
				lc_index < p_rlc_re_establish_ue_entity_cnf->num_error_entity;
				lc_index++)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"Lc_id=[%u] failed at RLC", 
					p_rlc_re_establish_ue_entity_cnf->
					error_entities[lc_index].lc_id);

			uecc_llim_re_establish_ue_entity_resp.rb_error_info[lc_index].lc_id =
				p_rlc_re_establish_ue_entity_cnf->error_entities[lc_index].lc_id;

			llim_fill_response_code(
					&uecc_llim_re_establish_ue_entity_resp.rb_error_info[lc_index].response,
					RRC_RLC_MODULE_ID,
					p_rlc_re_establish_ue_entity_cnf->
					error_entities[lc_index].response);
		}
		/* Fill error list */
		uecc_llim_re_establish_ue_entity_resp.bitmask |= 
			UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP_RB_ERROR_INFO_PRESENT;
		uecc_llim_re_establish_ue_entity_resp.rb_error_counter = lc_index;

		/* 2. send UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP */
		/* Transaction ID and Ue Index is already filled */
		uecc_llim_re_establish_ue_entity_resp.response_code = 
			p_rlc_re_establish_ue_entity_cnf->response_code;

		rrc_llim_send_internal_msg(RRC_GET_UECC_MODULE_ID(p_rlc_re_establish_ue_entity_cnf->ue_index),
				UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP,
				sizeof(rrc_uecc_llim_re_establish_ue_entity_resp_t),
				&uecc_llim_re_establish_ue_entity_resp);

		/* switch to UEMH_STATE_UE_ENTITY_IN_SERVICE state */
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		if (p_ue_ctx->curr_op_param.p_reestablish_ue != PNULL)
		{
			rrc_mem_free (p_ue_ctx->curr_op_param.p_reestablish_ue);
			p_ue_ctx->curr_op_param.p_reestablish_ue = PNULL;
		}
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/*
 *   UEMH_STATE_W_FOR_PDCP_REESTABLISH_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_pdcp_reestablish_ue_state_pdcp_cnf 
 *
 *   INPUTS       : void                *p_api 
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       state UEMH_STATE_W_FOR_PDCP_REESTABLISH_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_pdcp_reestablish_ue_state_pdcp_cnf(
		void                *p_api,             /* p_api */
		void                *p_msg,             /* p_msg */
		rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
		/* Pointer to the LLIM global context data */
		rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
		)
{
	rrc_uecc_llim_re_establish_ue_entity_resp_t 
		uecc_llim_re_establish_ue_entity_resp; 

	rrc_uecc_llim_re_establish_ue_entity_req_t *p_reestablish_ue_param = PNULL;

	rrc_pdcp_re_establish_ue_entity_cnf_t *p_pdcp_re_establish_ue_entity_cnf =
		(rrc_pdcp_re_establish_ue_entity_cnf_t *)p_msg;

	rrc_counter_t lc_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_re_establish_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_reestablish_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_reestablish_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_reestablish_ue_param = 
		&p_ue_ctx->curr_op_param.p_reestablish_ue->uecc_reestablish_ue;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_reestablish_ue_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/* 1. Stop guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_REESTABLISH_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer);
		p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer = PNULL;
	}

	memset_wrapper(&uecc_llim_re_establish_ue_entity_resp, RRC_NULL,
			sizeof(uecc_llim_re_establish_ue_entity_resp));

	/* fill transaction id */
	uecc_llim_re_establish_ue_entity_resp.transaction_id = 
		p_reestablish_ue_param->transaction_id;

	/* Fill UE Index */
	uecc_llim_re_establish_ue_entity_resp.ue_index =
		p_pdcp_re_establish_ue_entity_cnf->ue_index;
	/* Fill CELL Index */
	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, 
			&uecc_llim_re_establish_ue_entity_resp.cell_index);

	if (PDCP_SUCCESS == p_pdcp_re_establish_ue_entity_cnf->response_code)
	{
		uecc_llim_re_establish_ue_entity_resp.response_code =
			p_pdcp_re_establish_ue_entity_cnf->response_code;

		rrc_llim_send_internal_msg(
				RRC_GET_UECC_MODULE_ID(p_pdcp_re_establish_ue_entity_cnf->ue_index),
				UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP,
				sizeof(rrc_uecc_llim_re_establish_ue_entity_resp_t),
				&uecc_llim_re_establish_ue_entity_resp);
	}
	else if (PDCP_PARTIAL_SUCCESS == 
			p_pdcp_re_establish_ue_entity_cnf->response_code)
	{
		/* Fill Top level response in 
		 * uecc_llim_re_establish_ue_entity_resp */
		uecc_llim_re_establish_ue_entity_resp.response_code =       
			p_pdcp_re_establish_ue_entity_cnf->response_code;

		for (lc_index = 0; 
				lc_index < p_pdcp_re_establish_ue_entity_cnf->num_re_est_rb_entity_error;
				lc_index++)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"Lc_id=[%u] fail to reestablish at PDCP", 
					p_pdcp_re_establish_ue_entity_cnf->
					re_est_rb_error_entities[lc_index].lc_id);

			uecc_llim_re_establish_ue_entity_resp.rb_error_info[lc_index].lc_id =
				p_pdcp_re_establish_ue_entity_cnf->
				re_est_rb_error_entities[lc_index].lc_id;

			llim_fill_response_code(
					&uecc_llim_re_establish_ue_entity_resp.rb_error_info[lc_index].response,
					RRC_PDCP_MODULE_ID,
					p_pdcp_re_establish_ue_entity_cnf->
					re_est_rb_error_entities[lc_index].response);
		}
		/* Fail list present */
		uecc_llim_re_establish_ue_entity_resp.bitmask |= 
			UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP_RB_ERROR_INFO_PRESENT;
		uecc_llim_re_establish_ue_entity_resp.rb_error_counter = lc_index;

		rrc_llim_send_internal_msg(
				RRC_GET_UECC_MODULE_ID(p_pdcp_re_establish_ue_entity_cnf->ue_index),
				UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP,
				sizeof(rrc_uecc_llim_re_establish_ue_entity_resp_t),
				&uecc_llim_re_establish_ue_entity_resp);

	}
	else if (PDCP_FAILURE == p_pdcp_re_establish_ue_entity_cnf->response_code)
	{
		for (lc_index = 0; 
				lc_index < p_pdcp_re_establish_ue_entity_cnf->num_re_est_rb_entity_error;
				lc_index++)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"Lc_id=[%u] failed at PDCP", 
					p_pdcp_re_establish_ue_entity_cnf->
					re_est_rb_error_entities[lc_index].lc_id);

			uecc_llim_re_establish_ue_entity_resp.rb_error_info[lc_index].lc_id = 
				p_pdcp_re_establish_ue_entity_cnf->
				re_est_rb_error_entities[lc_index].lc_id;

			llim_fill_response_code(
					&uecc_llim_re_establish_ue_entity_resp.rb_error_info[lc_index].response,
					RRC_PDCP_MODULE_ID,
					p_pdcp_re_establish_ue_entity_cnf->
					re_est_rb_error_entities[lc_index].response);

		}
		/* Fail list present */
		uecc_llim_re_establish_ue_entity_resp.bitmask |= 
			UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP_RB_ERROR_INFO_PRESENT;
		uecc_llim_re_establish_ue_entity_resp.rb_error_counter = lc_index;

		/* 2. send UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP */
		/* Transaction ID and Ue Index is already filled */
		uecc_llim_re_establish_ue_entity_resp.response_code = 
			p_pdcp_re_establish_ue_entity_cnf->response_code;

		rrc_llim_send_internal_msg(RRC_GET_UECC_MODULE_ID(p_pdcp_re_establish_ue_entity_cnf->ue_index),
				UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP,
				sizeof(rrc_uecc_llim_re_establish_ue_entity_resp_t),
				&uecc_llim_re_establish_ue_entity_resp);
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
				"Invaid response [PDCP_RE_ESTABLISH_UE_ENTITY_CNF]");
	}
	/* switch to UEMH_STATE_UE_ENTITY_IN_SERVICE state */
	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	rrc_mem_free (p_ue_ctx->curr_op_param.p_reestablish_ue);
	p_ue_ctx->curr_op_param.p_reestablish_ue = PNULL;

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_pdcp_mac_i_resp
 *
 *   INPUTS       : void                *p_api 
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends UECC_LLIM_MAC_I_RESP  to the UECC.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_PDCP_MAC_I_RESP
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/


static void uemh_fsm_ue_in_service_state_pdcp_mac_i_resp
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	U16 mac_i_index = RRC_NULL;
	rrc_pdcp_mac_i_resp_t *p_rrc_pdcp_mac_i_resp =
		(rrc_pdcp_mac_i_resp_t *)p_msg;
	rrc_uecc_llim_mac_i_resp_t uecc_llim_mac_i_resp;
    RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:p_ue_ctx=%p"
            ,p_ue_ctx);/*SPR 17777 +-*/
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_rrc_pdcp_mac_i_resp);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	/* Build and send UECC_LLIM_MAC_I_RESP  msg to UECC*/

	memset_wrapper(&uecc_llim_mac_i_resp, 0,
			sizeof(uecc_llim_mac_i_resp));

	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &uecc_llim_mac_i_resp.cell_index);

	uecc_llim_mac_i_resp.ue_index = p_rrc_pdcp_mac_i_resp->ue_index;

	uecc_llim_mac_i_resp.response_code = p_rrc_pdcp_mac_i_resp->
		response_code;

	uecc_llim_mac_i_resp.transaction_id = rrc_get_transaction_id(p_api);

	if ( 0 != p_rrc_pdcp_mac_i_resp->num_var_short_mac_i)
	{
		uecc_llim_mac_i_resp.bitmask |=
			RRC_UECC_LLIM_MSG_AUTH_CODE_LIST_PRESENT;

		uecc_llim_mac_i_resp.msg_auth_code_list.mac_i_count =
			(U8)p_rrc_pdcp_mac_i_resp->num_var_short_mac_i;

		for (mac_i_index = 0;
				mac_i_index< uecc_llim_mac_i_resp.msg_auth_code_list.mac_i_count;
				mac_i_index++)
		{
			if ( RRC_SUCCESS == uecc_llim_mac_i_resp.response_code )
			{
				uecc_llim_mac_i_resp.msg_auth_code_list.mac_i[mac_i_index].
					bitmask |= RRC_UECC_LLIM_ENCODED_MAC_I_PRESENT;
			}

			/*  l3_memcpy_wrapper((void *)uecc_llim_mac_i_resp.msg_auth_code_list.
			    mac_i[mac_i_index].cell_identity,
			    (const void *)p_rrc_pdcp_mac_i_resp->
			    rrc_msg_authentication_code[mac_i_index].cell_identity,
			    sizeof(U32));*/

			l3_memcpy_wrapper((void *)&(uecc_llim_mac_i_resp.msg_auth_code_list.
						mac_i[mac_i_index].cell_identity),
					(const void *)p_rrc_pdcp_mac_i_resp->rrc_msg_authentication_code[mac_i_index].cell_identity,
					sizeof(U32));



			uecc_llim_mac_i_resp.msg_auth_code_list.mac_i[mac_i_index].
				response_code=p_rrc_pdcp_mac_i_resp->
				rrc_msg_authentication_code[mac_i_index].response_code;

			uecc_llim_mac_i_resp.msg_auth_code_list.mac_i[mac_i_index].
				encoded_mac_i=p_rrc_pdcp_mac_i_resp->
				rrc_msg_authentication_code[mac_i_index].mac_i;
		}
	}

	/* 2. send UEMH_EVENT_PDCP_MAC_I_RESP to UECC */
	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_rrc_pdcp_mac_i_resp->ue_index),
			UECC_LLIM_MAC_I_RESP,
			sizeof(uecc_llim_mac_i_resp),
			&uecc_llim_mac_i_resp);

	RRC_LLIM_UT_TRACE_EXIT();
}

/*SPR_19066_START*/
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_pdcp_ho_prep_info_resp
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends PDCP_HO_PREP_INFO_RESP to the UECC.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_PDCP_HO_PREP_INFO_RESP
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_pdcp_ho_prep_info_resp
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
    U16 mac_i_index = RRC_NULL;
    rrc_pdcp_ho_prep_info_resp_t *p_rrc_pdcp_ho_prep_info_resp =
        (rrc_pdcp_ho_prep_info_resp_t *)p_msg;
    rrc_uecc_llim_ho_prep_info_resp_t uecc_llim_ho_prep_info_resp;

    RRC_LLIM_UT_TRACE_ENTER();

    RRC_ASSERT(PNULL != p_api);
    RRC_ASSERT(PNULL != p_rrc_pdcp_ho_prep_info_resp);
    RRC_ASSERT(PNULL != p_ue_ctx);
    RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

    /* Build and send UEMH_EVENT_PDCP_HO_PREP_INFO_RESP msg to UECC*/
    memset_wrapper(&uecc_llim_ho_prep_info_resp, 0,
            sizeof(uecc_llim_ho_prep_info_resp));

    rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &uecc_llim_ho_prep_info_resp.cell_index);

    uecc_llim_ho_prep_info_resp.ue_index = p_rrc_pdcp_ho_prep_info_resp->ue_index;

    uecc_llim_ho_prep_info_resp.response_code = p_rrc_pdcp_ho_prep_info_resp->
        response_code;

    uecc_llim_ho_prep_info_resp.transaction_id = rrc_get_transaction_id(p_api);

    if(PDCP_SUCCESS == p_rrc_pdcp_ho_prep_info_resp->response_code)
    {
            if ( 0 != p_rrc_pdcp_ho_prep_info_resp->num_var_short_mac_i)
            {
                uecc_llim_ho_prep_info_resp.bitmask |=
                    RRC_UECC_LLIM_MACI_MSG_RESP_PRESENT;

                uecc_llim_ho_prep_info_resp.msg_auth_code_list.mac_i_count =
                    (U8)p_rrc_pdcp_ho_prep_info_resp->num_var_short_mac_i;

                for (mac_i_index = 0;
                        mac_i_index< uecc_llim_ho_prep_info_resp.msg_auth_code_list.mac_i_count;
                        mac_i_index++)
                {
                    uecc_llim_ho_prep_info_resp.msg_auth_code_list.mac_i[mac_i_index].
                        bitmask |= RRC_UECC_LLIM_ENCODED_MAC_I_PRESENT;
                    l3_memcpy_wrapper((void *)&(uecc_llim_ho_prep_info_resp.msg_auth_code_list.
                                mac_i[mac_i_index].cell_identity),
                            (const void *)p_rrc_pdcp_ho_prep_info_resp->rrc_msg_authentication_code[mac_i_index].cell_identity,
                            sizeof(U32));



                    uecc_llim_ho_prep_info_resp.msg_auth_code_list.mac_i[mac_i_index].
                        response_code=p_rrc_pdcp_ho_prep_info_resp->
                        rrc_msg_authentication_code[mac_i_index].response_code;

                    uecc_llim_ho_prep_info_resp.msg_auth_code_list.mac_i[mac_i_index].
                        encoded_mac_i=p_rrc_pdcp_ho_prep_info_resp->
                        rrc_msg_authentication_code[mac_i_index].mac_i;
                }
            }
        
        if(RRC_PDCP_HO_PREP_UE_INACTIVE_TIME_RESP_PRESENT
                & p_rrc_pdcp_ho_prep_info_resp->optional_elems_present)
        {
            uecc_llim_ho_prep_info_resp.bitmask |=
                RRC_UECC_LLIM_HO_PREP_INACTIVE_TIME_RESP_PRESENT;
            uecc_llim_ho_prep_info_resp.ue_inactivity_time_resp.ue_inactive_time_val =
                p_rrc_pdcp_ho_prep_info_resp->ue_inactivity_time_resp.ue_inactive_time_val;
        }
    }

    /* 2. send UEMH_EVENT_PDCP_HO_PREP_INFO_RESP to UECC */
    rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_rrc_pdcp_ho_prep_info_resp->ue_index),
            UECC_LLIM_HO_PREP_INFO_RESP,
            sizeof(uecc_llim_ho_prep_info_resp),
            &uecc_llim_ho_prep_info_resp);

    RRC_LLIM_UT_TRACE_EXIT();
}
/*SPR_19066_END*/


/*SPR_19066_START*/
/*Code Removed */
/*SPR_19066_END*/


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_pdcp_sn_hfn_status_resp
 *
 *   INPUTS       : void                *p_api 
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends UECC_LLIM_SN_HFN_STATUS_RESP  to the UECC.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/


static void uemh_fsm_ue_in_service_state_pdcp_sn_hfn_status_resp
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_pdcp_sn_hfn_status_resp_t *p_pdcp_sn_hfn_status_resp =
		(rrc_pdcp_sn_hfn_status_resp_t *)p_msg;
	rrc_uecc_llim_sn_hfn_status_resp_t uecc_llim_sn_hfn_status_resp;
	U16 list_cnt_indx ;

    RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:p_ue_ctx=%p",p_ue_ctx)/*SPR 17777 +-*/
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_sn_hfn_status_resp);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	/* Build and send PDCP_SN_HFN_STATUS_RESP  msg to UECC*/

	memset_wrapper(&uecc_llim_sn_hfn_status_resp, 0,
			sizeof(uecc_llim_sn_hfn_status_resp));

	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, 
			&uecc_llim_sn_hfn_status_resp.cell_index);

	uecc_llim_sn_hfn_status_resp.ue_index =
		p_pdcp_sn_hfn_status_resp->ue_index;
	uecc_llim_sn_hfn_status_resp.response_code =
		p_pdcp_sn_hfn_status_resp->response_code;
	uecc_llim_sn_hfn_status_resp.transaction_id =
		rrc_get_transaction_id(p_api);

	uecc_llim_sn_hfn_status_resp.sn_hfn_status_list.count =
		(U8)p_pdcp_sn_hfn_status_resp->num_lc_sn_hfn_status;  

	if (((RRC_SUCCESS == uecc_llim_sn_hfn_status_resp.response_code)
				||(RRC_PARTIAL_SUCCESS == uecc_llim_sn_hfn_status_resp.response_code))
			&& (0 != uecc_llim_sn_hfn_status_resp.sn_hfn_status_list.count))
	{ 
		uecc_llim_sn_hfn_status_resp.bitmask |=
			UECC_LLIM_SN_HFN_STATUS_PRESENT;
	}


	for( list_cnt_indx = 0;
			list_cnt_indx < uecc_llim_sn_hfn_status_resp.
			sn_hfn_status_list.count;
			list_cnt_indx++)
	{
		uecc_llim_sn_hfn_status_resp.sn_hfn_status_list.
			sn_hfn_status[list_cnt_indx].lc_id =
			p_pdcp_sn_hfn_status_resp->
			lc_sn_hfn_status[list_cnt_indx].lc_id;

		uecc_llim_sn_hfn_status_resp.sn_hfn_status_list.
			sn_hfn_status[list_cnt_indx].ul_count_value.sn_count =
			p_pdcp_sn_hfn_status_resp->
			lc_sn_hfn_status[list_cnt_indx].ul_sn_cnt;

		uecc_llim_sn_hfn_status_resp.sn_hfn_status_list.
			sn_hfn_status[list_cnt_indx].ul_count_value.hfn_count =
			p_pdcp_sn_hfn_status_resp->
			lc_sn_hfn_status[list_cnt_indx].ul_hfn_cnt;


		uecc_llim_sn_hfn_status_resp.sn_hfn_status_list.
			sn_hfn_status[list_cnt_indx].dl_count_value.sn_count =
			p_pdcp_sn_hfn_status_resp->
			lc_sn_hfn_status[list_cnt_indx].dl_sn_cnt;

		uecc_llim_sn_hfn_status_resp.sn_hfn_status_list.
			sn_hfn_status[list_cnt_indx].dl_count_value.hfn_count =
			p_pdcp_sn_hfn_status_resp->
			lc_sn_hfn_status[list_cnt_indx].dl_hfn_cnt;

		if ( p_pdcp_sn_hfn_status_resp->lc_sn_hfn_status[list_cnt_indx].
				optional_elems_present &
				RRC_PDCP_UL_RECV_SN_PRESENT )
		{

			uecc_llim_sn_hfn_status_resp.sn_hfn_status_list.
				sn_hfn_status[list_cnt_indx].bitmask |= 
				UECC_LLIM_RECEIVE_STATUS_OF_UL_PDCP_SDU_PRESENT ;

			l3_memcpy_wrapper(uecc_llim_sn_hfn_status_resp.sn_hfn_status_list.
					sn_hfn_status[list_cnt_indx].
					status_of_ul_pdcp_sdu.receive_status_of_ul_pdcp_sdu,
					p_pdcp_sn_hfn_status_resp->lc_sn_hfn_status[list_cnt_indx].
					ul_rcv_sn_val.ul_rcv_sn,
					MAX_UL_PDCP_SDU);
		}

	}

	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_pdcp_sn_hfn_status_resp->ue_index),
			UECC_LLIM_SN_HFN_STATUS_RESP,
			sizeof(uecc_llim_sn_hfn_status_resp),
			&uecc_llim_sn_hfn_status_resp);



	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME:
 *   uemh_fsm_ue_in_service_state_s1u_reconfig_ue_entity_req
 *
 *   INPUTS       : void                *p_api 
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends/reports UECC_LLIM_S1U_RECONFIGIRE_UE_ENTITY_RESP
 *       (Failure) to the UECC.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ;
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/

static void uemh_fsm_ue_in_service_state_s1u_reconfig_ue_entity_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_s1u_reconfigure_req_t    *p_s1u_reconfigure_req =
		(rrc_uecc_llim_s1u_reconfigure_req_t *)p_msg;
	rrc_s1u_reconfigure_ue_entity_req_t s1u_reconfigure_ue_entity_req;
	rrc_uecc_llim_s1u_reconfigure_cnf_t s1u_reconfigure_cnf; 

	rrc_counter_t      lc_cntr;
	rrc_counter_t      tunnel_cntr;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_s1u_reconfigure_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:%p p_rrc_llim_gl_ctx =%p"
            ,p_api,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/

	memset_wrapper(&s1u_reconfigure_ue_entity_req, 0, 
			sizeof(rrc_s1u_reconfigure_ue_entity_req_t));

	memset_wrapper(&s1u_reconfigure_cnf, 0, sizeof(rrc_uecc_llim_s1u_reconfigure_cnf_t));
	/* Fill the msg */

	memset_wrapper(&s1u_reconfigure_ue_entity_req, 0,
			sizeof(s1u_reconfigure_ue_entity_req));

	s1u_reconfigure_ue_entity_req.ue_index = p_s1u_reconfigure_req->ue_index;
	if ( p_s1u_reconfigure_req->bitmask & 
			RRC_UECC_LLIM_S1U_SETUP_SAP_REQ_LIST_PRESENT)
	{
		s1u_reconfigure_ue_entity_req.num_setup_sap_req =
			p_s1u_reconfigure_req->setup_sap_req_list.
			num_setup_sap_req;

		for ( lc_cntr = 0;
				lc_cntr < s1u_reconfigure_ue_entity_req.num_setup_sap_req;
				lc_cntr++ )
		{

			s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
				lc_id = 
				p_s1u_reconfigure_req->setup_sap_req_list.
				setup_sap_req[lc_cntr].lc_id;


			s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
				qos_id =
				p_s1u_reconfigure_req->setup_sap_req_list.
				setup_sap_req[lc_cntr].qos_id;


			if ( p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].bitmask &
					RRC_UECC_LLIM_S1U_BUFFER_IND_PRESENT )
			{ 
				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					bitmask |= RRC_S1U_IE_SETUP_BUFFER_IND_PRESENT;

				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					buffer_ind.buffer_ind = 0;
			}                  

			if ( p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].bitmask &
					RRC_UECC_LLIM_S1U_TEID_SELF_PRESENT )
			{
				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					bitmask |= RRC_S1U_IE_SETUP_TEID_SELF_PRESENT;

				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					teid_self.teid =
					p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].teid_self;
			}

			if ( p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].bitmask &
					RRC_UECC_LLIM_S1U_SEQ_NUM_PRESENT )
			{
				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					bitmask |= RRC_S1U_IE_SETUP_SEQ_NUM_PRESENT;

				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					seq_num.ul_sequence_number =
					p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].seq_num.ul_sequence_number;

				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					seq_num.dl_sequence_number =
					p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].seq_num.dl_sequence_number;

			}

			if ( p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].bitmask &
					RRC_UECC_LLIM_S1U_SEQ_FLAG_PRESENT )
			{
				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					bitmask |= RRC_S1U_IE_SETUP_SEQ_FLAG_PRESENT;

				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					seq_flag.disable =
					p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].seq_flag.disable;
			}


			if ( p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].bitmask &
					RRC_UECC_LLIM_S1U_REORDERING_REQ_PRESENT )
			{
				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					bitmask |= RRC_S1U_IE_SETUP_REORDERING_REQD_PRESENT;

				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					reordering_reqd.reordering_reqd =
					p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].reordering_reqd.reordering_reqd;
			}

			s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
				num_tunnel_info = 
				p_s1u_reconfigure_req->setup_sap_req_list.
				setup_sap_req[lc_cntr].tunnel_count;

			for ( tunnel_cntr = 0;
					tunnel_cntr < s1u_reconfigure_ue_entity_req.
					setup_sap_req[lc_cntr].num_tunnel_info;
					tunnel_cntr ++ )
			{
				s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
					tunnel_info[tunnel_cntr].sap_flag =
					p_s1u_reconfigure_req->setup_sap_req_list.
					setup_sap_req[lc_cntr].tunnel_info[tunnel_cntr].sap_flag;

				if ( p_s1u_reconfigure_req->setup_sap_req_list.
						setup_sap_req[lc_cntr].tunnel_info[tunnel_cntr].bitmask &&
						RRC_UECC_LLIM_S1U_TUNNEL_INFO_TEID_PEER_PRESENT )
				{
					s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
						tunnel_info[tunnel_cntr].bitmask |=
						RRC_S1U_IE_TUNNEL_INFO_TEID_PEER_PRESENT ;

					s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
						tunnel_info[tunnel_cntr].teid_peer.teid =
						p_s1u_reconfigure_req->setup_sap_req_list.
						setup_sap_req[lc_cntr].tunnel_info[tunnel_cntr].teid_peer;

				}
                /* SPR 19838 : Coverity 10072 fix start */
				if ( p_s1u_reconfigure_req->setup_sap_req_list.
						setup_sap_req[lc_cntr].tunnel_info[tunnel_cntr].bitmask &
						RRC_UECC_LLIM_S1U_TUNNEL_INFO_TRANSPORT_ADDRESS_PRESENT )
                /* SPR 19838 : Coverity 10072 fix end */
				{

					s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
						tunnel_info[tunnel_cntr].bitmask |=
						RRC_S1U_IE_TUNNEL_INFO_TRANSPORT_ADDR_PRESENT ;

					s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
						tunnel_info[tunnel_cntr].transport_addr.data_length =
						p_s1u_reconfigure_req->setup_sap_req_list.
						setup_sap_req[lc_cntr].tunnel_info[tunnel_cntr].
						transport_addr.data_length;

					l3_memcpy_wrapper(s1u_reconfigure_ue_entity_req.
							setup_sap_req[lc_cntr].tunnel_info[tunnel_cntr].
							transport_addr.data,
							p_s1u_reconfigure_req->setup_sap_req_list.
							setup_sap_req[lc_cntr].tunnel_info[tunnel_cntr].
							transport_addr.data,
							s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
							tunnel_info[tunnel_cntr].transport_addr.data_length);

				}
			}
#ifdef ENDC_ENABLED
            /*OPTION3X Changes*/
            if( RRC_UECC_LLIM_S1U_DC_BEARER_TYPE_PRESENT &
                    p_s1u_reconfigure_req->setup_sap_req_list.
                    setup_sap_req[lc_cntr].bitmask)
            {
                /*update the DC bearer type in S1U_RECONFIG_REQ*/
                s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
                    bitmask |= RRC_S1U_IE_SETUP_DC_BEARER_TYPE_PRESENT;

                s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
                    dc_bearer_type.dc_bearer_type = 
                    p_s1u_reconfigure_req->setup_sap_req_list.
                    setup_sap_req[lc_cntr].dc_bearer_type;
            }
            if( RRC_UECC_LLIM_S1U_PDCP_SN_SIZE_ENDC_PRESENT &
                    p_s1u_reconfigure_req->setup_sap_req_list.
                    setup_sap_req[lc_cntr].bitmask)
            {
                s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
                    dc_bearer_type.bitmask |=
                    RRC_S1U_IE_SAP_PARAM_PRESENT;

                s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
                    dc_bearer_type.sap_param.sn_size =
                    p_s1u_reconfigure_req->setup_sap_req_list.
                    setup_sap_req[lc_cntr].pdcp_sn_size_endc;
            }

            if( RRC_UECC_LLIM_S1U_RLC_MODE_ENDC_PRESENT &
                    p_s1u_reconfigure_req->setup_sap_req_list.
                    setup_sap_req[lc_cntr].bitmask)
            {
            	if ( RRC_NULL == p_s1u_reconfigure_req->setup_sap_req_list.
            		setup_sap_req[lc_cntr].rlc_mode_endc )
                {
                s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
                    dc_bearer_type.sap_param.rlc_mode =
                    p_s1u_reconfigure_req->setup_sap_req_list.
                    	setup_sap_req[lc_cntr].rlc_mode_endc + RRC_ONE;
                }
                else
                {
                	s1u_reconfigure_ue_entity_req.setup_sap_req[lc_cntr].
                    	dc_bearer_type.sap_param.rlc_mode =
                    	RRC_NULL;
                }
            }
            /*OPTION3X Changes*/
#endif
		}
	}

	if ( p_s1u_reconfigure_req->bitmask &
			RRC_UECC_LLIM_S1U_REL_SAP_REQ_LIST_PRESENT)
	{

		s1u_reconfigure_ue_entity_req.num_rel_sap_req =
			p_s1u_reconfigure_req->rel_sap_req_list.
			num_rel_sap_req;

		for ( lc_cntr = 0;
				lc_cntr < s1u_reconfigure_ue_entity_req.num_rel_sap_req;
				lc_cntr++ )
		{

			s1u_reconfigure_ue_entity_req.rel_sap_req[lc_cntr].
				lc_id =
				p_s1u_reconfigure_req->rel_sap_req_list.
				rel_sap_req[lc_cntr].lc_id;

			s1u_reconfigure_ue_entity_req.rel_sap_req[lc_cntr].
				num_release_tunnel_info =
				p_s1u_reconfigure_req->rel_sap_req_list.
				rel_sap_req[lc_cntr].tunnel_count;


			for ( tunnel_cntr = 0;
					tunnel_cntr < s1u_reconfigure_ue_entity_req.
					rel_sap_req[lc_cntr].num_release_tunnel_info;
					tunnel_cntr ++ )
			{

				s1u_reconfigure_ue_entity_req.rel_sap_req[lc_cntr].
					release_tunnel_info[tunnel_cntr].teid_self =
					p_s1u_reconfigure_req->rel_sap_req_list.
					rel_sap_req[lc_cntr].release_tunnel_info[tunnel_cntr].
					teid_self;

				
                                /* Coverity Fix 83349 Start */
                                if ( p_s1u_reconfigure_req->setup_sap_req_list.
                                setup_sap_req[lc_cntr].tunnel_info[tunnel_cntr].bitmask &
                                RRC_UECC_LLIM_S1U_TUNNEL_INFO_TRANSPORT_ADDRESS_PRESENT )
                                /* Coverity Fix 83349 Stop */
				{
					s1u_reconfigure_ue_entity_req.rel_sap_req[lc_cntr].
						release_tunnel_info[tunnel_cntr].bitmask |=
						RRC_S1U_IE_RELEASE_TUNNEL_INFO_TRANSPORT_ADDR_PRESENT ;

					s1u_reconfigure_ue_entity_req.rel_sap_req[lc_cntr].
						release_tunnel_info[tunnel_cntr].transport_addr.data_length =
						p_s1u_reconfigure_req->rel_sap_req_list.
						rel_sap_req[lc_cntr].release_tunnel_info[tunnel_cntr].
						transport_addr.data_length;

					l3_memcpy_wrapper(s1u_reconfigure_ue_entity_req.
							rel_sap_req[lc_cntr].release_tunnel_info[tunnel_cntr].
							transport_addr.data,
							p_s1u_reconfigure_req->rel_sap_req_list.
							rel_sap_req[lc_cntr].release_tunnel_info[tunnel_cntr].
							transport_addr.data,
							s1u_reconfigure_ue_entity_req.rel_sap_req[lc_cntr].
							release_tunnel_info[tunnel_cntr].transport_addr.
							data_length);

				}
			} 
		}
	}

	if (!(p_s1u_reconfigure_req->bitmask &
				RRC_UECC_LLIM_S1U_SETUP_SAP_REQ_LIST_PRESENT) &&
			!(p_s1u_reconfigure_req->bitmask &
				RRC_UECC_LLIM_S1U_REL_SAP_REQ_LIST_PRESENT))
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,
				" S1U_SETUP_SAP_REQ_LIST & S1U_REL_SAP_REQ_LIST are  absent !!!");

		/* Build the failure resp */
		s1u_reconfigure_cnf.ue_index = p_ue_ctx->ue_index;
		s1u_reconfigure_cnf.response_code = RRC_FAILURE;


		/* send UECC_LLIM_S1U_RECONFIGURE_CNF i,e the failure resp  to UECC */
		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_s1u_reconfigure_req->ue_index),
				UECC_LLIM_S1U_RECONFIGURE_CNF,
				sizeof(rrc_uecc_llim_s1u_reconfigure_cnf_t),
				&s1u_reconfigure_cnf);
		RRC_LLIM_UT_TRACE_EXIT();
		return ;
	}

	/* Send the S1U_RECONFIGURE_UE_ENTITY_REQ  msg to S1U */
	rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
			&s1u_reconfigure_ue_entity_req, 
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_s1u_reconfigure_req->cell_index),
			p_s1u_reconfigure_req->transaction_id,
			p_s1u_reconfigure_req->cell_index);


	RRC_LLIM_UT_TRACE_EXIT();

}


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_sn_hfn_status_ind
 *   INPUTS       : void                *p_api 
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function sends PDCP_SN_HFN_STATUS_IND to PDCP
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE
 *       event "UEMH_EVENT_UECC_SN_HFN_STATUS_IND"
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_sn_hfn_status_ind (
		void                *p_api,             /* p_api */
		void                *p_msg,             /* p_msg */
		rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
		/* Pointer to the LLIM global context data */
		rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
		)
{
	U32 hfn_status_count = 0;
	rrc_transaction_id_t    transaction_id =0;
	rrc_uecc_llim_sn_hfn_status_ind_t    *p_uecc_llim_sn_hfn_status_ind=
		(rrc_uecc_llim_sn_hfn_status_ind_t *)p_msg;
	rrc_pdcp_sn_hfn_status_ind_t          pdcp_sn_hfn_status_ind;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_uecc_llim_sn_hfn_status_ind);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:%p p_rrc_llim_gl_ctx=%p"
            ,p_api,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/

	memset_wrapper(&pdcp_sn_hfn_status_ind,0,
			sizeof(pdcp_sn_hfn_status_ind));


	pdcp_sn_hfn_status_ind.ue_index = 
		p_uecc_llim_sn_hfn_status_ind->ue_index;
	pdcp_sn_hfn_status_ind.num_lc_sn_hfn_status = 
		p_uecc_llim_sn_hfn_status_ind->count;

	for (hfn_status_count =0; hfn_status_count < 
			p_uecc_llim_sn_hfn_status_ind->count; hfn_status_count++)
	{
		pdcp_sn_hfn_status_ind.lc_sn_hfn_status[hfn_status_count].lc_id = 
			p_uecc_llim_sn_hfn_status_ind->sn_hfn_status
			[hfn_status_count].lc_id;

		pdcp_sn_hfn_status_ind.lc_sn_hfn_status[hfn_status_count].dl_sn_cnt = 
			p_uecc_llim_sn_hfn_status_ind->sn_hfn_status
			[hfn_status_count].dl_count_value.sn_count;

		pdcp_sn_hfn_status_ind.lc_sn_hfn_status[hfn_status_count].dl_hfn_cnt = 
			p_uecc_llim_sn_hfn_status_ind->sn_hfn_status
			[hfn_status_count].dl_count_value.hfn_count;

		pdcp_sn_hfn_status_ind.lc_sn_hfn_status[hfn_status_count].ul_sn_cnt = 
			p_uecc_llim_sn_hfn_status_ind->sn_hfn_status
			[hfn_status_count].ul_count_value.sn_count;

		pdcp_sn_hfn_status_ind.lc_sn_hfn_status[hfn_status_count].ul_hfn_cnt = 
			p_uecc_llim_sn_hfn_status_ind->sn_hfn_status
			[hfn_status_count].ul_count_value.hfn_count;

		if (UECC_LLIM_RECEIVE_STATUS_OF_UL_PDCP_SDU_PRESENT &
				p_uecc_llim_sn_hfn_status_ind->sn_hfn_status[
				hfn_status_count].bitmask)
		{
			l3_memcpy_wrapper(pdcp_sn_hfn_status_ind.lc_sn_hfn_status[
					hfn_status_count].ul_rcv_sn_val.ul_rcv_sn,
					p_uecc_llim_sn_hfn_status_ind->
					sn_hfn_status[hfn_status_count].
					status_of_ul_pdcp_sdu.receive_status_of_ul_pdcp_sdu,
					MAX_UL_PDCP_SDU);
		}
	}

	transaction_id = p_uecc_llim_sn_hfn_status_ind->transaction_id;
	rrc_pdcp_il_send_rrc_pdcp_sn_hfn_status_ind(&pdcp_sn_hfn_status_ind,
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID, p_uecc_llim_sn_hfn_status_ind->cell_index),
			transaction_id,
			p_uecc_llim_sn_hfn_status_ind->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}



/*JANEN_END */
/*
 *   UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: get_response_create_fail
 *   INPUTS       : uemh_fsm_state_et to_be_del_layers
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       Determine failed on creat ue operation layer from the first deleted one
 *
 *   RETURNS:
 *       Error code from rrc_llim_uecc_response_et
 *
 ******************************************************************************/
static rrc_llim_uecc_response_et get_response_create_fail
(
 uemh_fsm_state_et to_be_del_layers
 )
{
	switch (to_be_del_layers)
	{
		case UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF:
			return RRC_LLIM_CREATE_UE_FAIL_MAC;

		case UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF:
			return RRC_LLIM_CREATE_UE_FAIL_RLC;

		case UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF:
			return RRC_LLIM_CREATE_UE_FAIL_PDCP;

		case UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF:
			return RRC_LLIM_CREATE_UE_FAIL_S1U;

		default:
			RRC_ASSERT(0);
			RRC_LLIM_TRACE(RRC_ERROR, "get_response_create_fail: unexpected state"
					"!");
			return RRC_LLIM_FAILURE;
	}
}

/******************************************************************************
 *   FUNCTION NAME: get_response_create_te
 *
 *   INPUTS       : uemh_fsm_state_et to_be_del_layers
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       Determine expired on creat ue operation layer from the first deleted one
 *
 *   RETURNS:
 *       Error code from rrc_llim_uecc_response_et
 *
 ******************************************************************************/
static rrc_llim_uecc_response_et get_response_create_te
(
 uemh_fsm_state_et to_be_del_layers
 )
{
	switch (to_be_del_layers)
	{
		case UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF:
			return RRC_LLIM_CREATE_UE_TE_PHY;

		case UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF:
			return RRC_LLIM_CREATE_UE_TE_MAC;

		case UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF:
			return RRC_LLIM_CREATE_UE_TE_RLC;

		case UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF:
			return RRC_LLIM_CREATE_UE_TE_PDCP;

		case UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF:
			return RRC_LLIM_CREATE_UE_TE_S1U;

		default:
			RRC_ASSERT(0);
			RRC_LLIM_TRACE(RRC_ERROR, "get_response_create_te: unexpected state!");
			return RRC_LLIM_FAILURE;
	}
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_check_del_ue_op_status_and_report
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *                  rrc_cell_index_t    cell_index
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check delete UE operation status
 *       if UE deletition complete send confirmation to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_check_del_ue_op_status_and_report
(
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx,
 rrc_cell_index_t    cell_index
 )
{
	rrc_uemh_delete_ue_op_param_t *p_delete_ue_op = PNULL;
	/*valgrind_fix start*/
	U16 ue_index = 0; 
	/*valgrind_fix start*/ 
	/* CR 101 changes start*/
	U8 lc_counter = 0;
	/* CR 101 changes stop*/

	RRC_ASSERT(PNULL != p_ue_ctx);

	RRC_LLIM_UT_TRACE_ENTER();


	RRC_ASSERT(PNULL != p_ue_ctx->curr_op_param.p_del_ue);
	p_delete_ue_op = p_ue_ctx->curr_op_param.p_del_ue;
	/*valgrind_fix start*/
	ue_index =  p_delete_ue_op->ue_index;
	/*valgrind_fix start*/ 
	/*SPR_14411_fix Start */ 
	/* SPR 21458 Start */
        if ((UEMH_FSM_DELETE_COMPLETE == p_delete_ue_op->
	         deletion_proc_complete_status ) ||
	    (UEMH_FSM_CREATE_FAIL_OR_TE_DELETION_COMPLETE == 
	    p_delete_ue_op->deletion_proc_complete_status) || (p_ue_ctx->l2_instance_reset_flag == RRC_TRUE))
	/* SPR 21458 End */
        {
        /*SPR_14411_fix Stop */
		/* 1. Stop guard timer */
		if (PNULL != p_delete_ue_op->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_DELETE_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_delete_ue_op->guard_timer);
			p_delete_ue_op->guard_timer = PNULL;
		}

		if ( (UEMH_FSM_CREATE_FAIL == p_delete_ue_op->del_op_root) ||
				(UEMH_FSM_CREATE_TE == p_delete_ue_op->del_op_root) )
		{
			rrc_uecc_llim_create_ue_entity_resp_t create_ue_entity_resp;
			memset_wrapper(&create_ue_entity_resp, 0, sizeof(create_ue_entity_resp)); 
			/* 2. send UECC_LLIM_CREATE_UE_ENTITY_RESP */
			create_ue_entity_resp.cell_index        = cell_index;
			create_ue_entity_resp.transaction_id    = p_delete_ue_op->
				transaction_id;
			create_ue_entity_resp.ue_index          = p_delete_ue_op->ue_index;

			if (UEMH_FSM_CREATE_FAIL == p_delete_ue_op->del_op_root)
			{
				create_ue_entity_resp.response_code = get_response_create_fail
					(p_delete_ue_op->to_be_del_layers);
			}
			else
			{
				RRC_ASSERT(UEMH_FSM_CREATE_TE == p_delete_ue_op->del_op_root);
				create_ue_entity_resp.response_code = get_response_create_te
					(p_delete_ue_op->to_be_del_layers);
			}

			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_delete_ue_op->ue_index),
					UECC_LLIM_CREATE_UE_ENTITY_RESP,
					sizeof(create_ue_entity_resp),
					&create_ue_entity_resp);
		}
		else
		{
			rrc_uecc_llim_delete_ue_entity_resp_t delete_ue_entity_resp;
			/* CR 101 changes start*/
			p_delete_ue_op = p_ue_ctx->curr_op_param.p_del_ue;
			/* CR 101 changes stop*/

			RRC_ASSERT(UEMH_FSM_DEL_REQ == p_delete_ue_op->del_op_root);

			/* 2. send UECC_LLIM_DELETE_UE_ENTITY_RESP */
			delete_ue_entity_resp.cell_index        = cell_index;
			delete_ue_entity_resp.transaction_id    = p_delete_ue_op->
				transaction_id;
			delete_ue_entity_resp.ue_index          = p_delete_ue_op->ue_index;
			delete_ue_entity_resp.response_code     = RRC_SUCCESS;

			/* CR 101 changes start*/
			delete_ue_entity_resp.delete_lc_status_counter = p_delete_ue_op->
				mac_delete_lc_status_counter; 

			for (lc_counter = 0; lc_counter < p_delete_ue_op->mac_delete_lc_status_counter;
					lc_counter++)
			{
				delete_ue_entity_resp.delete_lc_status[lc_counter].status = 
					p_delete_ue_op->mac_delete_lc_status[lc_counter].status;

				delete_ue_entity_resp.delete_lc_status[lc_counter].lch_id = 
					p_delete_ue_op->mac_delete_lc_status[lc_counter].lch_id;
			}
			/* CR 101 changes stop*/

			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_delete_ue_op->ue_index),
					UECC_LLIM_DELETE_UE_ENTITY_RESP,
					sizeof(delete_ue_entity_resp),
					&delete_ue_entity_resp);

		}

		/* 3. delete from UE DB and free */
		uemh_cleanup_ue_ctx(p_ue_ctx);
		/*valgrind_fix start */
		rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,ue_index,
				PNULL);
		/*valgrind_fix stop */

		rrc_mem_free(p_ue_ctx);
		/* Coverity ID 81598 Fix Start*/
		/*SPR 19423 Fix Start*/
		/*This is ignore coveirty warning so uncommented the code*/
		p_ue_ctx = PNULL; 
		/*SPR 19423 Fix End*/
		/* Coverity ID 81598 Fix End*/
	}
        /*SPR_14411_fix Start */
    else
    {
	if (( UEMH_FSM_CREATE_FAIL == p_delete_ue_op->del_op_root )||
	    ( UEMH_FSM_CREATE_TE == p_delete_ue_op->del_op_root ))
	{

	    if ( p_delete_ue_op->cur_mask_to_be_del_layers &
		(1 << UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF))
	    {
		p_delete_ue_op->deletion_proc_complete_status = 
		    UEMH_FSM_CREATE_FAIL_OR_TE_DELETION_COMPLETE;	
	    }
	    else if ( p_delete_ue_op->cur_mask_to_be_del_layers &
		(1 << UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF ))
	    {
	        rrc_phy_delete_ue_entity_req_t  phy_delete_ue_entity_req;

	        /* Delete on PHY level: send RRC_PHY_DELETE_UE_ENTITY_REQ */
	        /*rrc_llim_set_cell_index (&phy_delete_ue_entity_req,
	  		    RRC_PHY_MODULE_ID, RRC_PHY_DELETE_UE_ENTITY_REQ,
			    cell_index);*/

	        phy_delete_ue_entity_req.ue_index = ue_index;
	        rrc_phy_il_send_rrc_phy_delete_ue_entity_req(
			    &phy_delete_ue_entity_req, 
			    RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,cell_index),
				p_delete_ue_op->transaction_id,cell_index);//14411 cell index added 

	        RRC_ASSERT(UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF < 16);

	        p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
			    UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF;

	        UEMH_FSM_SET_STATE(p_ue_ctx, 
			    UEMH_STATE_W_FOR_PHY_DELETE_UE_ENTITY_CNF);

    }
	    else if ( p_delete_ue_op->cur_mask_to_be_del_layers &
		(1<< UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF))
	    {
                rrc_mac_delete_ue_entity_req_t  mac_delete_ue_entity_req;

	        /* Delete on MAC level: send RRC_MAC_DELETE_UE_ENTITY_REQ */
        	/*rrc_llim_set_cell_index (&mac_delete_ue_entity_req,
                        RRC_MAC_MODULE_ID, RRC_MAC_DELETE_UE_ENTITY_REQ,
                        cell_index);*/
            
	        mac_delete_ue_entity_req.ue_index = ue_index;
        	rrc_mac_il_send_rrc_mac_delete_ue_entity_req(
                        &mac_delete_ue_entity_req, 
	                RRC_LLIM_MODULE_ID,
		        	        RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,cell_index), 
						p_delete_ue_op->transaction_id,cell_index);//14411 cell index added

        	RRC_ASSERT(UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF < 16);
	        p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
            	        UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF;
		
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_MAC_DELETE_UE_ENTITY_CNF);

	    }
	    else if ( p_delete_ue_op->cur_mask_to_be_del_layers &
		(1 << UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF)) 
	    {
                rrc_rlc_delete_ue_entity_req_t rlc_delete_ue_entity_req;

                /* Delete on RLC level: send RRC_RLC_DELETE_UE_ENTITY_REQ */
                /*rrc_llim_set_cell_index (&rlc_delete_ue_entity_req,
                    RRC_RLC_MODULE_ID, RRC_RLC_DELETE_UE_ENTITY_REQ,
                    cell_index);*/
            
                rlc_delete_ue_entity_req.ue_index = ue_index;
                rrc_rlc_il_send_rrc_rlc_delete_ue_entity_req(
                    &rlc_delete_ue_entity_req, 
                    RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,cell_index),
					p_delete_ue_op->transaction_id,cell_index);//14411 cell index added
            
                RRC_ASSERT(UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF < 16);
        	p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
            	    UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF;
        
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_RLC_DELETE_UE_ENTITY_CNF);
	    }

	}
	else
	{
	    if ((p_delete_ue_op->cur_mask_to_be_del_layers & 
	    (1 << UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF)) && 
 	        (p_delete_ue_op->cur_mask_to_be_del_layers &
	        (1 << UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF)))
	  {
	    if (p_delete_ue_op->del_req_mask_to_lower_layers &
		(1 << UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF))
	    {
		if (p_delete_ue_op->cur_mask_to_be_del_layers &
		    (1 << UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF))
		{
		    if (p_delete_ue_op->del_req_mask_to_lower_layers &
			(1 << UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF))
		    {
			if (p_delete_ue_op->cur_mask_to_be_del_layers &
			     (1 << UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF))
			{
			    /* Coverity Fix 71411 Start */
			    if (!(p_delete_ue_op->del_req_mask_to_lower_layers &
				(1 << UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF)))
			    {
				/* Coverity Fix 71411 Stop */
            			rrc_phy_delete_ue_entity_req_t  phy_delete_ue_entity_req;

			        /* Delete on PHY level: send RRC_PHY_DELETE_UE_ENTITY_REQ */
		                /*rrc_llim_set_cell_index (&phy_delete_ue_entity_req,
                    		RRC_PHY_MODULE_ID, RRC_PHY_DELETE_UE_ENTITY_REQ,
		                    cell_index);*/
            
		                phy_delete_ue_entity_req.ue_index = ue_index;
			            rrc_phy_il_send_rrc_phy_delete_ue_entity_req(
		                    &phy_delete_ue_entity_req, 
		                    RRC_LLIM_MODULE_ID,
		                    		RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,cell_index),
						p_delete_ue_op->transaction_id,cell_index);//14411 cell index added
        
        			RRC_ASSERT(UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF < 16);
        			
				p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
			            UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF;
			
		        	UEMH_FSM_SET_STATE(p_ue_ctx, 
				    UEMH_STATE_W_FOR_PHY_DELETE_UE_ENTITY_CNF);
			    }  
			}

		    } 
		    else
		    {
            	        rrc_mac_delete_ue_entity_req_t  mac_delete_ue_entity_req;

	                /* Delete on MAC level: send RRC_MAC_DELETE_UE_ENTITY_REQ */
        	        /*rrc_llim_set_cell_index (&mac_delete_ue_entity_req,
                            RRC_MAC_MODULE_ID, RRC_MAC_DELETE_UE_ENTITY_REQ,
                            cell_index);*/
            
	                mac_delete_ue_entity_req.ue_index = ue_index;
        	        rrc_mac_il_send_rrc_mac_delete_ue_entity_req(
                            &mac_delete_ue_entity_req, 
	                    RRC_LLIM_MODULE_ID,
        	            			RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,cell_index), 
						p_delete_ue_op->transaction_id,cell_index);//14411 cell index added
        
        	        RRC_ASSERT(UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF < 16);
	                p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
            		    UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF;
		
		        UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_MAC_DELETE_UE_ENTITY_CNF);
		    }
		}	
	    }
	    /*SPR_16716_START*/
	    else if (p_delete_ue_op->del_req_mask_to_lower_layers &
			    (1 << UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF))
	    { 
		    if (p_delete_ue_op->cur_mask_to_be_del_layers &
				    (1 << UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF))
		    {
			    /* Coverity Fix 71411 Start */
			    if (!(p_delete_ue_op->del_req_mask_to_lower_layers &
						    (1 << UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF)))
			    {
				    /* Coverity Fix 71411 Stop */
				    rrc_phy_delete_ue_entity_req_t  phy_delete_ue_entity_req;

				    /* Delete on PHY level: send RRC_PHY_DELETE_UE_ENTITY_REQ 
				    rrc_llim_set_cell_index (&phy_delete_ue_entity_req,
						    RRC_PHY_MODULE_ID, RRC_PHY_DELETE_UE_ENTITY_REQ,
						    cell_index);*/

				    RRC_LLIM_TRACE(RRC_INFO,"API:RRC->PHY:RRC_PHY_DELETE_UE_ENTITY_REQ:[UE:%u]", ue_index);
				    phy_delete_ue_entity_req.ue_index = ue_index;
				    rrc_phy_il_send_rrc_phy_delete_ue_entity_req(
						    &phy_delete_ue_entity_req, 
						    RRC_LLIM_MODULE_ID,
						    		RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,cell_index),
							p_delete_ue_op->transaction_id,cell_index);

				    RRC_ASSERT(UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF < 16);

				    p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
					    UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF;

				    UEMH_FSM_SET_STATE(p_ue_ctx, 
						    UEMH_STATE_W_FOR_PHY_DELETE_UE_ENTITY_CNF);
			    }  
		    }

	    }
	    /*SPR_16716_END*/
	    else
	    { 
		    rrc_rlc_delete_ue_entity_req_t rlc_delete_ue_entity_req;

		    /* Delete on RLC level: send RRC_RLC_DELETE_UE_ENTITY_REQ */
		    /*rrc_llim_set_cell_index (&rlc_delete_ue_entity_req,
                    RRC_RLC_MODULE_ID, RRC_RLC_DELETE_UE_ENTITY_REQ,
                    cell_index);*/
            
                rlc_delete_ue_entity_req.ue_index = ue_index;
                rrc_rlc_il_send_rrc_rlc_delete_ue_entity_req(
                    &rlc_delete_ue_entity_req, 
                    RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,cell_index),
					p_delete_ue_op->transaction_id,cell_index);//14411 cell index added
            
                RRC_ASSERT(UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF < 16);
        	p_delete_ue_op->del_req_mask_to_lower_layers |= 1 <<
            	    UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF;
        
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_RLC_DELETE_UE_ENTITY_CNF);
	    }
	  }
	}
    }
    /*SPR_14411_fix Stop */

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_ue_state_delete_ue_req
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function switch current deletition operation to new one.
 *       state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF;
 *       event UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_ue_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t    *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;
	rrc_uemh_delete_ue_op_param_t           *p_delete_ue_op = p_ue_ctx->
		curr_op_param.p_del_ue;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_delete_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_rrc_llim_gl_ctx:%p",
			p_api,p_rrc_llim_gl_ctx);

	/* Switch current deletition operation to new one. */
	p_delete_ue_op->transaction_id      = p_delete_ue_entity_req->
		transaction_id;
	p_delete_ue_op->del_op_root         = UEMH_FSM_DEL_REQ;

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_ue_state_phy_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function mark UE deleted on PHY level and
 *       if UE deletition complete send confirmation to UECC
 *       state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_ue_state_phy_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_delete_ue_op_param_t *p_delete_ue_op = p_ue_ctx->curr_op_param.
		p_del_ue;
	rrc_cell_index_t cell_index = RRC_INVALID_CELL_INDEX;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_delete_ue_op->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/* Mark UE deleted on PHY level */
	/*SPR_14411_fix Start */
	p_delete_ue_op->cur_mask_to_be_del_layers |= (1 <<
		UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF);

	if ( UEMH_FSM_DEL_REQ == p_delete_ue_op->del_op_root) 
	{
	    p_delete_ue_op->deletion_proc_complete_status = 
		UEMH_FSM_DELETE_COMPLETE;
	}
    /* SPR 19325 Fix Start */
	else if (( UEMH_FSM_CREATE_FAIL == p_delete_ue_op->del_op_root )||
	    ( UEMH_FSM_CREATE_TE == p_delete_ue_op->del_op_root ))
	{
	    p_delete_ue_op->deletion_proc_complete_status = 
		        UEMH_FSM_CREATE_FAIL_OR_TE_DELETION_COMPLETE;	
    }
    /* SPR 19325 Fix Stop */
	/*SPR_14411_fix Stop */
         
	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &cell_index);

	if ( RRC_INVALID_CELL_INDEX == cell_index )
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Cell Index; unused variable p_msg=%p"
                ,p_msg);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	uemh_fsm_check_del_ue_op_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx,
			cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_ue_state_mac_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function mark UE deleted on MAC level and
 *       if UE deletition complete send confirmation to UECC
 *       state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF;
 *       event UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_ue_state_mac_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_delete_ue_op_param_t *p_delete_ue_op = PNULL;
	rrc_cell_index_t       cell_index = RRC_INVALID_CELL_INDEX;
	/* CR 101 changes start*/
	U8    lc_counter = RRC_NULL;
	rrc_mac_delete_ue_entity_cnf_t  *p_mac_delete_ue_entity_cnf = 
		(rrc_mac_delete_ue_entity_cnf_t *)p_msg;
	/* CR 101 changes stop*/


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	p_delete_ue_op = p_ue_ctx->curr_op_param.
		p_del_ue;
	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_delete_ue_op->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* Mark UE deleted on MAC level */
	/*SPR_14411_fix Start */
        p_delete_ue_op->cur_mask_to_be_del_layers |= (1 <<
            UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF);
       /*SPR_14411_fix Stop */


	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &cell_index);

	if ( RRC_INVALID_CELL_INDEX == cell_index )
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Cell Index");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* CR 101 changes start*/
	p_delete_ue_op->mac_delete_lc_status_counter = p_mac_delete_ue_entity_cnf->
		delete_lc_status_counter;

	for (lc_counter = 0; lc_counter < p_delete_ue_op->mac_delete_lc_status_counter;
			lc_counter++)
	{
		p_delete_ue_op->mac_delete_lc_status[lc_counter].status = 
			p_mac_delete_ue_entity_cnf->delete_lc_status[lc_counter].status;

		p_delete_ue_op->mac_delete_lc_status[lc_counter].lch_id = 
			p_mac_delete_ue_entity_cnf->delete_lc_status[lc_counter].lch_id;
	}
	/* CR 101 changes stop*/

	uemh_fsm_check_del_ue_op_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx,
			cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_ue_state_rlc_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function mark UE deleted on RLC level and
 *       if UE deletition complete send confirmation to UECC
 *       state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF;
 *       event UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_ue_state_rlc_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_delete_ue_op_param_t *p_delete_ue_op = p_ue_ctx->curr_op_param.
		p_del_ue;
	rrc_cell_index_t cell_index = RRC_INVALID_CELL_INDEX;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_delete_ue_op->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* Mark UE deleted on RLC level */
	/*SPR_14411_fix Start */
        p_delete_ue_op->cur_mask_to_be_del_layers |= (1 <<
            UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF);
        /*SPR_14411_fix Stop */
	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &cell_index);

	if ( RRC_INVALID_CELL_INDEX == cell_index )
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Cell Index;unused variable p_msg=%p",p_msg);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	uemh_fsm_check_del_ue_op_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx,
			cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_ue_state_pdcp_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function mark UE deleted on PDCP level and
 *       if UE deletition complete send confirmation to UECC
 *       state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_ue_state_pdcp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_delete_ue_op_param_t *p_delete_ue_op = p_ue_ctx->curr_op_param.
		p_del_ue;
	rrc_cell_index_t cell_index = RRC_INVALID_CELL_INDEX;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_delete_ue_op->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* Mark UE deleted on PDCP level */
	/*SPR_14411_fix Start */
        p_delete_ue_op->cur_mask_to_be_del_layers |= (1 <<
        UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF);
        /*SPR_14411_fix Stop */

	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &cell_index);

	if ( RRC_INVALID_CELL_INDEX == cell_index )
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Cell Index;unused variable p_msg = %p",p_msg);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	uemh_fsm_check_del_ue_op_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx,
			cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_ue_state_s1u_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function mark UE deleted on S1-U layer and
 *       if UE deletition complete send confirmation to UECC
 *       state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF;
 *       event UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_ue_state_s1u_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_delete_ue_op_param_t *p_delete_ue_op = PNULL;
	rrc_cell_index_t cell_index = RRC_INVALID_CELL_INDEX;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	p_delete_ue_op = p_ue_ctx->curr_op_param.p_del_ue;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_delete_ue_op->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* Mark UE deleted on S1-U layer */
	/*SPR_14411_fix Start */
        p_delete_ue_op->cur_mask_to_be_del_layers |= (1 <<
                    UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF);
        /*SPR_14411_fix Stop */

	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &cell_index);

	if ( RRC_INVALID_CELL_INDEX == cell_index )
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Cell Index; unused variable p_msg=%p",p_msg);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	uemh_fsm_check_del_ue_op_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx,
			cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_ue_state_timer_expired
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function report about failed delete ue operaion.
 *       state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF;
 *       event UEMH_EVENT_DELETE_UE_TIMER_EXPIRED
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_ue_state_timer_expired
(
 rrc_timer_t         timer_id,           /* timer_id - unused */
 void                *p_timer_buf,       /* p_uemh_timer_buf - unused */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
    rrc_uemh_delete_ue_op_param_t *p_delete_ue_op = PNULL;
    /*SPR_14411_fix Start */
    /* Coverity Fix 88002 Start*/
    uemh_fsm_del_lower_layer_et lower_layers_to_be_del = UEMH_FSM_DEL_INVALID; 
    /* Coverity Fix 88002 Stop*/
    U16 ue_index = 0; 
    rrc_cell_index_t cell_index = RRC_INVALID_CELL_INDEX;
    rrc_transaction_id_t    transaction_id = RRC_NULL;
    /*SPR_14411_fix Stop */
    RRC_LLIM_UT_TRACE_ENTER();

    RRC_ASSERT(PNULL != p_ue_ctx);
    RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
    RRC_ASSERT(PNULL != p_timer_buf);

    RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, " Unused variable in fsm p_timer_buf:%p timer_id :%p",
            p_timer_buf,timer_id);

    if (PNULL == p_ue_ctx->curr_op_param.p_del_ue)
    {
        RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,
            "p_ue_ctx->curr_op_param.p_del_ue is NULL - ignored");
        RRC_LLIM_UT_TRACE_EXIT();
        return;
    }

    p_delete_ue_op = p_ue_ctx->curr_op_param.p_del_ue;
    /* Timer expired and is not valid any more */
    RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Timer [LLIM_DELETE_UE_ENTITY_TIMER] expired");
    p_delete_ue_op->guard_timer = PNULL;

    /*SPR_14411_fix Start */
    ue_index =  p_delete_ue_op->ue_index;
    cell_index = p_ue_ctx->cell_index;
    transaction_id = p_delete_ue_op->transaction_id ;

    /* SPR 22226 Fix Start */
    /* Lines Deleted */
    if (!(p_delete_ue_op->del_req_mask_to_lower_layers &
        (1 << UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF)))
    {
        lower_layers_to_be_del = UEMH_FSM_DEL_PHY;

        if (!(p_delete_ue_op->del_req_mask_to_lower_layers &
            (1 << UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF)))
        {
            lower_layers_to_be_del = UEMH_FSM_DEL_MAC;

            if (!(p_delete_ue_op->del_req_mask_to_lower_layers &
                (1 << UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF)))
            {
                lower_layers_to_be_del = UEMH_FSM_DEL_RLC;
            }
        }
    }
    /* SPR 22226 Fix End */
    switch (lower_layers_to_be_del)
    {
        case UEMH_FSM_DEL_RLC :
            {
                rrc_rlc_delete_ue_entity_req_t rlc_delete_ue_entity_req;

                /* Delete on RLC level: send RRC_RLC_DELETE_UE_ENTITY_REQ */
                /*rrc_llim_set_cell_index (&rlc_delete_ue_entity_req,
                    RRC_RLC_MODULE_ID, RRC_RLC_DELETE_UE_ENTITY_REQ,
                    cell_index);*/
            
                rlc_delete_ue_entity_req.ue_index = ue_index;
                rrc_rlc_il_send_rrc_rlc_delete_ue_entity_req(
                 	&rlc_delete_ue_entity_req, 
                    RRC_LLIM_MODULE_ID,
                    RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,cell_index),
                    transaction_id,cell_index);//SPR 14411 
            }

        case UEMH_FSM_DEL_MAC :
            {
                rrc_mac_delete_ue_entity_req_t  mac_delete_ue_entity_req;

                /* Delete on MAC level: send RRC_MAC_DELETE_UE_ENTITY_REQ */
                /* rrc_llim_set_cell_index (&mac_delete_ue_entity_req,
                    RRC_MAC_MODULE_ID, RRC_MAC_DELETE_UE_ENTITY_REQ,
                    cell_index);*/

                mac_delete_ue_entity_req.ue_index = ue_index;
                rrc_mac_il_send_rrc_mac_delete_ue_entity_req(
                    &mac_delete_ue_entity_req, 
                    RRC_LLIM_MODULE_ID,
                    RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,cell_index), 
                    transaction_id,cell_index);//SPR 1441
            }

        case UEMH_FSM_DEL_PHY :
            {
                rrc_phy_delete_ue_entity_req_t  phy_delete_ue_entity_req;

                /* Delete on PHY level: send RRC_PHY_DELETE_UE_ENTITY_REQ */
                /*rrc_llim_set_cell_index (&phy_delete_ue_entity_req,
                    RRC_PHY_MODULE_ID, RRC_PHY_DELETE_UE_ENTITY_REQ,
                    cell_index);*/

                phy_delete_ue_entity_req.ue_index = ue_index;
                rrc_phy_il_send_rrc_phy_delete_ue_entity_req(
                    &phy_delete_ue_entity_req, 
                    RRC_LLIM_MODULE_ID,
                    RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,cell_index),
                    transaction_id,cell_index);//SPR 14411
            }
            /* SPR 17213 Fix Start */
		    break;
        default:
            {
                /* SPR 22226 Fix Start */
                RRC_TRACE(RRC_INFO, "UEMH_EVENT_DELETE_UE_TIMER_EXPIRED: "
                    "Delete Request has been sent to ALL Lower Layers for ue index %u", 
                    ue_index);
                /* SPR 22226 Fix End */
            }
            /* SPR 17213 Fix End */
    }
	/*SPR_14411_fix Stop */

	if ( (UEMH_FSM_CREATE_FAIL == p_delete_ue_op->del_op_root) ||
			(UEMH_FSM_CREATE_TE == p_delete_ue_op->del_op_root) )
    {
        rrc_uecc_llim_create_ue_entity_resp_t create_ue_entity_resp;
        /*SPR 20774 Fix Start*/
        memset_wrapper(&create_ue_entity_resp, RRC_NULL, sizeof(rrc_uecc_llim_create_ue_entity_resp_t));
        /*SPR 20774 Fix Stop*/

        /* 1. send UECC_LLIM_CREATE_UE_ENTITY_RESP */
        create_ue_entity_resp.transaction_id    = p_delete_ue_op->
            transaction_id;
        /*Bug_14855 fix starts */
        create_ue_entity_resp.cell_index	= p_ue_ctx->cell_index;
        /*Bug_14855 fix ends */
        create_ue_entity_resp.ue_index          = p_delete_ue_op->ue_index;
        create_ue_entity_resp.response_code     = RRC_LLIM_DELETE_UE_TE;

        rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_delete_ue_op->ue_index),
                UECC_LLIM_CREATE_UE_ENTITY_RESP,
                sizeof(create_ue_entity_resp),
                &create_ue_entity_resp);
    }
	else
	{
		rrc_uecc_llim_delete_ue_entity_resp_t delete_ue_entity_resp;

        /*SPR 20948 start*/ 
        memset_wrapper(&delete_ue_entity_resp, 0, sizeof(delete_ue_entity_resp)); 
        /*SPR 20948 stop*/ 
		RRC_ASSERT(UEMH_FSM_DEL_REQ == p_delete_ue_op->del_op_root);

		/* 1. send UECC_LLIM_DELETE_UE_ENTITY_RESP */
		delete_ue_entity_resp.cell_index        = p_ue_ctx->cell_index;
		delete_ue_entity_resp.transaction_id    = p_delete_ue_op->
			transaction_id;
		delete_ue_entity_resp.ue_index          = p_delete_ue_op->ue_index;
		delete_ue_entity_resp.response_code     = RRC_FAILURE;

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_delete_ue_op->ue_index),
				UECC_LLIM_DELETE_UE_ENTITY_RESP,
				sizeof(delete_ue_entity_resp),
				&delete_ue_entity_resp);
	}
	/*valgrind_fix_start*/
	ue_index = p_delete_ue_op->ue_index;
	/*valgrind_fix_stop*/

	uemh_cleanup_ue_ctx(p_ue_ctx);    
	/* 2. delete from UE DB and free */
	/*valgrind_fix_start*/
	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,ue_index,
			PNULL);
	/*valgrind_fix_start*/

	rrc_mem_free(p_ue_ctx);
    /* SPR 20522 Fix Start */
	/* + Coverity 81360 */
	p_ue_ctx = PNULL;
    /* SPR 20522 Fix End */
	/* - Coverity 81360 */

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_ue_state_cleanup_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function cleanups UEMH FSM.
 *       state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF;
 *       event UEMH_EVENT_OAMH_CLEANUP_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_ue_state_cleanup_req
(
 void                *p_api,
 void                *p_msg,
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_delete_ue_op_param_t *p_delete_ue_op = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	/*coverity fix start*/
	/*coverity fix stop*/

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p",p_api,p_msg);      

	if (PNULL == p_ue_ctx->curr_op_param.p_del_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_del_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_delete_ue_op = p_ue_ctx->curr_op_param.p_del_ue;

	/* 1. Stop guard timer */
	if (PNULL != p_delete_ue_op->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_DELETE_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_delete_ue_op->guard_timer);
		/* + Coverity 81437 */
		//p_delete_ue_op->guard_timer = PNULL;
		/* - Coverity 81437 */
	}

	/* 2. delete from UE DB and free */
	uemh_cleanup_ue_ctx(p_ue_ctx);   

	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx, p_ue_ctx->ue_index,
			PNULL);        

	rrc_mem_free(p_ue_ctx);
	/* + Coverity 81437 */

    /* SPR 20522 Fix Start */
	p_ue_ctx = PNULL;
    /* SPR 20522 Fix End */
	/* - Coverity 81437 */

	RRC_LLIM_UT_TRACE_EXIT();
}

/*
 *   UEMH_STATE_W_FOR_PDCP_RESUME_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_resume_state_pdcp_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function finishes ue security configuration.
 *       state UEMH_STATE_W_FOR_PDCP_RESUME_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_resume_state_pdcp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_pdcp_resume_ue_entity_cnf_t   *p_pdcp_resume_ue_entity_cnf =
		(rrc_pdcp_resume_ue_entity_cnf_t*)p_msg;

	rrc_uemh_resume_ue_op_param_t *p_resume_ue_param = PNULL;
	U8  lc_index = RRC_NULL;
	rrc_uecc_llim_resume_ue_entity_resp_t uecc_resume_ue_entity_resp;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_resume_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p", p_rrc_llim_gl_ctx);      

	if (PNULL == p_ue_ctx->curr_op_param.p_resume_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_resume_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_resume_ue_param = p_ue_ctx->curr_op_param.p_resume_ue;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_resume_ue_param->
			resume_ue_entity_req.transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* 1. Stop ue security configuration guard timer */
	if (PNULL != p_resume_ue_param->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_RESUME_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_resume_ue_param->guard_timer);
		p_resume_ue_param->guard_timer = PNULL;
	}

	/* 2. send UECC_LLIM_RESUME_UE_ENTITY_RESP */
	memset_wrapper(&uecc_resume_ue_entity_resp, RRC_NULL, sizeof
			(uecc_resume_ue_entity_resp));

	if (PDCP_SUCCESS == p_pdcp_resume_ue_entity_cnf->response_code)
	{
		uecc_resume_ue_entity_resp.response_code = 
			p_pdcp_resume_ue_entity_cnf->response_code;
	}
	else if (PDCP_PARTIAL_SUCCESS == 
			p_pdcp_resume_ue_entity_cnf->response_code)
	{
		uecc_resume_ue_entity_resp.response_code = 
			p_pdcp_resume_ue_entity_cnf->response_code;

		for (lc_index = 0; 
				lc_index < p_pdcp_resume_ue_entity_cnf->num_resume_rb_entity_error;
				lc_index++)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"Lc_id=[%u] fail to reestablish at PDCP",
					p_pdcp_resume_ue_entity_cnf->
					resume_rb_error_entities[lc_index].lc_id);

			uecc_resume_ue_entity_resp.rb_error_info[lc_index].lc_id = 
				p_pdcp_resume_ue_entity_cnf->resume_rb_error_entities[lc_index].
				lc_id;

			/* fill response code : Module Id + Error Code */
			llim_fill_response_code(
					&uecc_resume_ue_entity_resp.rb_error_info[lc_index].response,
					RRC_PDCP_MODULE_ID,
					p_pdcp_resume_ue_entity_cnf->
					resume_rb_error_entities[lc_index].response);
		}
		/* Set Bitmask: Error List Present */
		uecc_resume_ue_entity_resp.bitmask |= 
			UECC_LLIM_RESUME_UE_ENTITY_RESP_RB_ERROR_INFO_PRESENT; 

		uecc_resume_ue_entity_resp.rb_error_counter = 
			p_pdcp_resume_ue_entity_cnf->num_resume_rb_entity_error;
	}
	else if (PDCP_FAILURE ==
			p_pdcp_resume_ue_entity_cnf->response_code)
	{
		uecc_resume_ue_entity_resp.response_code = 
			p_pdcp_resume_ue_entity_cnf->response_code;

		for (lc_index = 0;
				lc_index < p_pdcp_resume_ue_entity_cnf->num_resume_rb_entity_error;
				lc_index++)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"Lc_id=[%u] fail to reestablish at PDCP",
					p_pdcp_resume_ue_entity_cnf->
					resume_rb_error_entities[lc_index].lc_id);

			uecc_resume_ue_entity_resp.rb_error_info[lc_index].lc_id =
				p_pdcp_resume_ue_entity_cnf->resume_rb_error_entities[lc_index].
				lc_id;
			/* fill response code : Module Id + Error Code */
			llim_fill_response_code(
					&uecc_resume_ue_entity_resp.rb_error_info[lc_index].response,
					RRC_PDCP_MODULE_ID,
					p_pdcp_resume_ue_entity_cnf->
					resume_rb_error_entities[lc_index].response);
		}
		/* Set Bitmask: Error List Present */
		uecc_resume_ue_entity_resp.bitmask |= 
			UECC_LLIM_RESUME_UE_ENTITY_RESP_RB_ERROR_INFO_PRESENT; 

		uecc_resume_ue_entity_resp.rb_error_counter = 
			p_pdcp_resume_ue_entity_cnf->num_resume_rb_entity_error;
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Invalid Response "
				"[PDCP_RESUME_UE_ENTITY_CNF]");
		uecc_resume_ue_entity_resp.response_code = L3_FATAL; 
	}

	uecc_resume_ue_entity_resp.transaction_id = p_resume_ue_param->
		resume_ue_entity_req.transaction_id;

	uecc_resume_ue_entity_resp.cell_index = p_resume_ue_param->
		resume_ue_entity_req.cell_index;

	uecc_resume_ue_entity_resp.ue_index = p_resume_ue_param->
		resume_ue_entity_req.ue_index;

	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_pdcp_resume_ue_entity_cnf->ue_index),
			UECC_LLIM_RESUME_UE_ENTITY_RESP,
			sizeof(uecc_resume_ue_entity_resp),
			&uecc_resume_ue_entity_resp);

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	rrc_mem_free(p_ue_ctx->curr_op_param.p_resume_ue);
	p_ue_ctx->curr_op_param.p_resume_ue = PNULL;

	RRC_LLIM_UT_TRACE_EXIT();
}
/*
 *   UEMH_STATE_W_FOR_RECONFIG_SECURITY_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_recfg_security_state_pdcp_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function finishes ue security configuration.
 *       state UEMH_STATE_W_FOR_RECONFIG_SECURITY_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_recfg_security_state_pdcp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_pdcp_reconfig_ue_entity_cnf_t   *p_pdcp_reconfig_ue_entity_cnf =
		(rrc_pdcp_reconfig_ue_entity_cnf_t *)p_msg;

	rrc_uemh_recfg_ue_security_op_param_t *p_recfg_ue_security_param = PNULL;
	rrc_response_t response_code = RRC_NULL;
	rrc_uecc_llim_reconfig_security_resp_t uecc_reconfig_security_resp;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_reconfig_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_rrc_llim_gl_ctx);       

	if (PNULL == p_ue_ctx->curr_op_param.p_recfg_ue_security) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_recfg_ue_security is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_recfg_ue_security_param = p_ue_ctx->curr_op_param.p_recfg_ue_security;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_recfg_ue_security_param->
			recfg_security_req.transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* 1. Stop ue security configuration guard timer */
	if (PNULL != p_recfg_ue_security_param->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_RECONFIG_SECURITY_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_recfg_ue_security_param->guard_timer);
		p_recfg_ue_security_param->guard_timer = PNULL;
	}

	/* 2. send UECC_LLIM_RECONFIG_SECURITY_UE_ENTITY_RESP */
	memset_wrapper(&uecc_reconfig_security_resp, RRC_NULL, sizeof
			(uecc_reconfig_security_resp));

	if (PDCP_SUCCESS == p_pdcp_reconfig_ue_entity_cnf->response_code)
	{
		response_code = SUCCESS;
	}
	else
	{
		response_code = FAILURE;
	}

	uecc_reconfig_security_resp.cell_index = p_recfg_ue_security_param->
		recfg_security_req.cell_index;
	uecc_reconfig_security_resp.transaction_id = p_recfg_ue_security_param->
		recfg_security_req.transaction_id;
	uecc_reconfig_security_resp.ue_index = p_recfg_ue_security_param->
		recfg_security_req.ue_index;
	uecc_reconfig_security_resp.response_code  = response_code;

	/*SPR_17121_START*/
	if(p_pdcp_reconfig_ue_entity_cnf->optional_elems_present & 
			RRC_PDCP_RECONFIG_MACI_RESP_PRESENT)
	{
		uecc_reconfig_security_resp.mac_i.mac_i = 
			p_pdcp_reconfig_ue_entity_cnf->mac_i.mac_i ; 
		uecc_reconfig_security_resp.bitmask |= 
			UECC_LLIM_RECONFIGURE_SECURITY_MACI_RESP_PRESENT;
	}
	/*SPR_17121_END*/
	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_pdcp_reconfig_ue_entity_cnf->ue_index),
			UECC_LLIM_RECONFIG_SECURITY_RESP,
			sizeof(uecc_reconfig_security_resp),
			&uecc_reconfig_security_resp);

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	rrc_mem_free(p_ue_ctx->curr_op_param.p_recfg_ue_security);
	p_ue_ctx->curr_op_param.p_recfg_ue_security = PNULL;

	RRC_LLIM_UT_TRACE_EXIT();
}
/*
 *   UEMH_STATE_W_FOR_CONFIGURE_SECURITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_cfg_security_state_pdcp_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function finishes ue security configuration.
 *       state UEMH_STATE_W_FOR_CONFIGURE_SECURITY_CNF;
 *       event UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_cfg_security_state_pdcp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_pdcp_reconfig_ue_entity_cnf_t   *p_pdcp_reconfig_ue_entity_cnf =
		(rrc_pdcp_reconfig_ue_entity_cnf_t *)p_msg;
	rrc_uemh_cfg_ue_security_op_param_t *p_cfg_ue_security_param    = PNULL;
	rrc_response_t response_code                                    = RRC_NULL;
	rrc_uecc_llim_configure_security_resp_t uecc_configure_security_resp;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_reconfig_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_rrc_llim_gl_ctx);       

	if (PNULL == p_ue_ctx->curr_op_param.p_cfg_ue_security) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_cfg_ue_security is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_cfg_ue_security_param = p_ue_ctx->curr_op_param.p_cfg_ue_security;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_cfg_ue_security_param->
			uecc_cfg_security.transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (PDCP_SUCCESS == p_pdcp_reconfig_ue_entity_cnf->response_code)
	{
		response_code = RRC_SUCCESS;
	}
	else
	{
		response_code = RRC_FAILURE;
	}

	/* 1. Stop ue security configuration guard timer */
	if (PNULL != p_cfg_ue_security_param->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CONFIG_UE_SECURITY_TIMER]");
		rrc_stop_timer(p_cfg_ue_security_param->guard_timer);
		p_cfg_ue_security_param->guard_timer = PNULL;
	}

	/* 2. send UECC_LLIM_CONFIGURE_SECURITY_RESP */
	memset_wrapper(&uecc_configure_security_resp, 0, sizeof
			(uecc_configure_security_resp));

	uecc_configure_security_resp.cell_index     = p_cfg_ue_security_param->
		uecc_cfg_security.cell_index;
	uecc_configure_security_resp.transaction_id = p_cfg_ue_security_param->
		uecc_cfg_security.transaction_id;
	uecc_configure_security_resp.ue_index       = p_cfg_ue_security_param->
		uecc_cfg_security.ue_index;
	uecc_configure_security_resp.response_code  = response_code;

	/*SPR_17121_START*/
	if(p_pdcp_reconfig_ue_entity_cnf->optional_elems_present & 
			RRC_PDCP_RECONFIG_MACI_RESP_PRESENT)
	{
		uecc_configure_security_resp.mac_i.mac_i = 
			p_pdcp_reconfig_ue_entity_cnf->mac_i.mac_i ; 
		uecc_configure_security_resp.bitmask |= 
			UECC_LLIM_CONFIGURE_SECURITY_MACI_RESP_PRESENT;
	}
	/*SPR_17121_END*/
	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_pdcp_reconfig_ue_entity_cnf->ue_index),
			UECC_LLIM_CONFIGURE_SECURITY_RESP,
			sizeof(uecc_configure_security_resp),
			&uecc_configure_security_resp);
	rrc_mem_free (p_ue_ctx->curr_op_param.p_cfg_ue_security);
	p_ue_ctx->curr_op_param.p_cfg_ue_security = PNULL;

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_cfg_security_state_timer_expired
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function finishes ue security configuration and reports
 *       UECC about failure.
 *       state UEMH_STATE_W_FOR_CONFIGURE_SECURITY_CNF;
 *       event UEMH_EVENT_SECURITY_TIMER_EXPIRED
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_cfg_security_state_timer_expired
(
 rrc_timer_t         timer_id,           /* timer_id - unused */
 void                *p_timer_buf,       /* p_uemh_timer_buf - unused */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_cfg_ue_security_op_param_t *p_cfg_ue_security_param = PNULL;
	rrc_uecc_llim_configure_security_resp_t uecc_configure_security_resp;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_rrc_llim_gl_ctx:%p timer_id:%p p_timer_buf:%p ",
			p_rrc_llim_gl_ctx,timer_id,p_timer_buf);

	if (PNULL == p_ue_ctx->curr_op_param.p_cfg_ue_security) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_cfg_ue_security is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_cfg_ue_security_param = p_ue_ctx->curr_op_param.p_cfg_ue_security;

	/* Timer expired and is not valid any more */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Timer [LLIM_CONFIG_UE_SECURITY_TIMER] "
			"expired");
	p_cfg_ue_security_param->guard_timer = PNULL;

	/* 1. send UECC_LLIM_CONFIGURE_SECURITY_RESP (RRC_FAILURE) */
	memset_wrapper(&uecc_configure_security_resp, 0, sizeof
			(uecc_configure_security_resp));

	uecc_configure_security_resp.cell_index     = p_cfg_ue_security_param->
		uecc_cfg_security.cell_index;
	uecc_configure_security_resp.transaction_id = p_cfg_ue_security_param->
		uecc_cfg_security.transaction_id;
	uecc_configure_security_resp.ue_index       = p_cfg_ue_security_param->
		uecc_cfg_security.ue_index;
	uecc_configure_security_resp.response_code  = RRC_FAILURE;

	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(uecc_configure_security_resp.ue_index),
			UECC_LLIM_CONFIGURE_SECURITY_RESP,
			sizeof(uecc_configure_security_resp),
			&uecc_configure_security_resp);

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	rrc_mem_free (p_ue_ctx->curr_op_param.p_cfg_ue_security);
	p_ue_ctx->curr_op_param.p_cfg_ue_security = PNULL;

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_recfg_security_state_timer_expired
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function finishes ue security reconfiguration and reports
 *       UECC about failure.
 *       state UEMH_STATE_W_FOR_RECONFIG_SECURITY_UE_ENTITY_CNF;
 *       event UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED 
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_recfg_security_state_timer_expired
(
 rrc_timer_t         timer_id,           /* timer_id - unused */
 void                *p_timer_buf,       /* p_uemh_timer_buf - unused */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_recfg_ue_security_op_param_t *p_recfg_ue_security_param = PNULL;
	rrc_uecc_llim_reconfig_security_resp_t uecc_reconfig_security_resp;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_rrc_llim_gl_ctx:%p timer_id:%p p_timer_buf:%p ",
			p_rrc_llim_gl_ctx,timer_id,p_timer_buf);

	if (PNULL == p_ue_ctx->curr_op_param.p_recfg_ue_security) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_recfg_ue_security is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_recfg_ue_security_param = p_ue_ctx->curr_op_param.p_recfg_ue_security;

	/* Timer expired and is not valid any more */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Timer [LLIM_RECONFIG_SECURITY_UE_ENTITY_TIMER] "
			"expired");
	p_recfg_ue_security_param->guard_timer = PNULL;

	/* 1. send UECC_LLIM_RECONFIG_SECURITY_RESP (L3_FATAL) */
	memset_wrapper(&uecc_reconfig_security_resp, 0, sizeof
			(uecc_reconfig_security_resp));

	uecc_reconfig_security_resp.cell_index = p_recfg_ue_security_param->
		recfg_security_req.cell_index;

	uecc_reconfig_security_resp.transaction_id = p_recfg_ue_security_param->
		recfg_security_req.transaction_id;

	uecc_reconfig_security_resp.ue_index       = p_recfg_ue_security_param->
		recfg_security_req.ue_index;

	uecc_reconfig_security_resp.response_code  = L3_FATAL;

	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(uecc_reconfig_security_resp.ue_index),
			UECC_LLIM_RECONFIG_SECURITY_RESP,
			sizeof(uecc_reconfig_security_resp),
			&uecc_reconfig_security_resp);

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	rrc_mem_free(p_ue_ctx->curr_op_param.p_recfg_ue_security);
	p_ue_ctx->curr_op_param.p_recfg_ue_security = PNULL;

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_resume_state_timer_expired
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function finishes ue resume operation and reports
 *       UECC about failure.
 *       state UEMH_STATE_W_FOR_PDCP_RESUME_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED 
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_resume_state_timer_expired
(
 rrc_timer_t         timer_id,           /* timer_id - unused */
 void                *p_timer_buf,       /* p_uemh_timer_buf - unused */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_resume_ue_op_param_t *p_resume_ue_param = PNULL;
	rrc_uecc_llim_resume_ue_entity_resp_t uecc_resume_ue_entity_resp;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_rrc_llim_gl_ctx:%p timer_id:%p p_timer_buf:%p ",
			p_rrc_llim_gl_ctx,timer_id,p_timer_buf);

	if (PNULL == p_ue_ctx->curr_op_param.p_resume_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_resume_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_resume_ue_param = p_ue_ctx->curr_op_param.p_resume_ue;

	/* Timer expired and is not valid any more */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Timer [LLIM_RESUME_UE_ENTITY_TIMER] "
			"expired");
	p_resume_ue_param->guard_timer = PNULL;

	/* 1. send UECC_LLIM_RESUME_UE_ENTITY_RESP (L3_FATAL) */
	memset_wrapper(&uecc_resume_ue_entity_resp, RRC_NULL, sizeof
			(uecc_resume_ue_entity_resp));

	uecc_resume_ue_entity_resp.transaction_id = p_resume_ue_param->
		resume_ue_entity_req.transaction_id;

	uecc_resume_ue_entity_resp.cell_index = p_resume_ue_param->
		resume_ue_entity_req.cell_index;

	uecc_resume_ue_entity_resp.ue_index = p_resume_ue_param->
		resume_ue_entity_req.ue_index;

	/* Timer Expiry is treated as L3_FATAL error */
	uecc_resume_ue_entity_resp.response_code = L3_FATAL;

	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(uecc_resume_ue_entity_resp.ue_index),
			UECC_LLIM_RESUME_UE_ENTITY_RESP,
			sizeof(uecc_resume_ue_entity_resp),
			&uecc_resume_ue_entity_resp);

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	rrc_mem_free(p_ue_ctx->curr_op_param.p_resume_ue);
	p_ue_ctx->curr_op_param.p_resume_ue = PNULL;

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_resume_state_delete_ue_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function delete ue.
 *       state UEMH_STATE_W_FOR_PDCP_RESUME_UE_ENTITY_CNF;
 *       event UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_resume_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	/* 1. Stop security configuration guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_resume_ue->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_RESUME_UE_ENTITY_TIMER]"); /* Timer Value */
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_resume_ue->guard_timer);
		p_ue_ctx->curr_op_param.p_resume_ue->guard_timer = PNULL;
	}

	/* 2. Start deletion guard timer */
	/* 3. Delete on lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
			UEMH_FSM_DEL_REQ,
			UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx),
			p_delete_ue_entity_req->ue_index,
			p_delete_ue_entity_req->transaction_id,
			p_rrc_llim_gl_ctx,
			p_delete_ue_entity_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_xxx_change_crnti_state_delete_ue_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function delete ue.
 *       state UEMH_STATE_W_FOR_PHY_CHANGE_CRNTI_CNF;
 *       state UEMH_STATE_W_FOR_MAC_CHANGE_CRNTI_CNF;
 *       state UEMH_STATE_W_FOR_RLC_CHANGE_CRNTI_CNF;
 *       state UEMH_STATE_W_FOR_PDCP_CHANGE_CRNTI_CNF;
 *       event UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_xxx_change_crnti_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	/* 1. Stop Change CRNTI guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_change_crnti->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CHANGE_CRNTI_TIMER]"); /* Timer Value */
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_change_crnti->guard_timer);
		p_ue_ctx->curr_op_param.p_change_crnti->guard_timer = PNULL;
	}

	/* 2. Start deletion guard timer */
	/* 3. Delete on lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
			UEMH_FSM_DEL_REQ,
			UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx),
			p_delete_ue_entity_req->ue_index,
			p_delete_ue_entity_req->transaction_id,
			p_rrc_llim_gl_ctx,
			p_delete_ue_entity_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_cfg_security_state_delete_ue_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function delete ue.
 *       state UEMH_STATE_W_FOR_CONFIGURE_SECURITY_CNF;
 *       event UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_cfg_security_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	/* 1. Stop security configuration guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_cfg_ue_security->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CONFIG_UE_SECURITY_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_cfg_ue_security->guard_timer);
		p_ue_ctx->curr_op_param.p_cfg_ue_security->guard_timer = PNULL;
	}

	/* 2. Start deletion guard timer */
	/* 3. Delete on lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
			UEMH_FSM_DEL_REQ,
			UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx),
			p_delete_ue_entity_req->ue_index,
			p_delete_ue_entity_req->transaction_id,
			p_rrc_llim_gl_ctx,
			p_delete_ue_entity_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_recfg_security_state_delete_ue_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function delete ue.
 *       state UEMH_STATE_W_FOR_RECONFIG_SECURITY_UE_ENTITY_CNF;
 *       event UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_recfg_security_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	/* 1. Stop security configuration guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_recfg_ue_security->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_RECONFIG_SECURITY_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_recfg_ue_security->guard_timer);
		p_ue_ctx->curr_op_param.p_recfg_ue_security->guard_timer = PNULL;
	}

	/* 2. Start deletion guard timer */
	/* 3. Delete on lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
			UEMH_FSM_DEL_REQ,
			UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx),
			p_delete_ue_entity_req->ue_index,
			p_delete_ue_entity_req->transaction_id,
			p_rrc_llim_gl_ctx,
			p_delete_ue_entity_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_recfg_security_state_cleanup_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function cleanups UEMH FSM.
 *       state UEMH_STATE_W_FOR_RECONFIG_SECURITY_UE_ENTITY_CNF;
 *       event UEMH_EVENT_OAMH_CLEANUP_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_recfg_security_state_cleanup_req
(
 void                *p_api,
 void                *p_msg,
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_recfg_ue_security_op_param_t *p_recfg_ue_security_param = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	/*coverity fix start*/
	/*coverity fix stop*/

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p",p_api,p_msg);      

	if (PNULL == p_ue_ctx->curr_op_param.p_recfg_ue_security)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_recfg_ue_security is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_recfg_ue_security_param = p_ue_ctx->curr_op_param.p_recfg_ue_security;

	/* 1. Stop security reconfiguration guard timer */
	if (PNULL != p_recfg_ue_security_param->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_recfg_ue_security_param->guard_timer);
		p_recfg_ue_security_param->guard_timer = PNULL;
	}

	uemh_cleanup_ue_ctx(p_ue_ctx);    
	/* 2 delete from UE DB and free */

	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,
			p_ue_ctx->ue_index, PNULL);

	rrc_mem_free(p_ue_ctx);
    /* SPR 20522 Fix Start */
	/* + Coverity 81548 */
	p_ue_ctx = PNULL;
    /* SPR 20522 Fix Start */
	/* - Coverity 81548 */

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_resume_state_cleanup_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function cleanups UEMH FSM.
 *       state UEMH_STATE_W_FOR_PDCP_RESUME_UE_ENTITY_CNF;
 *       event UEMH_EVENT_OAMH_CLEANUP_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_resume_state_cleanup_req
(
 void                *p_api,
 void                *p_msg,
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_resume_ue_op_param_t *p_resume_ue_param = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	/*coverity fix start*/
	/*coverity fix stop*/

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p",p_api,p_msg);      

	if (PNULL == p_ue_ctx->curr_op_param.p_resume_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_resume_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_resume_ue_param = p_ue_ctx->curr_op_param.p_resume_ue;

	/* 1. Stop Resume guard timer */
	if (PNULL != p_resume_ue_param->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_RESUME_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_resume_ue_param->guard_timer);
		/* + Coverity 81430 */
		//p_resume_ue_param->guard_timer = PNULL;
		/* - Coverity 81430 */
	}


	/* 2 delete from UE DB and free */
	uemh_cleanup_ue_ctx(p_ue_ctx);   

	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,
			p_ue_ctx->ue_index,PNULL);

	rrc_mem_free(p_ue_ctx);
    /* SPR 20522 Fix Start */
	/* + Coverity 81430 */
	p_ue_ctx = PNULL;
	/* - Coverity 81430 */
    /* SPR 20522 Fix End */
	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_xxx_reestablish_state_cleanup_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function cleanups UEMH FSM.
 *       state UEMH_STATE_W_FOR_PDCP_REESTABLISH_UE_ENTITY_CNF;
 *       state UEMH_STATE_W_FOR_RLC_REESTABLISH_UE_ENTITY_CNF;
 *       event UEMH_EVENT_OAMH_CLEANUP_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_xxx_reestablish_state_cleanup_req
(
 void                *p_api,
 void                *p_msg,
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_reestablish_ue_op_param_t *p_reestablish_ue_param = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	/*coverity fix start*/
	/*coverity fix stop*/

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p",p_api,p_msg);      

	if (PNULL == p_ue_ctx->curr_op_param.p_reestablish_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_reestablish_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_reestablish_ue_param = p_ue_ctx->curr_op_param.p_reestablish_ue;

	/* 1. Stop security configuration guard timer */
	if (PNULL != p_reestablish_ue_param->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_REESTABLISH_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_reestablish_ue_param->guard_timer);
		p_reestablish_ue_param->guard_timer = PNULL;
	}


	/* 2 delete from UE DB and free */
	uemh_cleanup_ue_ctx(p_ue_ctx);   

	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,
			p_ue_ctx->ue_index,PNULL);

	rrc_mem_free(p_ue_ctx);
    /* SPR 20522 Fix Start */
	/* Coverity ID 81602 Fix Start*/
	 p_ue_ctx = PNULL;
	/* Coverity ID 81602 Fix End*/
    /* SPR 20522 Fix End */
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_xxx_change_crnti_state_cleanup_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function cleanups UEMH FSM.
 *       state UEMH_STATE_W_FOR_PHY_CHANGE_CRNTI_CNF;
 *       state UEMH_STATE_W_FOR_MAC_CHANGE_CRNTI_CNF;
 *       state UEMH_STATE_W_FOR_RLC_CHANGE_CRNTI_CNF;
 *       state UEMH_STATE_W_FOR_PDCP_CHANGE_CRNTI_CNF;
 *       event UEMH_EVENT_OAMH_CLEANUP_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_xxx_change_crnti_state_cleanup_req
(
 void                *p_api,
 void                *p_msg,
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_change_crnti_op_param_t *p_change_crnti_param = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	/*coverity fix start*/
	/*coverity fix stop*/

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p",p_api,p_msg);      

	if (PNULL == p_ue_ctx->curr_op_param.p_change_crnti)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_change_crnti is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_change_crnti_param = p_ue_ctx->curr_op_param.p_change_crnti;

	/* 1. Stop change crnti guard timer */
	if (PNULL != p_change_crnti_param->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CHANGE_CRNTI_TIMER]");
		rrc_stop_timer(p_change_crnti_param->guard_timer);
		p_change_crnti_param->guard_timer = PNULL;
	}

	/* 2 delete from UE DB and free */
	uemh_cleanup_ue_ctx(p_ue_ctx); 

	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,
			p_ue_ctx->ue_index,PNULL);

    /* SPR 20522 Fix Start */
	rrc_mem_free(p_ue_ctx);
	/* + Coverity 81390 */
	p_ue_ctx = PNULL;
	/* - Coverity 81390 */
    /* SPR 20522 Fix End */
	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_cfg_security_state_cleanup_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function cleanups UEMH FSM.
 *       state UEMH_STATE_W_FOR_CONFIGURE_SECURITY_CNF;
 *       event UEMH_EVENT_OAMH_CLEANUP_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_cfg_security_state_cleanup_req
(
 void                *p_api,
 void                *p_msg,
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_cfg_ue_security_op_param_t *p_cfg_ue_security_param = PNULL;


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	/*coverity fix start*/
	/*coverity fix stop*/

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p",p_api,p_msg);      

	if (PNULL == p_ue_ctx->curr_op_param.p_cfg_ue_security)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_cfg_ue_security is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_cfg_ue_security_param = p_ue_ctx->curr_op_param.p_cfg_ue_security;

	/* 1. Stop security configuration guard timer */
	if (PNULL != p_cfg_ue_security_param->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_CONFIG_UE_SECURITY_TIMER]");
		rrc_stop_timer(p_cfg_ue_security_param->guard_timer);
		/* + Coverity 81444 */
		//p_cfg_ue_security_param->guard_timer = PNULL;
		/* - Coverity 81444 */
	}

	/* 2 delete from UE DB and free */
	uemh_cleanup_ue_ctx(p_ue_ctx);   

	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,
			p_ue_ctx->ue_index,PNULL);
   /* SPR 20522 Fix Start */
	rrc_mem_free(p_ue_ctx);
	/* + Coverity 81444 */
	p_ue_ctx = PNULL;
	/* - Coverity 81444 */
   /* SPR 20522 Fix Start */
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: check_and_start_roll_back_for_drb_modify
 *
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if MAC is OK.
 *       
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void check_and_start_roll_back_for_drb_modify
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{

	rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp = PNULL;

	rrc_uecc_llim_modify_lc_req_t *p_modify_lc_req = PNULL;

	rrc_counter_t drb_passed = RRC_NULL;
	rrc_counter_t drb_failed = RRC_NULL;
	rrc_counter_t counter = RRC_NULL;

	rrc_bool_et reconfig_sent = RRC_FALSE;
	RRC_LLIM_UT_TRACE_ENTER();

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_modify_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	p_modify_lc_req = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;


	RRC_LLIM_TRACE(RRC_INFO,"Checking For RollBack..");

	if(SUCCESS == build_and_send_mac_reconfig_modify_lc_req(p_ue_ctx))
	{
		RRC_LLIM_TRACE(RRC_INFO,"Modify LC request sent to MAC");

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			(U16)(1 << UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF);

		reconfig_sent = RRC_TRUE;
	}  

	if(SUCCESS == build_and_send_rlc_reconfig_modify_lc_req(p_ue_ctx))
	{
		RRC_LLIM_TRACE(RRC_INFO,"Modify LC request sent to RLC");

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			(U16)(1 << UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF);

		reconfig_sent = RRC_TRUE;
	}  
	if (SUCCESS == build_and_send_pdcp_reconfig_modify_lc_req(p_ue_ctx)) 
	{
		RRC_LLIM_TRACE(RRC_INFO,"Modify LC request sent to PDCP");

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			(U16)(1 << UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF);

		reconfig_sent = RRC_TRUE;
	}
	if (SUCCESS == build_and_send_s1u_reconfig_modify_lc_req(p_ue_ctx)) 
	{
		RRC_LLIM_TRACE(RRC_INFO,"Modify LC request sent to S1U");

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			(U16)(1 << UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF);
		reconfig_sent = RRC_TRUE;
	}
	if(RRC_FALSE == reconfig_sent)
	{
		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		for(counter = 0; counter <
				p_modify_lc_req->modify_drb_entity[
				RRC_UECC_NEW_DRB_CONFIG_VERSION].drb_counter;
				counter++)
		{
			if (RRC_TRUE == p_ue_ctx->curr_op_param.p_rcfg_ue->
					llim_drb_status[counter].drb_modify_fail)
			{
				drb_failed++;
			}
			else
			{
				drb_passed++;
			}
		}
		if (RRC_NULL < drb_failed && RRC_NULL == drb_passed)
		{
			p_modify_lc_resp->response_code = FAILURE;
		}
		else if (RRC_NULL < drb_passed && RRC_NULL == drb_failed)
		{
			p_modify_lc_resp->response_code = SUCCESS;
		}
		else
		{
			p_modify_lc_resp->response_code = PARTIAL_SUCCESS;
		}
		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_req->ue_index), 
				UECC_LLIM_MODIFY_LC_RESP,
				sizeof(*p_modify_lc_resp), 
				p_modify_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	else
	{
		UEMH_FSM_SET_STATE(p_ue_ctx,
				UEMH_STATE_LLIM_LL_MODIFY_LC_IN_SYNC_ONGOING);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: build_and_send_uecc_modify_lc_rollback_resp
 *
 *   INPUTS       : rrc_transaction_id_t transaction_id
 *                  rrc_ue_index_t       ue_index
 *                  rrc_return_et response
 *                   rrc_cell_index_t     cell_index
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if MAC is OK.
 *       
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void build_and_send_uecc_modify_lc_rollback_resp
(
 rrc_transaction_id_t transaction_id,
 rrc_ue_index_t       ue_index,
 rrc_return_et response,
 rrc_cell_index_t     cell_index
 )
{
	rrc_uecc_llim_modify_rollback_resp_t modify_lc_rollback_resp;

	RRC_LLIM_UT_TRACE_ENTER();

	memset_wrapper(&modify_lc_rollback_resp, 0, sizeof(modify_lc_rollback_resp));

	modify_lc_rollback_resp.cell_index     = cell_index;
	modify_lc_rollback_resp.transaction_id = transaction_id;
	modify_lc_rollback_resp.ue_index       = ue_index;
	modify_lc_rollback_resp.response       = response;

	/* send UECC_LLIM_ADD_LC_ROLLBACK_RESP */
	rrc_llim_send_internal_msg( 
			RRC_GET_UECC_MODULE_ID(modify_lc_rollback_resp.ue_index), 
			UECC_LLIM_MODIFY_ROLLBACK_RESP,
			sizeof(modify_lc_rollback_resp), 
			&modify_lc_rollback_resp);

	RRC_LLIM_UT_TRACE_EXIT();
}



/******************************************************************************
 *   FUNCTION NAME: build_and_send_uecc_add_lc_rollback_resp
 *
 *   INPUTS       : rrc_transaction_id_t transaction_id
 *                  rrc_ue_index_t       ue_index
 *                  rrc_return_et response
 *                   rrc_cell_index_t     cell_index
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if MAC is OK.
 *       
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void build_and_send_uecc_add_lc_rollback_resp
(
 rrc_transaction_id_t transaction_id,
 rrc_ue_index_t       ue_index,
 rrc_return_et response,
 rrc_cell_index_t     cell_index
 )
{
	rrc_uecc_llim_add_rollback_resp_t add_lc_rollback_resp;

	RRC_LLIM_UT_TRACE_ENTER();

	memset_wrapper(&add_lc_rollback_resp, 0, sizeof(add_lc_rollback_resp));

	add_lc_rollback_resp.cell_index     = cell_index;
	add_lc_rollback_resp.transaction_id = transaction_id;
	add_lc_rollback_resp.ue_index       = ue_index;
	add_lc_rollback_resp.response       = response;

	/* send UECC_LLIM_ADD_LC_ROLLBACK_RESP */
	rrc_llim_send_internal_msg( 
			RRC_GET_UECC_MODULE_ID(add_lc_rollback_resp.ue_index), 
			UECC_LLIM_ADD_ROLLBACK_RESP,
			sizeof(add_lc_rollback_resp), 
			&add_lc_rollback_resp);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_rlf_reconfig_fill_sps_config
 *
 *   DESCRIPTION:
 *       Function fills sps_config parameters 
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_rlf_reconfig_fill_sps_config(
		rrc_mac_reconfigure_ue_entity_cnf_t  *p_mac_reconfigure_ue_entity_cnf,
		rrc_uecc_llim_add_lc_resp_t *p_add_lc_resp,
		rrc_rlc_reconfig_ue_entity_req_t *p_rlc_reconfig_ue_entity_req,
		rrc_uecc_llim_add_lc_req_t *p_add_lc_param)
{
	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_add_lc_resp);
	RRC_ASSERT(PNULL != p_rlc_reconfig_ue_entity_req);
	RRC_ASSERT(PNULL != p_add_lc_param);

	if (p_mac_reconfigure_ue_entity_cnf->optional_elems_present &
			RRC_MAC_RECONF_SPS_CRNTI_INFO_PRESENT)
	{
		p_add_lc_resp->bitmask |= UECC_LLIM_ADD_LC_RESP_SPS_CRNTI_PRESENT;
		p_add_lc_resp->sps_crnti =
			p_mac_reconfigure_ue_entity_cnf->sps_crnti_info.sps_crnti;

		/* SPS Start */
		/* Fill DL & UL SPS Info */
		p_rlc_reconfig_ue_entity_req->bitmask |=
			RRC_RLC_RECONFIG_UE_SPS_CONFIG_PRESENT;

		if (p_add_lc_param->sps_config.bitmask &
				RRC_SPS_CONFIG_SPS_CONFIG_DL_PRESENT)
		{
			/*SPS_fix*/
			p_rlc_reconfig_ue_entity_req->sps_config.optional_elems_present |= 
				RRC_RLC_SPS_DL_INFO_PRESENT;
			/*SPS_fix*/

			if (p_add_lc_param->sps_config.sps_config_dl.bitmask &
					RRC_SPS_CONFIG_DL_PARAM_PRESENT)
			{
				/* Setup */
				p_rlc_reconfig_ue_entity_req->sps_config.sps_dl_info.request_type = 1; /* Setup */
				p_rlc_reconfig_ue_entity_req->sps_config.sps_dl_info.optional_elems_present |= 
					RRC_RLC_SPS_DL_SETUP_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->sps_config.sps_dl_info.sps_dl_setup_info.
					semi_persistent_sched_interval_dl = 
					p_add_lc_param->sps_config.sps_config_dl.sps_config_dl_param.
					semi_persist_sched_interval_dl;
			}
			else
			{
				/* Release */
				p_rlc_reconfig_ue_entity_req->sps_config.sps_dl_info.request_type = 0; /* Release */

			}
		}

		if (p_add_lc_param->sps_config.bitmask &
				RRC_SPS_CONFIG_SPS_CONFIG_UL_PRESENT)
		{
			/*SPS_fix*/
			p_rlc_reconfig_ue_entity_req->sps_config.optional_elems_present |= 
				RRC_RLC_SPS_UL_INFO_PRESENT;
			/*SPS_fix*/

			if (p_add_lc_param->sps_config.sps_config_ul.bitmask &
					RRC_SPS_CONFIG_UL_PARAM_PRESENT)
			{
				/* Setup */
				p_rlc_reconfig_ue_entity_req->sps_config.sps_ul_info.request_type = 1; /* Setup */
				p_rlc_reconfig_ue_entity_req->sps_config.sps_ul_info.optional_elems_present |= 
					RRC_RLC_SPS_UL_SETUP_INFO_PRESENT;
				p_rlc_reconfig_ue_entity_req->sps_config.sps_ul_info.sps_ul_setup_info.
					semi_persistent_sched_interval_ul = 
					p_add_lc_param->sps_config.sps_config_ul.sps_config_ul_param.
					semi_persist_sched_interval_ul;
			}
			else
			{
				/* Release */
				p_rlc_reconfig_ue_entity_req->sps_config.sps_ul_info.request_type = 0; /* Release */
			}
		}
		/* SPS Stop */
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_process_success_mac_reconf_ue_entity_cnf
 *
 *   DESCRIPTION:
 *       Function processes Success case for mac_reconfigure_ue_entity_cnf
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_process_success_mac_reconf_ue_entity_cnf(
		rrc_uecc_llim_add_lc_req_t *p_add_lc_param,
		rrc_mac_reconfigure_ue_entity_cnf_t  *p_mac_reconfigure_ue_entity_cnf,
		rrc_rlc_reconfig_ue_entity_req_t *p_rlc_reconfig_ue_entity_req,
		rrc_llim_ue_ctx_t   *p_ue_ctx,
		rrc_uecc_llim_add_lc_resp_t *p_add_lc_resp)
{
	rrc_counter_t drb_index = RRC_NULL;   
#ifdef ENDC_ENABLED 
 /*OPTION3X Changes */
    U8  *p_dc_bearer_type = PNULL;
 /*OPTION3X Changes */
#endif
	RRC_LLIM_UT_TRACE_ENTER();

	p_rlc_reconfig_ue_entity_req->ue_index = p_add_lc_param->ue_index;
	/* Create LC */
	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
	{
		RRC_ASSERT(p_add_lc_param->create_srb2_entity.srb_config.
				bitmask &
				RRM_SRB_CONFIG_AM_CONFIG_PRESENT);

		fill_create_part_srb_rlc_reconfig_ue_entity_req(
				p_rlc_reconfig_ue_entity_req,

				p_add_lc_param->create_srb2_entity.lc_id,
				&p_add_lc_param->create_srb2_entity.
				srb_config.srb_am_config);
	}

	/* SPS Start */
	uemh_rlf_reconfig_fill_sps_config(p_mac_reconfigure_ue_entity_cnf, p_add_lc_resp,
			p_rlc_reconfig_ue_entity_req, p_add_lc_param);
	/* SPS Stop */

	for (drb_index = 0; drb_index < p_add_lc_param->
			create_drb_entity_counter; ++drb_index)
	{
		RRC_ASSERT(p_add_lc_param->create_drb_entity[drb_index].
				uecc_llim_drb_config.drb_config.bitmask &
				RRM_DRB_CONFIG_RLC_CONFIG_PRESENT);

#ifdef ENDC_ENABLED
        /*OPTION3X Changes Start*/
        if(RRM_DRB_CONFIG_DC_BEARER_TYPE_PRESENT &
                p_add_lc_param->create_drb_entity[drb_index].
                uecc_llim_drb_config.drb_config.bitmask)
        {
            p_dc_bearer_type = &(p_add_lc_param->create_drb_entity[drb_index].
                uecc_llim_drb_config.drb_config.dc_bearer_type);
        }
        /*OPTION3X Changes Stop*/
#endif

		fill_create_part_drb_rlc_reconfig_ue_entity_req(
				p_rlc_reconfig_ue_entity_req,
				p_add_lc_param->create_drb_entity[drb_index].
				uecc_llim_drb_config.drb_config.logical_channel_identity,
				&p_add_lc_param->create_drb_entity[drb_index].
				uecc_llim_drb_config.drb_config.rlc_config_enb.rlc_config
                #ifdef ENDC_ENABLED 
                /*OPTION3X Changes */
                ,p_dc_bearer_type
                /*OPTION3X Changes */
                #endif
                );

		fill_qos_info_rlc_reconfig_ue_entity_req_add_lc_req ( 
				p_rlc_reconfig_ue_entity_req,
				drb_index, p_add_lc_param);

		p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
			lc_id = p_add_lc_param->create_drb_entity[drb_index].
			uecc_llim_drb_config.drb_config.logical_channel_identity;

		p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
			drb_status = RRC_LLIM_DRB_PASSED_AT_MAC;
	}

	/* fill the AMBR info*/
	if (p_add_lc_param->bitmask & UECC_LLIM_ADD_LC_REQ_UE_AMBR_PRESENT)
	{
		p_rlc_reconfig_ue_entity_req->bitmask |= 
			RRC_RLC_RECONFIG_UE_BIT_RATE_INFO_PRESENT;
		p_rlc_reconfig_ue_entity_req->rlc_ue_bit_rate_info.bit_rate_tx = 
			p_add_lc_param->ue_ambr.ul_ambr;
		p_rlc_reconfig_ue_entity_req->rlc_ue_bit_rate_info.bit_rate_rx = 
			p_add_lc_param->ue_ambr.dl_ambr;
	}

	if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/*Roll back has been triggered by UECC*/
		start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
	}
	else
	{
		/*All DRBs has passed*/
		p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer =
			p_add_lc_param->create_drb_entity_counter;

		RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_create_tx_um_rlc <=
				RRC_RLC_MAX_NUM_LC);
		RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_create_rx_um_rlc <=
				RRC_RLC_MAX_NUM_LC);
		RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_create_tx_rx_um_rlc <=
				RRC_RLC_MAX_NUM_LC);
		RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_create_tx_rx_am_rlc <=
				RRC_RLC_MAX_NUM_LC);

		if(RRC_SUCCESS == rrc_rlc_il_send_rrc_rlc_reconfig_ue_entity_req(
					p_rlc_reconfig_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_add_lc_param->cell_index),
					p_add_lc_param->transaction_id,
					p_add_lc_param->cell_index))
		{
			UEMH_FSM_SET_STATE(p_ue_ctx,
					UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF);
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"Unable to send"
					" Reconfig UE entity Req to RLC");
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_process_failure_mac_reconf_ue_entity_cnf
 *
 *   DESCRIPTION:
 *       Function processes Failure case for mac_reconfigure_ue_entity_cnf
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_process_failure_mac_reconf_ue_entity_cnf(
		rrc_uecc_llim_add_lc_req_t *p_add_lc_param,
		rrc_mac_reconfigure_ue_entity_cnf_t  *p_mac_reconfigure_ue_entity_cnf,
		rrc_llim_ue_ctx_t   *p_ue_ctx,
		rrc_uecc_llim_add_lc_resp_t *p_add_lc_resp)
{
	rrc_counter_t lc_index   = RRC_NULL;
	rrc_counter_t drb_index  = RRC_NULL;   
	RRC_LLIM_UT_TRACE_ENTER();
	/* 1. Stop guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
		p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
	}

	if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		build_and_send_uecc_add_lc_rollback_resp(
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.transaction_id,
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.ue_index,
				RRC_FAILURE,
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.cell_index);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	else if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ICS has FAILED at MAC");

		/* ICS procedure */
		for (lc_index = 0; lc_index < p_mac_reconfigure_ue_entity_cnf->
				create_lc_error_counter; ++lc_index)
		{

			if (p_add_lc_param->create_srb2_entity.lc_id ==
					p_mac_reconfigure_ue_entity_cnf->
					create_lc_error[lc_index].lch_id)
			{
				llim_fill_response_code(
						&p_add_lc_resp->create_srb2_status.response,
						RRC_MAC_MODULE_ID,
						p_mac_reconfigure_ue_entity_cnf->
						create_lc_error[lc_index].response);

				break;
			}
		}
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ERAB Setup has FAILED at MAC");
	}

	for (lc_index = 0; 
			lc_index < p_mac_reconfigure_ue_entity_cnf->
			create_lc_error_counter; ++lc_index)
	{
		for (drb_index = 0; 
				drb_index < p_add_lc_param->
				create_drb_entity_counter; 
				++drb_index)
		{
			if (p_add_lc_param->create_drb_entity[drb_index].
					uecc_llim_drb_config.drb_config.
					logical_channel_identity ==
					p_mac_reconfigure_ue_entity_cnf->
					create_lc_error[lc_index].
					lch_id)
			{
				/*There wont be any Roll Back at MAC in case of DRB setup
				 */
				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d failed at MAC",
						p_mac_reconfigure_ue_entity_cnf->
						create_lc_error[lc_index].
						lch_id);

				llim_fill_response_code(
						&p_add_lc_resp->create_drb_status[drb_index].
						response,
						RRC_MAC_MODULE_ID,
						p_mac_reconfigure_ue_entity_cnf->
						create_lc_error[lc_index].response);
				break;

			}
		}
	}

	p_add_lc_resp->response_code= FAILURE;

	/* 2. send UECC_LLIM_ADD_LC_RESP */
	rrc_llim_send_internal_msg( 
			RRC_GET_UECC_MODULE_ID(p_add_lc_param->ue_index), UECC_LLIM_ADD_LC_RESP,
			sizeof(*p_add_lc_resp), p_add_lc_resp);
	rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
	p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	UEMH_FSM_SET_STATE(p_ue_ctx,
			UEMH_STATE_UE_ENTITY_IN_SERVICE);
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_process_partial_succ_mac_reconf_ue_entity_cnf
 *
 *   DESCRIPTION:
 *     Function processes PartialSuccess case for mac_reconfigure_ue_entity_cnf
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_process_partial_succ_mac_reconf_ue_entity_cnf(
		rrc_uecc_llim_add_lc_req_t *p_add_lc_param,
		rrc_mac_reconfigure_ue_entity_cnf_t  *p_mac_reconfigure_ue_entity_cnf,
		rrc_rlc_reconfig_ue_entity_req_t *p_rlc_reconfig_ue_entity_req,
		rrc_llim_ue_ctx_t   *p_ue_ctx,
		rrc_uecc_llim_add_lc_resp_t *p_add_lc_resp)
{
	rrc_counter_t lc_index   = RRC_NULL;
	rrc_counter_t drb_index  = RRC_NULL;   
	rrc_bool_et   ics_failed = RRC_FALSE;
	rrc_bool_et   found          = RRC_FALSE;
	U16           passed_drb_at_previous_lower_layer = RRC_NULL;
#ifdef ENDC_ENABLED 
    /*OPTION3X Changes */
    U8            *p_dc_bearer_type = PNULL;
    /*OPTION3X Changes */
#endif
	RRC_LLIM_UT_TRACE_ENTER();

	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
	{
		/* ICS procedure */
		for (lc_index = 0; lc_index < p_mac_reconfigure_ue_entity_cnf->
				create_lc_error_counter; ++lc_index)
		{

			if (p_add_lc_param->create_srb2_entity.lc_id ==
					p_mac_reconfigure_ue_entity_cnf->
					create_lc_error[lc_index].lch_id)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"SRB2 has failed at MAC");

				llim_fill_response_code(
						&p_add_lc_resp->create_srb2_status.response,
						RRC_MAC_MODULE_ID,
						p_mac_reconfigure_ue_entity_cnf->
						create_lc_error[lc_index].response);

				ics_failed = RRC_TRUE;
				break;
			}
		}
		if(RRC_FALSE == ics_failed)
		{
			/*SRB 2 has passed*/
			RRC_ASSERT(p_add_lc_param->create_srb2_entity.srb_config.bitmask &
					RRM_SRB_CONFIG_AM_CONFIG_PRESENT);

			fill_create_part_srb_rlc_reconfig_ue_entity_req(
					p_rlc_reconfig_ue_entity_req,
					p_add_lc_param->create_srb2_entity.lc_id,
					&p_add_lc_param->create_srb2_entity.
					srb_config.srb_am_config);
		}
	}

	/*If SRB2 is not present then that means in PARTIAL SUCCESS
	  case, atleast one DRB has passed*/

	for (drb_index = 0; 
			drb_index < p_add_lc_param->
			create_drb_entity_counter; 
			++drb_index)
	{
		found = RRC_FALSE;
		for (lc_index = 0; 
				lc_index < p_mac_reconfigure_ue_entity_cnf->
				create_lc_error_counter; ++lc_index)
		{
			if (p_add_lc_param->create_drb_entity[drb_index].
					uecc_llim_drb_config.drb_config.
					logical_channel_identity ==
					p_mac_reconfigure_ue_entity_cnf->
					create_lc_error[lc_index].
					lch_id)
			{
				/*There wont be any Roll Back at MAC in case of DRB setup
				 */
				found = RRC_TRUE;
				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d failed at MAC",
						p_mac_reconfigure_ue_entity_cnf->
						create_lc_error[lc_index].
						lch_id);
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					lc_id = p_add_lc_param->create_drb_entity[drb_index].
					uecc_llim_drb_config.drb_config.logical_channel_identity;

				llim_fill_response_code(
						&p_add_lc_resp->create_drb_status[drb_index].
						response,
						RRC_MAC_MODULE_ID,
						p_mac_reconfigure_ue_entity_cnf->
						create_lc_error[lc_index].response);

				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status = RRC_LLIM_DRB_FAILED_AT_MAC;
				break;
			}
		}
		if(RRC_FALSE == found && RRC_FALSE == ics_failed)
        {
            RRC_ASSERT(p_add_lc_param->create_drb_entity[drb_index].
                    uecc_llim_drb_config.drb_config.bitmask &
                    RRM_DRB_CONFIG_RLC_CONFIG_PRESENT);

#ifdef ENDC_ENABLED
            /*OPTION3X Changes Start*/
            if(RRM_DRB_CONFIG_DC_BEARER_TYPE_PRESENT &
                    p_add_lc_param->create_drb_entity[drb_index].
                    uecc_llim_drb_config.drb_config.bitmask)
            {
                p_dc_bearer_type = &(p_add_lc_param->create_drb_entity[drb_index].
                    uecc_llim_drb_config.drb_config.dc_bearer_type);
            }
            /*OPTION3X Changes Stop*/
#endif

            fill_create_part_drb_rlc_reconfig_ue_entity_req(
                    p_rlc_reconfig_ue_entity_req,
                    p_add_lc_param->create_drb_entity[drb_index].
                    uecc_llim_drb_config.drb_config.
                    logical_channel_identity,
                    &p_add_lc_param->create_drb_entity[drb_index].
                    uecc_llim_drb_config.drb_config.
                    rlc_config_enb.rlc_config
#ifdef ENDC_ENABLED 
    /*OPTION3X Changes */
                    ,p_dc_bearer_type
    /*OPTION3X Changes */
#endif
                    );

            p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
                lc_id = 
                p_add_lc_param->
                create_drb_entity[drb_index].uecc_llim_drb_config.
                drb_config.logical_channel_identity;

            p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
                drb_status = RRC_LLIM_DRB_PASSED_AT_MAC;

            passed_drb_at_previous_lower_layer++;
        }
	}

	if ((RRC_TRUE == ics_failed) ||  /*SRB2 failed*/
			(p_mac_reconfigure_ue_entity_cnf->create_lc_error_counter
			 == p_add_lc_param->create_drb_entity_counter))
		/*SRB2 has passed but all DRBs has failed*/
	{    
		/*ICS has failed*/
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ICS has failed at MAC");

		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		p_add_lc_resp->response_code                = FAILURE;

		rrc_llim_send_internal_msg( 
				RRC_GET_UECC_MODULE_ID(p_add_lc_param->ue_index), 
				UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), 
				p_add_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

		/*Exit due to failure*/
		return;
	}

	RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_create_tx_um_rlc <=
			RRC_RLC_MAX_NUM_LC);
	RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_create_rx_um_rlc <=
			RRC_RLC_MAX_NUM_LC);
	RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_create_tx_rx_um_rlc <=
			RRC_RLC_MAX_NUM_LC);
	RRC_ASSERT(p_rlc_reconfig_ue_entity_req->num_create_tx_rx_am_rlc <=
			RRC_RLC_MAX_NUM_LC);

	/*Saving count for passed number of DRBs at previous layer*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer =
		passed_drb_at_previous_lower_layer;

	if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
	}
	else
	{
		if(RRC_SUCCESS == rrc_rlc_il_send_rrc_rlc_reconfig_ue_entity_req(
					p_rlc_reconfig_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_add_lc_param->cell_index),
					p_add_lc_param->transaction_id,
					p_add_lc_param->cell_index))
		{
			UEMH_FSM_SET_STATE(p_ue_ctx,
					UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF);
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"Unable to send"
					" Reconfig UE entity Req to RLC");
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: build_and_send_rlc_reconfig_add_lc_req
 *
 *   INPUTS       : void                                    *p_api
 *                  rrc_mac_reconfigure_ue_entity_cnf_t     *p_mac_reconfigure_ue_entity_cnf
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if MAC is OK.
 *       
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void build_and_send_rlc_reconfig_add_lc_req
(
 void                                    *p_api,
 rrc_mac_reconfigure_ue_entity_cnf_t     *p_mac_reconfigure_ue_entity_cnf   ,
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{

	rrc_uecc_llim_add_lc_req_t *p_add_lc_param = PNULL;

	rrc_uecc_llim_add_lc_resp_t *p_add_lc_resp = PNULL;

	rrc_rlc_reconfig_ue_entity_req_t rlc_reconfig_ue_entity_req;

	RRC_LLIM_UT_TRACE_ENTER();

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;   

	p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	memset_wrapper(&rlc_reconfig_ue_entity_req, 0, sizeof
			(rlc_reconfig_ue_entity_req));

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_add_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (MAC_SUCCESS == p_mac_reconfigure_ue_entity_cnf->response_code)
	{
		uemh_process_success_mac_reconf_ue_entity_cnf(p_add_lc_param, 
				p_mac_reconfigure_ue_entity_cnf, &rlc_reconfig_ue_entity_req, 
				p_ue_ctx, p_add_lc_resp);
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	else if (MAC_PARTIAL_SUCCESS == p_mac_reconfigure_ue_entity_cnf->
			response_code)
	{
		uemh_process_partial_succ_mac_reconf_ue_entity_cnf(p_add_lc_param, 
				p_mac_reconfigure_ue_entity_cnf, &rlc_reconfig_ue_entity_req, 
				p_ue_ctx, p_add_lc_resp);
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	else if (MAC_FAILURE == p_mac_reconfigure_ue_entity_cnf->response_code)
	{
		uemh_process_failure_mac_reconf_ue_entity_cnf(p_add_lc_param, 
				p_mac_reconfigure_ue_entity_cnf, p_ue_ctx, p_add_lc_resp);
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Invalid Response"
				" Received in Reconfig UE entity Req from MAC");
		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		fill_uecc_llim_add_lc_resp(
				p_add_lc_resp,
				L3_FATAL,
				RRC_INVALID_RESPONSE_RECEIVED,
				p_add_lc_param
				);

		/* 2. send UECC_LLIM_ADD_LC_RESP */
		rrc_llim_send_internal_msg( 
				RRC_GET_UECC_MODULE_ID(p_add_lc_param->ue_index), UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), p_add_lc_resp);
		UEMH_FSM_SET_STATE(p_ue_ctx,
				UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

	}

	RRC_LLIM_UT_TRACE_EXIT();
}



/******************************************************************************
 *   FUNCTION NAME: process_mac_reconfig_modify_lc_cnf
 *
 *   INPUTS       : void                                    *p_api
 *                  rrc_mac_reconfigure_ue_entity_cnf_t     *p_mac_reconfigure_ue_entity_cnf
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and modifying LC if MAC is OK.
 *       
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void process_mac_reconfig_modify_lc_cnf
(
 void                *p_api,             /* p_api */
 rrc_mac_reconfigure_ue_entity_cnf_t     *p_mac_reconfigure_ue_entity_cnf,
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{

	rrc_uecc_llim_modify_lc_req_t  *p_modify_lc_param = PNULL;
	rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp  = PNULL; 

	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t lc_index = RRC_NULL;

	rrc_counter_t  drb_passed = RRC_NULL;
	rrc_counter_t  drb_failed = RRC_NULL;
	rrc_counter_t  counter = RRC_NULL;

	/* Coverity Fix 61049 */
	rrc_bool_et scell_release_flag = RRC_FALSE;
	rrc_bool_et scell_add_fail_flag = RRC_FALSE;
	rrc_bool_et scell_mod_fail_flag = RRC_FALSE;
	rrc_bool_et success_flag = RRC_FALSE;

	RRC_LLIM_UT_TRACE_ENTER();  

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;   

	p_modify_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;   

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_modify_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* SPS Start */
	if (p_mac_reconfigure_ue_entity_cnf->optional_elems_present &
			RRC_MAC_RECONF_SPS_CRNTI_INFO_PRESENT)
	{
		p_modify_lc_resp->bitmask |= UECC_LLIM_MODIFY_LC_RESP_SPS_CRNTI_PRESENT;
		p_modify_lc_resp->sps_crnti =
			p_mac_reconfigure_ue_entity_cnf->sps_crnti_info.sps_crnti;
	}

	/* SPS Stop */
	if (MAC_SUCCESS == p_mac_reconfigure_ue_entity_cnf->response_code)
	{
		/* CA start */
		/* Verifyimg that All Scells Related configuration is done successfully
		 * at MAC without error and logging the same 
		 */
		if( p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
				scell_config.bitmask & RRM_SCELL_RELEASE_LIST_PRESENT ) 
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED,
					"Release of all Scells successful at MAC.");
		} 
		if (p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
				scell_config.bitmask & RRM_SCELL_ADD_MOD_LIST_PRESENT )
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED,
					"Addition/Modification of all Scells successful at MAC.");
		}
		/* CA end */

		if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			/*Strating UECC trigerred Roll Back Procedure*/

			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
				RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"UECC trigerred Roll Back Started");

			if( p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
					scell_config.bitmask & RRM_SCELL_ADD_MOD_LIST_PRESENT )
			{
				update_cell_id_operation_validity_for_config_error(p_mac_reconfigure_ue_entity_cnf,
						p_ue_ctx) ;
				update_scell_config_modify_lc_req_for_rollback(p_modify_lc_param);
			}
			check_and_start_roll_back_for_drb_modify(p_ue_ctx);
		}
		else if(FAILURE == 
				build_and_send_rlc_reconfig_modify_lc_req(p_ue_ctx))
		{
			RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for"
					" Modify LC request at RLC");

			if (FAILURE == 
					build_and_send_pdcp_reconfig_modify_lc_req(p_ue_ctx)) 
			{
				RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for"
						" Modify LC request at PDCP");

				if (FAILURE == 
						build_and_send_s1u_reconfig_modify_lc_req(p_ue_ctx)) 
				{
					RRC_LLIM_TRACE(RRC_DETAILED,"NO configuration are present for"
							" Modify LC request at S1u");
					if(FAILURE == 
							build_and_send_phy_reconfig_modify_lc_req(p_ue_ctx))
					{
						RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for Modify LC"
								" request at PHY");
						/*Stop Timer*/
						if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
						{
							RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
									"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
							rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
							p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
						}

						RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "Modify LC completed ");
						p_modify_lc_resp->response_code = SUCCESS;

						rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_param->ue_index), 
								UECC_LLIM_MODIFY_LC_RESP,
								sizeof(*p_modify_lc_resp), p_modify_lc_resp);

						UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
						rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
						p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

					}
				}
			}
		}
    }/* SPR 15795 Fix Start */ 
    else if ( MAC_PARTIAL_SUCCESS == p_mac_reconfigure_ue_entity_cnf->
                 response_code )/* SPR 15795 Fix Stop */
	{
		for (lc_index = 0; lc_index < p_mac_reconfigure_ue_entity_cnf->
				reconfigure_lc_error_counter; ++lc_index)
		{
			for (drb_index = 0; 
					drb_index < 
					p_modify_lc_param->modify_drb_entity[
					RRC_UECC_NEW_DRB_CONFIG_VERSION].
					drb_counter; ++drb_index)
			{
				if (p_modify_lc_param->modify_drb_entity[
						RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						logical_channel_identity ==
						p_mac_reconfigure_ue_entity_cnf->
						reconfigure_lc_error[lc_index].
						lch_id)
				{
					/*store in ue_ctx */
					/*resetting the PASSED STATUS bit corres to RRC_LLIM_DRB_PASSED_AT_MAC*/
					update_drb_fail_status(p_ue_ctx,drb_index,
							RRC_LLIM_DRB_PASSED_AT_MAC);

					llim_fill_response_code(
							&p_modify_lc_resp->modify_drb_status[drb_index].
							response,
							RRC_MAC_MODULE_ID,
							p_mac_reconfigure_ue_entity_cnf->
							reconfigure_lc_error[lc_index].response);

					p_modify_lc_resp->modify_drb_status[drb_index].
						lc_id = 
						p_mac_reconfigure_ue_entity_cnf->
						reconfigure_lc_error[lc_index].
						lch_id;

				}
			}
		}
		if ( p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
				bitmask & UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT)
		{
			if ((MAC_PARTIAL_SUCCESS == p_mac_reconfigure_ue_entity_cnf->
						/*CA_RE_ESTAB_START*/
						response_code) && (RRC_FALSE == p_modify_lc_param->
							add_scell_info_mac_phy))
				/*CA_RE_ESTAB_STOP*/
			{  
				process_mac_modify_lc_req_partial_success_scell_config(
						p_mac_reconfigure_ue_entity_cnf,p_ue_ctx);

				if(p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						scell_config.bitmask & RRM_SCELL_RELEASE_LIST_PRESENT) 
				{
					scell_release_flag = RRC_TRUE;
				}    

				if( p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						scell_config.bitmask & RRM_SCELL_ADD_MOD_LIST_PRESENT )
				{
					if( p_mac_reconfigure_ue_entity_cnf->
							ca_config_error_counter  > 0 )
					{
						scell_add_fail_flag = RRC_TRUE;
					}
					if(p_mac_reconfigure_ue_entity_cnf->
							reconfig_ca_config_error_counter > 0)
					{
						scell_mod_fail_flag = RRC_TRUE;
					}    

				}     
				if(RRC_TRUE == scell_release_flag )
				{
					if ((RRC_TRUE == scell_add_fail_flag) || 
							(RRC_TRUE == scell_mod_fail_flag))
					{
						return ;
					}   
					else
					{
						success_flag = RRC_TRUE; 
					} 

				}
			}
			else
			{
				process_mac_modify_lc_req_failure_scell_config(p_ue_ctx);/*SPR 17777 +-*/
				return ;
			}
		}

		if((RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
					p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure) &&
				(RRC_FALSE == success_flag))
		{
			/*Strating UECC trigerred Roll Back Procedure*/

			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
				RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"UECC trigerred Roll Back Started");
			if( ( p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						scell_config.bitmask & RRM_SCELL_ADD_MOD_LIST_PRESENT ) &&
					(RRC_FALSE == scell_add_fail_flag) &&
					(RRC_FALSE == scell_mod_fail_flag) )
			{
				update_cell_id_operation_validity_for_config_error(
						p_mac_reconfigure_ue_entity_cnf,
						p_ue_ctx) ;
				update_scell_config_modify_lc_req_for_rollback(p_modify_lc_param);
			}

			check_and_start_roll_back_for_drb_modify(p_ue_ctx);
		}
		/*ambr*/
		else if((RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
				&& (RRC_NULL == p_modify_lc_param->modify_drb_entity[
					RRC_UECC_NEW_DRB_CONFIG_VERSION].
					drb_counter) &&
				(RRC_FALSE == success_flag))
		{
			/*Strating LLIM trigerred Roll Back Procedure*/

			RRC_LLIM_TRACE(RRC_INFO,"Modify LC Roll back start");
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
				RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_MAC_ON_GOING;

			check_and_start_roll_back_for_drb_modify(p_ue_ctx);
		}

		/*ambr*/ 

		else if(FAILURE == 
				build_and_send_rlc_reconfig_modify_lc_req(p_ue_ctx))
		{
			RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for"
					" Modify LC request at RLC");

			if (FAILURE == 
					build_and_send_pdcp_reconfig_modify_lc_req(p_ue_ctx)) 
			{
				RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for"
						" Modify LC request at PDCP");

				if (FAILURE == 
						build_and_send_s1u_reconfig_modify_lc_req(p_ue_ctx)) 
				{
					RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for"
							" Modify LC request at S1u");
					if(FAILURE ==  build_and_send_phy_reconfig_modify_lc_req(p_ue_ctx))
					{
						RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for Modify LC"
								" request at PHY");
						/*Stop Timer*/
						if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
						{
							RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
									"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
							rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
							p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
						}

						RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "Modify LC completed ");
						for(counter = 0; counter <
								p_modify_lc_param->modify_drb_entity[
								RRC_UECC_NEW_DRB_CONFIG_VERSION].drb_counter;
								counter++)
						{
							if (RRC_TRUE == p_ue_ctx->curr_op_param.p_rcfg_ue->
									llim_drb_status[counter].drb_modify_fail)
							{
								drb_failed++;
							}
							else
							{
								drb_passed++;
							}
						}
						if (RRC_NULL < drb_failed && RRC_NULL == drb_passed)
						{
							p_modify_lc_resp->response_code = FAILURE;
						}
						else if (RRC_NULL < drb_passed && RRC_NULL == drb_failed)
						{
							p_modify_lc_resp->response_code = SUCCESS;
						}
						else
						{
							p_modify_lc_resp->response_code = PARTIAL_SUCCESS;
						}

						rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_param->ue_index), 
								UECC_LLIM_MODIFY_LC_RESP,
								sizeof(*p_modify_lc_resp), p_modify_lc_resp);

						UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
						rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
						p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

					}
				}
			}
		}
    }/* SPR 15795 Fix Start */
    else if( MAC_FAILURE == p_mac_reconfigure_ue_entity_cnf->response_code )
    {
	    for (drb_index = 0; 
	        drb_index < 
	        p_modify_lc_param->modify_drb_entity[
	        RRC_UECC_NEW_DRB_CONFIG_VERSION].
	        drb_counter; ++drb_index)
    	{
	        p_modify_lc_resp->modify_drb_status[drb_index].lc_id = 
	            p_modify_lc_param->modify_drb_entity[
	            RRC_UECC_NEW_DRB_CONFIG_VERSION].
	            uecc_llim_drb_config[drb_index].drb_config.
    	        logical_channel_identity;

	        llim_fill_response_code(
	            &p_modify_lc_resp->modify_drb_status[drb_index].
	            response,
    	        RRC_MAC_MODULE_ID,
	            RRC_LLIM_MODIFY_LC_FAIL_MAC);
	}

    	p_modify_lc_resp->response_code = FAILURE;
	    p_modify_lc_resp->ue_index = p_modify_lc_param->ue_index;
    	p_modify_lc_resp->cell_index = p_modify_lc_param->cell_index;

        rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_param->ue_index), 
            UECC_LLIM_MODIFY_LC_RESP,
            sizeof(*p_modify_lc_resp), 
	        p_modify_lc_resp);

    	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	    rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
    	p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

    }/* SPR 15795 Fix Stop */
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: process_mac_modify_lc_req_partial_success_scell_config
 *
 *   INPUTS       : rrc_mac_reconfigure_ue_entity_cnf_t    
 *                        *p_mac_reconfigure_ue_entity_cnf
 *                   - Pointer to the RRC_MAC_RECONFIGURE_ENTITY_CNF msg
 *                     received from MAC
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                   - Pointer to the LLIM global UE context data
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function processes the rrc_mac_reconfigure_ue_entity_cnf msg when
 *       partial success is recieved and scell_config is receievd.It updates the
 *       fail_cause if any and builds the scell_config list for rollback.
 *       
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static  void process_mac_modify_lc_req_partial_success_scell_config(
		rrc_mac_reconfigure_ue_entity_cnf_t     *p_mac_reconfigure_ue_entity_cnf,
		rrc_llim_ue_ctx_t   *p_ue_ctx)
{
	rrc_uecc_llim_modify_lc_req_t  *p_modify_lc_param = PNULL;
	rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp  = PNULL; 

	/*Coverity Fix 61048  start */
	rrc_bool_et scell_add_fail_flag = RRC_FALSE;
	rrc_bool_et scell_mod_fail_flag = RRC_FALSE;
	rrc_bool_et scell_release_flag = RRC_FALSE;

	U8 fail_cause = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();  

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL ");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;   

	p_modify_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;   


	/* Checking if release of Scells failed */
	if(p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
			scell_config.bitmask & RRM_SCELL_RELEASE_LIST_PRESENT) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED,
				"Release of All Scells successful at MAC.");

		scell_release_flag = RRC_TRUE;

	}
	/* Verifying whether the Scell addition/modification has failed */
	if( p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
			scell_config.bitmask & RRM_SCELL_ADD_MOD_LIST_PRESENT )
	{
		if( p_mac_reconfigure_ue_entity_cnf->
				ca_config_error_counter  > 0 )
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED,
					"Addition of Scell failed at MAC.");

			scell_add_fail_flag = RRC_TRUE;

			if(RRC_NULL ==  fail_cause)
			{
				fail_cause= (rrc_erab_error_codes_t)SCELL_ADDITION_FAILED; 
			}

		}
		else 
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED,
					"All Scells added successfully at MAC.");
		}    

		if( p_mac_reconfigure_ue_entity_cnf->
				reconfig_ca_config_error_counter > 0 )
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED,
					"Modification of Scells failed at MAC.");

			scell_mod_fail_flag = RRC_TRUE;

			if(RRC_NULL ==  fail_cause)
			{
				fail_cause= (rrc_erab_error_codes_t)SCELL_MODIFICATION_FAILED; 
			}
			else
			{
				fail_cause = (rrc_erab_error_codes_t)SCELL_CONFIG_FAILED;
			}    

		}
		else 
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED,
					"Scells modification successfully at MAC.");

		}
	}    


	if (RRC_TRUE == scell_release_flag)
	{
		if ( (RRC_TRUE == scell_add_fail_flag) ||
				(RRC_TRUE == scell_mod_fail_flag ))     
		{
			/* Release UE as Scell released cannot be rolled back */

			/* Stop Timer */
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
						"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
				rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
				p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
			}

			/* Populate the response code */
			p_modify_lc_resp->response_code = L3_FATAL;
			p_modify_lc_resp->bitmask |= UECC_LLIM_MODIFY_LC_RESP_FAIL_CAUSE_PRESENT;
			p_modify_lc_resp->fail_cause = fail_cause; 


			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_param->ue_index), 
					UECC_LLIM_MODIFY_LC_RESP,
					sizeof(*p_modify_lc_resp), 
					p_modify_lc_resp);

			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);

			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);

			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			return ;

		}
		else 
		{
			//Proceed as SUCCESS scenario  
			return ;
		}
	}
	else
	{
		if( (RRC_TRUE == scell_add_fail_flag) ||
				(RRC_TRUE == scell_mod_fail_flag) )
		{
			/* CASE : Rollback the MAC configuration  */
			/* Compose the scell release list for scells that are added
			 * successfully and compose scell modification list for
			 * those scells modified sucessfully in order to revert 
			 * back to previous configuration at MAC*/
			update_cell_id_operation_validity_for_config_error(p_mac_reconfigure_ue_entity_cnf,
					p_ue_ctx) ;
			update_scell_config_modify_lc_req_for_rollback(p_modify_lc_param);
			p_modify_lc_resp->bitmask |= UECC_LLIM_MODIFY_LC_RESP_FAIL_CAUSE_PRESENT;
			p_modify_lc_resp->fail_cause = fail_cause; 
			return ;
		}
	}
}

/******************************************************************************
 *   FUNCTION NAME: process_mac_modify_lc_req_failure_scell_config
 *
 *   INPUTS       : rrc_mac_reconfigure_ue_entity_cnf_t  
 *                      *p_mac_reconfigure_ue_entity_cnf
 *                   - Pointer to the RRC_MAC_RECONFIGURE_ENTITY_CNF msg
 *                     received from MAC
 *
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                   - Pointer to the LLIM global UE context data
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function processes the rrc_mac_reconfigure_ue_entity_cnf msg when
 *       failure is recieved and scell_config is received. It builds
 *       uecc_llim_modify_lc_resp with failure and sends to UECC.
 *       
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static  void process_mac_modify_lc_req_failure_scell_config(
        /*SPR 17777 +-*/
		rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
		)
{
	RRC_LLIM_UT_TRACE_ENTER();  

	rrc_uecc_llim_modify_lc_req_t  *p_modify_lc_param = PNULL;
	rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp  = PNULL; 

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;   

	p_modify_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;   

	/* on receiving FAILURE from MAC, 
	 * 1. Stop the timer 
	 * 2. send FAILURE to UECC
	 * 3. Set state to UEMH_STATE_UE_ENTITY_IN_SERVICE*/
	/* Stop Timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
		p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
	}
	/* Populate the response code */
	p_modify_lc_resp->response_code = FAILURE;

	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_param->ue_index), 
			UECC_LLIM_MODIFY_LC_RESP,
			sizeof(*p_modify_lc_resp), 
			p_modify_lc_resp);

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);

	rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
	p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

	RRC_LLIM_UT_TRACE_EXIT();  


}    


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_mac_reconfig_ue_state_mac_cnf
 *
 *   INPUTS       : void                                    *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if MAC is OK.
 *       state UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF;
 *       event UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_mac_reconfig_ue_state_mac_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_mac_reconfigure_ue_entity_cnf_t     *p_mac_reconfigure_ue_entity_cnf =
		(rrc_mac_reconfigure_ue_entity_cnf_t *)p_msg;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_mac_reconfigure_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm %p",p_rrc_llim_gl_ctx);       


	if(RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ||
			RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		process_mac_reconfig_modify_lc_cnf(
				p_api,
				p_mac_reconfigure_ue_entity_cnf, 
				p_ue_ctx);
	}
	else
	{
		build_and_send_rlc_reconfig_add_lc_req(
				p_api,
				p_mac_reconfigure_ue_entity_cnf, 
				p_ue_ctx);
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_xxx_reconfig_ue_state_timer_expired
 *
 *   INPUTS       : rrc_timer_t         timer_id
 *                  void                *p_timer_buf
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function stop ue reconfiguration and adding LC,
 *       rollback adding LC on lower layers
 *       state any of:
 *       UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF,
 *       event UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_xxx_reconfig_ue_state_timer_expired
(
 rrc_timer_t         timer_id,           /* timer_id - unused */
 void                *p_timer_buf,       /* p_uemh_timer_buf - unused */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_add_lc_req_t  *p_add_lc_param = PNULL;
	rrc_uecc_llim_add_lc_resp_t *p_add_lc_resp  = PNULL;

	rrc_uecc_llim_modify_lc_req_t  *p_modify_lc_param = PNULL;
	rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp  = PNULL;


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, " Unused variable in fsm p_timer_buf:%p timer_id :%p p_rrc_llim_gl_ctx:%p",
			p_timer_buf,timer_id,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/
	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;
	p_add_lc_resp  = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;
	p_modify_lc_resp  = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	/* Timer expired and is not valid any more */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Timer [LLIM_RECONFIG_UE_ENTITY_TIMER] "
			"expired");
	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;

	/* Prepare answer to UECC */

	if (RRC_LLIM_RECONFIG_ADD_LC_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		fill_uecc_llim_add_lc_resp(
				p_add_lc_resp,
				L3_FATAL,
				RRC_TIMER_EXPIRY,
				p_add_lc_param); 

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_add_lc_param->ue_index),
				UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), 
				p_add_lc_resp);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

	}
	else if (RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		build_and_send_uecc_add_lc_rollback_resp(
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.transaction_id,
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.ue_index,
				RRC_FAILURE,
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.cell_index);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

	}
	else if (RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		build_and_send_uecc_modify_lc_rollback_resp(
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_modify_lc_rollback.transaction_id,
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_modify_lc_rollback.ue_index,
				RRC_FAILURE,
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_modify_lc_rollback.cell_index);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	else if (RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		fill_uecc_llim_modify_lc_resp(
				p_modify_lc_resp,
				L3_FATAL,
				RRC_TIMER_EXPIRY,
				p_modify_lc_param); 

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_add_lc_param->ue_index),
				UECC_LLIM_MODIFY_LC_RESP,
				sizeof(*p_modify_lc_resp), 
				p_modify_lc_resp);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}

	UEMH_FSM_SET_STATE(p_ue_ctx,
			UEMH_STATE_UE_ENTITY_IN_SERVICE);
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_xxx_reestablish_ue_state_timer_expired
 *
 *   INPUTS       : rrc_timer_t         timer_id
 *                  void                *p_timer_buf
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function stop ue reestablishment on lower layers
 *       state any of:
 *       UEMH_STATE_W_FOR_RLC_REESTABLISH_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_PDCP_REESTABLISH_UE_ENTITY_CNF,
 *       event UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_xxx_reestablish_ue_state_timer_expired
(
 rrc_timer_t         timer_id,           /* timer_id - unused */
 void                *p_timer_buf,       /* p_uemh_timer_buf - unused */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_re_establish_ue_entity_resp_t  
		uecc_llim_re_establish_ue_entity_resp; 

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, " Unused variable in fsm p_timer_buf:%p timer_id :%p p_rrc_llim_gl_ctx=%p",
			p_timer_buf,timer_id,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/

	/* Timer expired and is not valid any more */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, 
			"Timer [LLIM_REESTABLISH_UE_ENTITY_TIMER] expired");
	if (PNULL == p_ue_ctx->curr_op_param.p_reestablish_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_reestablish_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer = PNULL;

	memset_wrapper(&uecc_llim_re_establish_ue_entity_resp, RRC_NULL, 
			sizeof(rrc_uecc_llim_re_establish_ue_entity_resp_t));
	/* Fill Top level response in
	 * uecc_llim_re_establish_ue_entity_resp */
	uecc_llim_re_establish_ue_entity_resp.response_code = L3_FATAL;

	rrc_llim_send_internal_msg(RRC_GET_UECC_MODULE_ID(p_ue_ctx->ue_index),
			UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP, 
			sizeof(uecc_llim_re_establish_ue_entity_resp), 
			&uecc_llim_re_establish_ue_entity_resp);

	/* Change to State UEMH_STATE_UE_ENTITY_IN_SERVICE */
	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	rrc_mem_free (p_ue_ctx->curr_op_param.p_reestablish_ue);
	p_ue_ctx->curr_op_param.p_reestablish_ue = PNULL;

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_xxx_reconfig_ue_state_delete_ue_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function stop ue reconfiguration and adding LC and delete ue.
 *       state any of:
 *       UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_DEL_ALL_LC_CNF,
 *       event UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_xxx_reconfig_ue_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_delete_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);       

	/* 1. Stop guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
		p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
	}

	/* 2. Set guard timer */
	/* 3. Delete on all lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
			UEMH_FSM_DEL_REQ,
			UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx),
			p_delete_ue_entity_req->ue_index,
			p_delete_ue_entity_req->transaction_id,
			p_rrc_llim_gl_ctx,
			p_delete_ue_entity_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_xxx_reconfig_ue_state_cleanup_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function cleanups UEMH FSM.
 *       state any of:
 *       UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF,
 *       UEMH_STATE_W_FOR_DEL_ALL_LC_CNF,
 *       event UEMH_EVENT_OAMH_CLEANUP_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_xxx_reconfig_ue_state_cleanup_req
(
 void                *p_api,
 void                *p_msg,
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_rcfg_ue_op_param_t *p_rcfg_ue_op = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	/*coverity fix start*/
	/*coverity fix stop*/

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p",p_api,p_msg);      


	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_rcfg_ue_op = p_ue_ctx->curr_op_param.p_rcfg_ue;

	/* 1. Stop guard timer */
	if (PNULL != p_rcfg_ue_op->guard_timer)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
				"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
		rrc_stop_timer(p_rcfg_ue_op->guard_timer);
		p_rcfg_ue_op->guard_timer = PNULL;
	}

	/* 2. delete from UE DB and free */
	uemh_cleanup_ue_ctx(p_ue_ctx);    

	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,
			p_ue_ctx->ue_index,PNULL);

/* SPR 20522 Fix Start */
	rrc_mem_free(p_ue_ctx);
	/* + Coverity 81516 */
	p_ue_ctx = PNULL;
	/* - Coverity 81516 */
/* SPR 20522 Fix End */
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_process_failure_rlc_reconfig_ue_entity_cnf
 *
 *   DESCRIPTION:
 *       Function processes Failure case for rlc_reconfigure_ue_entity_cnf
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_process_failure_rlc_reconfig_ue_entity_cnf(
		rrc_llim_ue_ctx_t               *p_ue_ctx,
		rrc_uecc_llim_add_lc_req_t      *p_add_lc_param,
		rrc_rlc_reconfig_ue_entity_cnf_t *p_rlc_reconfigure_ue_entity_cnf,
		rrc_uecc_llim_add_lc_resp_t      *p_add_lc_resp)
{
	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t lc_index = RRC_NULL;
	RRC_LLIM_UT_TRACE_ENTER();

	p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer =
		RRC_NULL;

	for (drb_index = 0; 
			drb_index < p_add_lc_param->
			create_drb_entity_counter; 
			++drb_index)
	{
		if(p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
				drb_status == RRC_LLIM_DRB_PASSED_AT_MAC)
		{
			for (lc_index = 0; 
					lc_index < p_rlc_reconfigure_ue_entity_cnf->
					num_create_entity_error; ++lc_index)
			{
				if (p_add_lc_param->create_drb_entity[drb_index].
						uecc_llim_drb_config.drb_config.
						logical_channel_identity ==
						p_rlc_reconfigure_ue_entity_cnf->
						create_error_entities[lc_index].
						lc_id)
				{
					RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d has failed"
							" at RLC",p_rlc_reconfigure_ue_entity_cnf->
							create_error_entities[lc_index].lc_id);

					llim_fill_response_code(
							&p_add_lc_resp->
							create_drb_status[drb_index].response,
							RRC_RLC_MODULE_ID,
							p_rlc_reconfigure_ue_entity_cnf->
							create_error_entities[lc_index].response);
				}
			}

			p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
				drb_status = RRC_LLIM_DRB_FAILED_AT_RLC;
		}
	}

	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ICS has failed at RLC");
		/* ICS procedure */
		for (lc_index = 0; lc_index < p_rlc_reconfigure_ue_entity_cnf->
				num_create_entity_error; ++lc_index)
		{
			if (p_add_lc_param->create_srb2_entity.lc_id ==
					p_rlc_reconfigure_ue_entity_cnf->
					create_error_entities[lc_index].lc_id)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d(SRB2) has failed"
						" at RLC",p_rlc_reconfigure_ue_entity_cnf->
						create_error_entities[lc_index].lc_id);

				llim_fill_response_code(
						&p_add_lc_resp->create_srb2_status.response,
						RRC_RLC_MODULE_ID,
						p_rlc_reconfigure_ue_entity_cnf->
						create_error_entities[lc_index].response);

				break;
			}
		}

		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		p_add_lc_resp->response_code = FAILURE;

		if (RRC_FAILURE == rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID
					(p_rlc_reconfigure_ue_entity_cnf->ue_index), 
					UECC_LLIM_ADD_LC_RESP,
					sizeof(*p_add_lc_resp), p_add_lc_resp))
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Unable to send ADD LC resp"
					" to UECC");
		}
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

		UEMH_FSM_SET_STATE(p_ue_ctx,
				UEMH_STATE_UE_ENTITY_IN_SERVICE);
		return;
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ERAB_SETUP has failed at RLC");

		if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
			return;
		}
		else
		{
			p_add_lc_resp->response_code = FAILURE;
			start_roll_back_for_add_lc(p_ue_ctx);
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_process_partial_succ_rlc_reconfig_ue_entity_cnf
 *
 *   DESCRIPTION:
 *     Function processes PartialSuccess case for rlc_reconfigure_ue_entity_cnf
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_process_partial_succ_rlc_reconfig_ue_entity_cnf(
		rrc_pdcp_reconf_ue_entity_req_t *p_pdcp_reconf_ue_entity_req,
		rrc_llim_ue_ctx_t               *p_ue_ctx,
		rrc_uecc_llim_add_lc_req_t      *p_add_lc_param,
		rrc_rlc_reconfig_ue_entity_cnf_t *p_rlc_reconfigure_ue_entity_cnf,
		rrc_uecc_llim_add_lc_resp_t      *p_add_lc_resp)
{
	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t lc_index = RRC_NULL;
	rrc_bool_et ics_failed = RRC_FALSE;
	rrc_bool_et found = RRC_FALSE;
	U16 passed_drb_at_previous_lower_layer = RRC_NULL;
	RRC_LLIM_UT_TRACE_ENTER();

	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
	{
		/* ICS procedure */
		for (lc_index = 0; lc_index < p_rlc_reconfigure_ue_entity_cnf->
				num_create_entity_error; ++lc_index)
		{
			if (p_add_lc_param->create_srb2_entity.lc_id ==
					p_rlc_reconfigure_ue_entity_cnf->
					create_error_entities[lc_index].lc_id)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"Srb2 has failed at RLC");
				llim_fill_response_code(
						&p_add_lc_resp->create_srb2_status.response,
						RRC_RLC_MODULE_ID,
						p_rlc_reconfigure_ue_entity_cnf->
						create_error_entities[lc_index].response);

				ics_failed = RRC_TRUE;
				break;
			}
		}

		if(p_rlc_reconfigure_ue_entity_cnf->num_create_entity_error ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				passed_drb_at_previous_lower_layer)
		{
			/*srb 2 has passed but all DRBs have failed*/
			ics_failed = RRC_TRUE;
		}

		if(RRC_FALSE == ics_failed)
		{

			p_pdcp_reconf_ue_entity_req->num_cr_srb_entity = 1;

			fill_pdcp_cr_srb_entities(  
					&p_pdcp_reconf_ue_entity_req->
					cr_srb_entities[0],
					&p_add_lc_param->create_srb2_entity);

			if (p_add_lc_param->create_srb2_entity.bitmask &
					UECC_LLIM_SRB_CONFIGURE_INTEGRITY_PROTECTION_PRESENT)
			{
				p_pdcp_reconf_ue_entity_req->optional_elems_present
					|=  RRC_PDCP_CR_SRB_CONFIG_INT_PRESENT;
				p_pdcp_reconf_ue_entity_req->config_integrity_protection
					= p_add_lc_param->create_srb2_entity.configure_integrity_protection;
			}

			if (p_add_lc_param->create_srb2_entity.bitmask &
					UECC_LLIM_SRB_CONFIGURE_CIPHERING_PRESENT)
			{
				p_pdcp_reconf_ue_entity_req->optional_elems_present
					|=
					RRC_PDCP_CR_SRB_CONFIG_CIPH_PRESENT;
				p_pdcp_reconf_ue_entity_req->config_srb_ciphering
					=
					p_add_lc_param->create_srb2_entity.configure_ciphering;
			}
		}
	}

	/*Check DRB status*/
	for (drb_index = 0; drb_index < p_add_lc_param->
			create_drb_entity_counter; ++drb_index)
	{
		found = RRC_FALSE;
		if(p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
				drb_status == RRC_LLIM_DRB_PASSED_AT_MAC)
		{
			for (lc_index = 0; 
					lc_index < p_rlc_reconfigure_ue_entity_cnf->
					num_create_entity_error; ++lc_index)
			{
				if (p_add_lc_param->create_drb_entity[drb_index].
						uecc_llim_drb_config.drb_config.
						logical_channel_identity ==
						p_rlc_reconfigure_ue_entity_cnf->
						create_error_entities[lc_index].lc_id)
				{
					found = RRC_TRUE;

					RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d has failed"
							" at RLC",p_rlc_reconfigure_ue_entity_cnf->
							create_error_entities[lc_index].lc_id);

					p_ue_ctx->curr_op_param.p_rcfg_ue->
						llim_drb_status[drb_index].drb_status = 
						RRC_LLIM_DRB_FAILED_AT_RLC;

					llim_fill_response_code(
							&p_add_lc_resp->create_drb_status[drb_index].
							response,
							RRC_RLC_MODULE_ID,
							p_rlc_reconfigure_ue_entity_cnf->
							create_error_entities[lc_index].response);

					break;
				}
			}

			if (RRC_FALSE == found && RRC_FALSE == ics_failed)
			{
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status = RRC_LLIM_DRB_PASSED_AT_RLC;

				fill_pdcp_cr_drb_entities( &p_pdcp_reconf_ue_entity_req->
						cr_drb_entities[
						p_pdcp_reconf_ue_entity_req->num_cr_drb_entity],
						&p_add_lc_param->
						create_drb_entity[drb_index]);

				++passed_drb_at_previous_lower_layer;

				++p_pdcp_reconf_ue_entity_req->num_cr_drb_entity;
			}
		}
	}

	/*This scenario will hit during ICS*/
	if (RRC_TRUE == ics_failed) 
	{    
		/*ICS has failed*/
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ICS has failed at"
				" RLC");
		/*Filling all DRBs as failed*/
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		p_add_lc_resp->response_code = FAILURE;

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_rlc_reconfigure_ue_entity_cnf->ue_index), 
				UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), p_add_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

		/*Exit due to failure*/
		return;

	}

	/*Saving count for passed number of DRBs at previous layer*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer =
		passed_drb_at_previous_lower_layer;

	if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/*Roll back has been triggered by UECC*/
		start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
		return;
	}
	else
	{
		if (p_add_lc_param->create_drb_entity[0].bitmask &
				UECC_LLIM_DRB_CONFIGURE_CIPHERING_PRESENT)
		{
			p_pdcp_reconf_ue_entity_req->optional_elems_present |=
				RRC_PDCP_CR_DRB_CONFIG_CIPH_PRESENT;
			p_pdcp_reconf_ue_entity_req->config_drb_ciphering
				=
				p_add_lc_param->create_drb_entity[0].configure_ciphering;
		}
		/*Number of passed DRBs will be created at next layer*/
		p_pdcp_reconf_ue_entity_req->num_cr_drb_entity =
			p_ue_ctx->curr_op_param.p_rcfg_ue->
			passed_drb_at_previous_lower_layer;

		p_add_lc_resp->response_code = PARTIAL_SUCCESS;

		if (RRC_SUCCESS == rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
					p_pdcp_reconf_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_add_lc_param->cell_index),
					p_add_lc_param->transaction_id,
					p_add_lc_param->cell_index))
		{
			UEMH_FSM_SET_STATE(p_ue_ctx,
					UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF);
			return;
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"Unable to send "
					"PDCP reconfig UE entity to PDCP");
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_process_success_rlc_reconfig_ue_entity_cnf
 *
 *   DESCRIPTION:
 *     Function processes Success case for rlc_reconfigure_ue_entity_cnf
 *
 *   RETURNS: None
 ******************************************************************************/
static void uemh_process_success_rlc_reconfig_ue_entity_cnf(
		rrc_pdcp_reconf_ue_entity_req_t *p_pdcp_reconf_ue_entity_req,
		rrc_llim_ue_ctx_t   *p_ue_ctx,
		rrc_uecc_llim_add_lc_req_t      *p_add_lc_param)
{
	rrc_counter_t drb_index = RRC_NULL;
#ifdef ENDC_ENABLED
    /*OPTION3X Changes Start*/
    U8  sn_terminated_split_bearer_count = RRC_ZERO;
	rrc_uecc_llim_add_lc_resp_t             *p_add_lc_resp = PNULL;
    /*OPTION3X Changes Start*/
#endif
	RRC_LLIM_UT_TRACE_ENTER();


	p_pdcp_reconf_ue_entity_req->ue_index = p_add_lc_param->ue_index;
	/* Create RB */
	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
	{
		p_pdcp_reconf_ue_entity_req->num_cr_srb_entity = 1;

		fill_pdcp_cr_srb_entities(  
				&p_pdcp_reconf_ue_entity_req->
				cr_srb_entities[0],
				&p_add_lc_param->create_srb2_entity);

		if (p_add_lc_param->create_srb2_entity.bitmask &
				UECC_LLIM_SRB_CONFIGURE_INTEGRITY_PROTECTION_PRESENT)
		{
			p_pdcp_reconf_ue_entity_req->optional_elems_present
				|=
				RRC_PDCP_CR_SRB_CONFIG_INT_PRESENT;
			p_pdcp_reconf_ue_entity_req->config_integrity_protection
				=
				p_add_lc_param->create_srb2_entity.configure_integrity_protection;
		}

		if (p_add_lc_param->create_srb2_entity.bitmask &
				UECC_LLIM_SRB_CONFIGURE_CIPHERING_PRESENT)
		{
			p_pdcp_reconf_ue_entity_req->optional_elems_present
				|=
				RRC_PDCP_CR_SRB_CONFIG_CIPH_PRESENT;
			p_pdcp_reconf_ue_entity_req->config_srb_ciphering
				=
				p_add_lc_param->create_srb2_entity.configure_ciphering;
		}
	}

	for (drb_index = 0; drb_index < p_add_lc_param->
			create_drb_entity_counter; ++drb_index)
	{
		if(p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
				drb_status == RRC_LLIM_DRB_PASSED_AT_MAC)
		{
			/*In case of RLC_SUCCESS, if drb has passed at MAC 
			  then it is also passed at RLC as only passed DRBs 
			  are reconfigured at RLC*/

#ifdef ENDC_ENABLED
            /*OPTION3X Changes Start*/

            /*check if the dc_bearer_type is present and the if the 
             * dc_bearer_type is SN_TERMINATED_SPLIT_BEARER,
             * in this case we will not send this lcid to PDCP*/
            if( (RRM_DRB_CONFIG_DC_BEARER_TYPE_PRESENT &
                    p_add_lc_param->create_drb_entity[drb_index].
                     uecc_llim_drb_config.drb_config.bitmask) &&
                    (SN_TERMINATED_SPLIT_BEARER == 
                     p_add_lc_param->create_drb_entity[drb_index].
                     uecc_llim_drb_config.drb_config.dc_bearer_type))
            {
                /*increment the counter*/
                sn_terminated_split_bearer_count++;
                continue;
            }
            /*OPTION3X Changes Stop*/
#endif
            
			fill_pdcp_cr_drb_entities(&p_pdcp_reconf_ue_entity_req->
					cr_drb_entities[
					p_pdcp_reconf_ue_entity_req->num_cr_drb_entity],
					&p_add_lc_param->
					create_drb_entity[drb_index]);
			p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
				drb_status = RRC_LLIM_DRB_PASSED_AT_RLC;

			++p_pdcp_reconf_ue_entity_req->num_cr_drb_entity;
		}
	}
	if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/*Roll back has been triggered by UECC*/
		start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
	}
	else
	{

#ifdef ENDC_ENABLED
        /*OPTION3X Changes Start*/
        p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;
        
        /*check if all the DRBs are SN_TERMINATED_SPLIT_BEARER then we shall not
         * send the reconfig to PDCP. S1U is already reconfigured earlier, hence send 
         * the response to UECC*/

        /*check if drb is present or only SRB is being reconfigured*/
        if (RRC_ZERO !=  p_add_lc_param->create_drb_entity_counter)    
        {                                                              
            if(RRC_ZERO == p_pdcp_reconf_ue_entity_req->num_cr_drb_entity &&
                    sn_terminated_split_bearer_count == 
                    p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer)
            {
                /*send the success response to UECC*/
                if(p_ue_ctx->curr_op_param.p_rcfg_ue->
                        passed_drb_at_previous_lower_layer ==
                        p_add_lc_param->create_drb_entity_counter)
                {
                    /*No need for a roll back*/
                    p_add_lc_resp->response_code = SUCCESS;

                    /* 1. Stop guard timer */
                    if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
                    {
                        RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
                                "[LLIM_RECONFIG_UE_ENTITY_TIMER]");
                        rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
                        p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
                    }

                    /* 2. send UECC_LLIM_ADD_LC_RESP */
                    rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_add_lc_param->ue_index),
                            UECC_LLIM_ADD_LC_RESP,
                            sizeof(*p_add_lc_resp), p_add_lc_resp);

                    UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
                    rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
                    p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
                }
                else
                {
                    p_add_lc_resp->response_code = PARTIAL_SUCCESS;
                    /*Start the roll back procedure*/
                    start_roll_back_for_add_lc(p_ue_ctx);
                }
                return;
            }
        }
        /*OPTION3X Changes Stop*/
#endif

		if (p_add_lc_param->create_drb_entity[0].bitmask &
				UECC_LLIM_DRB_CONFIGURE_CIPHERING_PRESENT)
		{
			p_pdcp_reconf_ue_entity_req->optional_elems_present |=
				RRC_PDCP_CR_DRB_CONFIG_CIPH_PRESENT;
			p_pdcp_reconf_ue_entity_req->config_drb_ciphering
				= p_add_lc_param->create_drb_entity[0].configure_ciphering;
		}

		RRC_ASSERT(p_pdcp_reconf_ue_entity_req->num_cr_drb_entity <=
				RRC_PDCP_MAX_DRB);

		/*SPS_fix*/
		if(RRC_NULL != p_pdcp_reconf_ue_entity_req->num_cr_drb_entity) 
		{
			/*SPS_fix*/
			/* Fill DL & UL SPS Info */
			p_pdcp_reconf_ue_entity_req->optional_elems_present |=
				RRC_PDCP_RECONFIG_UE_SPS_CONFIG_PRESENT;

			if (p_add_lc_param->sps_config.bitmask &
					RRC_SPS_CONFIG_SPS_CONFIG_DL_PRESENT)
			{
				/*SPS_fix*/
				p_pdcp_reconf_ue_entity_req->sps_config.optional_elems_present |= 
					RRC_PDCP_SPS_DL_INFO_PRESENT;
				/*SPS_fix*/

				if (p_add_lc_param->sps_config.sps_config_dl.bitmask &
						RRC_SPS_CONFIG_DL_PARAM_PRESENT)
				{
					/* Setup */
					p_pdcp_reconf_ue_entity_req->sps_config.sps_dl_info.request_type = 1; /* Setup */
					p_pdcp_reconf_ue_entity_req->sps_config.sps_dl_info.optional_elems_present |= 
						RRC_RLC_SPS_DL_SETUP_INFO_PRESENT;
					p_pdcp_reconf_ue_entity_req->sps_config.sps_dl_info.sps_dl_setup_info.
						semi_persistent_sched_interval_dl = 
						p_add_lc_param->sps_config.sps_config_dl.sps_config_dl_param.
						semi_persist_sched_interval_dl;
				}
				else
				{
					/* Release */
					p_pdcp_reconf_ue_entity_req->sps_config.sps_dl_info.request_type = 0; /* Release */

				}
			}

			if (p_add_lc_param->sps_config.bitmask &
					RRC_SPS_CONFIG_SPS_CONFIG_UL_PRESENT)
			{
				/*SPS_fix*/
				p_pdcp_reconf_ue_entity_req->sps_config.optional_elems_present |= 
					RRC_PDCP_SPS_UL_INFO_PRESENT;
				/*SPS_fix*/

				if (p_add_lc_param->sps_config.sps_config_ul.bitmask &
						RRC_SPS_CONFIG_UL_PARAM_PRESENT)
				{
					/* Setup */
					p_pdcp_reconf_ue_entity_req->sps_config.sps_ul_info.request_type = 1; /* Setup */
					p_pdcp_reconf_ue_entity_req->sps_config.sps_ul_info.optional_elems_present |= 
						RRC_RLC_SPS_UL_SETUP_INFO_PRESENT;
					p_pdcp_reconf_ue_entity_req->sps_config.sps_ul_info.sps_ul_setup_info.
						semi_persistent_sched_interval_ul = 
						p_add_lc_param->sps_config.sps_config_ul.sps_config_ul_param.
						semi_persist_sched_interval_ul;
				}
				else
				{
					/* Release */
					p_pdcp_reconf_ue_entity_req->sps_config.sps_ul_info.request_type = 0; /* Release */
				}
			}
		}
        /* SPS Stop */
        /*SPR_19066_START*/
        if(p_add_lc_param->bitmask & 
                UECC_LLIM_ADD_LC_REQ_UE_INACTIVITY_TIMER_PRESENT)
        {
            p_pdcp_reconf_ue_entity_req->optional_elems_present |=
                RRC_PDCP_RECONFIG_UE_INACTIVITY_TIMER_CONFIG_PRESENT;

            p_pdcp_reconf_ue_entity_req->ue_inactivity_timer.ue_inactive_time_config   
                = p_add_lc_param->ue_inactivity_timer.ue_inactive_time_config;
        } 
        /*SPR_19066_END*/
		if (RRC_SUCCESS == rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
					p_pdcp_reconf_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_add_lc_param->cell_index),
					p_add_lc_param->transaction_id,
					p_add_lc_param->cell_index))
		{

			UEMH_FSM_SET_STATE(p_ue_ctx,
					UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF);
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"Unable to send "
					"PDCP reconfig UE entity to PDCP");
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/*
 *   UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: build_and_send_pdcp_reconfig_add_lc_req 
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if RLC is OK.
 *       state UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF;
 *       event UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void build_and_send_pdcp_reconfig_add_lc_req 
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_rlc_reconfig_ue_entity_cnf_t *p_rlc_reconfigure_ue_entity_cnf =
		(rrc_rlc_reconfig_ue_entity_cnf_t*)p_msg;

	rrc_uecc_llim_add_lc_req_t              *p_add_lc_param = PNULL; 

	rrc_uecc_llim_add_lc_resp_t             *p_add_lc_resp = PNULL;

	rrc_pdcp_reconf_ue_entity_req_t pdcp_reconf_ue_entity_req;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT (PNULL != p_api);
	RRC_ASSERT (PNULL != p_msg);
	RRC_ASSERT (PNULL != p_ue_ctx);
	RRC_ASSERT (PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored; unused variable p_rrc_llim_gl_ctx=%p"
                ,p_rrc_llim_gl_ctx);/*SPR 17777+-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	memset_wrapper(&pdcp_reconf_ue_entity_req, 0, sizeof
			(pdcp_reconf_ue_entity_req));

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_add_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (RLC_SUCCESS == p_rlc_reconfigure_ue_entity_cnf->response_code)
	{
		uemh_process_success_rlc_reconfig_ue_entity_cnf(
				&pdcp_reconf_ue_entity_req, p_ue_ctx, p_add_lc_param);
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	else if (RLC_PARTIAL_SUCCESS == 
			p_rlc_reconfigure_ue_entity_cnf->response_code)
	{
		uemh_process_partial_succ_rlc_reconfig_ue_entity_cnf(
				&pdcp_reconf_ue_entity_req, p_ue_ctx, p_add_lc_param,
				p_rlc_reconfigure_ue_entity_cnf, p_add_lc_resp);
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	else if (RLC_FAILURE == p_rlc_reconfigure_ue_entity_cnf->response_code)
	{
		uemh_process_failure_rlc_reconfig_ue_entity_cnf(
				p_ue_ctx, p_add_lc_param,
				p_rlc_reconfigure_ue_entity_cnf, p_add_lc_resp);
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Invalid Response"
				" Received in Reconfig UE entity Req from RLC");
		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		fill_uecc_llim_add_lc_resp(
				p_add_lc_resp,
				L3_FATAL,
				RRC_INVALID_RESPONSE_RECEIVED,
				p_add_lc_param
				);

		/* 2. send UECC_LLIM_ADD_LC_RESP */
		rrc_llim_send_internal_msg( 
				RRC_GET_UECC_MODULE_ID(p_rlc_reconfigure_ue_entity_cnf->ue_index), UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), p_add_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx,
				UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

	}

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: process_rlc_reconfig_modify_lc_cnf 
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if RLC is OK.
 *       state UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF;
 *       event UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void process_rlc_reconfig_modify_lc_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	rrc_rlc_reconfig_ue_entity_cnf_t        *p_rlc_reconfig_ue_entity_cnf =
		(rrc_rlc_reconfig_ue_entity_cnf_t *)p_msg;

	rrc_uecc_llim_modify_lc_req_t           *p_modify_lc_param = PNULL;

	rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp  = PNULL;

	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t lc_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;

	p_modify_lc_resp  =
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_modify_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (RLC_SUCCESS == p_rlc_reconfig_ue_entity_cnf->response_code)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "Successfuly Modified LCs at RLC ");
	}

	else if (RLC_PARTIAL_SUCCESS == p_rlc_reconfig_ue_entity_cnf->response_code)
	{
		p_modify_lc_resp->response_code = PARTIAL_SUCCESS;

		/* All channels statuses were set to RRC_SUCCESS,
		 *  now fail only specific channels */
		for (lc_index = 0; lc_index < p_rlc_reconfig_ue_entity_cnf->
				num_reconfig_entity_error; ++lc_index)
		{

			for (drb_index = 0; 
					drb_index < p_modify_lc_param->
					modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
					drb_counter; 
					++drb_index)
			{
				if (p_modify_lc_param->
						modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						logical_channel_identity ==
						p_rlc_reconfig_ue_entity_cnf->
						reconfig_error_entities[lc_index].lc_id)
				{
					/*Store in ue_ctx for roll back*/
					update_drb_fail_status(p_ue_ctx,drb_index,
							RRC_LLIM_DRB_PASSED_AT_RLC);

					llim_fill_response_code(
							&p_modify_lc_resp->
							modify_drb_status[drb_index].response,
							RRC_RLC_MODULE_ID,
							p_rlc_reconfig_ue_entity_cnf->
							reconfig_error_entities[lc_index].response);

					p_modify_lc_resp->modify_drb_status[drb_index].
						lc_id = 
						p_rlc_reconfig_ue_entity_cnf->
						reconfig_error_entities[lc_index].
						lc_id;
				}
			}
		}
	}
	else if (RLC_FAILURE == p_rlc_reconfig_ue_entity_cnf->response_code)
	{
		for (lc_index = 0; lc_index < p_rlc_reconfig_ue_entity_cnf->
				num_reconfig_entity_error; ++lc_index)
		{

			for (drb_index = 0; 
					drb_index < p_modify_lc_param->
					modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
					drb_counter; 
					++drb_index)
			{
				if (p_modify_lc_param->
						modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						logical_channel_identity ==
						p_rlc_reconfig_ue_entity_cnf->
						reconfig_error_entities[lc_index].lc_id)
				{
					/*Store in ue_ctx for roll back*/
					update_drb_fail_status(p_ue_ctx,drb_index,
							RRC_LLIM_DRB_PASSED_AT_RLC);
					llim_fill_response_code(
							&p_modify_lc_resp->
							modify_drb_status[drb_index].response,
							RRC_RLC_MODULE_ID,
							p_rlc_reconfig_ue_entity_cnf->
							reconfig_error_entities[lc_index].response);
					p_modify_lc_resp->modify_drb_status[drb_index].
						lc_id = 
						p_rlc_reconfig_ue_entity_cnf->
						reconfig_error_entities[lc_index].
						lc_id;
				}
			}
		}
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/*Strating UECC trigerred Roll Back Procedure*/

		p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
			RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING;

		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"UECC trigerred Roll Back Started");
		check_and_start_roll_back_for_drb_modify(p_ue_ctx);
	}
	else if (FAILURE == 
			build_and_send_pdcp_reconfig_modify_lc_req(p_ue_ctx)) 
	{
		RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for"
				" Modify LC request at PDCP");

		if (FAILURE == 
				build_and_send_s1u_reconfig_modify_lc_req(p_ue_ctx)) 
		{
			RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for"
					" Modify LC request at S1u");

			if(FAILURE == 
					build_and_send_phy_reconfig_modify_lc_req(p_ue_ctx))
			{
				RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for Modify LC"
						" request at PHY");

				/*ambr*/
				if (RLC_SUCCESS != p_rlc_reconfig_ue_entity_cnf->response_code)
				{
					RRC_LLIM_TRACE(RRC_INFO,"Modify LC Roll back start");

					p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
						RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_GOING ;

					check_and_start_roll_back_for_drb_modify(p_ue_ctx);
				}
				else /*If rlc_reconf_ue_entity_cnf == SUCCESS, then send SUCCESS to UECC*/
				{
					/*Stop Timer*/
					if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
					{
						RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
								"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
						rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
						p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
					}

					RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "Modify LC completed ");
					p_modify_lc_resp->response_code = SUCCESS;

					rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_param->ue_index), 
							UECC_LLIM_MODIFY_LC_RESP,
							sizeof(*p_modify_lc_resp), p_modify_lc_resp);

					UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
					rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
					p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
				}
				/*ambr*/
			}
		}
	}


	RRC_LLIM_UT_TRACE_EXIT();
}



/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_rlc_reconfig_ue_state_rlc_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if RLC is OK.
 *       state UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF;
 *       event UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_rlc_reconfig_ue_state_rlc_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	if(RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ||
			RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		process_rlc_reconfig_modify_lc_cnf(p_api,p_msg,
				p_ue_ctx);
	}
	else
	{
		build_and_send_pdcp_reconfig_add_lc_req(p_api,p_msg,
				p_ue_ctx,p_rrc_llim_gl_ctx);
	}
	RRC_LLIM_UT_TRACE_EXIT();

}

/*
 *   UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: fill_s1u_reconfig_ue_add_lc_paramters
 *
 *   INPUTS       : rrc_s1u_ie_relay_setup_sap_req_t  *p_setup_sap_req
 *                  rrc_uecc_llim_create_drb_entity_t *p_create_drb_entity
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function fills the S1U related parameters for DRB.
 *   RETURNS:
 *       None
 *
 ******************************************************************************/

static void fill_s1u_reconfig_ue_add_lc_paramters(
		rrc_s1u_ie_relay_setup_sap_req_t  *p_setup_sap_req,
		rrc_uecc_llim_create_drb_entity_t *p_create_drb_entity)
{

	U8   index = 0;
	RRC_LLIM_UT_TRACE_ENTER();
	p_setup_sap_req->bitmask = RRC_NULL;

	p_setup_sap_req->lc_id =
		p_create_drb_entity->uecc_llim_drb_config.
		drb_config.logical_channel_identity;

	p_setup_sap_req->qos_id =
		p_create_drb_entity->uecc_llim_drb_config.drb_config.s1u_config.qos_id;
	/* lipa start */    
	p_setup_sap_req->num_tunnel_info = 
		p_create_drb_entity->drb_s1u_info.tunnel_list_count;

	for (index = 0 ;
			index < p_create_drb_entity->drb_s1u_info.tunnel_list_count ;
			index++)
	{
		p_setup_sap_req->tunnel_info[index].sap_flag =
			p_create_drb_entity->drb_s1u_info.tunnel_info_list[index].sap_flag;

		p_setup_sap_req->tunnel_info[index].bitmask |= 
			RRC_S1U_IE_TUNNEL_INFO_TEID_PEER_PRESENT;

		p_setup_sap_req->tunnel_info[index].teid_peer.teid =
			p_create_drb_entity->drb_s1u_info.
			tunnel_info_list[index].teid_peer;


		p_setup_sap_req->tunnel_info[index].bitmask |=
			RRC_S1U_IE_TUNNEL_INFO_TRANSPORT_ADDR_PRESENT;

		p_setup_sap_req->tunnel_info[index].transport_addr.
			data_length =
			p_create_drb_entity->drb_s1u_info.
			tunnel_info_list[index].transport_addr.data_length;

		l3_memcpy_wrapper(p_setup_sap_req->tunnel_info[index].transport_addr.data,
				p_create_drb_entity->drb_s1u_info.
				tunnel_info_list[index].transport_addr.data,
				sizeof(p_setup_sap_req->tunnel_info[index].transport_addr.data));
	}
	/* lipa end */    
	p_setup_sap_req->bitmask |=
		RRC_S1U_IE_SETUP_QOS_PROFILE_PRESENT;
	p_setup_sap_req->qos_profile.
		allocation_retention_priority =
		p_create_drb_entity->uecc_llim_drb_config.drb_config.
		s1u_config.qos_profile.allocation_retention_priority;

	p_setup_sap_req->qos_profile.
		qos_profile_data_length =
		p_create_drb_entity->uecc_llim_drb_config.drb_config.
		s1u_config.qos_profile.qos_profile_data_size;

	l3_memcpy_wrapper(p_setup_sap_req->qos_profile.qos_profile_data,
			p_create_drb_entity->uecc_llim_drb_config.drb_config.
			s1u_config.qos_profile.qos_profile_data,
			sizeof(p_setup_sap_req->
				qos_profile.qos_profile_data));

	p_setup_sap_req->bitmask |=
		RRC_S1U_IE_SETUP_SEQ_FLAG_PRESENT;
	p_setup_sap_req->seq_flag.disable =
		p_create_drb_entity->uecc_llim_drb_config.drb_config.
		s1u_config.seq_flag;

	p_setup_sap_req->bitmask |=
		RRC_S1U_IE_SETUP_REORDERING_REQD_PRESENT;
	p_setup_sap_req->reordering_reqd.
		reordering_reqd =
		p_create_drb_entity->uecc_llim_drb_config.drb_config.
		s1u_config.reordering_reqd;

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: build_and_send_s1u_reconfig_ue_add_lc_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if PDCP is OK.
 *   
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void build_and_send_s1u_reconfig_ue_add_lc_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_pdcp_reconfig_ue_entity_cnf_t       *p_pdcp_reconfig_ue_entity_cnf =
		(rrc_pdcp_reconfig_ue_entity_cnf_t *)p_msg;

	rrc_uecc_llim_add_lc_req_t              *p_add_lc_param = PNULL;

	rrc_uecc_llim_add_lc_resp_t             *p_add_lc_resp = PNULL;

	rrc_s1u_reconfigure_ue_entity_req_t      s1u_reconf_ue_entity_req;

	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t srb_index = RRC_NULL;
	rrc_counter_t lc_index  = RRC_NULL;

	rrc_bool_et drb_failed       = RRC_FALSE;
	rrc_bool_et ics_failed       = RRC_FALSE;

	U16 passed_drb_at_previous_lower_layer = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_reconfig_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored; unused variable p_rrc_llim_gl_ctx=%p"
                ,p_rrc_llim_gl_ctx);/*SPR 17777+-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	memset_wrapper(&s1u_reconf_ue_entity_req, 0, sizeof
			(s1u_reconf_ue_entity_req));

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_add_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (PDCP_SUCCESS == p_pdcp_reconfig_ue_entity_cnf->response_code)
	{

		s1u_reconf_ue_entity_req.ue_index           = p_add_lc_param->ue_index;

		for (drb_index = 0; drb_index < p_add_lc_param->
				create_drb_entity_counter; ++drb_index)
		{
			if(p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status == RRC_LLIM_DRB_PASSED_AT_RLC)
			{
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status = RRC_LLIM_DRB_PASSED_AT_PDCP;

				fill_s1u_reconfig_ue_add_lc_paramters(
						&s1u_reconf_ue_entity_req.setup_sap_req[
						s1u_reconf_ue_entity_req.num_setup_sap_req],
						&p_add_lc_param->create_drb_entity[drb_index]);

				++s1u_reconf_ue_entity_req.num_setup_sap_req;
			}

		}
		if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			/*Roll back has been triggered by UECC*/
			start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
		}
		else
		{

			/*Only previusly passed DRB will be added at S1u */
			RRC_ASSERT(s1u_reconf_ue_entity_req.num_setup_sap_req  == 
					p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer);

			RRC_ASSERT(s1u_reconf_ue_entity_req.num_setup_sap_req <=
					RRC_PDCP_MAX_DRB);

			if(RRC_FAILURE == rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
						&s1u_reconf_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_add_lc_param->cell_index),
						p_add_lc_param->transaction_id,
						p_add_lc_param->cell_index))
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Unable to send "
						"Reconfig UE request to S1U");

			}
			else
			{
				UEMH_FSM_SET_STATE(p_ue_ctx,
						UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF);
			}
		}
	}
	else if (PDCP_PARTIAL_SUCCESS == p_pdcp_reconfig_ue_entity_cnf->
			response_code ||
			(PDCP_FAILURE == p_pdcp_reconfig_ue_entity_cnf->
			 response_code ))
	{
		/* All channels statuses were set to RRC_SUCCESS,
		 *  now fail only specific channels */
		if (p_add_lc_param->bitmask &
				UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
		{

			for (srb_index = 0; srb_index < p_pdcp_reconfig_ue_entity_cnf->
					num_cr_srb_entity_error; ++srb_index)
			{
				if (p_add_lc_param->create_srb2_entity.lc_id ==
						p_pdcp_reconfig_ue_entity_cnf->
						cr_srb_error_entities[srb_index].lc_id)
				{
					RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"SRB2 has failed at PDCP");
					llim_fill_response_code(
							&p_add_lc_resp->create_srb2_status.response,
							RRC_PDCP_MODULE_ID,
							p_pdcp_reconfig_ue_entity_cnf->
							cr_srb_error_entities[srb_index].response);

					ics_failed = RRC_TRUE;
					break;
				}
			}

		}
		/* Srb2 and atleast one drb has passed 
		 * All channels statuses were set to RRC_SUCCESS,
		 *  now fail only specific channels */
		for (drb_index = 0; drb_index < p_add_lc_param->
				create_drb_entity_counter; ++drb_index)
		{
			drb_failed = RRC_FALSE;

			if(p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status == RRC_LLIM_DRB_PASSED_AT_RLC)
			{
				for (lc_index = 0; 
						lc_index < p_pdcp_reconfig_ue_entity_cnf->
						num_cr_drb_entity_error; ++lc_index)
				{
					if (p_add_lc_param->create_drb_entity[drb_index].
							uecc_llim_drb_config.drb_config.
							logical_channel_identity ==
							p_pdcp_reconfig_ue_entity_cnf->
							cr_drb_error_entities[lc_index].lc_id)
					{
						drb_failed = RRC_TRUE;
						RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d has failed"
								" at PDCP",
								p_pdcp_reconfig_ue_entity_cnf->
								cr_drb_error_entities[lc_index].lc_id);

						p_ue_ctx->curr_op_param.p_rcfg_ue->
							llim_drb_status[drb_index].drb_status = 
							RRC_LLIM_DRB_FAILED_AT_PDCP;

						llim_fill_response_code(
								&p_add_lc_resp->
								create_drb_status[drb_index].response,
								RRC_PDCP_MODULE_ID,
								p_pdcp_reconfig_ue_entity_cnf->
								cr_drb_error_entities[lc_index].response);
						break;
					}
				}

				if(RRC_FALSE == drb_failed && RRC_FALSE == ics_failed)
				{
					p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
						drb_status = RRC_LLIM_DRB_PASSED_AT_PDCP;

					fill_s1u_reconfig_ue_add_lc_paramters(
							&s1u_reconf_ue_entity_req.setup_sap_req[
							s1u_reconf_ue_entity_req.num_setup_sap_req],
							&p_add_lc_param->create_drb_entity[drb_index]);

					++s1u_reconf_ue_entity_req.num_setup_sap_req;

					++passed_drb_at_previous_lower_layer;
				}
			}
		}
		p_ue_ctx->curr_op_param.p_rcfg_ue->
			passed_drb_at_previous_lower_layer =
			passed_drb_at_previous_lower_layer;

		if ((RRC_TRUE == ics_failed) ||  /*SRB2 failed*/
				(p_pdcp_reconfig_ue_entity_cnf->num_cr_drb_entity_error ==
				 p_ue_ctx->curr_op_param.p_rcfg_ue->
				 passed_drb_at_previous_lower_layer &&
				 p_add_lc_param->bitmask &
				 UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT))

			/*SRB2 has passed but all DRBs has failed*/
		{
			/*ICS has failed*/
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ICS has failed at PDCP");

			/* 1. Stop guard timer */
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
						"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
				rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
				p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
			}

			p_add_lc_resp->response_code                = FAILURE;

			if(RRC_FAILURE == rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID
						(p_pdcp_reconfig_ue_entity_cnf->ue_index), 
						UECC_LLIM_ADD_LC_RESP,
						sizeof(*p_add_lc_resp), p_add_lc_resp))
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Unable to send "
						"ADD LC RESP to UECC");
			}
			else
			{
				UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			}
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		else if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			/*Roll back has been triggered by UECC*/
			start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
		}
		else if (RRC_NULL != passed_drb_at_previous_lower_layer)
		{

			p_add_lc_resp->response_code = PARTIAL_SUCCESS;

			/*Updating UE context*/
			p_ue_ctx->curr_op_param.p_rcfg_ue->
				passed_drb_at_previous_lower_layer =
				passed_drb_at_previous_lower_layer;

			if(RRC_FAILURE == rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
						&s1u_reconf_ue_entity_req, 
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_add_lc_param->cell_index),
						p_add_lc_param->transaction_id,
						p_add_lc_param->cell_index))
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Unable to send "
						"S1u reconfig ue entity req");
			}
			else
			{
				UEMH_FSM_SET_STATE(p_ue_ctx,
						UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF);
			}
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ERAB_SETUP has failed at PDCP");
			p_add_lc_resp->response_code = FAILURE;
			start_roll_back_for_add_lc(p_ue_ctx);
		}


	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Invalid Response"
				" Received in Reconfig UE entity Req from PDCP");
		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		fill_uecc_llim_add_lc_resp(
				p_add_lc_resp,
				L3_FATAL,
				RRC_INVALID_RESPONSE_RECEIVED,
				p_add_lc_param
				);

		/* 2. send UECC_LLIM_ADD_LC_RESP */
		rrc_llim_send_internal_msg( 
				RRC_GET_UECC_MODULE_ID(p_pdcp_reconfig_ue_entity_cnf->ue_index), UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), p_add_lc_resp);
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

	}

	RRC_LLIM_UT_TRACE_EXIT();
}



/******************************************************************************
 *   FUNCTION NAME: process_pdcp_reconfig_modify_lc_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and modifying LC if PDCP is OK.
 *   
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void process_pdcp_reconfig_modify_lc_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_pdcp_reconfig_ue_entity_cnf_t       *p_pdcp_reconfig_ue_entity_cnf =
		(rrc_pdcp_reconfig_ue_entity_cnf_t *)p_msg;
	rrc_uecc_llim_modify_lc_req_t           *p_modify_lc_param = PNULL;

	rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp  = PNULL;

	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t counter = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_reconfig_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL"
				"- ignored; unused variable  p_rrc_llim_gl_ctx=%p",p_rrc_llim_gl_ctx);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_modify_lc_param = &p_ue_ctx->
		curr_op_param.p_rcfg_ue->uecc_modify_lc;

	p_modify_lc_resp  =
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_modify_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (PDCP_SUCCESS == p_pdcp_reconfig_ue_entity_cnf->response_code)
	{
		RRC_LLIM_TRACE(RRC_INFO,"Successfully Modified all LC at PDCP");
	}
	else if ((PDCP_PARTIAL_SUCCESS == p_pdcp_reconfig_ue_entity_cnf->
				response_code) ||
			(PDCP_FAILURE == p_pdcp_reconfig_ue_entity_cnf->response_code))
	{

		/* All channels statuses were set to RRC_SUCCESS,
		 *  now fail only specific channels */
		for (counter = 0; drb_index < p_pdcp_reconfig_ue_entity_cnf->
				num_rcfg_drb_entity_error; ++counter)
		{
			for(drb_index = 0;
					drb_index < p_modify_lc_param->modify_drb_entity[
					RRC_UECC_NEW_DRB_CONFIG_VERSION].drb_counter;
					++drb_index)
			{
				if (p_modify_lc_param->
						modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						uecc_llim_drb_config[drb_index].drb_config.
						logical_channel_identity ==
						p_pdcp_reconfig_ue_entity_cnf->
						rcfg_drb_error_entities[counter].lc_id)
				{
					/*store in ue_ctx for rollback*/
					update_drb_fail_status(p_ue_ctx,drb_index,
							RRC_LLIM_DRB_PASSED_AT_PDCP);

					llim_fill_response_code(
							&p_modify_lc_resp->
							modify_drb_status[drb_index].response,
							RRC_PDCP_MODULE_ID,
							p_pdcp_reconfig_ue_entity_cnf->
							rcfg_drb_error_entities[counter].response);

					p_modify_lc_resp->modify_drb_status[drb_index].
						lc_id = 
						p_pdcp_reconfig_ue_entity_cnf->
						rcfg_drb_error_entities[counter].
						lc_id;

					break;
				}
			}
		}
		if (PDCP_PARTIAL_SUCCESS == p_pdcp_reconfig_ue_entity_cnf->
				response_code)
		{
			p_modify_lc_resp->response_code = PARTIAL_SUCCESS;       
		}
		else
		{
			p_modify_lc_resp->response_code = FAILURE;       
		}
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

/*SPR_16942_START*/
	if((RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
                p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure) ||
            (FAILURE == p_modify_lc_resp->response_code))
/*SPR_16942_END*/
	{
		/*Strating UECC trigerred Roll Back Procedure*/

		p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
			RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING;

		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"UECC trigerred Roll Back Started");
		check_and_start_roll_back_for_drb_modify(p_ue_ctx);
	}
/*Partial Sucess Fix +*/
/*Partial Sucess Fix -*/
	else if (FAILURE == build_and_send_s1u_reconfig_modify_lc_req(p_ue_ctx)) 
	{
		RRC_LLIM_TRACE(RRC_INFO,"No Reconfig Info sent to S1u");
		if(FAILURE == 
				build_and_send_phy_reconfig_modify_lc_req(p_ue_ctx))
		{
			RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for Modify LC"
					" request at PHY");
                        
            /* SPR 14387 Fix Start */
            /*Stop Timer*/
            if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
            {
                RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
                        "[LLIM_RECONFIG_UE_ENTITY_TIMER]");
                rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
                p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
            }

            RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "Modify LC completed ");
            p_modify_lc_resp->response_code = SUCCESS;

            rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_param->ue_index),
                    UECC_LLIM_MODIFY_LC_RESP,
                    sizeof(*p_modify_lc_resp), p_modify_lc_resp);

            UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
            rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
            p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
            /* SPR 14387 Fix Stop */
			
	}
}
	RRC_LLIM_UT_TRACE_EXIT();
}

#ifdef ENDC_ENABLED
/*NR_DC Code Change Start*/
/******************************************************************************
 *   FUNCTION NAME: rrc_build_and_send_rrc_phy_reconfig_ue_entity_req 
 *
 *   INPUTS       : void                *p_api 
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function builds and send RRC_PHY_RECONFIG_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 ******************************************************************************/
static void rrc_build_and_send_rrc_phy_reconfig_ue_entity_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_pdcp_reconfig_ue_entity_cnf_t       *p_pdcp_reconfig_ue_entity_cnf =
		(rrc_pdcp_reconfig_ue_entity_cnf_t *)p_msg;

	rrc_uecc_llim_add_lc_req_t          *p_add_lc_param = PNULL;
	rrc_uecc_llim_add_lc_resp_t         *p_add_lc_resp  = PNULL;
	rrc_counter_t                       srb_index       = RRC_NULL;
	rrc_return_et                       response_code   = RRC_FAILURE;
	rrc_bool_et                         ics_failed      = RRC_FALSE;
	rrc_phy_reconfig_ue_entity_req_t    phy_reconfig_ue_entity_req;

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_reconfig_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

    if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
    {
        RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
                "p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
        RRC_LLIM_UT_TRACE_EXIT();
        return;
    }

    p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;
    p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, " Unused variable in fsm :%p",p_rrc_llim_gl_ctx);     

	if (PDCP_SUCCESS == p_pdcp_reconfig_ue_entity_cnf->response_code)
    {
        if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
                p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
        {
            /*Roll back has been triggered by UECC*/
            start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
        }

        if (p_add_lc_param->bitmask &
                UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
        {
            /* Send RRC_PHY_RECONFIG_UE_ENTITY_REQ only if
             *  RRC_UECC_LLIM_PHY_CONFIG_DEDICATED_PRESENT */
            if (p_add_lc_param->bitmask &
                    UECC_LLIM_ADD_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT)
            {

                /* 1. send RRC_PHY_RECONFIG_UE_ENTITY_REQ */
                memset_wrapper(&phy_reconfig_ue_entity_req, 0, sizeof
                        (phy_reconfig_ue_entity_req));


                phy_reconfig_ue_entity_req.ue_index = p_add_lc_param->ue_index;
                phy_reconfig_ue_entity_req.physical_config_dedicated =
                    p_add_lc_param->physical_config_dedicated;

                response_code = rrc_phy_il_send_rrc_phy_reconfig_ue_entity_req(
                        &phy_reconfig_ue_entity_req, 
                        RRC_LLIM_MODULE_ID,
                        RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,p_add_lc_param->cell_index),
                        p_add_lc_param->transaction_id,
                        p_add_lc_param->cell_index);

                if (RRC_SUCCESS == response_code)
                {

                    UEMH_FSM_SET_STATE(p_ue_ctx,
                            UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF);
                }
                else
                {
                    RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"Unable to send "
                            "PHY reconfig UE entity req to PHY");
                }
            }
            else
            {
                /*No need for a roll back*/
                p_add_lc_resp->response_code = SUCCESS;

                /* 1. Stop guard timer */
                if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
                {
                    RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
                            "[LLIM_RECONFIG_UE_ENTITY_TIMER]");
                    rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
                    p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
                }

                /* 2. send UECC_LLIM_ADD_LC_RESP */
                rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_pdcp_reconfig_ue_entity_cnf->ue_index),
                        UECC_LLIM_ADD_LC_RESP,
                        sizeof(*p_add_lc_resp), p_add_lc_resp);

                UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
                rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
                p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

            }
        }	
    }
	else if (PDCP_PARTIAL_SUCCESS == p_pdcp_reconfig_ue_entity_cnf->
			response_code ||
			(PDCP_FAILURE == p_pdcp_reconfig_ue_entity_cnf->
			 response_code ))
    {
        /* All channels statuses were set to RRC_SUCCESS,
         *  now fail only specific channels */
        if (p_add_lc_param->bitmask &
                UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
        {
            for (srb_index = 0; srb_index < p_pdcp_reconfig_ue_entity_cnf->
                    num_cr_srb_entity_error; ++srb_index)
            {
                if (p_add_lc_param->create_srb2_entity.lc_id ==
                        p_pdcp_reconfig_ue_entity_cnf->
                        cr_srb_error_entities[srb_index].lc_id)
                {
                    RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"SRB2 has failed at PDCP");
                    llim_fill_response_code(
                            &p_add_lc_resp->create_srb2_status.response,
                            RRC_PDCP_MODULE_ID,
                            p_pdcp_reconfig_ue_entity_cnf->
                            cr_srb_error_entities[srb_index].response);

                    ics_failed = RRC_TRUE;
                    break;
                }
            }

        }

        if (RRC_TRUE == ics_failed) /*SRB2 failed*/
        {
            /*ICS has failed*/
            RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ICS has failed at PDCP");

            /* 1. Stop guard timer */
            if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
            {
                RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
                        "[LLIM_RECONFIG_UE_ENTITY_TIMER]");
                rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
                p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
            }

            p_add_lc_resp->response_code                = FAILURE;

            if(RRC_FAILURE == rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID
                        (p_pdcp_reconfig_ue_entity_cnf->ue_index), 
                        UECC_LLIM_ADD_LC_RESP,
                        sizeof(*p_add_lc_resp), p_add_lc_resp))
            {
                RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Unable to send "
                        "ADD LC RESP to UECC");
            }
            else
            {
                UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
            }
            rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
            p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
        }
        else if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
                p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
        {
            /*Roll back has been triggered by UECC*/
            start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
        }
    }
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Invalid Response"
				" Received in Reconfig UE entity Req from PDCP");
		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		fill_uecc_llim_add_lc_resp(
				p_add_lc_resp,
				L3_FATAL,
				RRC_INVALID_RESPONSE_RECEIVED,
				p_add_lc_param
				);

		/* 2. send UECC_LLIM_ADD_LC_RESP */
		rrc_llim_send_internal_msg( 
				RRC_GET_UECC_MODULE_ID(p_pdcp_reconfig_ue_entity_cnf->ue_index), UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), p_add_lc_resp);
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

	}
}
/*NR_DC Code Change Stop*/
#endif

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_pdcp_reconfig_ue_state_pdcp_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if PDCP is OK.
 *       state UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_pdcp_reconfig_ue_state_pdcp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if(RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ||
			RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		process_pdcp_reconfig_modify_lc_cnf(
				p_api,p_msg,p_ue_ctx,p_rrc_llim_gl_ctx);
	}
	else
	{
#ifdef ENDC_ENABLED
        /*NR_DC Code Change Start*/
        /*Check if there is any DRB information, whch needs to be 
         * sent to S1U. If not then send
         * RRC_PHY_RECONFIG_UE_ENTITY_REQ*/ 
        if(RRC_NULL == 
                p_ue_ctx->curr_op_param.p_rcfg_ue->\
                uecc_add_lc.create_drb_entity_counter)
        {
            rrc_build_and_send_rrc_phy_reconfig_ue_entity_req(
                    p_api,
                    p_msg,
                    p_ue_ctx,
                    p_rrc_llim_gl_ctx);
        }
        else
        {
            /*NR_DC Code Change Stop*/
#endif

            build_and_send_s1u_reconfig_ue_add_lc_req(
                    p_api,p_msg,p_ue_ctx,p_rrc_llim_gl_ctx);
#ifdef ENDC_ENABLED
/*NR_DC Code Change Start*/
        }
/*NR_DC Code Change Stop*/
#endif
	}
}

/******************************************************************************
 *   FUNCTION NAME: process_s1u_reconfig_add_lc_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function processes s1u reconfig add LC req
 *
 *   RETURNS:
 *       None
 ******************************************************************************/
static void process_s1u_reconfig_add_lc_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{   

	rrc_s1u_reconfigure_ue_entity_cnf_t     *p_s1u_reconf_ue_entity_cnf =
		(rrc_s1u_reconfigure_ue_entity_cnf_t *)p_msg;

	rrc_uecc_llim_add_lc_req_t              *p_add_lc_param = PNULL;

	rrc_uecc_llim_add_lc_resp_t             *p_add_lc_resp = PNULL;

	rrc_phy_reconfig_ue_entity_req_t phy_reconfig_ue_entity_req;

	rrc_counter_t                           drb_index = RRC_NULL;
	rrc_counter_t                           drb_failed = RRC_NULL;
	rrc_counter_t                           counter = RRC_NULL;
	rrc_return_et                          response_code = RRC_FAILURE;

	U16 passed_drb_at_previous_lower_layer               = RRC_NULL;   
	rrc_bool_et                             found = RRC_FALSE;
	RRC_LLIM_UT_TRACE_ENTER();

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;
	p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, " Unused variable in fsm :%p",p_rrc_llim_gl_ctx);     


	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_add_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* All channels statuses were set to RRC_SUCCESS,
	 *  now fail only specific channels */
	for (drb_index = 0; 
			drb_index < p_add_lc_param->create_drb_entity_counter;
			++drb_index)
	{
		if (p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
				drb_status == RRC_LLIM_DRB_PASSED_AT_PDCP)
		{
			found = RRC_FALSE;

			for(counter = 0;
					counter < p_s1u_reconf_ue_entity_cnf->num_setup_sap_cnf;
					++counter)
			{

				if (p_s1u_reconf_ue_entity_cnf->setup_sap_cnf[counter].
						lc_id ==
						p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc.
						create_drb_entity[drb_index].uecc_llim_drb_config.
						drb_config.logical_channel_identity)

				{

					found =  RRC_TRUE;

					if((S1U_SUCCESS == p_s1u_reconf_ue_entity_cnf->
								setup_sap_cnf[counter].cause)&&
							(RRC_S1U_IE_TUNNEL_INFO_CNF_TEID_SELF_PRESENT &
							 p_s1u_reconf_ue_entity_cnf->
							 setup_sap_cnf[counter].tunnel_info_cnf[0].
							 bitmask) &&
							(RRC_S1U_IE_TUNNEL_INFO_CNF_TRANSPORT_ADDR_PRESENT &
							 p_s1u_reconf_ue_entity_cnf->
							 setup_sap_cnf[counter].tunnel_info_cnf[0].
							 bitmask)
                      )
					{

						p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
							drb_status = RRC_LLIM_DRB_PASSED_AT_S1U;

						RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d passed at S1u",
								p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc.
								create_drb_entity[drb_index].
								uecc_llim_drb_config.drb_config.
								logical_channel_identity);

						++passed_drb_at_previous_lower_layer;

						if(RRC_S1U_IE_TUNNEL_INFO_CNF_TEID_SELF_PRESENT &
								p_s1u_reconf_ue_entity_cnf->
								setup_sap_cnf[counter].tunnel_info_cnf[0].
								bitmask) 
						{
							p_add_lc_resp->create_drb_status[drb_index].
								s1u_response.tunnel_info_cnf_count = 1;

							p_add_lc_resp->create_drb_status[drb_index].bitmask |=
								UECC_LLIM_CREATE_LC_STATUS_S1U_RESPONSE_PRESENT;

							p_add_lc_resp->create_drb_status[drb_index].
								s1u_response.tunnel_info_cnf[0].bitmask |=
								RRC_UECC_LLIM_S1U_TUNNEL_INFO_CNF_TEID_SELF_PRESENT;

							p_add_lc_resp->create_drb_status[drb_index].
								s1u_response.tunnel_info_cnf[0].cause =
								p_s1u_reconf_ue_entity_cnf->
								setup_sap_cnf[counter].tunnel_info_cnf[0].cause;

							p_add_lc_resp->create_drb_status[drb_index].
								s1u_response.tunnel_info_cnf[0].teid_self =
								p_s1u_reconf_ue_entity_cnf->
								setup_sap_cnf[counter].tunnel_info_cnf[0].
								teid_self.teid;
							RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"GTP teid : %u",
									p_add_lc_resp->create_drb_status[drb_index].
									s1u_response.tunnel_info_cnf[0].teid_self);  

							p_add_lc_resp->create_drb_status[drb_index].
								s1u_response.tunnel_info_cnf[0].bitmask |=
								RRC_UECC_LLIM_S1U_TUNNEL_INFO_CNF_TRANSPORT_ADDRESS_PRESENT;

							p_add_lc_resp->create_drb_status[drb_index].
								s1u_response.tunnel_info_cnf[0].
								transport_addr.data_length =
								p_s1u_reconf_ue_entity_cnf->
								setup_sap_cnf[counter].tunnel_info_cnf[0].
								transport_addr.data_length;

							l3_memcpy_wrapper(p_add_lc_resp->create_drb_status[drb_index].
									s1u_response.tunnel_info_cnf[0].
									transport_addr.data,
									p_s1u_reconf_ue_entity_cnf->
									setup_sap_cnf[counter].tunnel_info_cnf[0].
									transport_addr.data,
									p_s1u_reconf_ue_entity_cnf->
									setup_sap_cnf[counter].tunnel_info_cnf[0].
									transport_addr.data_length);

						}

						break;
					}
                                        /*SPR 21767 Start*/
					else if((EGTPU_MAX_ERR_CAUSE -1) < p_s1u_reconf_ue_entity_cnf->
                                        /*SPR 21767 End*/
							setup_sap_cnf[counter].cause)
					{
						RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Invalid Response"
								" Received in Reconfig UE entity Req from s1u");
						/*Stop Timer*/
						if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
						{
							RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
									"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
							rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->
									guard_timer);
							p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
						}

						fill_uecc_llim_add_lc_resp(
								p_add_lc_resp,
								L3_FATAL,
								RRC_INVALID_RESPONSE_RECEIVED,
								p_add_lc_param
								);

						/* 2. send UECC_LLIM_ADD_LC_RESP */
						rrc_llim_send_internal_msg( 
								RRC_GET_UECC_MODULE_ID(p_s1u_reconf_ue_entity_cnf->ue_index), UECC_LLIM_ADD_LC_RESP,
								sizeof(*p_add_lc_resp), p_add_lc_resp);
						UEMH_FSM_SET_STATE(p_ue_ctx,
								UEMH_STATE_UE_ENTITY_IN_SERVICE);
						rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
						p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
						return;

					}
					else
					{
						RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d failed at S1u",
								p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc.
								create_drb_entity[drb_index].
								uecc_llim_drb_config.drb_config.
								logical_channel_identity);

						p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
							drb_status = RRC_LLIM_DRB_FAILED_AT_S1U;

						llim_fill_response_code(
								&p_add_lc_resp->
								create_drb_status[drb_index].response,
								RRC_S1U_MODULE_ID,
								p_s1u_reconf_ue_entity_cnf->
								setup_sap_cnf[counter].cause);                      

						drb_failed++;
						break;

					}
				}

			}
			if (RRC_FALSE == found)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d failed at S1u",
						p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc.
						create_drb_entity[drb_index].
						uecc_llim_drb_config.drb_config.
						logical_channel_identity);

				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status = RRC_LLIM_DRB_FAILED_AT_S1U;

				llim_fill_response_code(
						&p_add_lc_resp->
						create_drb_status[drb_index].response,
						RRC_S1U_MODULE_ID,
						RRC_INVALID_RESPONSE_RECEIVED);                      

				drb_failed++;

			}
		}
	}

	if (p_add_lc_param->bitmask &
			UECC_LLIM_ADD_LC_REQ_CREATE_SRB2_INFO_PRESENT)
	{
		/*ICS procedure going on*/
		if(drb_failed ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				passed_drb_at_previous_lower_layer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ICS has failed at S1U");
			/*Failed to add atleast one DRB*/
			p_add_lc_resp->response_code = FAILURE;

			/* Stop guard timer */
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
						"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
				rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
				p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
			}

			if(RRC_FAILURE == rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID
						(p_s1u_reconf_ue_entity_cnf->ue_index), 
						UECC_LLIM_ADD_LC_RESP,
						sizeof(*p_add_lc_resp), p_add_lc_resp))
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Unable to send "
						"ADD LC resp to UECC]");
			}
			else
			{
				UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			}
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			/*Exit due to failure*/
			return;
		}
		p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer =
			passed_drb_at_previous_lower_layer;
		/* Send RRC_PHY_RECONFIG_UE_ENTITY_REQ only if
		 *  RRC_UECC_LLIM_PHY_CONFIG_DEDICATED_PRESENT */

			/* 1. send RRC_PHY_RECONFIG_UE_ENTITY_REQ */
			memset_wrapper(&phy_reconfig_ue_entity_req, 0, sizeof
					(phy_reconfig_ue_entity_req));


			phy_reconfig_ue_entity_req.ue_index = p_add_lc_param->ue_index;

        if ( p_add_lc_param->bitmask &
              UECC_LLIM_ADD_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT )
        {
            phy_reconfig_ue_entity_req.physical_config_dedicated =
                p_add_lc_param->physical_config_dedicated;
		}
		else
		{
			/*No need for a roll back*/
			p_add_lc_resp->response_code = SUCCESS;

			/* 1. Stop guard timer */
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
						"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
				rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
				p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
			}

			/* 2. send UECC_LLIM_ADD_LC_RESP */
			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_s1u_reconf_ue_entity_cnf->ue_index),
					UECC_LLIM_ADD_LC_RESP,
					sizeof(*p_add_lc_resp), p_add_lc_resp);

			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

		}
        /* eMTC changes stop */

	    response_code = rrc_phy_il_send_rrc_phy_reconfig_ue_entity_req(
					&phy_reconfig_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,p_add_lc_param->cell_index),
					p_add_lc_param->transaction_id,
					p_add_lc_param->cell_index);

		if (RRC_SUCCESS == response_code)
        {

            UEMH_FSM_SET_STATE(p_ue_ctx,
                    UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF);
        }
		else
        {
            RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"Unable to send "
                    "PHY reconfig UE entity req to PHY");
        }
	}/*DRB setup going on*/
	else if(drb_failed ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->
			passed_drb_at_previous_lower_layer)
	{
		p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer =
			passed_drb_at_previous_lower_layer;

		/*DRB setup has failed*/
		if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			/*Start UECC trigerred Roll Back*/
			start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
		}
		else
		{  
			p_add_lc_resp->response_code = FAILURE;
			/*Start LLIM Roll back*/
			start_roll_back_for_add_lc(p_ue_ctx);
		}
	}
    else if ( p_add_lc_param->bitmask &
              UECC_LLIM_ADD_LC_REQ_PHY_CONFIG_DEDICATED_PRESENT )
    {
		p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer =
			passed_drb_at_previous_lower_layer;
        memset_wrapper(&phy_reconfig_ue_entity_req, 0, sizeof
                (phy_reconfig_ue_entity_req));
        phy_reconfig_ue_entity_req.ue_index = p_add_lc_param->ue_index;
        phy_reconfig_ue_entity_req.physical_config_dedicated =
            p_add_lc_param->physical_config_dedicated;
	    response_code = rrc_phy_il_send_rrc_phy_reconfig_ue_entity_req(
					&phy_reconfig_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PHY_1_MODULE_ID,p_add_lc_param->cell_index),
					p_add_lc_param->transaction_id,
					p_add_lc_param->cell_index);

		if (RRC_SUCCESS == response_code)
        {

            UEMH_FSM_SET_STATE(p_ue_ctx,
                    UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF);
        }
		else
        {
            RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"Unable to send "
                    "PHY reconfig UE entity req to PHY");
        }
	}
	else
	{
		p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer =
			passed_drb_at_previous_lower_layer;

		if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			/*Start UECC trigerred Roll Back*/
			start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
		}
		else if(p_ue_ctx->curr_op_param.p_rcfg_ue->
				passed_drb_at_previous_lower_layer ==
				p_add_lc_param->create_drb_entity_counter)
		{
			/*No need for a roll back*/
			p_add_lc_resp->response_code = SUCCESS;

			/* 1. Stop guard timer */
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
						"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
				rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
				p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
			}

			/* 2. send UECC_LLIM_ADD_LC_RESP */
			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_s1u_reconf_ue_entity_cnf->ue_index),
					UECC_LLIM_ADD_LC_RESP,
					sizeof(*p_add_lc_resp), p_add_lc_resp);

			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		else
		{   
			p_add_lc_resp->response_code = PARTIAL_SUCCESS;
			/*Start the roll back procedure*/
			start_roll_back_for_add_lc(p_ue_ctx);
		}
	}

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: process_s1u_reconfig_modify_lc_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and modifying LC if S1-U is OK.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void process_s1u_reconfig_modify_lc_cnf
(
 void                *p_api,             /* p_api */
 rrc_s1u_reconfigure_ue_entity_cnf_t  *p_s1u_reconf_ue_entity_cnf,     
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_bool_et rollback_flag = RRC_FALSE;
	rrc_uecc_llim_modify_lc_req_t              *p_modify_lc_param = PNULL;

	rrc_uecc_llim_modify_lc_resp_t             *p_modify_lc_resp = PNULL;

	rrc_counter_t                           drb_index = RRC_NULL;
	rrc_counter_t                           counter   = RRC_NULL;   

	RRC_LLIM_UT_TRACE_ENTER();

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;
	p_modify_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, " Unused variable in fsm :%p",p_rrc_llim_gl_ctx);     

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_modify_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* All channels statuses were set to RRC_SUCCESS,
	 *  now fail only specific channels */

	for(counter = RRC_NULL; counter <
			p_s1u_reconf_ue_entity_cnf->num_setup_sap_cnf;
			counter++)
	{
		if(S1U_SUCCESS != p_s1u_reconf_ue_entity_cnf->
				setup_sap_cnf[counter].cause)
		{
			rollback_flag = RRC_TRUE;
			for (drb_index = 0; 
					drb_index <
					p_modify_lc_param->modify_drb_entity[
					RRC_UECC_NEW_DRB_CONFIG_VERSION].drb_counter;
					++drb_index)

			{
				if(p_modify_lc_param->modify_drb_entity[
						RRC_UECC_NEW_DRB_CONFIG_VERSION].uecc_llim_drb_config[drb_index].
						drb_config.logical_channel_identity
						== p_s1u_reconf_ue_entity_cnf->setup_sap_cnf[counter].
						lc_id)
				{
					/*store in ue_ctx for rollback*/
					update_drb_fail_status(p_ue_ctx,drb_index,
							RRC_LLIM_DRB_PASSED_AT_S1U);

					llim_fill_response_code(
							&p_modify_lc_resp->modify_drb_status[drb_index].
							response,
							RRC_S1U_MODULE_ID,
							p_s1u_reconf_ue_entity_cnf->
							setup_sap_cnf[counter].cause);

					p_modify_lc_resp->modify_drb_status[drb_index].
						lc_id = 
						p_s1u_reconf_ue_entity_cnf->
						setup_sap_cnf[counter].lc_id;
					break;
				}
			}
		}
	}

	if(RRC_FALSE == rollback_flag)
	{
		if(FAILURE == 
				build_and_send_phy_reconfig_modify_lc_req(p_ue_ctx))
		{
			RRC_LLIM_TRACE(RRC_INFO,"NO configuration are present for Modify LC"
					" request at PHY");
			/* SPR:7369 start*/
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
						"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
				rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
				p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
			}

			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "Modify LC completed ");
			p_modify_lc_resp->response_code = SUCCESS;

			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_param->ue_index),
					UECC_LLIM_MODIFY_LC_RESP,
					sizeof(*p_modify_lc_resp), p_modify_lc_resp);

			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			/* SPR:7369 stop*/

		}
	}
	else
	{
		if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			/*Strating UECC trigerred Roll Back Procedure*/

			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
				RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"UECC trigerred Roll Back Started");

		}
		else
		{

			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
				RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_GOING ;

		}

		/*Start Roll Back*/
		check_and_start_roll_back_for_drb_modify(p_ue_ctx);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}




/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_s1u_reconfig_ue_state_s1u_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function continue reconfiguration and adding LC if S1-U is OK.
 *       state UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF;
 *       event UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_s1u_reconfig_ue_state_s1u_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{

	rrc_s1u_reconfigure_ue_entity_cnf_t     *p_s1u_reconf_ue_entity_cnf =
		(rrc_s1u_reconfigure_ue_entity_cnf_t *)p_msg;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_s1u_reconf_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	if(RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ||
			RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		process_s1u_reconfig_modify_lc_cnf(
				p_api,
				p_s1u_reconf_ue_entity_cnf,
				p_ue_ctx,
				p_rrc_llim_gl_ctx);
	}
	else
	{
		process_s1u_reconfig_add_lc_cnf(
				p_api,
				p_msg,
				p_ue_ctx,
				p_rrc_llim_gl_ctx);

	}
}

static void uemh_fsm_s1u_reconfig_ue_entity_cnf 
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_s1u_reconfigure_ue_entity_cnf_t *p_s1u_reconfigure_ue_entity_cnf =
		(rrc_s1u_reconfigure_ue_entity_cnf_t *)p_msg;
	rrc_uecc_llim_s1u_reconfigure_cnf_t *p_uecc_llim_s1u_reconfigure_cnf =
		PNULL;

	rrc_counter_t      lc_cntr;
	rrc_counter_t      tunnel_cnt;
	rrc_counter_t      rsp_success_cnt = RRC_NULL;
	rrc_counter_t      rsp_failure_cnt = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_s1u_reconfigure_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	/* Build and send S1_RECONFIG_CNF  msg to UECC*/

	p_uecc_llim_s1u_reconfigure_cnf = (rrc_uecc_llim_s1u_reconfigure_cnf_t *)
		rrc_msg_mem_get(sizeof(rrc_uecc_llim_s1u_reconfigure_cnf_t));

	if(PNULL == p_uecc_llim_s1u_reconfigure_cnf)
	{
		RRC_LLIM_TRACE(RRC_FATAL, "rrc_msg_mem_get failed!!");
		return;
	}

	memset_wrapper(p_uecc_llim_s1u_reconfigure_cnf, 0,
			sizeof(rrc_uecc_llim_s1u_reconfigure_cnf_t));

	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, 
			&p_uecc_llim_s1u_reconfigure_cnf->cell_index);

	p_uecc_llim_s1u_reconfigure_cnf->ue_index =
		p_s1u_reconfigure_ue_entity_cnf->ue_index;

	p_uecc_llim_s1u_reconfigure_cnf->transaction_id =
		rrc_get_transaction_id(p_api);


	if ( 0 != p_s1u_reconfigure_ue_entity_cnf->num_setup_sap_cnf )
	{

		p_uecc_llim_s1u_reconfigure_cnf->bitmask |=
			RRC_UECC_LLIM_S1U_SETUP_SAP_CNF_PRESENT;

		p_uecc_llim_s1u_reconfigure_cnf->setup_sap_cnf_list.
			num_setup_sap_cnf = 
			p_s1u_reconfigure_ue_entity_cnf->num_setup_sap_cnf;
		/* lc_cntr_loop*/

		for ( lc_cntr = 0;
				lc_cntr < p_uecc_llim_s1u_reconfigure_cnf->setup_sap_cnf_list.
				num_setup_sap_cnf;
				lc_cntr++ )
		{

			p_uecc_llim_s1u_reconfigure_cnf->setup_sap_cnf_list.
				setup_sap_cnf[lc_cntr].lc_id = 
				p_s1u_reconfigure_ue_entity_cnf->
				setup_sap_cnf[lc_cntr].lc_id;

			if ( p_s1u_reconfigure_ue_entity_cnf->
					setup_sap_cnf[lc_cntr].bitmask &
					RRC_S1U_IE_SETUP_SAP_CNF_SEQ_NUM_PRESENT )
			{
				p_uecc_llim_s1u_reconfigure_cnf->
					setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
					bitmask |= UECC_LLIM_S1U_CNF_SEQ_NUM_PRESENT;

				p_uecc_llim_s1u_reconfigure_cnf->
					setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
					seq_num.ul_sequence_number =
					p_s1u_reconfigure_ue_entity_cnf->
					setup_sap_cnf[lc_cntr].seq_num.ul_sequence_number;

				p_uecc_llim_s1u_reconfigure_cnf->
					setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
					seq_num.dl_sequence_number =
					p_s1u_reconfigure_ue_entity_cnf->
					setup_sap_cnf[lc_cntr].seq_num.dl_sequence_number;
			}

			p_uecc_llim_s1u_reconfigure_cnf->setup_sap_cnf_list.
				setup_sap_cnf[lc_cntr].cause =
				p_s1u_reconfigure_ue_entity_cnf->
				setup_sap_cnf[lc_cntr].cause;

			if( S1U_SUCCESS == p_uecc_llim_s1u_reconfigure_cnf->
					setup_sap_cnf_list.
					setup_sap_cnf[lc_cntr].cause )
			{
				rsp_success_cnt++;
			}
			else
			{
				rsp_failure_cnt++;
			}

			/* tuneel_cnt */
			p_uecc_llim_s1u_reconfigure_cnf->setup_sap_cnf_list.
				setup_sap_cnf[lc_cntr].tunnel_info_cnf_count =
				(U8) (p_s1u_reconfigure_ue_entity_cnf->
						setup_sap_cnf[lc_cntr].num_sap_cnf);

			if( 0 != p_uecc_llim_s1u_reconfigure_cnf->
					setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
					tunnel_info_cnf_count )
			{

				p_uecc_llim_s1u_reconfigure_cnf->
					setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
					bitmask |= UECC_LLIM_S1U_TUNNEL_INFO_CNF_PRESENT ;

				/* tunnel_cnt_loop*/
				for ( tunnel_cnt = 0;
						tunnel_cnt <= p_uecc_llim_s1u_reconfigure_cnf->
						setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
						tunnel_info_cnf_count;
						tunnel_cnt++ )
				{
					p_uecc_llim_s1u_reconfigure_cnf->
						setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
						tunnel_info_cnf[tunnel_cnt].cause =
						p_s1u_reconfigure_ue_entity_cnf->
						setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].cause;

					if( S1U_SUCCESS == p_uecc_llim_s1u_reconfigure_cnf->
							setup_sap_cnf_list.
							setup_sap_cnf[lc_cntr].
							tunnel_info_cnf[tunnel_cnt].cause )

					{

						p_uecc_llim_s1u_reconfigure_cnf->
							setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
							tunnel_info_cnf[tunnel_cnt].rb_direction =
							p_s1u_reconfigure_ue_entity_cnf->
							setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].
							rb_direction;

						if ( p_s1u_reconfigure_ue_entity_cnf->
								setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].
								bitmask &
								RRC_S1U_IE_TUNNEL_INFO_CNF_TEID_SELF_PRESENT )
						{
							p_uecc_llim_s1u_reconfigure_cnf->
								setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
								tunnel_info_cnf[tunnel_cnt].bitmask |= 
								RRC_UECC_LLIM_S1U_TUNNEL_INFO_CNF_TEID_SELF_PRESENT ;

							p_uecc_llim_s1u_reconfigure_cnf->
								setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
								tunnel_info_cnf[tunnel_cnt].teid_self = 
								p_s1u_reconfigure_ue_entity_cnf->
								setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].
								teid_self.teid;
						}
						if ( p_s1u_reconfigure_ue_entity_cnf->
								setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].
								bitmask &
								RRC_S1U_IE_TUNNEL_INFO_CNF_TEID_PEER_PRESENT )
						{
							p_uecc_llim_s1u_reconfigure_cnf->
								setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
								tunnel_info_cnf[tunnel_cnt].bitmask |=
								RRC_UECC_LLIM_S1U_TUNNEL_INFO_CNF_TEID_PEER_PRESENT ;

							p_uecc_llim_s1u_reconfigure_cnf->
								setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
								tunnel_info_cnf[tunnel_cnt].teid_peer =
								p_s1u_reconfigure_ue_entity_cnf->
								setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].
								teid_peer.teid;
						}
						if ( p_s1u_reconfigure_ue_entity_cnf->
								setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].
								bitmask &
								RRC_S1U_IE_TUNNEL_INFO_CNF_TRANSPORT_ADDR_PRESENT )
						{
							p_uecc_llim_s1u_reconfigure_cnf->
								setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
								tunnel_info_cnf[tunnel_cnt].bitmask |=
								RRC_UECC_LLIM_S1U_TUNNEL_INFO_CNF_TRANSPORT_ADDRESS_PRESENT ;

							p_uecc_llim_s1u_reconfigure_cnf->
								setup_sap_cnf_list.setup_sap_cnf[lc_cntr].
								tunnel_info_cnf[tunnel_cnt].transport_addr.data_length =
								p_s1u_reconfigure_ue_entity_cnf->
								setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].
								transport_addr.data_length;

							l3_memcpy_wrapper( p_uecc_llim_s1u_reconfigure_cnf->setup_sap_cnf_list.
									setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].
									transport_addr.data,
									p_s1u_reconfigure_ue_entity_cnf->
									setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].
									transport_addr.data,
									p_uecc_llim_s1u_reconfigure_cnf->setup_sap_cnf_list.
									setup_sap_cnf[lc_cntr].tunnel_info_cnf[tunnel_cnt].
									transport_addr.data_length);
						}
					}
				}
			}     
		}
	}
	else if ( 0 != p_s1u_reconfigure_ue_entity_cnf->num_rel_sap_cnf )
	{
		p_uecc_llim_s1u_reconfigure_cnf->bitmask |=
			RRC_UECC_LLIM_S1U_REL_SAP_CNF_PRESENT;

		p_uecc_llim_s1u_reconfigure_cnf->rel_sap_cnf_list.
			num_rel_sap_cnf =
			p_s1u_reconfigure_ue_entity_cnf->num_rel_sap_cnf;
		/* lc_cntr_loop*/

		for ( lc_cntr = 0;
				lc_cntr < p_uecc_llim_s1u_reconfigure_cnf->rel_sap_cnf_list.
				num_rel_sap_cnf;
				lc_cntr++ )
		{

			p_uecc_llim_s1u_reconfigure_cnf->rel_sap_cnf_list.
				rel_sap_cnf[lc_cntr].lc_id =
				p_s1u_reconfigure_ue_entity_cnf->
				setup_sap_cnf[lc_cntr].lc_id;

			if ( p_s1u_reconfigure_ue_entity_cnf->
					rel_sap_cnf[lc_cntr].bitmask &
					RRC_S1U_IE_REL_CNF_SEQ_NUM_PRESENT )
			{
				p_uecc_llim_s1u_reconfigure_cnf->rel_sap_cnf_list.
					rel_sap_cnf[lc_cntr].bitmask |=
					RRC_UECC_LLIM_S1U_CNF_SEQ_NUM_PRESENT;

				p_uecc_llim_s1u_reconfigure_cnf->
					rel_sap_cnf_list.rel_sap_cnf[lc_cntr].
					seq_num.ul_sequence_number =
					p_s1u_reconfigure_ue_entity_cnf->
					rel_sap_cnf[lc_cntr].seq_num.ul_sequence_number;

				p_uecc_llim_s1u_reconfigure_cnf->
					rel_sap_cnf_list.rel_sap_cnf[lc_cntr].
					seq_num.dl_sequence_number =
					p_s1u_reconfigure_ue_entity_cnf->
					rel_sap_cnf[lc_cntr].seq_num.dl_sequence_number;
			}

			p_uecc_llim_s1u_reconfigure_cnf->rel_sap_cnf_list.
				rel_sap_cnf[lc_cntr].cause =
				p_s1u_reconfigure_ue_entity_cnf->
				rel_sap_cnf[lc_cntr].cause;

			if( S1U_SUCCESS == p_uecc_llim_s1u_reconfigure_cnf->
					rel_sap_cnf_list.
					rel_sap_cnf[lc_cntr].cause )
			{
				rsp_success_cnt++;

				/* tuneel_cnt */
				p_uecc_llim_s1u_reconfigure_cnf->rel_sap_cnf_list.
					rel_sap_cnf[lc_cntr].release_tunnel_count =
					(U8) (p_s1u_reconfigure_ue_entity_cnf->
							rel_sap_cnf[lc_cntr].num_release_tunnel_info);

				if(0 != p_uecc_llim_s1u_reconfigure_cnf->
						rel_sap_cnf_list.rel_sap_cnf[lc_cntr].
						release_tunnel_count)
				{
					p_uecc_llim_s1u_reconfigure_cnf->rel_sap_cnf_list.
						rel_sap_cnf[lc_cntr].bitmask |=
						RRC_UECC_LLIM_S1U_RELEASE_TUNNEL_INFO_PRESENT ;

					/* tunnel_cnt_loop*/
					for ( tunnel_cnt = 0;
							tunnel_cnt<= p_uecc_llim_s1u_reconfigure_cnf->
							rel_sap_cnf_list.rel_sap_cnf[lc_cntr].
							release_tunnel_count;
							tunnel_cnt++ )
					{
						p_uecc_llim_s1u_reconfigure_cnf->
							rel_sap_cnf_list.rel_sap_cnf[lc_cntr].
							release_tunnel_info[tunnel_cnt].teid_self =
							p_s1u_reconfigure_ue_entity_cnf->
							rel_sap_cnf[lc_cntr].release_tunnel_info[tunnel_cnt].
							teid_self;

						if ( p_s1u_reconfigure_ue_entity_cnf->rel_sap_cnf[lc_cntr].
								release_tunnel_info[tunnel_cnt].bitmask &
								RRC_S1U_IE_RELEASE_TUNNEL_INFO_TRANSPORT_ADDR_PRESENT)
						{

							p_uecc_llim_s1u_reconfigure_cnf->
								rel_sap_cnf_list.rel_sap_cnf[lc_cntr].
								release_tunnel_info[tunnel_cnt].bitmask |=
								RRC_UECC_LLIM_S1U_RELEASE_TUNNEL_INFO_TRANSPORT_ADDRESS_PRESENT; 

							p_uecc_llim_s1u_reconfigure_cnf->
								rel_sap_cnf_list.rel_sap_cnf[lc_cntr].
								release_tunnel_info[tunnel_cnt].transport_addr.
								data_length = 
								p_s1u_reconfigure_ue_entity_cnf-> 
								rel_sap_cnf[lc_cntr].release_tunnel_info[tunnel_cnt].
								transport_addr.data_length;

							l3_memcpy_wrapper( p_uecc_llim_s1u_reconfigure_cnf->
									rel_sap_cnf_list.rel_sap_cnf[lc_cntr].
									release_tunnel_info[tunnel_cnt].
									transport_addr.data, 
									p_s1u_reconfigure_ue_entity_cnf->
									rel_sap_cnf[lc_cntr].release_tunnel_info[tunnel_cnt].
									transport_addr.data,                    
									p_uecc_llim_s1u_reconfigure_cnf->
									rel_sap_cnf_list.rel_sap_cnf[lc_cntr].
									release_tunnel_info[tunnel_cnt].transport_addr.
									data_length);
						}
					}
				}
			}
			else
			{
				rsp_failure_cnt++;
			}
		} 
	}                  
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,
				" S1U_SETUP_SAP_RESP_LIST & S1U_REL_SAP_RESP_LIST are  absent !!!");

		p_uecc_llim_s1u_reconfigure_cnf->response_code = FAILURE;        

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_s1u_reconfigure_ue_entity_cnf->ue_index),
				UECC_LLIM_S1U_RECONFIGURE_CNF,
				sizeof(rrc_uecc_llim_s1u_reconfigure_cnf_t),
				p_uecc_llim_s1u_reconfigure_cnf);

		/* coverity_fix_48256_start */
		rrc_msg_mem_free(p_uecc_llim_s1u_reconfigure_cnf);
        p_uecc_llim_s1u_reconfigure_cnf = PNULL;	
		/* coverity_fix_48256_stop */
		RRC_LLIM_UT_TRACE_EXIT();
		return;

	}
	/* Response code gets deriveed from the cause */
	if ( 0 == rsp_failure_cnt )
	{
		p_uecc_llim_s1u_reconfigure_cnf->response_code = SUCCESS;
	}
	else if ( 0 == rsp_success_cnt )
	{
		p_uecc_llim_s1u_reconfigure_cnf->response_code = FAILURE;   
	}
	else  
	{
		p_uecc_llim_s1u_reconfigure_cnf->response_code = PARTIAL_SUCCESS;
	}            

	/* Send the S1U_RECONFIGURE_UE_ENTITY_CNF  msg to UECC */
	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_s1u_reconfigure_ue_entity_cnf->ue_index),
			UECC_LLIM_S1U_RECONFIGURE_CNF,
			sizeof(rrc_uecc_llim_s1u_reconfigure_cnf_t),
			p_uecc_llim_s1u_reconfigure_cnf);

	/* coverity_fix_48256_start */
	rrc_msg_mem_free(p_uecc_llim_s1u_reconfigure_cnf);
    p_uecc_llim_s1u_reconfigure_cnf = PNULL;	
	/* coverity_fix_48256_stop */
	RRC_LLIM_UT_TRACE_EXIT();

}

/******************************************************************************
 *   FUNCTION NAME: modify_lc_phy_reconfig_ue_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function report about successfully reconfiguration and
 *       reconfigure LC if PHY is OK.
 *       state UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void modify_lc_phy_reconfig_ue_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	/* coverity_fix_62124_start */
	rrc_phy_reconfig_ue_entity_cnf_t        *p_phy_reconfig_ue_entity_cnf =
		(rrc_phy_reconfig_ue_entity_cnf_t *)p_msg;
	rrc_uecc_llim_modify_lc_resp_t          *p_modify_lc_resp = PNULL;
	rrc_uecc_llim_modify_lc_req_t           *p_modify_lc_req = PNULL;
	rrc_uecc_llim_modify_drb_version_t      *p_modify_lc_param = PNULL;
	U8 drb_index = RRC_NULL;
	U8 loop = RRC_NULL;
	U8 scell_index = RRC_NULL;
	rrc_bool_et rollback_needed = RRC_FALSE;

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_modify_lc_req = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;
	p_modify_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_modify_lc_req->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if(RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		p_modify_lc_param =
			&p_modify_lc_req->
			modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION];
	}
	else
	{
		p_modify_lc_param =
			&p_modify_lc_req->
			modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION];
	}

	if (PHY_SUCCESS == p_phy_reconfig_ue_entity_cnf->response)
	{
		p_modify_lc_resp->response_code = SUCCESS;
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "Successfuly Modified LCs at PHY ");

		if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			rollback_needed = RRC_TRUE; 
		}    
		/*CA_RE_ESTAB_START*/
		p_modify_lc_req->add_scell_info_mac_phy = RRC_FALSE; 
		/*CA_RE_ESTAB_STOP*/
	}
	else if (PHY_FAILURE == p_phy_reconfig_ue_entity_cnf->response ||
			PHY_PARTIAL_SUCCESS == p_phy_reconfig_ue_entity_cnf->response)
	{
		p_modify_lc_resp->response_code = FAILURE;

		/*CA_RE_ESTAB_START*/
		if (RRC_TRUE == p_modify_lc_req->add_scell_info_mac_phy)
		{
			rollback_needed = RRC_FALSE;
			p_modify_lc_req->add_scell_info_mac_phy = RRC_FALSE;
		}
		else
			/*CA_RE_ESTAB_STOP*/
		{

			/*Failed at PHY, Need Roll back*/
			for(drb_index = 0; 
					p_modify_lc_param->drb_counter;
					++drb_index)
			{
				if(RRC_LLIM_DRB_PASSED_AT_MAC == 
						p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
						drb_status)
				{
					/*Mark all DRB passed at MAC as failed*/
					/*p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					  drb_status = RRC_LLIM_DRB_FAILED_AT_PHY;*/
					/*Store in ue_ctx for roll back*/
					update_drb_fail_status(p_ue_ctx,drb_index,
							RRC_LLIM_DRB_PASSED_AT_PHY);

					/*check following code to be uncommented or not on the similar
					  lines of RLC UE Entity Reconfig Cnf handling*/
					/*llim_fill_response_code(
					  &p_modify_lc_resp->
					  modify_drb_status[drb_index].response,
					  RRC_PHY_MODULE_ID,
					  p_phy_reconfig_ue_entity_cnf->response);*/
				}
			}
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"Dynamic UE Reconfiguration has" 
					" FAILED at PHY");
			/* CA start */
			/* If Scells are released then, since Scell release cannot be rolled back
			 * send L3_FATAL as reponse to UECC so that it triggers UE release
			 */
			if( ( p_modify_lc_param->scell_config.bitmask & RRM_SCELL_RELEASE_LIST_PRESENT )
					&&
					(p_modify_lc_param->scell_config.scell_release_list.count > RRC_NULL))
			{

				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"Scell Release Successful at MAC\n"); 
				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"Reconfiguration Failed at PHY, \n" 
						"Sending L3_FATAL in MODIFY_LC_RESP to UECC");
				p_modify_lc_resp->response_code = L3_FATAL;
				rollback_needed = RRC_FALSE;

			}    
			else
			{
				rollback_needed = RRC_TRUE;
			}
		}
	}
	else
	{
		p_modify_lc_resp->response_code = L3_FATAL;
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Invalid response received"
				" from PHY");
	}

	if(RRC_TRUE == rollback_needed)
	{
		if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			/*Strating UECC trigerred Roll Back Procedure*/
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
				RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"UECC trigerred Roll Back Started");
			/* CA START*/
			if((p_modify_lc_param->bitmask & UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT )
					&&
					(p_modify_lc_param->scell_config.bitmask & RRM_SCELL_ADD_MOD_LIST_PRESENT))
			{
				for (loop = RRC_NULL; 
						loop < p_modify_lc_param->scell_config.scell_add_mod_list.count;
						loop++)
				{
					scell_index = 
						p_modify_lc_param->scell_config.
						scell_add_mod_list.rrc_scell_to_add_mod[loop].scellIndex ;

					update_cell_id_operation_validity(p_modify_lc_req->scells_operation_list,
							scell_index,RRC_TRUE);
				}
				update_scell_config_modify_lc_req_for_rollback(p_modify_lc_req);
				/* CA END*/
			}
			check_and_start_roll_back_for_drb_modify(p_ue_ctx);

			/* Ccverity Fix 60514*/
			if( SUCCESS == build_and_send_phy_reconfig_modify_lc_req(p_ue_ctx))
			{
				RRC_LLIM_TRACE(RRC_INFO,"Modify LC request sent to PHY");

				p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
					(U16)(1 << UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF);
			}
			/* Ccverity Fix */

		}
		else
		{
			RRC_LLIM_TRACE(RRC_INFO,"Modify LC Roll back start");

			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
				RRC_LLIM_RECONFIG_MODIFY_LC_ROLLBACK_ON_GOING ;

			for (loop = RRC_NULL; 
					loop < p_modify_lc_param->scell_config.scell_add_mod_list.count;
					loop++)
			{
				scell_index = 
					p_modify_lc_param->scell_config.
					scell_add_mod_list.rrc_scell_to_add_mod[loop].scellIndex ;

				update_cell_id_operation_validity(p_modify_lc_req->scells_operation_list,
						scell_index,RRC_TRUE);
			}
			update_scell_config_modify_lc_req_for_rollback(p_modify_lc_req);
			check_and_start_roll_back_for_drb_modify(p_ue_ctx);
		}
	}
	else
	{
		/*CA start*/ 
		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->
					guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		/* 2. send UECC_LLIM_MODIFY_LC_RESP */
		rrc_llim_send_internal_msg(RRC_GET_UECC_MODULE_ID(p_modify_lc_req->ue_index), 
				UECC_LLIM_MODIFY_LC_RESP,
				sizeof(rrc_uecc_llim_modify_lc_resp_t), p_modify_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx,UEMH_STATE_UE_ENTITY_IN_SERVICE);

		/*CA end*/ 

		/*In case of Failure or Partial_Success, we need to maintain the p_ue_ctx, 
		 * but in case of Success, we can clean the UE_Ctx*/
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	RRC_LLIM_UT_TRACE_EXIT();
}
/* coverity_fix_62124_stop */

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_phy_reconfig_ue_state_phy_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function report about successfully reconfiguration and adding
 *        LC if PHY is OK.
 *       state UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF;
 *       event UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_phy_reconfig_ue_state_phy_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_phy_reconfig_ue_entity_cnf_t        *p_phy_reconfig_ue_entity_cnf =
		(rrc_phy_reconfig_ue_entity_cnf_t *)p_msg;
	rrc_uecc_llim_add_lc_req_t              *p_add_lc_param = PNULL;

	rrc_uecc_llim_add_lc_resp_t             *p_add_lc_resp = PNULL;

	U8 drb_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_phy_reconfig_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored;unused variable p_rrc_llim_gl_ctx=%p"
                ,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/*If PHY Reconfig UE Entiy Confirm is received in UE Reconfig Procedure*/
	if(RRC_LLIM_RECONFIG_MODIFY_LC_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ||
			RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		modify_lc_phy_reconfig_ue_cnf(p_api, p_msg, p_ue_ctx);
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_add_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (RRC_FAILURE == p_phy_reconfig_ue_entity_cnf->response)
	{
		/*Failed at PHY, Need Roll back*/

		for(drb_index = RRC_NULL; 
				drb_index < p_add_lc_param->create_drb_entity_counter;
				++drb_index)
		{
			if(RRC_LLIM_DRB_PASSED_AT_S1U == 
					p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status)
			{
				/*Mark all DRB passed at S1u as failed*/
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
					drb_status = RRC_LLIM_DRB_FAILED_AT_PHY;

			}
		}
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"ICS has FAILED at PHY");

		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->
					guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		p_add_lc_resp->response_code = FAILURE;

		/* 2. send UECC_LLIM_ADD_LC_RESP */
		rrc_llim_send_internal_msg( 
				RRC_GET_UECC_MODULE_ID(p_phy_reconfig_ue_entity_cnf->ue_index), UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), p_add_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx,UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;


	}
	else if(RRC_SUCCESS != p_phy_reconfig_ue_entity_cnf->response)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING,"Invalid response received"
				" from PHY");

		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->
					guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		fill_uecc_llim_add_lc_resp(
				p_add_lc_resp,
				L3_FATAL,
				RRC_INVALID_RESPONSE_RECEIVED,
				p_add_lc_param
				);

		/* 2. send UECC_LLIM_ADD_LC_RESP */
		rrc_llim_send_internal_msg( 
				RRC_GET_UECC_MODULE_ID(p_phy_reconfig_ue_entity_cnf->ue_index), UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), p_add_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx,UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	else if(p_ue_ctx->curr_op_param.p_rcfg_ue->
			passed_drb_at_previous_lower_layer ==
			p_add_lc_param->create_drb_entity_counter)
	{
		p_add_lc_resp->response_code                = SUCCESS;
		/*All DRBs have passed, So no need for a roll back*/
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		/* 2. send UECC_LLIM_ADD_LC_RESP */
		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_phy_reconfig_ue_entity_cnf->ue_index), 
				UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), p_add_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}

	else
	{
		p_add_lc_resp->response_code                = PARTIAL_SUCCESS;
		/*Start the roll back procedure for ADD LC*/
		start_roll_back_for_add_lc(p_ue_ctx);
	}
	RRC_LLIM_UT_TRACE_EXIT();
}


/*
 *   UEMH_STATE_W_FOR_DEL_ALL_LC_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_check_del_lc_status_and_report
 *
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_check_del_lc_status_and_report
(
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_lc_resp_t *p_delete_lc_resp = PNULL;
	rrc_uecc_llim_delete_lc_req_t  *p_delete_lc_param = PNULL;
	U8    resp_counter = RRC_NULL;
	U8    fail_counter = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm %p ",p_rrc_llim_gl_ctx);      

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (RRC_NULL == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers)
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		RRC_ASSERT(p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp.
				transaction_id == p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_delete_lc.
				transaction_id);
		RRC_ASSERT(p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp.ue_index ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_delete_lc.ue_index);

		p_delete_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_delete_lc;
		p_delete_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp;

		for (resp_counter = 0;
				resp_counter < p_delete_lc_resp->delete_drb_entity_resp_counter;
				resp_counter++)
		{
			/* Check for RRC_PARTIAL_SUCCESS */
			if (SUCCESS != 
					p_delete_lc_resp->delete_drb_entity_resp[resp_counter].response)
				fail_counter++;
		}

		if (fail_counter == p_delete_lc_resp->delete_drb_entity_resp_counter)
		{
			fill_uecc_llim_delete_lc_resp(&p_ue_ctx->curr_op_param.p_rcfg_ue->
					delete_lc_resp, FAILURE, p_delete_lc_param);
		}
		if (fail_counter != p_delete_lc_resp->delete_drb_entity_resp_counter &&
				fail_counter != RRC_NULL)
		{
			fill_uecc_llim_delete_lc_resp(&p_ue_ctx->curr_op_param.p_rcfg_ue->
					delete_lc_resp, PARTIAL_SUCCESS, p_delete_lc_param);
		}
		rrc_llim_send_internal_msg(RRC_GET_UECC_MODULE_ID(p_delete_lc_resp->ue_index),
				UECC_LLIM_DELETE_LC_RESP,
				sizeof(p_ue_ctx->curr_op_param.p_rcfg_ue->
					delete_lc_resp), &p_ue_ctx->curr_op_param.
				p_rcfg_ue->delete_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_check_del_lc_status_and_report_add_rollback
 *
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_check_del_lc_status_and_report_add_rollback
(
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm %p ",p_rrc_llim_gl_ctx);      

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (RRC_NULL == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers)
	{
		if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			start_uecc_trigered_roll_back_for_add_lc(p_ue_ctx);
			return;
		}


		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		RRC_ASSERT(p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp.transaction_id ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc.transaction_id);
		RRC_ASSERT(p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp.ue_index ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc.ue_index);

		if (RRC_LLIM_RECONFIG_HO_CREATE_UE_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			if (p_ue_ctx->curr_op_param.p_create_ue != PNULL)
			{
				build_and_send_uecc_create_ho_ue_rollback_resp(&p_ue_ctx->
						curr_op_param.p_create_ue->uecc_create_ue,
						&p_ue_ctx->curr_op_param.p_create_ue->create_ue_resp);
				rrc_mem_free (p_ue_ctx->curr_op_param.p_create_ue);
				p_ue_ctx->curr_op_param.p_create_ue = PNULL;
				rrc_mem_free (p_ue_ctx->curr_op_param.p_rcfg_ue);
				p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			}

		}else if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			build_and_send_uecc_add_lc_rollback_resp(
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.ue_index,
					RRC_SUCCESS,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.cell_index);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

		}
		else
		{
			rrc_llim_send_internal_msg( 
					RRC_GET_UECC_MODULE_ID(p_ue_ctx->ue_index), 
					UECC_LLIM_ADD_LC_RESP,
					sizeof(p_ue_ctx->curr_op_param.p_rcfg_ue->
						add_lc_resp), 
					&p_ue_ctx->curr_op_param.
					p_rcfg_ue->add_lc_resp);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_lc_state_mac_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function mark LC deleted on MAC level and
 *       if LC adding rollback complete send confirmation to UECC
 *       state UEMH_STATE_W_FOR_DEL_ALL_LC_CNF;
 *       event UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_lc_state_mac_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_lc_req_t *p_delete_lc_param = PNULL;
	rrc_uecc_llim_delete_lc_resp_t *p_delete_lc_resp = PNULL;
	rrc_mac_reconfigure_ue_entity_cnf_t *p_mac_reconfigure_ue_entity_cnf =
		(rrc_mac_reconfigure_ue_entity_cnf_t *)p_msg;
	U8    resp_counter = RRC_NULL;
	U8    lc_counter = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_delete_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_delete_lc;
	p_delete_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_delete_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* Mark Cnf received from MAC level */
	p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers =
		(U16)( p_ue_ctx->curr_op_param.p_rcfg_ue->
				cur_mask_lc_to_be_tracked_layers & ~(1 <<
					UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF));


	/* SPS Start */
	/* SPS Start */
	if (p_mac_reconfigure_ue_entity_cnf->optional_elems_present &
			RRC_MAC_RECONF_SPS_CRNTI_INFO_PRESENT)
	{
		p_delete_lc_resp->bitmask |= UECC_LLIM_DELETE_LC_RESP_SPS_CRNTI_PRESENT;
		p_delete_lc_resp->sps_crnti =
			p_mac_reconfigure_ue_entity_cnf->sps_crnti_info.sps_crnti;
	}
	/* SPS Stop */


	p_delete_lc_resp->delete_lc_status_counter = p_mac_reconfigure_ue_entity_cnf->
		delete_lc_status_counter;

	for (resp_counter = 0; resp_counter < p_mac_reconfigure_ue_entity_cnf->
			delete_lc_status_counter; resp_counter++)
	{
		p_delete_lc_resp->delete_lc_status[resp_counter].
			status = p_mac_reconfigure_ue_entity_cnf->
			delete_lc_status[resp_counter].status;

		p_delete_lc_resp->delete_lc_status[resp_counter].
			lch_id = p_mac_reconfigure_ue_entity_cnf->
			delete_lc_status[resp_counter].lch_id;

	}

	if (MAC_SUCCESS == p_mac_reconfigure_ue_entity_cnf->response_code)
	{
		uemh_fsm_check_del_lc_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx);
	}
	else if (MAC_PARTIAL_SUCCESS == 
			p_mac_reconfigure_ue_entity_cnf->response_code)
	{

		for (resp_counter = 0;
				resp_counter < 
				p_mac_reconfigure_ue_entity_cnf->delete_lc_error_counter;
				resp_counter++)
		{
			for (lc_counter = 0;
					lc_counter < p_delete_lc_resp->delete_drb_entity_resp_counter;
					lc_counter++)
			{
				if (p_mac_reconfigure_ue_entity_cnf->
						delete_lc_error[resp_counter].lch_id == 
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].lc_id)
				{
					if (SUCCESS == 
							p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response)
					{
						/* reset response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response = RRC_NULL; 
						/* Set Most Significant 2 Byte Source Module Id */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)(rrc_get_src_module_id(p_api) <<16); 
						/* set response of lc_id in response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)p_mac_reconfigure_ue_entity_cnf-> 
							delete_lc_error[resp_counter].response;
						break;
					}
				}
			} 
		}
		uemh_fsm_check_del_lc_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx);
	}
	else if (MAC_FAILURE == 
			p_mac_reconfigure_ue_entity_cnf->response_code)
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}
		for (resp_counter = 0;
				resp_counter <
				p_mac_reconfigure_ue_entity_cnf->delete_lc_error_counter;
				resp_counter++)
		{
			for (lc_counter = 0;
					lc_counter < p_delete_lc_resp->delete_drb_entity_resp_counter;
					lc_counter++)
			{
				if (p_mac_reconfigure_ue_entity_cnf->
						delete_lc_error[resp_counter].lch_id ==
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].lc_id)
				{
					if (SUCCESS ==
							p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response)
					{
						/* reset response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response = RRC_NULL;
						/* Set Most Significant 2 Byte Source Module Id */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)(rrc_get_src_module_id(p_api) <<16);
						/* set response of lc_id in response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)p_mac_reconfigure_ue_entity_cnf->
							delete_lc_error[resp_counter].response;
						break;
					}
				}
			}
		}
		fill_uecc_llim_delete_lc_resp(&p_ue_ctx->curr_op_param.p_rcfg_ue->
				delete_lc_resp, FAILURE, p_delete_lc_param);

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_mac_reconfigure_ue_entity_cnf->ue_index), 
				UECC_LLIM_DELETE_LC_RESP,
				sizeof(p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp),
				&p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_lc_state_rlc_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function mark LC deleted on RLC level and
 *       if LC adding rollback complete send confirmation to UECC
 *       state UEMH_STATE_W_FOR_DEL_ALL_LC_CNF;
 *       event UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_lc_state_rlc_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_lc_req_t*  p_delete_lc_param = PNULL;
	rrc_uecc_llim_delete_lc_resp_t* p_delete_lc_resp = PNULL;
	rrc_rlc_reconfig_ue_entity_cnf_t* p_rlc_reconfig_ue_entity_cnf =
		(rrc_rlc_reconfig_ue_entity_cnf_t *)p_msg;
	U8    resp_counter = RRC_NULL;
	U8    lc_counter = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_delete_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_delete_lc;
	p_delete_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_delete_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* Mark Resp received from RLC level */
	p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers =
		(U16)(p_ue_ctx->curr_op_param.p_rcfg_ue->
				cur_mask_lc_to_be_tracked_layers & ~(1 <<
					UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF));

	if (RLC_SUCCESS == p_rlc_reconfig_ue_entity_cnf->response_code)
	{
		uemh_fsm_check_del_lc_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx);
	}
	else if (RLC_PARTIAL_SUCCESS == 
			p_rlc_reconfig_ue_entity_cnf->response_code)
	{
		for (resp_counter = 0;
				resp_counter <
				p_rlc_reconfig_ue_entity_cnf->num_delete_entity_error;
				resp_counter++)
		{
			for (lc_counter = 0;
					lc_counter < p_delete_lc_resp->delete_drb_entity_resp_counter;
					lc_counter++)
			{
				if (p_rlc_reconfig_ue_entity_cnf->
						delete_error_entities[resp_counter].lc_id ==
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].lc_id)
				{
					if (SUCCESS == 
							p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response)
					{
						/* reset response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response = RRC_NULL;
						/* Set Most Significant 2 Byte Source Module Id */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)(rrc_get_src_module_id(p_api) <<16);
						/* set response of lc_id in response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)p_rlc_reconfig_ue_entity_cnf->
							delete_error_entities[resp_counter].response;
						break;
					}
				}
			}
		}
		uemh_fsm_check_del_lc_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx);
	}
	else if (RLC_FAILURE == 
			p_rlc_reconfig_ue_entity_cnf->response_code)
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		for (resp_counter = 0;
				resp_counter <
				p_rlc_reconfig_ue_entity_cnf->num_delete_entity_error;
				resp_counter++)
		{
			for (lc_counter = 0;
					lc_counter < p_delete_lc_resp->delete_drb_entity_resp_counter;
					lc_counter++)
			{
				if (p_rlc_reconfig_ue_entity_cnf->
						delete_error_entities[resp_counter].lc_id ==
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].lc_id)
				{
					if (SUCCESS ==
							p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response)
					{
						/* reset response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response = RRC_NULL;
						/* Set Most Significant 2 Byte Source Module Id */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)(rrc_get_src_module_id(p_api) <<16);
						/* set response of lc_id in response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)p_rlc_reconfig_ue_entity_cnf->
							delete_error_entities[resp_counter].response;
						break;
					}
				}
			}
		}

		fill_uecc_llim_delete_lc_resp(&p_ue_ctx->curr_op_param.p_rcfg_ue->
				delete_lc_resp, FAILURE, p_delete_lc_param);

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_rlc_reconfig_ue_entity_cnf->ue_index), UECC_LLIM_DELETE_LC_RESP,
				sizeof(p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp),
				&p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_lc_state_pdcp_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function mark LC deleted on PDCP level and
 *       if LC adding rollback complete send confirmation to UECC
 *       state UEMH_STATE_W_FOR_DEL_ALL_LC_CNF;
 *       event UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_lc_state_pdcp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_lc_req_t*  p_delete_lc_param = PNULL;
	rrc_uecc_llim_delete_lc_resp_t* p_delete_lc_resp = PNULL;
	rrc_pdcp_reconfig_ue_entity_cnf_t *p_pdcp_reconfig_ue_entity_cnf =
		(rrc_pdcp_reconfig_ue_entity_cnf_t *)p_msg;
	U8    resp_counter = RRC_NULL;
	U8    lc_counter = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_delete_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_delete_lc;
	p_delete_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_delete_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* Mark LC deleted on PDCP level */
	p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers =
		(U16)( p_ue_ctx->curr_op_param.p_rcfg_ue->
				cur_mask_lc_to_be_tracked_layers & ~(1 <<
					UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF));

	if (PDCP_SUCCESS == p_pdcp_reconfig_ue_entity_cnf->response_code)
	{
		uemh_fsm_check_del_lc_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx);
	}
	else if (PDCP_PARTIAL_SUCCESS == 
			p_pdcp_reconfig_ue_entity_cnf->response_code)
	{

		for (resp_counter = 0;
				resp_counter <
				p_pdcp_reconfig_ue_entity_cnf->num_del_drb_entity_error;
				resp_counter++)
		{
			for (lc_counter = 0;
					lc_counter < p_delete_lc_resp->delete_drb_entity_resp_counter;
					lc_counter++)
			{
				if (p_pdcp_reconfig_ue_entity_cnf->
						del_drb_error_entities[resp_counter].lc_id ==
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].lc_id)
				{
					if (SUCCESS == 
							p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response)
					{
						/* reset response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response = RRC_NULL;
						/* Set Most Significant 2 Byte Source Module Id */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)(rrc_get_src_module_id(p_api) << 16);
						/* set response of lc_id in response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |=(U32) p_pdcp_reconfig_ue_entity_cnf->
							del_drb_error_entities[resp_counter].response;
						break;
					}
				}
			}
		}
		uemh_fsm_check_del_lc_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx);
	}
	else if (PDCP_FAILURE == 
			p_pdcp_reconfig_ue_entity_cnf->response_code)
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}
		for (resp_counter = 0;
				resp_counter <
				p_pdcp_reconfig_ue_entity_cnf->num_del_drb_entity_error;
				resp_counter++)
		{
			for (lc_counter = 0;
					lc_counter < p_delete_lc_resp->delete_drb_entity_resp_counter;
					lc_counter++)
			{
				if (p_pdcp_reconfig_ue_entity_cnf->
						del_drb_error_entities[resp_counter].lc_id ==
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].lc_id)
				{
					if (SUCCESS ==
							p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response)
					{
						/* reset response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response = RRC_NULL;
						/* Set Most Significant 2 Byte Source Module Id */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)(rrc_get_src_module_id(p_api) << 16);
						/* set response of lc_id in response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)p_pdcp_reconfig_ue_entity_cnf->
							del_drb_error_entities[resp_counter].response;
						break;
					}
				}
			}
		}

		fill_uecc_llim_delete_lc_resp(&p_ue_ctx->curr_op_param.p_rcfg_ue->
				delete_lc_resp, FAILURE, p_delete_lc_param);

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_pdcp_reconfig_ue_entity_cnf->ue_index), UECC_LLIM_DELETE_LC_RESP,
				sizeof(p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp),
				&p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_lc_state_s1u_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function mark LC deleted on S1-U level and
 *       if LC adding rollback complete send confirmation to UECC
 *       state UEMH_STATE_W_FOR_DEL_ALL_LC_CNF;
 *       event UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_lc_state_s1u_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_lc_req_t*  p_delete_lc_param = PNULL;
	rrc_uecc_llim_delete_lc_resp_t*  p_delete_lc_resp = PNULL;
	rrc_s1u_reconfigure_ue_entity_cnf_t *p_s1u_reconfigure_ue_entity_cnf =
		(rrc_s1u_reconfigure_ue_entity_cnf_t *)p_msg;
	U8    lc_counter = RRC_NULL;
	U8    resp_counter = RRC_NULL;
	U8    failure_response_count = RRC_NULL;


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_delete_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_delete_lc;
	p_delete_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) != p_delete_lc_param->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers =
		(U16)( p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers &
				~(1 << UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF));

	for (resp_counter = 0;
			resp_counter < p_s1u_reconfigure_ue_entity_cnf->num_rel_sap_cnf;
			resp_counter++)
	{
		if (S1U_SUCCESS ==
				p_s1u_reconfigure_ue_entity_cnf->rel_sap_cnf[resp_counter].cause)
		{
			continue;
		}
		else
		{
			for (lc_counter = 0;
					lc_counter < p_delete_lc_resp->delete_drb_entity_resp_counter;
					lc_counter++)
			{
				if (p_s1u_reconfigure_ue_entity_cnf->
						rel_sap_cnf[resp_counter].lc_id ==
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].lc_id)
				{
					if (SUCCESS ==
							p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response)
					{
						/* reset response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response = RRC_NULL;
						/* Set Most Significant 2 Byte Source Module Id */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |= (U32)(rrc_get_src_module_id(p_api) <<16);
						/* set response of lc_id in response */
						p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
							response |=(U32)(p_s1u_reconfigure_ue_entity_cnf->
									rel_sap_cnf[resp_counter].cause);
						break;
					}
				}
			}
			failure_response_count++;
		}
	}
	if (resp_counter == failure_response_count)
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		fill_uecc_llim_delete_lc_resp(&p_ue_ctx->curr_op_param.p_rcfg_ue->
				delete_lc_resp, FAILURE, p_delete_lc_param);

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_s1u_reconfigure_ue_entity_cnf->ue_index), UECC_LLIM_DELETE_LC_RESP,
				sizeof(p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp),
				&p_ue_ctx->curr_op_param.p_rcfg_ue->delete_lc_resp);

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	else
	{
		uemh_fsm_check_del_lc_status_and_report(p_ue_ctx, p_rrc_llim_gl_ctx);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_del_all_lc_state_timer_expired
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function report about failed reconfigure lower layers and add
 *        LC operaion.
 *       state UEMH_STATE_W_FOR_DEL_ALL_LC_CNF;
 *       event UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_del_all_lc_state_timer_expired
(
 rrc_timer_t         timer_id,           /* timer_id - unused */
 void                *p_timer_buf,       /* p_uemh_timer_buf - unused */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_lc_req_t*  p_delete_lc_param = PNULL; 
	rrc_uecc_llim_delete_lc_resp_t* p_delete_lc_resp  = PNULL;

	U8        lc_counter = RRC_NULL;


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_rrc_llim_gl_ctx:%p timer_id:%p p_timer_buf:%p ",
			p_rrc_llim_gl_ctx,timer_id,p_timer_buf);

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_delete_lc_param = 
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_delete_lc;

	p_delete_lc_resp = &p_ue_ctx->curr_op_param.
		p_rcfg_ue->delete_lc_resp;

	/* Timer expired and is not valid any more */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Timer [LLIM_RECONFIG_UE_ENTITY_TIMER] "
			"expired");

	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;

	for (lc_counter = 0;
			lc_counter < p_delete_lc_resp->delete_drb_entity_resp_counter;
			lc_counter++)
	{
		/* reset response */
		p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
			response = RRC_NULL;
		/* Set Most Significant 2 Byte Source Module Id */
		p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
			response |= (RRC_MODULE_ID << 16);
		/* set response of lc_id in response */
		p_delete_lc_resp->delete_drb_entity_resp[lc_counter].
			response |= (U16)RRC_TIMER_EXPIRY; 
	}

	fill_uecc_llim_delete_lc_resp(p_delete_lc_resp, L3_FATAL,
			p_delete_lc_param);

	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_delete_lc_param->ue_index), UECC_LLIM_DELETE_LC_RESP,
			sizeof(*p_delete_lc_resp), p_delete_lc_resp);

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
	p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

	RRC_LLIM_UT_TRACE_EXIT();
}


/*
 *   UEMH_STATE_LLIM_LL_ADD_LC_IN_SYNC_ONGOING state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_add_lc_in_sync_going_state_mac_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_add_lc_in_sync_going_state_mac_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param = PNULL;
	rrc_mac_reconfigure_ue_entity_cnf_t *p_mac_reconfigure_ue_entity_cnf =
		(rrc_mac_reconfigure_ue_entity_cnf_t*)p_msg;

	rrc_uecc_llim_add_lc_req_t  *p_add_lc_param = PNULL;

	rrc_uecc_llim_add_lc_resp_t  *p_add_lc_resp = PNULL;

	rrc_uecc_llim_add_rollback_req_t  *p_uecc_add_rollback_req = PNULL; 

	rrc_counter_t        drb_index = RRC_NULL;
	rrc_counter_t        lc_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	p_uecc_add_rollback_req = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback;

	if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_uecc_add_rollback_req->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else if(RRC_LLIM_RECONFIG_HO_CREATE_UE_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		if (PNULL != p_ue_ctx->curr_op_param.p_create_ue)
		{
			p_create_ue_param =
				&p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue;
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Create UE information "
					"is not stored in UE Context");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_create_ue_param->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "[%s]Message with other "
					"transaction_id - ignored",__FUNCTION__);
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != p_add_lc_param->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}

	if(MAC_SUCCESS == p_mac_reconfigure_ue_entity_cnf->response_code)
	{
		/* Mark LC deleted on MAC level */
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers = 
			(U16)(p_ue_ctx->curr_op_param.p_rcfg_ue->
					cur_mask_lc_to_be_tracked_layers & 
					~(1 << UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF));

		uemh_fsm_check_del_lc_status_and_report_add_rollback(p_ue_ctx, p_rrc_llim_gl_ctx);
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "RollBack failed at MAC ");
		/* Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		if (RRC_LLIM_RECONFIG_HO_CREATE_UE_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			if (p_ue_ctx->curr_op_param.p_create_ue != PNULL)
			{
				build_and_send_uecc_create_ho_ue_rollback_resp(&p_ue_ctx->
						curr_op_param.p_create_ue->uecc_create_ue,
						&p_ue_ctx->curr_op_param.p_create_ue->create_ue_resp);

				rrc_mem_free (p_ue_ctx->curr_op_param.p_create_ue);
				p_ue_ctx->curr_op_param.p_create_ue = PNULL;
				rrc_mem_free (p_ue_ctx->curr_op_param.p_rcfg_ue);
				p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			}

		}else if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			build_and_send_uecc_add_lc_rollback_resp(
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.ue_index,
					RRC_FAILURE,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.cell_index);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		else
		{
			p_add_lc_resp->response_code = L3_FATAL;

			for (lc_index = 0; 
					lc_index < p_mac_reconfigure_ue_entity_cnf->
					delete_lc_error_counter; ++lc_index)
			{

				for (drb_index = 0; 
						drb_index < p_add_lc_param->
						create_drb_entity_counter; 
						++drb_index)
				{
					if(RRC_LLIM_DRB_FAILED_AT_MAC !=
							p_ue_ctx->curr_op_param.p_rcfg_ue->
							llim_drb_status[drb_index].drb_status )
					{
						if (p_add_lc_param->create_drb_entity[drb_index].
								uecc_llim_drb_config.drb_config.logical_channel_identity ==
								p_mac_reconfigure_ue_entity_cnf->
								delete_lc_error[lc_index].
								lch_id)
						{
							RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d"
									" failed at MAC during Rollback",
									p_mac_reconfigure_ue_entity_cnf->
									delete_lc_error[lc_index].
									lch_id);
							p_ue_ctx->curr_op_param.p_rcfg_ue->
								llim_drb_status[drb_index].lc_id = 
								p_add_lc_param->
								create_drb_entity[drb_index].
								uecc_llim_drb_config.drb_config.
								logical_channel_identity;

							llim_fill_response_code(
									&p_add_lc_resp->
									create_drb_status[drb_index].response,
									RRC_MAC_MODULE_ID,
									p_mac_reconfigure_ue_entity_cnf->
									delete_lc_error[lc_index].response);

							break;
						}
					}
				}
			}

			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_mac_reconfigure_ue_entity_cnf->ue_index), 
					UECC_LLIM_ADD_LC_RESP,
					sizeof(*p_add_lc_resp), p_add_lc_resp);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}

}


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_add_lc_in_sync_going_state_rlc_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_add_lc_in_sync_going_state_rlc_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param = PNULL;

	rrc_rlc_reconfig_ue_entity_cnf_t *p_rlc_reconfigure_ue_entity_cnf =
		(rrc_rlc_reconfig_ue_entity_cnf_t*)p_msg;

	rrc_uecc_llim_add_lc_req_t  *p_add_lc_param = PNULL;

	rrc_uecc_llim_add_lc_resp_t  *p_add_lc_resp = PNULL;

	rrc_uecc_llim_add_rollback_req_t  *p_uecc_add_rollback_req = PNULL; 

	rrc_counter_t        drb_index = RRC_NULL;

	rrc_counter_t        lc_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	p_uecc_add_rollback_req =
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback;

	if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_uecc_add_rollback_req->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id(%d) expect(%d)- ignored",
					rrc_get_transaction_id(p_api), p_uecc_add_rollback_req->transaction_id);
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else if(RRC_LLIM_RECONFIG_HO_CREATE_UE_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		RRC_ASSERT(PNULL != p_ue_ctx->curr_op_param.p_create_ue);
		p_create_ue_param = &p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue;
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_create_ue_param->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "[%s]Message with other "
					"transaction_id - ignored",__FUNCTION__);
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != p_add_lc_param->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}

	if(RLC_SUCCESS == p_rlc_reconfigure_ue_entity_cnf->response_code)
	{
		/* Mark LC deleted on rlc level */
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers = 
			(U16)(p_ue_ctx->curr_op_param.p_rcfg_ue->
					cur_mask_lc_to_be_tracked_layers & 
					~(1 << UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF));

		uemh_fsm_check_del_lc_status_and_report_add_rollback(p_ue_ctx, p_rrc_llim_gl_ctx);
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "RollBack failed at RLC");

		/* Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}
		if (RRC_LLIM_RECONFIG_HO_CREATE_UE_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			if (p_ue_ctx->curr_op_param.p_create_ue != PNULL)
			{
				build_and_send_uecc_create_ho_ue_rollback_resp(&p_ue_ctx->
						curr_op_param.p_create_ue->uecc_create_ue,
						&p_ue_ctx->curr_op_param.p_create_ue->create_ue_resp);

				rrc_mem_free (p_ue_ctx->curr_op_param.p_create_ue);
				p_ue_ctx->curr_op_param.p_create_ue = PNULL;
				rrc_mem_free (p_ue_ctx->curr_op_param.p_rcfg_ue);
				p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			}

		}else if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			build_and_send_uecc_add_lc_rollback_resp(
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.ue_index,
					RRC_FAILURE,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.cell_index);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		else
		{
			p_add_lc_resp->response_code = L3_FATAL;

			for (drb_index = 0; 
					drb_index < p_add_lc_param->
					create_drb_entity_counter; 
					++drb_index)
			{
				if(RRC_LLIM_DRB_PASSED_AT_RLC <= p_ue_ctx->curr_op_param.
						p_rcfg_ue->llim_drb_status[drb_index].drb_status || 
						RRC_LLIM_DRB_FAILED_AT_PDCP == p_ue_ctx->
						curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
						drb_status ||
						RRC_LLIM_DRB_FAILED_AT_S1U == p_ue_ctx->
						curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
						drb_status )
				{
					for (lc_index = 0; 
							lc_index < p_rlc_reconfigure_ue_entity_cnf->
							num_delete_entity_error; ++lc_index)
					{
						if (p_add_lc_param->create_drb_entity[drb_index].
								uecc_llim_drb_config.drb_config.
								logical_channel_identity ==
								p_rlc_reconfigure_ue_entity_cnf->
								delete_error_entities[lc_index].
								lc_id)
						{
							RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d"
									" failed at RLC during Rollback",
									p_rlc_reconfigure_ue_entity_cnf->
									delete_error_entities[lc_index].
									lc_id);

							llim_fill_response_code(
									&p_add_lc_resp->
									create_drb_status[drb_index].response,
									RRC_RLC_MODULE_ID,
									p_rlc_reconfigure_ue_entity_cnf->
									delete_error_entities[lc_index].response);

						}
					}

				}
			}

			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_rlc_reconfigure_ue_entity_cnf->ue_index), 
					UECC_LLIM_ADD_LC_RESP,
					sizeof(*p_add_lc_resp), p_add_lc_resp);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}

}


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_add_lc_in_sync_going_state_pdcp_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_add_lc_in_sync_going_state_pdcp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param = PNULL;
	rrc_pdcp_reconfig_ue_entity_cnf_t *p_pdcp_reconfigure_ue_entity_cnf =
		(rrc_pdcp_reconfig_ue_entity_cnf_t*)p_msg;

	rrc_uecc_llim_add_lc_req_t  *p_add_lc_param = PNULL; 

	rrc_uecc_llim_add_lc_resp_t  *p_add_lc_resp = PNULL;

	rrc_uecc_llim_add_rollback_req_t  *p_uecc_add_rollback_req = PNULL; 

	rrc_counter_t        drb_index = RRC_NULL;
	rrc_counter_t        lc_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	p_uecc_add_rollback_req 
		= &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback;

	if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_uecc_add_rollback_req->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else if(RRC_LLIM_RECONFIG_HO_CREATE_UE_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		if (PNULL != p_ue_ctx->curr_op_param.p_create_ue)
		{
			p_create_ue_param =
				&p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue;
		}
		else
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Create UE information "
					"is not stored in UE Context");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_create_ue_param->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "[%s]Message with other "
					"transaction_id - ignored",__FUNCTION__);
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != p_add_lc_param->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	if(PDCP_SUCCESS == p_pdcp_reconfigure_ue_entity_cnf->response_code)
	{
		/* Mark LC deleted on rlc level */
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers = 
			(U16)( p_ue_ctx->curr_op_param.p_rcfg_ue->
					cur_mask_lc_to_be_tracked_layers & 
					~(1 << UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF));

		uemh_fsm_check_del_lc_status_and_report_add_rollback(p_ue_ctx, p_rrc_llim_gl_ctx);
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "RollBack failed at PDCP");

		/* Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;

		}
		if (RRC_LLIM_RECONFIG_HO_CREATE_UE_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			if (p_ue_ctx->curr_op_param.p_create_ue != PNULL)
			{
				build_and_send_uecc_create_ho_ue_rollback_resp(&p_ue_ctx->
						curr_op_param.p_create_ue->uecc_create_ue,
						&p_ue_ctx->curr_op_param.p_create_ue->create_ue_resp);

				rrc_mem_free (p_ue_ctx->curr_op_param.p_create_ue);
				p_ue_ctx->curr_op_param.p_create_ue = PNULL;
				rrc_mem_free (p_ue_ctx->curr_op_param.p_rcfg_ue);
				p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			}

		}else if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			build_and_send_uecc_add_lc_rollback_resp(
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.ue_index,
					RRC_FAILURE,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.cell_index);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		else
		{
			for (drb_index = 0; drb_index < p_add_lc_param->
					create_drb_entity_counter; ++drb_index)
			{
				if(RRC_LLIM_DRB_PASSED_AT_PDCP <= p_ue_ctx->curr_op_param.
						p_rcfg_ue->llim_drb_status[drb_index].
						drb_status ||
						RRC_LLIM_DRB_FAILED_AT_S1U == p_ue_ctx->curr_op_param.
						p_rcfg_ue->llim_drb_status[drb_index].
						drb_status)
				{
					for (lc_index = 0; 
							lc_index < p_pdcp_reconfigure_ue_entity_cnf->
							num_del_drb_entity_error; ++lc_index)
					{
						if (p_add_lc_param->create_drb_entity[drb_index].
								uecc_llim_drb_config.drb_config.
								logical_channel_identity ==
								p_pdcp_reconfigure_ue_entity_cnf->
								del_drb_error_entities[lc_index].lc_id)
						{
							RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d"
									" failed at PDCP during Rollback",
									p_pdcp_reconfigure_ue_entity_cnf->
									del_drb_error_entities[lc_index].lc_id);

							llim_fill_response_code(
									&p_add_lc_resp->
									create_drb_status[drb_index].response,
									RRC_MAC_MODULE_ID,
									p_pdcp_reconfigure_ue_entity_cnf->
									cr_drb_error_entities[lc_index].response);
							break;
						}
					}
				}
			}
		}
		p_add_lc_resp->response_code = L3_FATAL;
		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_pdcp_reconfigure_ue_entity_cnf->ue_index), 
				UECC_LLIM_ADD_LC_RESP,
				sizeof(*p_add_lc_resp), p_add_lc_resp);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_add_lc_in_sync_going_state_s1u_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_add_lc_in_sync_going_state_s1u_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_s1u_reconfigure_ue_entity_cnf_t *p_s1u_reconf_ue_entity_cnf =
		(rrc_s1u_reconfigure_ue_entity_cnf_t*)p_msg;

	rrc_uecc_llim_add_lc_req_t  *p_add_lc_param = PNULL;

	rrc_uecc_llim_add_lc_resp_t  *p_add_lc_resp = PNULL; 

	rrc_uecc_llim_add_rollback_req_t  *p_uecc_add_rollback_req = PNULL; 

	rrc_counter_t        drb_index = RRC_NULL;
	rrc_counter_t        counter = RRC_NULL;
	rrc_return_et        response_code = RRC_FAILURE;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	RRC_ASSERT(PNULL != p_s1u_reconf_ue_entity_cnf);


	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_add_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc;

	p_add_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp;

	p_uecc_add_rollback_req = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback;


	if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_uecc_add_rollback_req->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != p_add_lc_param->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}

	/* Rollback triggered from UECC */
	if (RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		if(p_s1u_reconf_ue_entity_cnf->num_rel_sap_cnf ==
				p_uecc_add_rollback_req->add_rollback_drb_count)
		{
			response_code = RRC_SUCCESS;
		}
	}/* Rollback triggered from LLIM */
	else if (p_s1u_reconf_ue_entity_cnf->num_rel_sap_cnf ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->passed_drb_at_previous_lower_layer)

	{
		response_code = RRC_SUCCESS;
	}
	/* If drb counters are same at s1u in case rollback
	   Triggered form either LLIM or UECC */  
	if(RRC_SUCCESS == response_code)
	{
		/* Mark LC deleted on rlc level */
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers = 
			(U16)(p_ue_ctx->curr_op_param.p_rcfg_ue->
					cur_mask_lc_to_be_tracked_layers & 
					~(1 << UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF));

		uemh_fsm_check_del_lc_status_and_report_add_rollback(p_ue_ctx, p_rrc_llim_gl_ctx);
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "RollBack failed at S1U ");
		/* Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		if (RRC_LLIM_RECONFIG_HO_CREATE_UE_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			if (p_ue_ctx->curr_op_param.p_create_ue != PNULL)
			{
				build_and_send_uecc_create_ho_ue_rollback_resp(&p_ue_ctx->
						curr_op_param.p_create_ue->uecc_create_ue,
						&p_ue_ctx->curr_op_param.p_create_ue->create_ue_resp);
				rrc_mem_free (p_ue_ctx->curr_op_param.p_create_ue);
				p_ue_ctx->curr_op_param.p_create_ue = PNULL;
				rrc_mem_free (p_ue_ctx->curr_op_param.p_rcfg_ue);
				p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			}

		}else if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			build_and_send_uecc_add_lc_rollback_resp(
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.ue_index,
					RRC_FAILURE,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.cell_index);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		else
		{
			for (drb_index = 0; 
					drb_index < p_add_lc_param->create_drb_entity_counter;
					++drb_index)
			{
				if (p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].
						drb_status == RRC_LLIM_DRB_PASSED_AT_S1U)
				{
					for(counter = 0;
							counter < p_s1u_reconf_ue_entity_cnf->
							num_rel_sap_cnf;
							++counter)
					{

						if ((p_s1u_reconf_ue_entity_cnf->rel_sap_cnf[drb_index].
									lc_id ==
									p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc.
									create_drb_entity[drb_index].uecc_llim_drb_config.drb_config.
									logical_channel_identity) &&

								(S1U_SUCCESS != p_s1u_reconf_ue_entity_cnf->
								 rel_sap_cnf[counter].cause))
						{
							RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"LC id %d"
									" failed at S1U during Rollback",
									p_s1u_reconf_ue_entity_cnf->
									rel_sap_cnf[drb_index].lc_id);

							llim_fill_response_code(
									&p_add_lc_resp->
									create_drb_status[drb_index].response,
									RRC_S1U_MODULE_ID,
									p_s1u_reconf_ue_entity_cnf->
									rel_sap_cnf[drb_index].cause);
						}
					}
				}

			}
			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_s1u_reconf_ue_entity_cnf->ue_index), 
					UECC_LLIM_ADD_LC_RESP,
					sizeof(*p_add_lc_resp), p_add_lc_resp);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}
}


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_check_modify_roll_back_and_report
 *
 *   INPUTS       : rrc_llim_ue_ctx_t   *p_ue_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC modify rollback status
 *       if LC modify rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_check_modify_roll_back_and_report
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp = PNULL;

	rrc_uecc_llim_modify_lc_req_t *p_modify_lc_req = PNULL;

	rrc_counter_t        counter = RRC_NULL;
	rrc_counter_t        drb_failed = RRC_NULL;
	rrc_counter_t        drb_passed = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_modify_lc_resp = 
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;
	p_modify_lc_req = 
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;

	if (RRC_NULL == 
			p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers)
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			build_and_send_uecc_modify_lc_rollback_resp(
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.ue_index,
					RRC_SUCCESS,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.cell_index);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

		}
		else
		{
			for(counter = 0; counter <
					p_modify_lc_req->modify_drb_entity[
					RRC_UECC_NEW_DRB_CONFIG_VERSION].drb_counter;
					counter++)
			{
				if (RRC_TRUE ==
						p_ue_ctx->curr_op_param.p_rcfg_ue->
						llim_drb_status[counter].drb_modify_fail)
				{
					drb_failed++;
				}
				else
				{
					drb_passed++;
				}

			}
			if (RRC_NULL < drb_failed && RRC_NULL == drb_passed)
			{
				p_modify_lc_resp->response_code = FAILURE;
			}
			else if (RRC_NULL < drb_passed && RRC_NULL == drb_failed)
			{
				p_modify_lc_resp->response_code = SUCCESS;
			}
			else
			{
				p_modify_lc_resp->response_code = PARTIAL_SUCCESS;
			}

			rrc_llim_send_internal_msg( 
					RRC_GET_UECC_MODULE_ID(p_modify_lc_req->ue_index), 
					UECC_LLIM_MODIFY_LC_RESP,
					sizeof(rrc_uecc_llim_modify_lc_resp_t), 
					p_modify_lc_resp);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}





/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_modify_lc_in_sync_going_state_s1u_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_modify_lc_in_sync_going_state_s1u_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_s1u_reconfigure_ue_entity_cnf_t *p_s1u_reconfigure_ue_entity_cnf =
		(rrc_s1u_reconfigure_ue_entity_cnf_t*)p_msg;

	rrc_uecc_llim_modify_lc_req_t  *p_modify_lc_param = PNULL;

	rrc_uecc_llim_modify_lc_resp_t  *p_modify_lc_resp = PNULL; 

	rrc_uecc_llim_modify_rollback_req_t *p_uecc_modify_rollback_req = PNULL;

	rrc_counter_t  counter = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	RRC_ASSERT(PNULL != p_s1u_reconfigure_ue_entity_cnf);


	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored;ununsed variable p_rrc_llim_gl_ctx=%p"
                ,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_modify_lc_param = 
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;

	p_modify_lc_resp = 
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	p_uecc_modify_rollback_req =
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback;

	if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_uecc_modify_rollback_req->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != p_modify_lc_param->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	for(counter = RRC_NULL; counter <
			p_s1u_reconfigure_ue_entity_cnf->num_setup_sap_cnf;
			counter++)
	{
		if(S1U_SUCCESS != p_s1u_reconfigure_ue_entity_cnf->
				setup_sap_cnf[counter].cause)
		{
			/*Stop Timer*/
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
						"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
				rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
				p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
			}

			if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
					p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
			{
				build_and_send_uecc_modify_lc_rollback_resp(
						p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_modify_lc_rollback.transaction_id,
						p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_modify_lc_rollback.ue_index,
						RRC_FAILURE,
						p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_modify_lc_rollback.cell_index);
				rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
				p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
				UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
				return;
			}
			else
			{
				/*Roll back failed*/
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Modify Roll back failed "
						"at S1U");

				p_modify_lc_resp->response_code = L3_FATAL;
				rrc_llim_send_internal_msg( 
						RRC_GET_UECC_MODULE_ID(p_s1u_reconfigure_ue_entity_cnf->ue_index), 
						UECC_LLIM_MODIFY_LC_RESP,
						sizeof(*p_modify_lc_resp), 
						p_modify_lc_resp);

				UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
				rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
				p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
				RRC_LLIM_UT_TRACE_EXIT();
				return;
			}
		}
	}

	/* Mark LC roll backed on S1U level */
	p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers = 
		(U16)(p_ue_ctx->curr_op_param.p_rcfg_ue->
				cur_mask_lc_to_be_tracked_layers & 
				~(1 << UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF));

	uemh_fsm_check_modify_roll_back_and_report(p_ue_ctx);

	RRC_LLIM_UT_TRACE_EXIT();

}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_modify_lc_in_sync_going_state_mac_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_modify_lc_in_sync_going_state_mac_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_modify_lc_req_t  *p_modify_lc_param = PNULL;

	rrc_mac_reconfigure_ue_entity_cnf_t *p_mac_reconfigure_ue_entity_cnf;

	rrc_uecc_llim_modify_rollback_req_t *p_uecc_modify_rollback_req = PNULL;

	rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp = PNULL;

	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t lc_index = RRC_NULL;
	p_mac_reconfigure_ue_entity_cnf =
		(rrc_mac_reconfigure_ue_entity_cnf_t*)p_msg;

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;   

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, " Unused variable in fsm :%p",p_rrc_llim_gl_ctx);     

	p_uecc_modify_rollback_req =
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback;

	p_modify_lc_resp =
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_uecc_modify_rollback_req->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else 
	{
		if(rrc_get_transaction_id(p_api) != p_modify_lc_param->transaction_id)

			/* Precondition - should be the same transaction */
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	if (MAC_SUCCESS != p_mac_reconfigure_ue_entity_cnf->response_code)
	{
		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}
		if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			build_and_send_uecc_modify_lc_rollback_resp(
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.ue_index,
					RRC_FAILURE,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.cell_index);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			return;
		}
		else
		{

			/*Roll back failed*/
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Modify Roll back failed "
					"at MAC");
			for (lc_index = 0; lc_index < p_mac_reconfigure_ue_entity_cnf->
					reconfigure_lc_error_counter; ++lc_index)
			{
				for (drb_index = 0; 
						drb_index < 
						p_modify_lc_param->modify_drb_entity[
						RRC_UECC_NEW_DRB_CONFIG_VERSION].
						drb_counter; ++drb_index)
				{
					if (p_modify_lc_param->modify_drb_entity[
							RRC_UECC_NEW_DRB_CONFIG_VERSION].
							uecc_llim_drb_config[drb_index].drb_config.
							logical_channel_identity ==
							p_mac_reconfigure_ue_entity_cnf->
							reconfigure_lc_error[lc_index].
							lch_id)
					{
						/*store in ue_ctx */
						update_drb_fail_status(p_ue_ctx,drb_index,
								RRC_LLIM_DRB_PASSED_AT_MAC);

						llim_fill_response_code(
								&p_modify_lc_resp->modify_drb_status[drb_index].
								response,
								RRC_MAC_MODULE_ID,
								p_mac_reconfigure_ue_entity_cnf->
								reconfigure_lc_error[lc_index].response);

						p_modify_lc_resp->modify_drb_status[drb_index].
							lc_id = 
							p_mac_reconfigure_ue_entity_cnf->
							reconfigure_lc_error[lc_index].
							lch_id;

					}
				}
			}
			p_modify_lc_resp->response_code = L3_FATAL;

			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_mac_reconfigure_ue_entity_cnf->ue_index), 
					UECC_LLIM_MODIFY_LC_RESP,
					sizeof(*p_modify_lc_resp), p_modify_lc_resp);

			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}

	/* Mark LC roll backed on MAC level */

	if(PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers = 
			(U16)(p_ue_ctx->curr_op_param.p_rcfg_ue->
					cur_mask_lc_to_be_tracked_layers & 
					~(1 << UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF));
	}

	uemh_fsm_check_modify_roll_back_and_report(p_ue_ctx);

	RRC_LLIM_UT_TRACE_EXIT();

}

/* CA start */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_modify_lc_in_sync_going_state_phy_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_modify_lc_in_sync_going_state_phy_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_phy_reconfig_ue_entity_cnf_t *p_phy_reconfig_ue_entity_cnf = PNULL;

	rrc_uecc_llim_modify_rollback_req_t *p_uecc_modify_rollback_req = PNULL;

	p_phy_reconfig_ue_entity_cnf =
		(rrc_phy_reconfig_ue_entity_cnf_t*)p_msg;

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}


	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, " Unused variable in fsm :%p",p_rrc_llim_gl_ctx);

	p_uecc_modify_rollback_req =
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback;


	if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_uecc_modify_rollback_req->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}

		if (RRC_SUCCESS != p_phy_reconfig_ue_entity_cnf->response)
		{
			/*Stop Timer*/
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
						"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
				rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
				p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
			}

			if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
					p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
			{
				build_and_send_uecc_modify_lc_rollback_resp(
						p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_modify_lc_rollback.transaction_id,
						p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_modify_lc_rollback.ue_index,
						RRC_FAILURE,
						p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_modify_lc_rollback.cell_index);

				rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
				p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

				UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);

				RRC_LLIM_UT_TRACE_EXIT();
				return;
			}
		}

		/* Mark LC roll backed on PHY level */

		if(PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue)
		{
			p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers = 
				(U16)(p_ue_ctx->curr_op_param.p_rcfg_ue->
						cur_mask_lc_to_be_tracked_layers & 
						~(1 << UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF));
		}

		uemh_fsm_check_modify_roll_back_and_report(p_ue_ctx);
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Unexpected"
				"Message recieved");
	}    
	RRC_LLIM_UT_TRACE_EXIT();


}
/*CA end */

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_modify_lc_in_sync_going_state_rlc_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_modify_lc_in_sync_going_state_rlc_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	/* coverity_fix_54713_start */
	rrc_rlc_reconfig_ue_entity_cnf_t        *p_rlc_reconfig_ue_entity_cnf =
		(rrc_rlc_reconfig_ue_entity_cnf_t *)p_msg;

	rrc_uecc_llim_modify_lc_req_t           *p_modify_lc_param = PNULL;

	rrc_uecc_llim_modify_lc_resp_t          *p_modify_lc_resp = PNULL;

	rrc_uecc_llim_modify_rollback_req_t *p_uecc_modify_rollback_req = PNULL;

	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t lc_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_rrc_llim_gl_ctx);       

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;

	p_modify_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	p_uecc_modify_rollback_req =
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback;

	if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_uecc_modify_rollback_req->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else 
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != p_modify_lc_param->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	if (RLC_SUCCESS != p_rlc_reconfig_ue_entity_cnf->response_code)
	{
		if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			build_and_send_uecc_modify_lc_rollback_resp(
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.ue_index,
					RRC_FAILURE,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.cell_index);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		else
		{
			/*Roll back failed*/
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Modify Roll back failed "
					"at MAC");

			/*Stop Timer*/
			if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
						"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
				rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
				p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
			}

			p_modify_lc_resp->response_code = L3_FATAL;

			for (lc_index = 0; lc_index < p_rlc_reconfig_ue_entity_cnf->
					num_reconfig_entity_error; ++lc_index)
			{

				for (drb_index = 0; 
						drb_index < p_modify_lc_param->
						modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
						drb_counter; 
						++drb_index)
				{
					if (p_modify_lc_param->
							modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
							uecc_llim_drb_config[drb_index].drb_config.
							logical_channel_identity ==
							p_rlc_reconfig_ue_entity_cnf->
							reconfig_error_entities[lc_index].lc_id)
					{
						/*Store in ue_ctx for roll back*/
						update_drb_fail_status(p_ue_ctx,drb_index,
								RRC_LLIM_DRB_PASSED_AT_RLC);

						llim_fill_response_code(
								&p_modify_lc_resp->
								modify_drb_status[drb_index].response,
								RRC_RLC_MODULE_ID,
								p_rlc_reconfig_ue_entity_cnf->
								reconfig_error_entities[lc_index].response);

						p_modify_lc_resp->modify_drb_status[drb_index].
							lc_id = 
							p_rlc_reconfig_ue_entity_cnf->
							reconfig_error_entities[lc_index].
							lc_id;
					}
				}
			}
			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_rlc_reconfig_ue_entity_cnf->ue_index), 
					UECC_LLIM_MODIFY_LC_RESP,
					sizeof(*p_modify_lc_resp), 
					p_modify_lc_resp);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	/* Mark LC deleted on rlc level */
	p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers = 
		(U16)(p_ue_ctx->curr_op_param.p_rcfg_ue->
				cur_mask_lc_to_be_tracked_layers & 
				~(1 << UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF));


	uemh_fsm_check_modify_roll_back_and_report(p_ue_ctx);

	RRC_LLIM_UT_TRACE_EXIT();


}
/* coverity_fix_54713_stop */

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_modify_lc_in_sync_going_state_pdcp_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_modify_lc_in_sync_going_state_pdcp_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_pdcp_reconfig_ue_entity_cnf_t       *p_pdcp_reconfig_ue_entity_cnf =
		(rrc_pdcp_reconfig_ue_entity_cnf_t *)p_msg;

	rrc_uecc_llim_modify_lc_req_t           *p_modify_lc_param = PNULL;

	rrc_uecc_llim_modify_lc_resp_t           *p_modify_lc_resp = PNULL;

	rrc_uecc_llim_modify_rollback_req_t *p_uecc_modify_rollback_req = PNULL;

	rrc_counter_t drb_index = RRC_NULL;
	rrc_counter_t counter = RRC_NULL;


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_pdcp_reconfig_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored; unused variable p_rrc_llim_gl_ctx=%p"
                ,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;

	p_modify_lc_resp = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;

	p_uecc_modify_rollback_req =
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback;

	if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != 
				p_uecc_modify_rollback_req->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	else 
	{
		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) != p_modify_lc_param->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
	}
	if (PDCP_SUCCESS != p_pdcp_reconfig_ue_entity_cnf->response_code)
	{

		/*Roll back failed*/
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Modify Roll back failed "
				"at PDCP");

		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
				p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
		{
			build_and_send_uecc_modify_lc_rollback_resp(
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.ue_index,
					RRC_FAILURE,
					p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_modify_lc_rollback.cell_index);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		else
		{
			for (counter = 0; drb_index < p_pdcp_reconfig_ue_entity_cnf->
					num_rcfg_drb_entity_error; ++counter)
			{
				for(drb_index = 0;
						drb_index < p_modify_lc_param->modify_drb_entity[
						RRC_UECC_NEW_DRB_CONFIG_VERSION].drb_counter;
						++drb_index)
				{
					if (p_modify_lc_param->
							modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
							uecc_llim_drb_config[drb_index].drb_config.
							logical_channel_identity ==
							p_pdcp_reconfig_ue_entity_cnf->
							rcfg_drb_error_entities[counter].lc_id)
					{
						/*store in ue_ctx for rollback*/
						update_drb_fail_status(p_ue_ctx,drb_index,
								RRC_LLIM_DRB_PASSED_AT_PDCP);

						llim_fill_response_code(
								&p_modify_lc_resp->
								modify_drb_status[drb_index].response,
								RRC_PDCP_MODULE_ID,
								p_pdcp_reconfig_ue_entity_cnf->
								rcfg_drb_error_entities[counter].response);

						p_modify_lc_resp->modify_drb_status[drb_index].
							lc_id = 
							p_pdcp_reconfig_ue_entity_cnf->
							rcfg_drb_error_entities[counter].
							lc_id;

						break;
					}
				}
			}
			p_modify_lc_resp->response_code = L3_FATAL;
			rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_pdcp_reconfig_ue_entity_cnf->ue_index), 
					UECC_LLIM_MODIFY_LC_RESP,
					sizeof(*p_modify_lc_resp), 
					p_modify_lc_resp);
			rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/* Mark LC deleted on rlc level */
	p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers = 
		(U16)(p_ue_ctx->curr_op_param.p_rcfg_ue->
				cur_mask_lc_to_be_tracked_layers & 
				~(1 << UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF));


	uemh_fsm_check_modify_roll_back_and_report(p_ue_ctx);

	RRC_LLIM_UT_TRACE_EXIT();


}



/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_modify_lc_in_sync_going_state_timer_expired
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function send modify lc resp to UECC with L3_FATAL Error
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_modify_lc_in_sync_going_state_timer_expired
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{

	rrc_uecc_llim_modify_lc_resp_t *p_modify_lc_resp = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p p_rrc_llim_gl_ctx :%p",
			p_api,p_msg,p_rrc_llim_gl_ctx);
	/*Roll back Timer Expired */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Modify Roll back Timer Expired ");

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_modify_lc_resp = 
		&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_resp;
	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;

	if(RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		build_and_send_uecc_modify_lc_rollback_resp(
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_modify_lc_rollback.transaction_id,
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_modify_lc_rollback.ue_index,
				RRC_FAILURE,
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_modify_lc_rollback.cell_index);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	else
	{
		fill_uecc_llim_modify_lc_resp(
				p_modify_lc_resp,
				L3_FATAL,
				RRC_TIMER_EXPIRY,
				&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc); 

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_modify_lc_resp->ue_index),
				UECC_LLIM_MODIFY_LC_RESP,
				sizeof(*p_modify_lc_resp), 
				p_modify_lc_resp);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	RRC_LLIM_UT_TRACE_EXIT();

}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_add_lc_in_sync_going_state_timer_expired
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function check LC adding rollback status
 *       if LC adding rollback complete send report to UECC
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_add_lc_in_sync_going_state_timer_expired
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p p_rrc_llim_gl_ctx :%p",
			p_api,p_msg,p_rrc_llim_gl_ctx);
	/*Roll back Timer Expired */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Add LC Roll back Timer Expired ");

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;

	if (RRC_LLIM_RECONFIG_HO_CREATE_UE_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		if (p_ue_ctx->curr_op_param.p_create_ue != PNULL)
		{
			build_and_send_uecc_create_ho_ue_rollback_resp(&p_ue_ctx->
					curr_op_param.p_create_ue->uecc_create_ue,
					&p_ue_ctx->curr_op_param.p_create_ue->create_ue_resp);
			rrc_mem_free (p_ue_ctx->curr_op_param.p_create_ue);
			p_ue_ctx->curr_op_param.p_create_ue = PNULL;
			rrc_mem_free (p_ue_ctx->curr_op_param.p_rcfg_ue);
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
			p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
		}

	}else if(RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure ||
			RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING ==
			p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure)
	{
		build_and_send_uecc_add_lc_rollback_resp(
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.transaction_id,
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.ue_index,
				RRC_FAILURE,
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.cell_index);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

	}
	else
	{
		fill_uecc_llim_add_lc_resp(
				&p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp,   /* destination*/
				L3_FATAL,
				RRC_TIMER_EXPIRY,
				&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc); /* main source */

		rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_ue_ctx->ue_index), 
				UECC_LLIM_ADD_LC_RESP,
				sizeof(rrc_uecc_llim_add_lc_resp_t), 
				&p_ue_ctx->curr_op_param.p_rcfg_ue->add_lc_resp);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_add_lc_roll_back_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function changes the current procedure to
 *       RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING and initiates
 *       the ROLLBACK for add lc.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_add_lc_rollback_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_mac_reconfigure_ue_entity_req_t
		mac_reconfigure_ue_entity_req;

	rrc_s1u_reconfigure_ue_entity_req_t
		s1u_reconfigure_ue_entity_req;

	rrc_pdcp_reconf_ue_entity_req_t 
		pdcp_reconf_ue_entity_req;

	rrc_rlc_reconfig_ue_entity_req_t
		rlc_reconfig_ue_entity_req;

	U8 drb_index = RRC_NULL;


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_rrc_llim_gl_ctx :%p",
			p_api,p_rrc_llim_gl_ctx);


	/* Allocate Memory */
	p_ue_ctx->curr_op_param.p_rcfg_ue = (rrc_uemh_rcfg_ue_op_param_t*)
		rrc_mem_get (sizeof(rrc_uemh_rcfg_ue_op_param_t));

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
				"Memory allocation failure for"
				" p_ue_ctx->curr_op_param.p_rcfg_ue");
		return;
	}

	RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "transid %d", ((rrc_uecc_llim_add_rollback_req_t*)p_msg)->transaction_id);

	/* Memset allocated memory */
	memset_wrapper(p_ue_ctx->curr_op_param.p_rcfg_ue, 0,
			sizeof(*p_ue_ctx->curr_op_param.p_rcfg_ue));


	/*Saving Roll back req in ue context*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback =
		*((rrc_uecc_llim_add_rollback_req_t*)p_msg);

	/* Keeping Uecc Trigerred Roll Back on Pending State*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
		RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING;


	memset_wrapper(&mac_reconfigure_ue_entity_req, RRC_NULL, sizeof
			(mac_reconfigure_ue_entity_req));

	memset_wrapper(&s1u_reconfigure_ue_entity_req, RRC_NULL, sizeof
			(s1u_reconfigure_ue_entity_req));

	memset_wrapper(&pdcp_reconf_ue_entity_req, RRC_NULL, sizeof
			(pdcp_reconf_ue_entity_req));

	memset_wrapper(&rlc_reconfig_ue_entity_req, RRC_NULL, sizeof
			(rlc_reconfig_ue_entity_req));

	p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure = 
		RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING;

	for(drb_index = RRC_NULL;
			drb_index < p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
			add_rollback_drb_count;
			drb_index++)
	{
		s1u_reconfigure_ue_entity_req.ue_index = p_ue_ctx->ue_index;

		/*Increamenting counter for deleting LC*/
		s1u_reconfigure_ue_entity_req.num_rel_sap_req++;

		RRC_ASSERT(s1u_reconfigure_ue_entity_req.num_rel_sap_req <=
				RRC_S1U_MAX_NUM_LC);

		s1u_reconfigure_ue_entity_req.rel_sap_req[drb_index].lc_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->
			uecc_add_lc_rollback.add_drb_entity[drb_index].lc_id;


		pdcp_reconf_ue_entity_req.ue_index = p_ue_ctx->ue_index;

		if(pdcp_reconf_ue_entity_req.num_del_drb_entity < RRC_PDCP_MAX_DRB)
		{
			pdcp_reconf_ue_entity_req.del_drb_entities[
				pdcp_reconf_ue_entity_req.num_del_drb_entity].lc_id =
				p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.add_drb_entity[drb_index].lc_id;

			pdcp_reconf_ue_entity_req.num_del_drb_entity++;
		}

		RRC_ASSERT(pdcp_reconf_ue_entity_req.num_del_drb_entity <=
				RRC_PDCP_MAX_DRB);


		fill_rlc_reconfig_del_lc_req_for_uecc_trigerred_rollback(
				&rlc_reconfig_ue_entity_req,
				p_ue_ctx,
				drb_index);


		fill_mac_reconfig_del_lc_req_for_uecc_trigerred_rollback(
				&mac_reconfigure_ue_entity_req,
				p_ue_ctx,
				drb_index);

	}

	if(RRC_NULL != mac_reconfigure_ue_entity_req.delete_lc_req_counter)
	{
		/*Applying older Configurations */
		if (p_ue_ctx->curr_op_param.p_rcfg_ue->
				uecc_add_lc_rollback.bitmask & 
				UECC_LLIM_ADD_ROLLBACK_REQ_OLD_MAC_CONFIG_PRESENT )
		{

			mac_reconfigure_ue_entity_req.optional_elems_present |=
				RRC_MAC_RECONFIG_UE_INFO_PRESENT;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present =
				0;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_DL_MAX_RB_INFO_PRESENT;
			mac_reconfigure_ue_entity_req.reconfig_ue_info.dl_max_rb_info.
				dl_max_rb =
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				mac_config.mac_main_config_extensions.dl_max_rb;
			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_NUM_OF_LAYER_INFO_PRESENT;
			mac_reconfigure_ue_entity_req.reconfig_ue_info.num_of_layer_info.
				num_of_layer =
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				mac_config.mac_main_config_extensions.num_of_layer;

			mac_reconfigure_ue_entity_req.reconfig_ue_info.
				optional_elems_present |=
				RRC_MAC_CODE_BOOK_INDEX_INFO_PRESENT;
			mac_reconfigure_ue_entity_req.reconfig_ue_info.code_book_index_info.
				code_book_index =
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				mac_config.mac_main_config_extensions.code_book_index;
			/* Transmission_mode_7_8 start*/
			if(p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					mac_config.mac_main_config_extensions.bitmask & 
					RRM_MAC_MAIN_CONFIG_EXT_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT) 
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_RECONFIG_PDSCH_EPRE_TO_UE_RS_RATIO_PRESENT;
				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					pdsch_epre_to_ue_rs_ratio.pdsch_epre_to_ue_rs_ratio =
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					mac_config.mac_main_config_extensions.pdsch_epre_to_ue_rs_ratio;
			}
			/* Transmission_mode_7_8 stop*/
			/* Fill TAT info if present */
			if (p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					mac_config.bitmask & RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT)
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_TIME_ALIGNMENT_TIME_INFO_PRESENT;

				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					time_alignment_timer_info.time_alignment_timer =
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
					mac_main_config.time_alignment_timer_dedicated;
			}
			/*TTI_BUNDLING Start*/

			/* add roll back - tti bundling */
			if ((p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
						mac_config.bitmask & RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
					(p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					 mac_config.mac_main_config.bitmask & RRC_MAC_MAIN_CONFIG_UL_SCH_CONFIG_PRESENT))
			{
				/* tti_bundling_info present */
				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_RECONFIG_TTI_BUNDLING_INFO_PRESENT;

				mac_reconfigure_ue_entity_req.reconfig_ue_info.tti_bundling.
					tti_bundling = 
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
					mac_main_config.ul_sch_config.tti_bundling;
			}
			/*TTI_BUNDLING Stop*/

			/* add roll back - drx config */
			if ((p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
						mac_config.bitmask & RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT) &&
					(p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					 mac_config.mac_main_config.bitmask & RRC_MAC_MAIN_CONFIG_DRX_CONFIG_PRESENT))
			{
				/* drx_config_info present */
				mac_reconfigure_ue_entity_req.reconfig_ue_info.
					optional_elems_present |=
					RRC_MAC_RECONFIG_DRX_CONFIG_INFO_PRESENT;

				/* 1- for setup */
				if((1 == p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
							mac_config.mac_main_config.drx_config.drx_config_type) && 
						(p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
						 mac_config.mac_main_config.drx_config.bitmask
						 & RRC_DRX_CONFIG_PARAM_PRESENT))
				{
					/* Set bitmask */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
						bitmask |= RRC_MAC_DRX_CONFIG_DRX_SETUP_CONFIG_INFO_PRESENT;

					/* since drx_config_type is 1 */ 
					mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
						drx_config_type = 1;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
						drx_setup_config_info.on_duration_timer = 
						p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
						mac_main_config.drx_config.drx_config_param.on_duration_timer;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
						drx_setup_config_info.drx_inactivity_timer = 
						p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
						mac_main_config.drx_config.drx_config_param.drx_inactivity_timer;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
						drx_setup_config_info.drx_retransmission_timer = 
						p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
						mac_main_config.drx_config.drx_config_param.drx_retransmission_timer;

					rrc_mac_fill_mac_main_long_drx_cycle_start_offset(
							&p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
							mac_config.mac_main_config.drx_config.drx_config_param.
							long_drx_cycle_start_offset,
							&mac_reconfigure_ue_entity_req.reconfig_ue_info.
							drx_config_info.drx_setup_config_info);

					/* check short drx config present */
					if (p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
							mac_main_config.drx_config.
							drx_config_param.bitmask & RRC_DRX_CONFIG_SHORT_DRX_PRESENT)
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
							drx_setup_config_info.bitmask |=
							RRC_MAC_DRX_SETUP_CONFIG_SHORT_DRX_CONFIG_PRESENT;

						mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
							drx_setup_config_info.short_drx.short_drx_cycle = 
							p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
							mac_main_config.drx_config.
							drx_config_param.short_drx.short_drx_cycle;

						mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
							drx_setup_config_info.short_drx.short_drx_cycle_timer = 
							p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
							mac_main_config.drx_config.
							drx_config_param.short_drx.short_drx_cycle_timer;
					}
					/* DRX_MAC_CE_CMD  Start */ 
					if (p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
							mac_main_config.drx_config.
							drx_config_param.bitmask & RRC_DRX_CONFIG_DRX_MAC_CE_CMD_TRIGGER_INFO_PRESENT)
					{
						mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
							drx_setup_config_info.bitmask |=
							RRC_MAC_DRX_SETUP_CONFIG_DRX_MAC_CE_CMD_TRIGGER_INFO_PRESENT;

						mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
							drx_setup_config_info.mac_ce_cmd_l2_trigger_info.drx_mac_ce_timer = 
							p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
							mac_main_config.drx_config.
							drx_config_param.drx_mac_ce_cmd_trigger_info.drx_mac_ce_timer;

						mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
							drx_setup_config_info.mac_ce_cmd_l2_trigger_info.drx_mac_ce_cmd_threshold  = 
							p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.mac_config.
							mac_main_config.drx_config.
							drx_config_param.drx_mac_ce_cmd_trigger_info.drx_mac_ce_cmd_threshold;
					}
					/* DRX_MAC_CE_CMD  End */
				}
				else /* for release */
				{
					/* since drx_config_type is 0 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.drx_config_info.
						drx_config_type = 0;
				}
			}
		}

		/* Check - meas_gap_config_info */
		if ((p_ue_ctx->curr_op_param.p_rcfg_ue->
					uecc_add_lc_rollback.bitmask &
					UECC_LLIM_ADD_ROLLBACK_REQ_OLD_MEAS_CONFIG_PRESENT) && 
				(p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.bitmask &
				 UE_ADM_MEAS_GAP_CONFIG_PRESENT))
		{
			mac_reconfigure_ue_entity_req.reconfig_ue_info.optional_elems_present |=
				RRC_MAC_RECONFIG_MEAS_GAP_CONFIG_INFO_PRESENT;

			/* 1 - meas config gap setup */
			if ((1 == p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config. 
						meas_gap_config.meas_gap_config_type) && 
					(p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.meas_gap_config.
					 bitmask & MEAS_GAP_CONFIG_SETUP_CONFIG_INFO_PRESENT))
			{
				mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
					bitmask |= RRC_MAC_MEAS_GAP_CONFIG_MEAS_GAP_SETUP_CONFIG_INFO_PRESENT;

				/* Assign meas gap config type - 1 */
				mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
					meas_gap_config_type = 1;

				/* pattern id 0 */
				if (p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.
						meas_gap_config.setup_config_info.bitmask & MEAS_GAP_CONFIG_GP0_PRESENT)
				{ 
					/* Assign - pattern id 0 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 0;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_add_lc_rollback.meas_config.meas_gap_config.setup_config_info.gp0; 

				}
				/* pattern id 1 */
				else if (p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.
						meas_gap_config.setup_config_info.bitmask & MEAS_GAP_CONFIG_GP1_PRESENT)   
				{
					/* Assign - pattern id 1 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 1;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_add_lc_rollback.meas_config.meas_gap_config.setup_config_info.gp1; 
				}
                #ifdef ENDC_ENABLED
				/* pattern id 4 */
				else if ( p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.
						meas_gap_config.setup_config_info.bitmask & MEAS_GAP_CONFIG_GP4_PRESENT)   
				{
					/* Assign - pattern id 4 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 4;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_add_lc_rollback.meas_config.meas_gap_config.
						setup_config_info.gp4_r15; 
				}
				/* pattern id 5 */
				else if ( p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP5_PRESENT)   
				{
					/* Assign - pattern id 5 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 5;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_add_lc_rollback.meas_config.meas_gap_config.
						setup_config_info.gp5_r15; 
				}
				/* pattern id 6 */
				else if ( p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP6_PRESENT)   
				{
					/* Assign - pattern id 6 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 6;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_add_lc_rollback.meas_config.meas_gap_config.
						setup_config_info.gp6_r15; 
				}
				/* pattern id 7 */
				else if ( p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP7_PRESENT)   
				{
					/* Assign - pattern id 7 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 7;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_add_lc_rollback.meas_config.meas_gap_config.
						setup_config_info.gp7_r15; 
				}
				/* pattern id 8 */
				else if ( p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP8_PRESENT)   
				{
					/* Assign - pattern id 8 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 8;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_add_lc_rollback.meas_config.meas_gap_config.
						setup_config_info.gp8_r15; 
				}
				/* pattern id 9 */
				else if ( p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP9_PRESENT)   
				{
					/* Assign - pattern id 9 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 9;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_add_lc_rollback.meas_config.meas_gap_config.
						setup_config_info.gp9_r15; 
				}
				/* pattern id 10 */
				else if ( p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP10_PRESENT)   
				{
					/* Assign - pattern id 10 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 10;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_add_lc_rollback.meas_config.meas_gap_config.
						setup_config_info.gp10_r15; 
				}
				/* pattern id 11 */
				else if ( p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.meas_config.
						meas_gap_config.setup_config_info.bitmask & 
						MEAS_GAP_CONFIG_GP11_PRESENT)   
				{
					/* Assign - pattern id 11 */
					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_pattern_id = 11;

					mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
						meas_gap_setup_config_info.gap_offset = p_ue_ctx->curr_op_param.p_rcfg_ue->
						uecc_add_lc_rollback.meas_config.meas_gap_config.
						setup_config_info.gp11_r15; 
				}
                #endif
			}
			/* 0 - meas config gap release */
			else
			{
				/* Assign meas gap config type - 0 */
				mac_reconfigure_ue_entity_req.reconfig_ue_info.meas_gap_config_info.
					meas_gap_config_type = 0;
			}
		}

		if (RRC_SUCCESS != rrc_mac_il_send_rrc_mac_reconfigure_ue_entity_req(
					&mac_reconfigure_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					cell_index))
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"[%s]Unable to send "
					"MAC reconfig UE entity req", __FUNCTION__);
		}


		RRC_ASSERT(UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF < 16); 

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			1 << UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF;

	}
	if( RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_um_rlc ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_rx_um_rlc  ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_rx_um_rlc ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_rx_am_rlc 
	  )
	{
		if (RRC_SUCCESS != rrc_rlc_il_send_rrc_rlc_reconfig_ue_entity_req(
					&rlc_reconfig_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					cell_index))
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_ERROR,"[%s]Unable to send "
					"RLC reconfig UE entity req", __FUNCTION__);
		}
		RRC_ASSERT(UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
			1 << UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF;

	}
	if(RRC_NULL != pdcp_reconf_ue_entity_req.num_del_drb_entity)
	{
		if(RRC_SUCCESS != rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
					&pdcp_reconf_ue_entity_req, RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					transaction_id,
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					cell_index))
		{
			RRC_LLIM_TRACE(RRC_ERROR,"[%s]Unable to send pdcp_reconf_ue_entity_req ",__FUNCTION__);
		}
		RRC_ASSERT(UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
			1 << UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF;

	}
	if(RRC_NULL != s1u_reconfigure_ue_entity_req.num_rel_sap_req)
	{
		rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
				&s1u_reconfigure_ue_entity_req, RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.cell_index),
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				transaction_id,
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				cell_index);
		RRC_ASSERT(UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
			1 << UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF;
	}
	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_LLIM_LL_ADD_LC_IN_SYNC_ONGOING);    
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_xxx_process_add_lc_rollback_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function changes the current procedure to
 *       RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_ON_PENDING and waits
 *       for the LLIM ADD LC ROLLBACK to be completed and then starts the
 *       UECC initiated Roll Back.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_xxx_process_add_lc_rollback_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_rrc_llim_gl_ctx :%p",
			p_api,p_rrc_llim_gl_ctx);

	/*Saving Roll back req in ue context*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback =
		*((rrc_uecc_llim_add_rollback_req_t*)p_msg);

	/* Keeping Uecc Trigerred Roll Back on Pending State*/
	p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
		RRC_LLIM_RECONFIG_ADD_LC_UECC_TRIGGERED_ROLLBACK_PENDING;


	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_modify_rollback_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function changes the current procedure to
 *       RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING and 
 *       initiates the ROLLBACK for add lc.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_modify_rollback_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_bool_et reconfig_sent = RRC_FALSE;

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_rrc_llim_gl_ctx :%p",
			p_api,p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"UECC Triggered Rollback On going..");
	/* ERAB_MODIFY_FIX start */
	/*Memory Optimization */
	p_ue_ctx->curr_op_param.p_rcfg_ue = (rrc_uemh_rcfg_ue_op_param_t *)
		rrc_mem_get(sizeof(rrc_uemh_rcfg_ue_op_param_t));
	/* ERAB_MODIFY_FIX stop */

	if (PNULL == p_ue_ctx->curr_op_param.p_rcfg_ue)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rcfg_ue is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/* ERAB_MODIFY_FIX start */
	memset_wrapper(p_ue_ctx->curr_op_param.p_rcfg_ue,0,
			sizeof(rrc_uemh_rcfg_ue_op_param_t));
	/* Special case on init operation */
	p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
	/* ERAB_MODIFY_FIX stop */
	p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
		RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING;

	p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback =
		*((rrc_uecc_llim_modify_rollback_req_t*)p_msg);


	RRC_LLIM_TRACE(RRC_INFO,"Checking For RollBack..");

	if(SUCCESS == 
			uemh_fsm_in_service_uecc_trigerred_rb_mac_reconfig_modify_lc_req(p_ue_ctx))
	{
		RRC_LLIM_TRACE(RRC_INFO,"Modify LC request sent to MAC");

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			(U16)(1 << UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF);

		reconfig_sent = RRC_TRUE;
	}  

	if(SUCCESS == 
			uemh_fsm_in_service_uecc_trigerred_rb_rlc_reconfig_modify_lc_req(p_ue_ctx))
	{
		RRC_LLIM_TRACE(RRC_INFO,"Modify LC request sent to RLC");

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			(U16)(1 << UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF);

		reconfig_sent = RRC_TRUE;
	}  
	if (SUCCESS == 
			uemh_fsm_in_service_uecc_trigerred_rb_pdcp_reconfig_modify_lc_req(p_ue_ctx)) 
	{
		RRC_LLIM_TRACE(RRC_INFO,"Modify LC request sent to PDCP");

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			(U16)(1 << UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF);

		reconfig_sent = RRC_TRUE;
	}
	if (SUCCESS == 
			uemh_fsm_in_service_uecc_trigerred_rb_s1u_reconfig_modify_lc_req(p_ue_ctx)) 
	{
		RRC_LLIM_TRACE(RRC_INFO,"Modify LC request sent to S1U");

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			(U16)(1 << UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF);

		reconfig_sent = RRC_TRUE;
	}
	if(SUCCESS == 
			uemh_fsm_in_service_uecc_trigerred_rb_phy_reconfig_modify_lc_req(p_ue_ctx))
	{
		RRC_LLIM_TRACE(RRC_INFO,"Modify LC request sent to PHY");

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			(U16)(1 << UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF);

		reconfig_sent = RRC_TRUE;
	}  
	if(RRC_FALSE == reconfig_sent)
	{
		/*Stop Timer*/
		if (PNULL != p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[LLIM_RECONFIG_UE_ENTITY_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer);
			p_ue_ctx->curr_op_param.p_rcfg_ue->guard_timer = PNULL;
		}

		build_and_send_uecc_modify_lc_rollback_resp(
				p_ue_ctx->curr_op_param.
				p_rcfg_ue->uecc_modify_lc_rollback.transaction_id,
				p_ue_ctx->curr_op_param.
				p_rcfg_ue->uecc_modify_lc_rollback.ue_index,
				RRC_SUCCESS,
				p_ue_ctx->curr_op_param.
				p_rcfg_ue->uecc_modify_lc_rollback.cell_index);
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue);
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;

		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}
	else
	{
		UEMH_FSM_SET_STATE(p_ue_ctx,
				UEMH_STATE_LLIM_LL_MODIFY_LC_IN_SYNC_ONGOING);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_xxx_process_modify_lc_rollback_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function changes the current procedure to
 *       RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_ON_GOING and 
 *       initiates the ROLLBACK for add lc.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_xxx_process_modify_lc_rollback_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_rrc_llim_gl_ctx :%p",
			p_api,p_rrc_llim_gl_ctx);

	p_ue_ctx->curr_op_param.p_rcfg_ue->current_procedure =
		RRC_LLIM_RECONFIG_MODIFY_LC_UECC_TRIGGERED_ROLLBACK_PENDING;

	p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc_rollback =
		*((rrc_uecc_llim_modify_rollback_req_t*)p_msg);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"UECC Triggered Rollback Pending..");

	RRC_LLIM_UT_TRACE_EXIT();
}



/*
 *   UEMH FSM implementation
 */

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ignored_event
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       Handler of ignored events.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ignored_event
(
 void                *param1,            /* p_api or timer_id */
 void                *param2,            /* p_msg or p_uemh_timer_buf */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* UE context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm param1:%p param2:%p p_rrc_llim_gl_ctx :%p",
			param1,param2,p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "[%s] ignore event received in state "
			"[%s]",
			RRC_UEMH_FSM_NAME,
			UEMH_FSM_STATES_NAMES[UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx)]);

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_suspend_ue_entity_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function process the message UEMH_EVENT_UECC_SUSPEND_
 *        _UE_ENTITY_REQ and changes the state.
 *       
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void uemh_fsm_ue_in_service_state_suspend_ue_entity_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_pdcp_suspend_ue_entity_req_t suspend_req  ;
	rrc_uecc_llim_suspend_ue_entity_req_t* p_llim_ue_suspend_req = PNULL ;
	rrc_uecc_llim_suspend_ue_entity_req_t* p_param_ue_suspend_req = PNULL;

	rrc_uemh_timer_buf_t      guard_timer_data;

	rrc_rlc_re_establish_ue_entity_req_t rrc_rlc_ue_reestab_req;
	rrc_cell_index_t cell_index = RRC_INVALID_CELL_INDEX;
	U32 count = 0;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	p_llim_ue_suspend_req = (rrc_uecc_llim_suspend_ue_entity_req_t *)p_msg ;

	memset_wrapper (&suspend_req, RRC_NULL, sizeof(rrc_pdcp_suspend_ue_entity_req_t));

	suspend_req.ue_index = p_llim_ue_suspend_req->ue_index; 

	p_ue_ctx->curr_op_param.p_suspend_ue_req = (rrc_uemh_suspend_ue_op_param_t*)
		rrc_mem_get(sizeof(rrc_uemh_suspend_ue_op_param_t));

	if (PNULL == p_ue_ctx->curr_op_param.p_suspend_ue_req) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_suspend_ue_req is NULL;unused variable p_api=%p"
                ,p_api);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (PNULL != p_ue_ctx->curr_op_param.p_reset_ue)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_reset_ue);
		p_ue_ctx->curr_op_param.p_reset_ue = PNULL;
	}

	memset_wrapper(p_ue_ctx->curr_op_param.p_suspend_ue_req,0,
			sizeof(rrc_uemh_suspend_ue_op_param_t));
	p_param_ue_suspend_req =  
		&p_ue_ctx->curr_op_param.p_suspend_ue_req->uecc_suspend_ue;

	*p_param_ue_suspend_req = * p_llim_ue_suspend_req ; 

	p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer = PNULL;
	guard_timer_data.auto_delete = RRC_TRUE;
	guard_timer_data.target_submodule= LLIM_SUBMODULE_UEMH;
	guard_timer_data.ue_index= suspend_req.ue_index ;
	guard_timer_data.uemh_event= UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY;
	guard_timer_data.cell_index = p_llim_ue_suspend_req->cell_index;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
			"Inside the handler for the UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ");
	p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer =
		rrc_start_timer(p_rrc_llim_gl_ctx->suspend_ue_duration,
				&guard_timer_data, sizeof(guard_timer_data), RRC_FALSE); 

	if ( p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer != RRC_NULL)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF,
				"Start timer [UE_ENTITY_SUSPEND_TIMER] %u ms.",
				p_rrc_llim_gl_ctx->suspend_ue_duration);
	}
	if (RRC_SUCCESS != rrc_pdcp_il_send_rrc_pdcp_suspend_ue_entity_req(&suspend_req,
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,p_param_ue_suspend_req->cell_index),
				p_param_ue_suspend_req->transaction_id,
				p_param_ue_suspend_req->cell_index))
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "[%s] could'nt send the PDCP suspend "
				" request in state [%s]",
				RRC_UEMH_FSM_NAME,
				UEMH_FSM_STATES_NAMES[UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx)]);
		RRC_LLIM_UT_TRACE_EXIT();
		return ;
	}
	else
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "rrc_pdcp_suspend_ue_entity_req_t "
				" api sent");
	}

	/* build and send rrc_rlc_re_establish_ue_entity_req */
	if (RRC_TRUE == p_llim_ue_suspend_req->rlf_detected_flag)
	{
		/* SPR_6301_FIX */
		if ( 0 < p_llim_ue_suspend_req->lc_id_list.lc_count)
		{
			/* Cell Index UT fix start*/
			cell_index = p_llim_ue_suspend_req->cell_index;
			/* Cell Index UT fix end*/
			if (RRC_INVALID_CELL_INDEX == cell_index)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Cell Index");
				RRC_LLIM_UT_TRACE_EXIT();
				return;
			}
			memset_wrapper (&rrc_rlc_ue_reestab_req, 0, sizeof(rrc_rlc_re_establish_ue_entity_req_t));

			rrc_rlc_ue_reestab_req.ue_index = p_llim_ue_suspend_req->ue_index; 

			rrc_rlc_ue_reestab_req.num_entity_lc_id = 
				p_llim_ue_suspend_req->lc_id_list.lc_count;
			for (count = 0; count < rrc_rlc_ue_reestab_req.num_entity_lc_id; count++)
			{
				rrc_rlc_ue_reestab_req.entity_lcids[count].bitmask = 0;
				rrc_rlc_ue_reestab_req.entity_lcids[count].lc_id = 
					p_llim_ue_suspend_req->lc_id_list.lc_id_state[count].lc_id;
				if( RLC_FREEZE == p_llim_ue_suspend_req->lc_id_list.lc_id_state[count].state)
				{
					rrc_rlc_ue_reestab_req.entity_lcids[count].bitmask |=
						RRC_RLC_LC_STATE_PRESENT;
					rrc_rlc_ue_reestab_req.entity_lcids[count].lc_state.state = 
						p_llim_ue_suspend_req->lc_id_list.lc_id_state[count].state;
				}
			}

			if (RRC_SUCCESS != rrc_rlc_il_send_rrc_rlc_re_establish_ue_entity_req(
						&rrc_rlc_ue_reestab_req,
						RRC_LLIM_MODULE_ID,
							RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,cell_index),
						p_param_ue_suspend_req->transaction_id,
						cell_index))
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "[%s] could'nt send the RLC "
						"  Re-establishment UE Entity request in state [%s]",
						RRC_UEMH_FSM_NAME,
						UEMH_FSM_STATES_NAMES[UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx)]);
				RRC_LLIM_UT_TRACE_EXIT();
				return ;
			}
			else
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "RLC Re-establishment Sent successfully ");
			}
		}
		else
		{
			p_ue_ctx->curr_op_param.p_suspend_ue_req->pdcp_or_rlc_cnf_recvd = RRC_TRUE;
		}
		/* SPR_6301_FIX */
	}

	UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_PDCP_SUSPEND_UE_ENTITY_CNF);
	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_for_pdcp_suspend_state_suspend_ue_entity_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *   Description:    This function process the message UEMH_EVENT_UECC_SUSPEND_
 *        _UE_ENTITY_CNF and changes the state.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void uemh_fsm_w_for_pdcp_suspend_state_suspend_ue_entity_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{   
	rrc_uecc_llim_suspend_ue_entity_resp_t rrc_uecc_llim_suspend_ue_entity_res;

	rrc_pdcp_suspend_ue_entity_cnf_t*
		p_rrc_pdcp_suspend_ue_entity_cnf = (rrc_pdcp_suspend_ue_entity_cnf_t *)
		p_msg ;

	rrc_uecc_llim_suspend_ue_entity_req_t* p_param_ue_suspend_req = PNULL;
	rrc_cell_index_t cell_index = RRC_INVALID_CELL_INDEX;
    /* SPR 13747 Fix Start */
    rrc_mac_reset_ue_entity_req_t  rrc_mac_ue_reset_req ; 
    /* SPR 13747 Fix Stop */
	RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "Inside the handler for  "
			"UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF");


	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL == p_ue_ctx->curr_op_param.p_suspend_ue_req) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_suspend_ue_req is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	p_param_ue_suspend_req =
		&p_ue_ctx->curr_op_param.p_suspend_ue_req->uecc_suspend_ue;

	/* Precondition - should be the same transaction */
	if (rrc_get_transaction_id(p_api) !=
			p_param_ue_suspend_req->transaction_id)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
				"transaction_id - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	if (RRC_SUCCESS == p_rrc_pdcp_suspend_ue_entity_cnf->response_code)
	{
        /* SPR 13747 Fix Start */
        /* Send RRC_MAC_RESET_UE_ENTITY_REQ if radio link failure had been
         * detected by MAC*/
        if (RRC_TRUE == p_param_ue_suspend_req->rlf_detected_flag)
        {
            /* checking if we have received rlc_reestablishment_ue_entity_cnf */
            if (RRC_TRUE == p_ue_ctx->curr_op_param.p_suspend_ue_req->pdcp_or_rlc_cnf_recvd)
            {
		/* CSR 00058385 Fix Start */
		rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api,
				&cell_index);

		if (RRC_INVALID_CELL_INDEX == cell_index)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Cell Index");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}
		/* CSR 00058385 Fix Stop */
                memset_wrapper (&rrc_mac_ue_reset_req, 0, sizeof(rrc_mac_reset_ue_entity_req_t));

                rrc_mac_ue_reset_req.ue_index = p_ue_ctx->ue_index ; 
                if (RRC_SUCCESS != rrc_mac_il_send_rrc_mac_reset_ue_entity_req(
                            &rrc_mac_ue_reset_req, 
                            RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,cell_index),
				p_param_ue_suspend_req->transaction_id ,
                            cell_index))

                {

                    RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "[%s] could'nt send the MAC "
                            "  RESET request in state [%s]",
                            RRC_UEMH_FSM_NAME,
                            UEMH_FSM_STATES_NAMES[UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx)]);
                    RRC_LLIM_UT_TRACE_EXIT();
                    return ;
                }
                else
                {
                    RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "MAC RESET Sent successfully ");
                    UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_MAC_RESET_UE_ENTITY_CNF);   
                }
                p_ue_ctx->curr_op_param.p_suspend_ue_req->pdcp_or_rlc_cnf_recvd = RRC_FALSE;
            }
            else
            {
                p_ue_ctx->curr_op_param.p_suspend_ue_req->pdcp_or_rlc_cnf_recvd = RRC_TRUE;
            }
        }
        /* if Radio link failure was not detected prior */
        else
	{
		/* SPR 13747 Fix Stop */
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[UE_ENTITY_SUSPEND_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer);
			p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer = PNULL;
		}
		/* SPR_18953 start */ 
		rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api,
				&cell_index);
		/* SPR_18953 stop */ 
		rrc_uecc_llim_suspend_ue_entity_res.cell_index = cell_index; 
		rrc_uecc_llim_suspend_ue_entity_res.transaction_id =
			p_param_ue_suspend_req->transaction_id ;
		rrc_uecc_llim_suspend_ue_entity_res.ue_index =
			p_ue_ctx->ue_index ;
		rrc_uecc_llim_suspend_ue_entity_res.response_code =
			p_rrc_pdcp_suspend_ue_entity_cnf->response_code ;

		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, 
				"RRC_PDCP_SUSPEND_UE_ENTITY_CNF - Success");

		if (RRC_SUCCESS == rrc_llim_send_internal_msg(
					RRC_GET_UECC_MODULE_ID(p_rrc_pdcp_suspend_ue_entity_cnf->ue_index),
					UECC_LLIM_SUSPEND_UE_ENTITY_RESP,
					sizeof(rrc_uecc_llim_suspend_ue_entity_resp_t),
					&rrc_uecc_llim_suspend_ue_entity_res))

			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);  
            /* SPR 13747 Fix Start */
        }/* SPR 13747 Fix Stop */	
	}
	else
	{
		/* 1. Stop guard timer */
		if (PNULL != p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
					"[UE_ENTITY_SUSPEND_TIMER]");
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer);
			p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer = PNULL;
		} 
		rrc_uecc_llim_suspend_ue_entity_res.cell_index = cell_index; 
		rrc_uecc_llim_suspend_ue_entity_res.transaction_id =
			p_param_ue_suspend_req->transaction_id ;
		rrc_uecc_llim_suspend_ue_entity_res.ue_index =
			p_ue_ctx->ue_index ;
		rrc_uecc_llim_suspend_ue_entity_res.response_code =
			p_rrc_pdcp_suspend_ue_entity_cnf->response_code ;

		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "p_rrc_pdcp_suspend_ue_entity_cnf " 
				"returned failure ");


		if (RRC_SUCCESS == rrc_llim_send_internal_msg(
					RRC_GET_UECC_MODULE_ID(p_rrc_pdcp_suspend_ue_entity_cnf->ue_index),
					UECC_LLIM_SUSPEND_UE_ENTITY_RESP,
					sizeof(rrc_uecc_llim_suspend_ue_entity_resp_t),
					&rrc_uecc_llim_suspend_ue_entity_res))

			UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);  
		rrc_mem_free (p_ue_ctx->curr_op_param.p_suspend_ue_req);
		p_ue_ctx->curr_op_param.p_suspend_ue_req = PNULL;
	}
	RRC_LLIM_UT_TRACE_EXIT();

}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_mac_reset_ue_entity_cnf
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *   Description:    This function process the message UEMH_EVENT_MAC_RESET_
 *                    UE_ENTITY_CNF
 *        
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void uemh_fsm_w_for_mac_reset_ue_entity_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_mac_reset_ue_entity_cnf_t* p_rrc_mac_ue_reset_cnf = PNULL;

	rrc_uecc_llim_suspend_ue_entity_req_t* p_param_ue_suspend_req = PNULL;

	rrc_uemh_reestablish_ue_op_param_t *p_reestablish_ue_param = PNULL;

	rrc_uecc_llim_suspend_ue_entity_resp_t rrc_uecc_llim_suspend_ue_entity_cnf;
	rrc_uecc_llim_reset_ue_entity_cnf_t    rrc_uecc_llim_reset_ue_entity_cnf;
	rrc_cell_index_t                  cell_index = RRC_INVALID_CELL_INDEX;


	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL != p_ue_ctx)
	{
		rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &cell_index);

		if ( RRC_INVALID_CELL_INDEX == cell_index )
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid_Cell_Index");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}

		if (PNULL != p_ue_ctx->curr_op_param.p_reset_ue)
		{
			p_rrc_mac_ue_reset_cnf = 
				(rrc_mac_reset_ue_entity_cnf_t*)p_msg;
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Inside the handler for "
					"[UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF]");

			rrc_uecc_llim_reset_ue_entity_cnf.transaction_id = 
				p_ue_ctx->curr_op_param.p_reset_ue->transaction_id;        
			rrc_uecc_llim_reset_ue_entity_cnf.cell_index = cell_index;        
			rrc_uecc_llim_reset_ue_entity_cnf.ue_index = 
				p_rrc_mac_ue_reset_cnf->ue_index ;
			rrc_uecc_llim_reset_ue_entity_cnf.response =
				p_rrc_mac_ue_reset_cnf->response ; 

			if (RRC_SUCCESS == rrc_llim_send_internal_msg(
						RRC_GET_UECC_MODULE_ID(
							rrc_uecc_llim_reset_ue_entity_cnf.ue_index),
						(U16)UECC_LLIM_RESET_UE_ENTITY_CNF,
						(U16)sizeof(rrc_uecc_llim_reset_ue_entity_cnf_t),
						&rrc_uecc_llim_reset_ue_entity_cnf))
			{
				UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			}
			if (PNULL != p_ue_ctx->curr_op_param.p_reset_ue)
			{
				rrc_mem_free (p_ue_ctx->curr_op_param.p_reset_ue);
				p_ue_ctx->curr_op_param.p_reset_ue = PNULL;
			}

		}
		else
		{
			if (PNULL == p_ue_ctx->curr_op_param.p_suspend_ue_req)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
						"p_ue_ctx->curr_op_param.p_suspend_ue_req is NULL"
						"- ignored");
				RRC_LLIM_UT_TRACE_EXIT();
				return;
			}
			p_param_ue_suspend_req =
				&p_ue_ctx->curr_op_param.p_suspend_ue_req->uecc_suspend_ue ;
			if ( PNULL == p_param_ue_suspend_req )
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
						"p_param_ue_suspend_req is NULL"
						"- ignored");
				RRC_LLIM_UT_TRACE_EXIT();
				return;
			}

			p_rrc_mac_ue_reset_cnf = 
				(rrc_mac_reset_ue_entity_cnf_t*)p_msg;
			RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Inside the handler for "
					"[UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF]");

			/* Check for radio link failure detection */
			if (p_param_ue_suspend_req->rlf_detected_flag)
			{
				if (rrc_get_transaction_id(p_api) != p_param_ue_suspend_req->transaction_id)
				{
					RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "\
							"transaction_id - ignored");
					RRC_LLIM_UT_TRACE_EXIT();
					return;
				}

				/* 1. Stop guard timer */
				if (PNULL != p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer)
				{
					RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
							"[UE_ENTITY_SUSPEND_TIMER]");
					rrc_stop_timer(p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer);
					p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer = PNULL;
				}

				rrc_uecc_llim_suspend_ue_entity_cnf.transaction_id = 
					p_param_ue_suspend_req->transaction_id;        
				rrc_uecc_llim_suspend_ue_entity_cnf.cell_index = cell_index;
				rrc_uecc_llim_suspend_ue_entity_cnf.ue_index = 
					p_rrc_mac_ue_reset_cnf->ue_index ;
				rrc_uecc_llim_suspend_ue_entity_cnf.response_code =
					p_rrc_mac_ue_reset_cnf->response ; 

				if (RRC_SUCCESS == rrc_llim_send_internal_msg(
							RRC_GET_UECC_MODULE_ID(rrc_uecc_llim_suspend_ue_entity_cnf.ue_index),
							(U16)UECC_LLIM_SUSPEND_UE_ENTITY_RESP,
							(U16)sizeof(rrc_uecc_llim_suspend_ue_entity_resp_t),
							&rrc_uecc_llim_suspend_ue_entity_cnf))

					UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
			}
			/* MAC RESET sent while reestablishment is ongoing */    
			else
			{
				if (PNULL == p_ue_ctx->curr_op_param.p_reestablish_ue)
				{
					RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
							"p_ue_ctx->curr_op_param.p_reestablish_ue is NULL"
							"- ignored");
					RRC_LLIM_UT_TRACE_EXIT();
					return;
				}
				p_reestablish_ue_param =
					p_ue_ctx->curr_op_param.p_reestablish_ue;    
				if (rrc_get_transaction_id(p_api) != 
						p_reestablish_ue_param->uecc_reestablish_ue.
						transaction_id)
				{
					RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "\
							"transaction_id - ignored");
					RRC_LLIM_UT_TRACE_EXIT();
					return;
				}
				/* if MAC RESET response is successful then send 
				 * rrc_pdcp_re_establish_ue_entity_req for SRB1 to PDCP */
				if (RRC_SUCCESS == p_rrc_mac_ue_reset_cnf->response)
				{
					/* Build and Send PDCP_RE_ESTABLISH_UE_ENTITY_REQ to PDCP */
					if (RRC_SUCCESS ==
							build_and_send_pdcp_re_establish_ue_entity_req(p_ue_ctx))
					{
						UEMH_FSM_SET_STATE(p_ue_ctx,
								UEMH_STATE_W_FOR_PDCP_REESTABLISH_UE_ENTITY_CNF);
					}
				}
				else 
				{

				}
			}
		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME:  uemh_fsm_suspend_ue_entity_timer_expiry
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *   Description:    This function process the message 
 *                   UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY.
 *
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void uemh_fsm_suspend_ue_entity_timer_expiry
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uemh_suspend_ue_op_param_t *p_suspend_ue_param = PNULL;
	rrc_uecc_llim_suspend_ue_entity_resp_t
		uecc_llim_suspend_ue_entity_resp;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	if (PNULL == p_ue_ctx->curr_op_param.p_suspend_ue_req) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_suspend_ue_req is NULL"
				"- ignored; unused variable p_api=%p, p_msg=%p p_rrc_llim_gl_ctx=%p"
                ,p_api,p_msg,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	memset_wrapper(&uecc_llim_suspend_ue_entity_resp, RRC_NULL, 
			sizeof(rrc_uecc_llim_suspend_ue_entity_resp_t));

	p_suspend_ue_param = p_ue_ctx->curr_op_param.p_suspend_ue_req;
	uecc_llim_suspend_ue_entity_resp.transaction_id =
		p_suspend_ue_param->uecc_suspend_ue.transaction_id;

	uecc_llim_suspend_ue_entity_resp.ue_index =
		p_ue_ctx->ue_index ;

	uecc_llim_suspend_ue_entity_resp.response_code =
		RRC_FAILURE ;

	RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "rrc_pdcp_suspend_ue_entity_cnf " 
			"returned failure ");

	if (RRC_SUCCESS == rrc_llim_send_internal_msg(
				RRC_GET_UECC_MODULE_ID(uecc_llim_suspend_ue_entity_resp.ue_index),
				UECC_LLIM_SUSPEND_UE_ENTITY_RESP,
				sizeof(rrc_uecc_llim_suspend_ue_entity_resp_t),
				&uecc_llim_suspend_ue_entity_resp))
	{
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);
	}
	rrc_mem_free (p_ue_ctx->curr_op_param.p_suspend_ue_req);
	p_ue_ctx->curr_op_param.p_suspend_ue_req = PNULL;
	RRC_LLIM_UT_TRACE_EXIT();
}


/* UEMH FSM handlers mapping */
static uemh_fsm_act_func_ptr uemh_fsm_tbl[N_UEMH_STATES][N_UEMH_EVENTS] =
{
	/* UEMH_STATE_IDLE */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_idle_state_create_ue_req,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* JANEN_START */
		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,        

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */ 
		uemh_fsm_idle_uecc_ho_rach_res_req,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_idle_mac_ho_rach_res_resp,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,


		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* "UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF" */
		uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,

	},

	/* UEMH_STATE_W_FOR_PHY_CREATE_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_w_phy_create_ue_state_phy_cnf,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_create_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_phy_create_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_create_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,


		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_W_FOR_MAC_CREATE_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_w_mac_create_ue_state_mac_cnf,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_create_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_create_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_create_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_W_FOR_RLC_CREATE_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_w_rlc_create_ue_state_rlc_cnf,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_create_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_create_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_create_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        

        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event,
         
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_W_FOR_PDCP_CREATE_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_w_pdcp_create_ue_state_pdcp_cnf,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_create_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_create_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_create_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_W_FOR_S1U_CREATE_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_w_s1u_create_ue_state_s1u_cnf,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_create_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_create_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_create_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_UE_ENTITY_IN_SERVICE */
    {
        /* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
        uemh_fsm_ue_in_service_state_delete_ue_req,
        /* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_ADD_LC_REQ */
        uemh_fsm_ue_in_service_state_add_lc_req,
        /* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
        /* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
        uemh_fsm_w_xxx_reconfig_ue_state_timer_expired,

        /* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
        uemh_fsm_ue_in_service_state_cfg_security_req,
        /* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_OAMH_CLEANUP_REQ */
        uemh_fsm_ue_in_service_state_cleanup_req,

        /* UEMH_EVENT_S1U_ERROR_IND */
        uemh_fsm_ue_in_service_s1u_error_ind,

        /* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
        uemh_fsm_ue_in_service_state_modify_lc_req,
        /* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
        uemh_fsm_ue_in_service_modify_rollback_req,
        /*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
        uemh_fsm_ue_in_service_add_lc_rollback_req,
        /* UEMH_EVENT_UECC_DELETE_LC_REQ */
        uemh_fsm_ue_in_service_state_delete_lc_req,
        /* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
        uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
        uemh_fsm_ue_in_service_state_suspend_ue_entity_req,
        /* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
        uemh_fsm_w_for_mac_reset_ue_entity_cnf,


        /* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
        uemh_fsm_ue_in_service_state_sn_hfn_status_req,

        /* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
        uemh_fsm_ue_in_service_state_sn_hfn_status_ind,

        /* UEMH_EVENT_UECC_MAC_I_REQ */
        uemh_fsm_ue_in_service_state_mac_i_req,

        /* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
        uemh_fsm_ue_in_service_state_data_buffer_stop_ind,

        /* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
        /*uemh_fsm_ue_in_service_state_mac_ue_inactive_time_req,*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */ 
        uemh_fsm_idle_uecc_ho_rach_res_req,

        /* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
        uemh_fsm_idle_mac_ho_rach_res_resp,

        /* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
        uemh_fsm_ue_in_service_state_re_est_req,

        /* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
        uemh_fsm_ue_in_service_state_s1u_reconfig_ue_entity_req,

        /* UEMH_EVENT_PDCP_MAC_I_RESP */
        uemh_fsm_ue_in_service_state_pdcp_mac_i_resp,

        /* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP */
        /*uemh_fsm_ue_in_service_state_mac_ue_inactive_time_resp,*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
        uemh_fsm_ue_in_service_state_pdcp_sn_hfn_status_resp,

        /* UEMH_EVENT_S1U_END_MARKER_IND */
        /* SPR 16087 Start */
        uemh_fsm_ue_s1u_end_marker_ind,
        /* SPR 16087 Stop */

        /* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
        uemh_fsm_ue_in_service_state_reestablishment_ue_entity_req,

        /* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */

        uemh_fsm_w_rlc_reestablish_ue_state_entity_in_service_cnf,


        /*BUG:604 Fixes start*/
        /*Bug 357 Fix Start*/
        /* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /*BUG:604 Fixes stop*/

        /* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
        uemh_fsm_ue_in_service_state_reconfig_security_ue_entity_req,

        /* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
        uemh_fsm_ue_in_service_state_resume_ue_entity_req,

        /* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
        uemh_fsm_ue_in_service_state_change_crnti_req,

        /* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
        uemh_fsm_ue_in_service_state_reset_ue_entity_req,

        /* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
        uemh_fsm_ue_in_service_state_reestb_ue_entity_comp_ind,

        /*SPR:6462 start */ 
        /* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
        uemh_fsm_ue_in_service_state_reestb_ue_entity_comp_cnf,
        /*SPR:6462 stop */ 
        /*BUG 604 changes start*/
        /* UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ */
        uemh_fsm_ue_in_service_state_s1u_data_fwd_req,

        /* UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF */
        uemh_fsm_ue_in_service_state_s1u_data_fwd_cnf,

        /* UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ */
        uemh_fsm_ue_in_service_state_s1u_path_switch_req,

        /* UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF */
        uemh_fsm_ue_in_service_state_s1u_path_switch_cnf,

        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
        uemh_fsm_ignored_event, 
        /*SPR_19066_START*/
        /* UEMH_EVENT_PDCP_INACTIVE_UES_IND */
        /*uemh_fsm_ue_in_service_state_pdcp_inactive_ues_ind*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_REQ */
        uemh_fsm_ue_in_service_state_pdcp_ho_prep_info_req,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ue_in_service_state_pdcp_ho_prep_info_resp,


        /*SPR_19066_END*/
        /*BUG 604 changes stop*/
    },

	/* UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_del_all_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_w_del_all_ue_state_phy_cnf,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_w_del_all_ue_state_mac_cnf,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_w_del_all_ue_state_rlc_cnf,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_w_del_all_ue_state_pdcp_cnf,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_w_del_all_ue_state_s1u_cnf,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_w_del_all_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_del_all_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
 
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
      
    },

	/* UEMH_STATE_W_FOR_CONFIGURE_SECURITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_ue_cfg_security_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ue_cfg_security_state_pdcp_cnf,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ue_cfg_security_state_timer_expired,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_ue_cfg_security_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,


		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
         
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,

	},

	/* UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_mac_reconfig_ue_state_mac_cnf,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_reconfig_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_xxx_process_modify_lc_rollback_req,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_xxx_process_add_lc_rollback_req,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ 
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ 
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ 
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*33 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,


		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
         
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
    
	},

	/* UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_rlc_reconfig_ue_state_rlc_cnf,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_reconfig_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_xxx_process_modify_lc_rollback_req,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_xxx_process_add_lc_rollback_req,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
     
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,

	},

	/* UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_pdcp_reconfig_ue_state_pdcp_cnf,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_reconfig_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_xxx_process_modify_lc_rollback_req,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_xxx_process_add_lc_rollback_req,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
     
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_s1u_reconfig_ue_state_s1u_cnf,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_reconfig_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_xxx_process_modify_lc_rollback_req,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_xxx_process_add_lc_rollback_req,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
     
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
 
	},

	/* UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_phy_reconfig_ue_state_phy_cnf,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_reconfig_ue_state_timer_expired,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		/* CA start */
		uemh_fsm_xxx_process_modify_lc_rollback_req,
		/* Ca end */

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
         
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
  
	},

	/* UEMH_STATE_W_FOR_DEL_ALL_LC_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_del_all_lc_state_mac_cnf,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_del_all_lc_state_rlc_cnf,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_del_all_lc_state_pdcp_cnf,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_del_all_lc_state_s1u_cnf,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_w_del_all_lc_state_timer_expired,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},
	/* UEMH_STATE_LLIM_LL_MODIFY_LC_IN_SYNC_ONGOING */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_modify_lc_in_sync_going_state_mac_cnf,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_modify_lc_in_sync_going_state_rlc_cnf,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_modify_lc_in_sync_going_state_pdcp_cnf,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_modify_lc_in_sync_going_state_s1u_cnf,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		/*CA start*/
		uemh_fsm_w_modify_lc_in_sync_going_state_phy_cnf,
		/*Ca end */
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_w_modify_lc_in_sync_going_state_timer_expired,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_xxx_process_modify_lc_rollback_req,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_LLIM_LL_ADD_LC_IN_SYNC_ONGOING */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_add_lc_in_sync_going_state_mac_cnf,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_add_lc_in_sync_going_state_rlc_cnf,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_add_lc_in_sync_going_state_pdcp_cnf,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_w_add_lc_in_sync_going_state_s1u_cnf,
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_w_add_lc_in_sync_going_state_timer_expired,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_reconfig_ue_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_xxx_process_add_lc_rollback_req,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,

	},

	/* UEMH_STATE_W_FOR_PDCP_SUSPEND_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_xxx_suspend_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_suspend_ue_state_cleanup_req,
		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event ,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */
		uemh_fsm_suspend_ue_entity_timer_expiry,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF*/
		uemh_fsm_w_for_pdcp_suspend_state_suspend_ue_entity_cnf,

		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,     

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_w_for_rlc_reestablish_ue_entity_cnf,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
      
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},
	/* UEMH_STATE_W_FOR_MAC_RESET_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_xxx_suspend_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,  
		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_w_xxx_suspend_ue_state_cleanup_req,
		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event ,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_suspend_ue_entity_timer_expiry,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_w_for_mac_reset_ue_entity_cnf,


		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},


	/* UEMH_STATE_W_FOR_RLC_REESTABLISH_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_xxx_reestablish_ue_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,  
		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_ue_xxx_reestablish_state_cleanup_req,
		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event ,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ 
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ 
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ 
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_w_rlc_reestablish_ue_state_rlc_cnf,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_reestablish_ue_state_timer_expired,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_W_FOR_PDCP_REESTABLISH_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_xxx_reestablish_ue_state_delete_ue_req,

		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,  
		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_ue_xxx_reestablish_state_cleanup_req,
		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event ,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_w_pdcp_reestablish_ue_state_pdcp_cnf,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_w_xxx_reestablish_ue_state_timer_expired,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	}, 
	/* UEMH_STATE_W_FOR_RECONFIG_SECURITY_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_ue_recfg_security_state_delete_ue_req,
		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ue_recfg_security_state_pdcp_cnf,

		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_ue_recfg_security_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,


		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ue_recfg_security_state_timer_expired,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
         
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},
	/* UEMH_STATE_W_FOR_PDCP_RESUME_UE_ENTITY_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_ue_resume_state_delete_ue_req,

		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_ue_resume_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ 
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ue_resume_state_pdcp_cnf,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ue_resume_state_timer_expired,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
         
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_W_FOR_PHY_CHANGE_CRNTI_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_xxx_change_crnti_state_delete_ue_req,

		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_xxx_change_crnti_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ 
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_w_phy_change_crnti_state_phy_cnf,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_w_xxx_change_crnti_state_timer_expired,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
          
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_W_FOR_MAC_CHANGE_CRNTI_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_xxx_change_crnti_state_delete_ue_req,

		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_xxx_change_crnti_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ 
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_w_mac_change_crnti_state_mac_cnf,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_w_xxx_change_crnti_state_timer_expired,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
       
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_W_FOR_RLC_CHANGE_CRNTI_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_xxx_change_crnti_state_delete_ue_req,

		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_xxx_change_crnti_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ 
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_w_rlc_change_crnti_state_rlc_cnf,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_w_xxx_change_crnti_state_timer_expired,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
	},

	/* UEMH_STATE_W_FOR_PDCP_CHANGE_CRNTI_CNF */
	{
		/* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
		uemh_fsm_xxx_change_crnti_state_delete_ue_req,

		/* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_ADD_LC_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        /*SPR_17976_START*/
        uemh_fsm_s1u_reconfig_ue_entity_cnf,
        /*SPR_17976_END*/
		/* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_OAMH_CLEANUP_REQ */
		uemh_fsm_xxx_change_crnti_state_cleanup_req,

		/* UEMH_EVENT_S1U_ERROR_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
		uemh_fsm_ignored_event,

		/*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DELETE_LC_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */
		uemh_fsm_ignored_event,
		/*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ 
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,
		/* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_MAC_I_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
		uemh_fsm_ignored_event, 

		/* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_MAC_I_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_S1U_END_MARKER_IND */
		/* SPR 16087 Start */
		uemh_fsm_ue_s1u_end_marker_ind,
		/* SPR 16087 Stop */

		/* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
		uemh_fsm_w_pdcp_change_crnti_state_pdcp_cnf,

		/* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
		uemh_fsm_w_xxx_change_crnti_state_timer_expired,

		/* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
		uemh_fsm_ignored_event,

		/* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
		uemh_fsm_ignored_event,
         
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
   /*SPR_14411_fix Start */
    },

    /* UEMH_STATE_W_FOR_PDCP_DELETE_UE_ENTITY_CNF */
    {
        /* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
        uemh_fsm_w_del_all_ue_state_pdcp_cnf,
        /* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
        uemh_fsm_w_del_all_ue_state_s1u_cnf,
        /* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
        uemh_fsm_w_del_all_ue_state_timer_expired,

        /* UEMH_EVENT_UECC_ADD_LC_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_OAMH_CLEANUP_REQ */
        uemh_fsm_w_del_all_ue_state_cleanup_req,

        /* UEMH_EVENT_S1U_ERROR_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
        uemh_fsm_ignored_event,

        /*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DELETE_LC_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
        uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MAC_I_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
        uemh_fsm_ignored_event, 

        /* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_MAC_I_RESP */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_S1U_END_MARKER_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
        uemh_fsm_ignored_event,
     
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
    },
    
    /* UEMH_STATE_W_FOR_RLC_DELETE_UE_ENTITY_CNF */
    {
        /* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
        uemh_fsm_w_del_all_ue_state_rlc_cnf,
        /* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
        uemh_fsm_w_del_all_ue_state_timer_expired,

        /* UEMH_EVENT_UECC_ADD_LC_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_OAMH_CLEANUP_REQ */
        uemh_fsm_w_del_all_ue_state_cleanup_req,

        /* UEMH_EVENT_S1U_ERROR_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
        uemh_fsm_ignored_event,

        /*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DELETE_LC_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
        uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MAC_I_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
        uemh_fsm_ignored_event, 

        /* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_MAC_I_RESP */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_S1U_END_MARKER_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
        uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
    },
    
    /* UEMH_STATE_W_FOR_MAC_DELETE_UE_ENTITY_CNF */
    {
        /* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
        uemh_fsm_w_del_all_ue_state_mac_cnf,
        /* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
        uemh_fsm_w_del_all_ue_state_timer_expired,

        /* UEMH_EVENT_UECC_ADD_LC_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_OAMH_CLEANUP_REQ */
        uemh_fsm_w_del_all_ue_state_cleanup_req,

        /* UEMH_EVENT_S1U_ERROR_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
        uemh_fsm_ignored_event,

        /*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DELETE_LC_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
        uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MAC_I_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
        uemh_fsm_ignored_event, 

        /* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_MAC_I_RESP */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_S1U_END_MARKER_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
        uemh_fsm_ignored_event,
         
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
    },
   
    
    /* UEMH_STATE_W_FOR_PHY_DELETE_UE_ENTITY_CNF */
    {
        /* UEMH_EVENT_UECC_CREATE_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_CREATE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_CREATE_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_DELETE_UE_ENTITY_CNF */
        uemh_fsm_w_del_all_ue_state_phy_cnf,
        /* UEMH_EVENT_MAC_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_DELETE_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_DELETE_UE_TIMER_EXPIRED */
        uemh_fsm_w_del_all_ue_state_timer_expired,

        /* UEMH_EVENT_UECC_ADD_LC_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RLC_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_S1U_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PHY_RECONFIG_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_RECONFIG_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_CONFIGURE_SECURITY_REQ */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_SECURITY_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_OAMH_CLEANUP_REQ */
        uemh_fsm_w_del_all_ue_state_cleanup_req,

        /* UEMH_EVENT_S1U_ERROR_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MODIFY_LC_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MODIFY_LC_ROLLBACK_REQ */
        uemh_fsm_ignored_event,

        /*UEMH_EVENT_UECC_ADD_LC_ROLLBACK_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DELETE_LC_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_SUSPEND_UE_ENTITY_TIMER_EXPIRY */ /*29*/
        uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_SUSPEND_UE_ENTITY_REQ */ /*30 */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_PDCP_SUSPEND_UE_ENTITY_CNF */ /*31 */
        uemh_fsm_ignored_event,
        /* UEMH_EVENT_MAC_RESET_UE_ENTITY_CNF */ /*32 */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_SN_HFN_STATUS_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_SN_HFN_STATUS_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_MAC_I_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_DATA_BUFFER_STOP_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_UE_INACTIVE_TIME_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP */ 
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_HO_REL_RACH_RESOURCE_IND */
        uemh_fsm_ignored_event, 

        /* UEMH_EVENT_UECC_RE_ESTABLISH_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_S1U_RECONFIG_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_MAC_I_RESP */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_UE_INACTIVE_TIME_RESP *//*This event has been deleted under SPR 19066*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_SN_HFN_STATUS_RESP */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_S1U_END_MARKER_IND */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_REESTABLISHMENT_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_REESTABLISH_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RECONFIG_SECURITY_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_RESUME_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_RESUME_UE_ENTITY_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_REESTABLISH_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RECONFIG_SECURITY_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_RESUME_UE_TIMER_EXPIRED */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_UECC_CHANGE_CRNTI_REQ */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PHY_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_MAC_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_RLC_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_CHANGE_CRNTI_CNF */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_CHANGE_CRNTI_TIMER_EXPIRED */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND */
        uemh_fsm_ignored_event,
        
        /* UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF */
        uemh_fsm_ignored_event,
        
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_REQ*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF*/
         uemh_fsm_ignored_event,
        /*UEMH_EVENT_UECC_PDCP_RE_ESTABLISH_UE_ENTITY_REQ*/
         uemh_fsm_ignored_event,
         /*UEMH_EVENT_PDCP_INACTIVE_UES_IND*/
          uemh_fsm_ignored_event, 
        /*UEMH_EVENT_PDCP_HO_PREP_INFO_REQ*/
        uemh_fsm_ignored_event,

        /* UEMH_EVENT_PDCP_HO_PREP_INFO_RESP */
        uemh_fsm_ignored_event,
    }
    /*SPR_14411_fix Stop */
                
	

};

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_process_event
 *
 *   INPUTS       : uemh_fsm_event_et   event
 *                  void                *param1
 *                  void                *param2
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   DESCRIPTION  :
 *       This function call appropriate handler for incoming event in
 *        current state.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void uemh_fsm_process_event
(
 uemh_fsm_event_et   event,              /* Incoming event */
 void                *param1,            /* p_api or timer_id */
 void                *param2,            /* p_msg or p_uemh_timer_buf */
 /* UE context of current operation. Here we store UEMH FSM state too */
 rrc_llim_ue_ctx_t   *p_ue_ctx,
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	uemh_fsm_state_et current_state = UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx);

	RRC_LLIM_UT_TRACE_ENTER();

	if ( (current_state < N_UEMH_STATES) && (event < N_UEMH_EVENTS) )
	{
		RRC_LLIM_UE_FSM_EVENT_TRACE(p_ue_ctx->ue_index, RRC_UEMH_FSM_NAME,
				UEMH_FSM_EVENTS_NAMES[event], UEMH_FSM_STATES_NAMES[current_state]);

		uemh_fsm_tbl[current_state][event](param1, param2, p_ue_ctx,
				p_rrc_llim_gl_ctx);

		/*SPR 19423 Fix Start*/
		/*Code Removed*/
		/*SPR 19423 Fix End*/
	}
	else
	{
		RRC_LLIM_TRACE(RRC_ERROR, "uemh_fsm_process_event: unexpected state %u"
				" or event %u", current_state, event);
		RRC_ASSERT(0);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_xxx_reestablish_ue_state_delete_ue_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   Description:    This function process the message
 *                   UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ 
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void uemh_fsm_xxx_reestablish_ue_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_delete_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL != p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer)
	{    
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer);
		p_ue_ctx->curr_op_param.p_reestablish_ue->guard_timer = PNULL;
	}     

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);
	/* 2. Set guard timer */
	/* 3. Delete on all lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
			UEMH_FSM_DEL_REQ,
			UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx),
			p_delete_ue_entity_req->ue_index,
			p_delete_ue_entity_req->transaction_id,
			p_rrc_llim_gl_ctx,
			p_delete_ue_entity_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_xxx_suspend_ue_state_delete_ue_req
 *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   Description:    This function process the message
 *   Description:    This function process the message
 *                   UEMH_EVENT_UECC_DELETE_UE_ENTITY_REQ 
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void uemh_fsm_xxx_suspend_ue_state_delete_ue_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_delete_ue_entity_req_t *p_delete_ue_entity_req =
		(rrc_uecc_llim_delete_ue_entity_req_t *)p_msg;
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_delete_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL != p_ue_ctx->curr_op_param.p_suspend_ue_req) 
	{
		if (PNULL != p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer)
		{    
			rrc_stop_timer(p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer);
			p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer = PNULL ;
		}     
	}
	else
	{
		RRC_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_suspend_ue_req is NULL - ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;

	}

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm:%p",p_api);
	/* 2. Set guard timer */
	/* 3. Delete on all lower layers */
	/* set state UEMH_STATE_W_FOR_DEL_ALL_UE_ENTITY_CNF */
	uemh_fsm_init_del_ue_op_and_del_ue( p_ue_ctx,
			UEMH_FSM_DEL_REQ,
			UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx),
			p_delete_ue_entity_req->ue_index,
			p_delete_ue_entity_req->transaction_id,
			p_rrc_llim_gl_ctx,
			p_delete_ue_entity_req->cell_index);



	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 * *   FUNCTION NAME: uemh_fsm_w_xxx_suspend_ue_state_cleanup_req
 * *
 *   INPUTS       : void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   Description:    This function process the message
 * *       This function cleanups UEMH FSM.
 * *       state any of:
 * *       UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF,
 * *       UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF,
 * *       UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF,
 * *       UEMH_STATE_W_FOR_PHY_RECONFIG_UE_ENTITY_CNF,
 * *       UEMH_STATE_W_FOR_DEL_ALL_LC_CNF,
 * *       event UEMH_EVENT_OAMH_CLEANUP_REQ
 * *
 * *   RETURNS:
 * *       None
 * *
 * ******************************************************************************/
static void uemh_fsm_w_xxx_suspend_ue_state_cleanup_req
(
 void                *p_api,
 void                *p_msg,
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);
	/*coverity fix start*/
	/*coverity fix stop*/

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILED, "Unused variable in fsm p_api:%p p_msg:%p",p_api,p_msg);

	/* 1. Stop guard timer */
	if (PNULL != p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer)
	{
		rrc_stop_timer(p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer);
		p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer = PNULL ;
	}

	/* 2. delete from UE DB and free */
	uemh_cleanup_ue_ctx(p_ue_ctx);

	rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,
			p_ue_ctx->ue_index,PNULL);

	rrc_mem_free(p_ue_ctx);
	/* + Coverity 81404 */
	//p_ue_ctx = PNULL;
	/* - Coverity 81404 */

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_create_part_srb_rlc_create_ue_entity_req
 *
 *   INPUTS       : rrc_rlc_create_ue_entity_req_t        *p_rlc_create_ue_entity_req
 *                  rrc_lc_id_t                             lc_id
 *                  rrm_srb_am_config_t                     *p_srb_am_config
 *   OUTPUTS      : None
 *   Description:    This function process the message
 *       This function continues filling create part of
 *       RLC message RLC_CREATE_UE_ENTITY_REQ
 *           based on p_srb_am_config of new SRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_create_part_srb_rlc_create_ue_entity_req
(
 /* destination */
 rrc_rlc_create_ue_entity_req_t        *p_rlc_create_ue_entity_req,
 rrc_lc_id_t                             lc_id,
 /* main source */
 rrm_srb_am_config_t                     *p_srb_am_config
 )
{
	rrc_counter_t lc = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_rlc_create_ue_entity_req);
	RRC_ASSERT(PNULL != p_srb_am_config);

	/* RRM_SRB_AM_CONFIG_EXPLISIT_PRESENT should be present */
	RRC_ASSERT(p_srb_am_config->bitmask & RRM_SRB_AM_CONFIG_EXPLICIT_PRESENT);

	lc = p_rlc_create_ue_entity_req->num_create_tx_rx_am_rlc;

	p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].lc_id = lc_id;

	p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].t_poll_retransmission
		=
		get_rlc_poll_retransmission_from_enum(p_srb_am_config->
				am_config_explicit.ul_am_rlc.t_poll_retransmit);
	p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].poll_pdu =
		get_rlc_poll_pdu_from_enum(p_srb_am_config->
				am_config_explicit.ul_am_rlc
				.poll_pdu);
	p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].poll_byte =
		get_rlc_poll_byte_from_enum(p_srb_am_config->am_config_explicit.
				ul_am_rlc.poll_byte);
	p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].max_re_tx_thrsh_ld =
		get_rlc_max_retx_threshold_from_enum(p_srb_am_config->
				am_config_explicit
				.ul_am_rlc.max_retx_threshold);

	p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].t_reordering =
		get_rlc_t_reordering_from_enum(p_srb_am_config->am_config_explicit.
				dl_am_rlc.t_reordering);
	p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].t_status_prohibit =
		get_rlc_t_status_prohibit_from_enum(
				p_srb_am_config->am_config_explicit.
				dl_am_rlc.t_status_prohibit);

	++p_rlc_create_ue_entity_req->num_create_tx_rx_am_rlc;

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_qos_info_rlc_create_ue_entity_req
 *
 *   INPUTS       : rrc_rlc_create_ue_entity_req_t        *p_rlc_create_ue_entity_req
 *                  rrc_counter_t                           drb_index
 *                  rrc_uecc_llim_create_ue_entity_req_t   *p_create_ue_param
 *   OUTPUTS      : None
 *   Description:    This function process the message
 *       This function continues filling qos part of
 *       RLC message RLC_CREATE_UE_ENTITY_REQ
 *           based on drb_config of new DRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_qos_info_rlc_create_ue_entity_req
(
 /* destination */
 rrc_rlc_create_ue_entity_req_t        *p_rlc_create_ue_entity_req,
 rrc_counter_t                           drb_index,
 /* main source */
 rrc_uecc_llim_create_ue_entity_req_t   *p_create_ue_param
 )
{
	rrc_counter_t lc_idx = RRC_NULL;
	rrc_rlc_config_t    *p_rlc_config = PNULL;
	rrc_uecc_llim_drb_config_t   *p_uecc_llim_drb_config = PNULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_rlc_create_ue_entity_req);
	RRC_ASSERT(PNULL != p_create_ue_param);

	p_rlc_config = &(p_create_ue_param->create_drb_entity_info.
			create_drb_entity[drb_index].uecc_llim_drb_config.
			drb_config.rlc_config_enb.rlc_config);
	p_uecc_llim_drb_config = &(p_create_ue_param->create_drb_entity_info.
			create_drb_entity[drb_index].uecc_llim_drb_config);

	/* Fill the ambr_info if HO triggered*/

	if (RRC_RLC_CONFIG_AM_CONFIG_PRESENT == p_rlc_config->bitmask)
	{
		lc_idx =  (rrc_counter_t)(p_rlc_create_ue_entity_req->num_create_tx_rx_am_rlc - 1);

		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & p_uecc_llim_drb_config->bitmask)
		{
			/*Fills the Qci value in create_tx_rx_am_rlc */
			p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc_idx].rrc_rlc_qci_info.qci = 
				p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the TX and RX values based on bearer type (GBR/NGBR)*/
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
						p_uecc_llim_drb_config->drb_config.bitmask)&&
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/
				p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_TX_BIT_RATE_INFO_PRESENT;

				p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
					rrc_rlc_tx_bit_rate_info.bit_rate_tx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.ul_mbr;

				p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_RX_BIT_RATE_INFO_PRESENT;

				p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
					rrc_rlc_rx_bit_rate_info.bit_rate_rx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.dl_mbr;
			}
		}
		/* Fill the QciLength info */
		if ( (p_uecc_llim_drb_config->drb_config.bitmask & 
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT) &&
				(p_uecc_llim_drb_config->drb_config.rlc_config_enb.bitmask & 
				 RRC_RLC_CONFIG_QCI_LENGTH_PRESENT) )
		{
			p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QUEUE_SIZE_INFO_PRESENT;

			p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc_idx].
				rrc_rlc_queue_size_info.rlc_queue_size = p_uecc_llim_drb_config->
				drb_config.rlc_config_enb.qci_length;
		}
	}/*end of AM_CONFIG*/
	else if (RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT == p_rlc_config->
			bitmask)
	{
		lc_idx =  (rrc_counter_t)(p_rlc_create_ue_entity_req->num_create_tx_rx_um_rlc - 1);

		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & p_uecc_llim_drb_config->bitmask)
		{
			/*Fills the Qci value in create_tx_rx_um_rlc */
			p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc_idx].rrc_rlc_qci_info.
				qci = p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the TX and RX values based on bearer type (GBR/NGBR)*/
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
						p_uecc_llim_drb_config->drb_config.bitmask)&&
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/
				p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_TX_BIT_RATE_INFO_PRESENT;
				p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
					rrc_rlc_tx_bit_rate_info.bit_rate_tx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.ul_mbr;

				p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_RX_BIT_RATE_INFO_PRESENT;
				p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
					rrc_rlc_rx_bit_rate_info.bit_rate_rx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.dl_mbr;
			}
		}
		/* Fill the QciLength info */
		if ( (p_uecc_llim_drb_config->drb_config.bitmask & 
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT) &&
				(p_uecc_llim_drb_config->drb_config.rlc_config_enb.bitmask & 
				 RRC_RLC_CONFIG_QCI_LENGTH_PRESENT) )
		{
			p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QUEUE_SIZE_INFO_PRESENT;

			p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc_idx].
				rrc_rlc_queue_size_info.rlc_queue_size = p_uecc_llim_drb_config->
				drb_config.rlc_config_enb.qci_length;
		}
	}/* end of UM Bidirectional */
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT ==
			p_rlc_config->bitmask)
	{
		lc_idx =  (rrc_counter_t)(p_rlc_create_ue_entity_req->num_create_tx_um_rlc - 1);
		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & p_uecc_llim_drb_config->bitmask)
		{
			/*Fills the Qci value in create_tx_um_rlc */
			p_rlc_create_ue_entity_req->create_tx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_create_ue_entity_req->create_tx_um_rlc[lc_idx].rrc_rlc_qci_info.qci = 
				p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the TX values based on bearer type (GBR/NGBR)*/
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
						p_uecc_llim_drb_config->drb_config.bitmask)&&
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/
				p_rlc_create_ue_entity_req->create_tx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_TX_BIT_RATE_INFO_PRESENT;
				p_rlc_create_ue_entity_req->create_tx_um_rlc[lc_idx].
					rrc_rlc_tx_bit_rate_info.bit_rate_tx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.ul_mbr;
			}
		}
		/* Fill the QciLength info */
		if ( (p_uecc_llim_drb_config->drb_config.bitmask & 
					RRM_DRB_CONFIG_RLC_CONFIG_PRESENT) &&
				(p_uecc_llim_drb_config->drb_config.rlc_config_enb.bitmask & 
				 RRC_RLC_CONFIG_QCI_LENGTH_PRESENT) )
		{
			p_rlc_create_ue_entity_req->create_tx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QUEUE_SIZE_INFO_PRESENT;

			p_rlc_create_ue_entity_req->create_tx_um_rlc[lc_idx].
				rrc_rlc_queue_size_info.rlc_queue_size = p_uecc_llim_drb_config->
				drb_config.rlc_config_enb.qci_length;
		}
	}/*end of UM Unidirectional TX*/
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT ==
			p_rlc_config->bitmask)
	{
		lc_idx =  (rrc_counter_t)(p_rlc_create_ue_entity_req->num_create_rx_um_rlc - 1);
		if (UECC_LLIM_DRB_CONFIG_QOS_INFO_PRESENT & p_uecc_llim_drb_config->bitmask)
		{
			/*Fills the Qci value in create_rx_um_rlc */
			p_rlc_create_ue_entity_req->create_rx_um_rlc[lc_idx].
				optional_elems_present |= RRC_RLC_QCI_INFO_PRESENT;
			p_rlc_create_ue_entity_req->create_rx_um_rlc[lc_idx].rrc_rlc_qci_info.
				qci = p_uecc_llim_drb_config->qos_info.qci;

			/* Fills the RX values based on bearer type GBR and ignore incase of
			 * NonGBR bearer type*/
			if ((RRM_DRB_CONFIG_BEARER_TYPE_PRESENT &
						p_uecc_llim_drb_config->drb_config.bitmask)&&
					(p_uecc_llim_drb_config->drb_config.bearer_type == BEARER_TYPE_GBR) &&
					(p_uecc_llim_drb_config->qos_info.bitmask & RRC_GBR_QOS_INFO_PRESENT))
			{
				/*MBR incase of bearer type is GBR*/
				p_rlc_create_ue_entity_req->create_rx_um_rlc[lc_idx].
					optional_elems_present |= RRC_RLC_RX_BIT_RATE_INFO_PRESENT;
				p_rlc_create_ue_entity_req->create_rx_um_rlc[lc_idx].
					rrc_rlc_rx_bit_rate_info.bit_rate_rx = 
					p_uecc_llim_drb_config->qos_info.gbr_qos_info.dl_mbr;
			}
		}
	}/*end of UM Unidirectional RX*/
}

/******************************************************************************
 *   FUNCTION NAME: fill_create_part_drb_rlc_create_ue_entity_req
 *
 *   INPUTS       : rrc_rlc_create_ue_entity_req_t        *p_rlc_create_ue_entity_req
 *                  rrc_lc_id_t                             lc_id
 *                  rrc_rlc_config_t                        *p_rlc_config
 *   OUTPUTS      : None
 *   Description:    This function process the message
 *       This function continues filling create part of
 *       RLC message RLC_CREATE_UE_ENTITY_REQ
 *           based on p_rlc_config of new DRB.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_create_part_drb_rlc_create_ue_entity_req
(
 /* destination */
 rrc_rlc_create_ue_entity_req_t        *p_rlc_create_ue_entity_req,
 rrc_lc_id_t                             lc_id,
 /* main source */
 rrc_rlc_config_t                        *p_rlc_config
 )
{
	rrc_counter_t lc = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_rlc_create_ue_entity_req);
	RRC_ASSERT(PNULL != p_rlc_config);

	if (RRC_RLC_CONFIG_AM_CONFIG_PRESENT == p_rlc_config->bitmask)
	{
		lc = p_rlc_create_ue_entity_req->num_create_tx_rx_am_rlc;
		p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].lc_id = lc_id;

		p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].
			t_poll_retransmission =
			get_rlc_poll_retransmission_from_enum(p_rlc_config->am_config.
					ul_am_rlc.t_poll_retransmit);
		p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].poll_pdu =
			get_rlc_poll_pdu_from_enum(p_rlc_config->am_config.ul_am_rlc.
					poll_pdu);
		p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].poll_byte =
			get_rlc_poll_byte_from_enum(p_rlc_config->am_config.ul_am_rlc.
					poll_byte);
		p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].max_re_tx_thrsh_ld
			=
			get_rlc_max_retx_threshold_from_enum(p_rlc_config->am_config.
					ul_am_rlc.max_retx_threshold);

		p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].t_reordering =
			get_rlc_t_reordering_from_enum(p_rlc_config->am_config.dl_am_rlc.
					t_reordering);
		p_rlc_create_ue_entity_req->create_tx_rx_am_rlc[lc].t_status_prohibit
			=
			get_rlc_t_status_prohibit_from_enum(p_rlc_config->am_config.
					dl_am_rlc.t_status_prohibit);

		++p_rlc_create_ue_entity_req->num_create_tx_rx_am_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT == p_rlc_config->
			bitmask)
	{
		lc = p_rlc_create_ue_entity_req->num_create_tx_rx_um_rlc;
		p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc].lc_id = lc_id;

		p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc].sn_field_length_rx
			=
			get_rlc_sn_field_length_from_enum(p_rlc_config->
					um_bi_directional_config.ul_um_rlc.sn_field_length);
		p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc].sn_field_length_tx
			=
			get_rlc_sn_field_length_from_enum(p_rlc_config->
					um_bi_directional_config.dl_um_rlc.sn_field_length);
		p_rlc_create_ue_entity_req->create_tx_rx_um_rlc[lc].t_reordering =
			get_rlc_t_reordering_from_enum(p_rlc_config->
					um_bi_directional_config.dl_um_rlc.t_reordering);

		++p_rlc_create_ue_entity_req->num_create_tx_rx_um_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT == 
			p_rlc_config->bitmask)
	{
		lc = p_rlc_create_ue_entity_req->num_create_tx_um_rlc;
		p_rlc_create_ue_entity_req->create_tx_um_rlc[lc].lc_id = lc_id;

		p_rlc_create_ue_entity_req->create_tx_um_rlc[lc].sn_field_length =
			get_rlc_sn_field_length_from_enum(p_rlc_config->
					um_uni_directional_ul_config.ul_um_rlc.sn_field_length);

		++p_rlc_create_ue_entity_req->num_create_tx_um_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT == 
			p_rlc_config->bitmask)
	{
		lc = p_rlc_create_ue_entity_req->num_create_rx_um_rlc;
		p_rlc_create_ue_entity_req->create_rx_um_rlc[lc].lc_id = lc_id;

		p_rlc_create_ue_entity_req->create_rx_um_rlc[lc].sn_field_length =
			get_rlc_sn_field_length_from_enum(p_rlc_config->
					um_uni_directional_dl_config.dl_um_rlc.sn_field_length);
		p_rlc_create_ue_entity_req->create_rx_um_rlc[lc].t_reordering =
			get_rlc_t_reordering_from_enum(p_rlc_config->
					um_uni_directional_dl_config.dl_um_rlc.t_reordering);

		++p_rlc_create_ue_entity_req->num_create_rx_um_rlc;
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: build_and_send_uecc_create_ho_ue_rollback_resp
 *
 *   INPUTS       : rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param
 *                  rrc_uecc_llim_create_ue_entity_resp_t *p_create_ue_resp
 *   OUTPUTS      : None
 *   Description: : This function builds and sends the ue rollback responce in case 
 *                  of Handover    
 *       
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void build_and_send_uecc_create_ho_ue_rollback_resp
(
 rrc_uecc_llim_create_ue_entity_req_t    *p_create_ue_param,
 rrc_uecc_llim_create_ue_entity_resp_t *p_create_ue_resp 
 )
{
	p_create_ue_resp->transaction_id    = p_create_ue_param->
		transaction_id;
	p_create_ue_resp->ue_index          = p_create_ue_param->ue_index;
	p_create_ue_resp->response_code     = RRC_SUCCESS;

	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_create_ue_param->ue_index),
			UECC_LLIM_CREATE_UE_ENTITY_RESP,
			sizeof(rrc_uecc_llim_create_ue_entity_resp_t),
			p_create_ue_resp);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_mac_reconfig_del_lc_req_for_ho_create_ue_rollback
 *   INPUTS       : rrc_mac_reconfigure_ue_entity_req_t *p_mac_reconfigure_ue_entity_req
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx
 *                  U8                                   drb_index
 *   OUTPUTS      : None
 *   Description: :  
 *       This function fills the required parameters for a particular DRB to 
 *       delete a LC while RollBack.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_mac_reconfig_del_lc_req_for_ho_create_ue_rollback
(
 rrc_mac_reconfigure_ue_entity_req_t *p_mac_reconfigure_ue_entity_req,
 rrc_llim_ue_ctx_t                   *p_ue_ctx,
 U8                                   drb_index
 )
{
	rrc_uecc_llim_create_drb_entity_list_t  *p_create_drb_entity_info = PNULL;

	p_create_drb_entity_info = 
		&p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue.create_drb_entity_info;

	/*  Prepare RRC_MAC_RECONFIGURE_UE_ENTITY_REQ */
	p_mac_reconfigure_ue_entity_req->ue_index =
		p_ue_ctx->ue_index;

	/* Delete LC */

	RRC_ASSERT(p_mac_reconfigure_ue_entity_req->
			delete_lc_req_counter <=
			RRC_MAC_MAX_DELETE_LC);

	if(p_mac_reconfigure_ue_entity_req->delete_lc_req_counter < RRC_MAC_MAX_DELETE_LC)
	{
		p_mac_reconfigure_ue_entity_req->
			delete_lc_req[p_mac_reconfigure_ue_entity_req->
			delete_lc_req_counter].
			lch_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].lc_id;
		if(RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT &
				p_create_drb_entity_info->create_drb_entity[drb_index].
				uecc_llim_drb_config.drb_config.rlc_config_enb.rlc_config.bitmask)
		{
			p_mac_reconfigure_ue_entity_req->
				delete_lc_req[p_mac_reconfigure_ue_entity_req->
				delete_lc_req_counter].
				lc_type=
				MAC_DELETE_LC_UPLINK;
		}
		else if(RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT &
				p_create_drb_entity_info->create_drb_entity[drb_index].
				uecc_llim_drb_config.drb_config.rlc_config_enb.rlc_config.bitmask)
		{
			p_mac_reconfigure_ue_entity_req->
				delete_lc_req[p_mac_reconfigure_ue_entity_req->
				delete_lc_req_counter].
				lc_type=
				MAC_DELETE_LC_DOWNLINK;
		}
		else
		{
			p_mac_reconfigure_ue_entity_req->
				delete_lc_req[p_mac_reconfigure_ue_entity_req->
				delete_lc_req_counter].
				lc_type=
				MAC_DELETE_LC_BOTH;
		}
		/*Incrementing the delete LC counter*/
		p_mac_reconfigure_ue_entity_req->delete_lc_req_counter++;
	}
}


/******************************************************************************
 *   FUNCTION NAME: fill_rlc_reconfig_del_lc_req_for_ho_create_ue_rollback
 *
 *   INPUTS       : rrc_mac_reconfigure_ue_entity_req_t *p_mac_reconfigure_ue_entity_req
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx
 *                  U8                                   drb_index
 *   OUTPUTS      : None
 *   Description: :  
 *       This function fills the required parameters for a particular DRB to 
 *       delete a LC while RollBack.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void fill_rlc_reconfig_del_lc_req_for_ho_create_ue_rollback
(
 rrc_rlc_reconfig_ue_entity_req_t *p_rlc_reconfig_ue_entity_req,
 rrc_llim_ue_ctx_t                *p_ue_ctx,
 U8                                drb_index
 )
{
	rrc_uecc_llim_create_drb_entity_list_t  *p_create_drb_entity_info = PNULL;

	p_create_drb_entity_info = 
		&p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue.create_drb_entity_info;

	p_rlc_reconfig_ue_entity_req->ue_index = p_ue_ctx->ue_index;

	if (RRC_RLC_CONFIG_AM_CONFIG_PRESENT & 
			p_create_drb_entity_info->create_drb_entity[drb_index].
			uecc_llim_drb_config.drb_config.rlc_config_enb.rlc_config.bitmask)
	{
		p_rlc_reconfig_ue_entity_req->delete_tx_rx_am_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_am_rlc].lc_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_am_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_BI_DIRECTIONAL_CONFIG_PRESENT & 
			p_create_drb_entity_info->create_drb_entity[drb_index].
			uecc_llim_drb_config.drb_config.rlc_config_enb.rlc_config.bitmask)
	{
		p_rlc_reconfig_ue_entity_req->delete_tx_rx_um_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_um_rlc].lc_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_tx_rx_um_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_UL_PRESENT &
			p_create_drb_entity_info->create_drb_entity[drb_index].
			uecc_llim_drb_config.drb_config.rlc_config_enb.rlc_config.bitmask)
	{
		p_rlc_reconfig_ue_entity_req->delete_rx_um_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_rx_um_rlc].lc_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_rx_um_rlc;
	}
	else if (RRC_RLC_CONFIG_UM_UNI_DIRECTIONAL_CONFIG_DL_PRESENT &
			p_create_drb_entity_info->create_drb_entity[drb_index].
			uecc_llim_drb_config.drb_config.rlc_config_enb.rlc_config.bitmask)
	{
		p_rlc_reconfig_ue_entity_req->delete_tx_um_rlc
			[p_rlc_reconfig_ue_entity_req->num_delete_tx_um_rlc].lc_id =
			p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].lc_id;
		++p_rlc_reconfig_ue_entity_req->num_delete_tx_um_rlc;
	}
}

/******************************************************************************
 *   FUNCTION NAME: start_uecc_trigered_roll_back_for_ho_create_ue
 *
 *   INPUTS       : rrc_llim_ue_ctx_t                   *p_ue_ctx
 *                  rrc_cell_index_t  cell_index
 *   OUTPUTS      : None
 *   Description: :  
 *       This function starts the roll back procedure for HO create ue
 *
 *    RETURNS: This function return the value true/false depends upon the rollback
 *             is required or not, false means rollback is not required.
 *
 *       None
 *
 ******************************************************************************/
static rrc_bool_et start_uecc_trigered_roll_back_for_ho_create_ue
(
 rrc_llim_ue_ctx_t *p_ue_ctx,
 rrc_cell_index_t  cell_index
 )
{
	/*Mukesh*/
	rrc_bool_et result = RRC_FALSE;

	U16 create_drb_entity_counter =
		p_ue_ctx->curr_op_param.p_create_ue->uecc_create_ue.create_drb_entity_info.
		create_drb_entity_counter;

	rrc_mac_reconfigure_ue_entity_req_t
		mac_reconfigure_ue_entity_req;

	rrc_s1u_reconfigure_ue_entity_req_t
		s1u_reconfigure_ue_entity_req;

	rrc_pdcp_reconf_ue_entity_req_t 
		pdcp_reconf_ue_entity_req;

	rrc_rlc_reconfig_ue_entity_req_t
		rlc_reconfig_ue_entity_req;

	U8 drb_index = RRC_NULL;
	U16 drb_status = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_ue_ctx);

	memset_wrapper(&mac_reconfigure_ue_entity_req, 0, sizeof
			(mac_reconfigure_ue_entity_req));

	memset_wrapper(&s1u_reconfigure_ue_entity_req, 0, sizeof
			(s1u_reconfigure_ue_entity_req));

	memset_wrapper(&pdcp_reconf_ue_entity_req, 0, sizeof
			(pdcp_reconf_ue_entity_req));

	memset_wrapper(&rlc_reconfig_ue_entity_req, 0, sizeof
			(rlc_reconfig_ue_entity_req));


	for(drb_index = 0;
			drb_index < create_drb_entity_counter;
			drb_index++)
	{
		drb_status =
			p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].drb_status;

		if ( drb_status == RRC_LLIM_DRB_PASSED_AT_S1U )
		{
			s1u_reconfigure_ue_entity_req.ue_index = p_ue_ctx->ue_index;

			/*Increamenting counter for deleting LC*/
			s1u_reconfigure_ue_entity_req.num_rel_sap_req++;

			RRC_ASSERT(s1u_reconfigure_ue_entity_req.num_rel_sap_req <=
					RRC_S1U_MAX_NUM_LC);

			s1u_reconfigure_ue_entity_req.rel_sap_req[drb_index].lc_id =
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].lc_id;
		}
		if ( ((drb_status == RRC_LLIM_DRB_PASSED_AT_S1U)  || 
					(drb_status == RRC_LLIM_DRB_PASSED_AT_PDCP) || (drb_status == RRC_LLIM_DRB_FAILED_AT_S1U))
				&& (pdcp_reconf_ue_entity_req.num_del_drb_entity < RRC_PDCP_MAX_DRB) )
		{
			pdcp_reconf_ue_entity_req.ue_index = p_ue_ctx->ue_index;

			pdcp_reconf_ue_entity_req.del_drb_entities[
				pdcp_reconf_ue_entity_req.num_del_drb_entity].lc_id =
				p_ue_ctx->curr_op_param.p_rcfg_ue->llim_drb_status[drb_index].lc_id;
			pdcp_reconf_ue_entity_req.num_del_drb_entity++;

			RRC_ASSERT(pdcp_reconf_ue_entity_req.num_del_drb_entity <=
					RRC_PDCP_MAX_DRB);
		}
		if ( (drb_status == RRC_LLIM_DRB_PASSED_AT_S1U)  || 
				(drb_status == RRC_LLIM_DRB_PASSED_AT_PDCP) || (drb_status == RRC_LLIM_DRB_FAILED_AT_S1U) ||
				(drb_status == RRC_LLIM_DRB_PASSED_AT_RLC) || (drb_status == RRC_LLIM_DRB_FAILED_AT_PDCP))
		{
			fill_rlc_reconfig_del_lc_req_for_ho_create_ue_rollback(
					&rlc_reconfig_ue_entity_req,
					p_ue_ctx,
					drb_index);
		}
		if ( (drb_status == RRC_LLIM_DRB_PASSED_AT_S1U)  || 
				(drb_status == RRC_LLIM_DRB_PASSED_AT_PDCP) || (drb_status == RRC_LLIM_DRB_FAILED_AT_S1U) ||
				(drb_status == RRC_LLIM_DRB_PASSED_AT_RLC) || (drb_status == RRC_LLIM_DRB_FAILED_AT_PDCP) || 
				(drb_status == RRC_LLIM_DRB_PASSED_AT_MAC) || (drb_status == RRC_LLIM_DRB_FAILED_AT_RLC))
		{
			fill_mac_reconfig_del_lc_req_for_ho_create_ue_rollback(
					&mac_reconfigure_ue_entity_req,
					p_ue_ctx,
					drb_index);
		}
	}
	if(RRC_NULL != mac_reconfigure_ue_entity_req.delete_lc_req_counter)
	{
		if (RRC_SUCCESS != rrc_mac_il_send_rrc_mac_reconfigure_ue_entity_req(
					&mac_reconfigure_ue_entity_req, 
					RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					transaction_id,
					cell_index))
		{
			RRC_LLIM_TRACE(RRC_ERROR, 
					"[%s]Failure to send mac_reconfigure_ue_entity_req.", __FUNCTION__);
		}


		RRC_ASSERT(UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF < 16); 

		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |= 
			1 << UEMH_STATE_W_FOR_MAC_RECONFIG_UE_ENTITY_CNF;

		/*Mukesh*/
		UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_LLIM_LL_ADD_LC_IN_SYNC_ONGOING);
		result = RRC_TRUE;

	}
	if( RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_um_rlc ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_rx_um_rlc  ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_rx_um_rlc ||
			RRC_NULL != rlc_reconfig_ue_entity_req.num_delete_tx_rx_am_rlc 
	  )
	{
		if (RRC_SUCCESS != rrc_rlc_il_send_rrc_rlc_reconfig_ue_entity_req(
					&rlc_reconfig_ue_entity_req, RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID,cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					transaction_id,
					cell_index))
		{
			RRC_LLIM_TRACE(RRC_ERROR, 
					"[%s]Failure to send rlc_reconfig_ue_entity_req", __FUNCTION__);
		}
		RRC_ASSERT(UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
			1 << UEMH_STATE_W_FOR_RLC_RECONFIG_UE_ENTITY_CNF;

	}
	if(RRC_NULL != pdcp_reconf_ue_entity_req.num_del_drb_entity)
	{
		if(RRC_SUCCESS != rrc_pdcp_il_send_rrc_pdcp_reconf_ue_entity_req(
					&pdcp_reconf_ue_entity_req, RRC_LLIM_MODULE_ID,
						RRC_GET_LL_MODULE_ID(RRC_PDCP_1_MODULE_ID,cell_index),
					p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
					transaction_id,
					cell_index))
		{
			RRC_LLIM_TRACE(RRC_ERROR,
					"[%s]Unable to send pdcp_reconf_ue_entity_req ..",__FUNCTION__);
		}
		RRC_ASSERT(UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
			1 << UEMH_STATE_W_FOR_PDCP_RECONFIG_UE_ENTITY_CNF;

	}
	if(RRC_NULL != s1u_reconfigure_ue_entity_req.num_rel_sap_req)
	{
		rrc_s1u_il_send_rrc_s1u_reconfigure_ue_entity_req(
				&s1u_reconfigure_ue_entity_req, RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,cell_index),
				p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_add_lc_rollback.
				transaction_id,
				cell_index);
		RRC_ASSERT(UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF < 16);
		p_ue_ctx->curr_op_param.p_rcfg_ue->cur_mask_lc_to_be_tracked_layers |=
			1 << UEMH_STATE_W_FOR_S1U_RECONFIG_UE_ENTITY_CNF;
	}
	return result;
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_idle_uecc_ho_rach_res_req
 *
 *   INPUTS       :  void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   Description: :  
 *       This function start creating ue on lower layers.
 *       state UEMH_STATE_IDLE; event UEMH_EVENT_UECC_HO_RACH_RESOURCE_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_idle_uecc_ho_rach_res_req
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_ho_rach_resource_req_t *p_uecc_llim_rach_res_req =
		(rrc_uecc_llim_ho_rach_resource_req_t *)p_msg;
	rrc_mac_ho_rach_resource_req_t          mac_ho_rach_resource_req;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_uecc_llim_rach_res_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:%p p_rrc_llim_gl_ctx=%p",p_api,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/

	p_ue_ctx->curr_op_param.p_rach_res_req = (rrc_uemh_cfg_ue_rach_res_op_param_t*)
		rrc_mem_get(sizeof(rrc_uemh_cfg_ue_rach_res_op_param_t));
	if (PNULL == p_ue_ctx->curr_op_param.p_rach_res_req) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL, 
				"p_ue_ctx->curr_op_param.p_rach_res_req is NULL");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}

	memset_wrapper(p_ue_ctx->curr_op_param.p_rach_res_req , 0,
			sizeof(rrc_uemh_cfg_ue_rach_res_op_param_t));

	p_ue_ctx->curr_op_param.p_rach_res_req->uecc_llim_rach_res_req =
		*p_uecc_llim_rach_res_req;

	memset_wrapper (&mac_ho_rach_resource_req, 0, sizeof(rrc_mac_ho_rach_resource_req_t));

	/* send RRC_MAC_HO_RACH_RESOURCE_REQ */
	mac_ho_rach_resource_req.ue_index = p_uecc_llim_rach_res_req->ue_index;
	if (RRC_UECC_LLIM_INTRA_ENB_HO_REQ_PRESENT &
			p_uecc_llim_rach_res_req->bitmask)
	{
		mac_ho_rach_resource_req.optional_elems_present |= RRC_MAC_INTRA_ENB_HO_REQ_PRESENT;
		mac_ho_rach_resource_req.intra_enb_ho_req.enable_intra_enb_ho = 
			p_uecc_llim_rach_res_req->intra_enb_ho_req.enable_intra_enb_ho;
	}

	rrc_mac_il_send_rrc_mac_ho_rach_resource_req(&mac_ho_rach_resource_req,
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_uecc_llim_rach_res_req->cell_index),
			p_uecc_llim_rach_res_req->transaction_id,
			p_uecc_llim_rach_res_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_idle_mac_ho_rach_res_resp
 *
 *   INPUTS       :  void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   Description: :  
 *       This function start creating ue on lower layers.
 *       state UEMH_STATE_IDLE; event UEMH_EVENT_MAC_HO_RACH_RESOURCE_RESP
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_idle_mac_ho_rach_res_resp
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_ho_rach_resource_resp_t uecc_llim_rach_res_resp;
	rrc_mac_ho_rach_resource_resp_t   * p_rrc_mac_ho_rach_resource_resp =
		(rrc_mac_ho_rach_resource_resp_t*)p_msg;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	memset_wrapper(&uecc_llim_rach_res_resp,0,
			sizeof(uecc_llim_rach_res_resp));

	if (PNULL == p_ue_ctx->curr_op_param.p_rach_res_req) 
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
				"p_ue_ctx->curr_op_param.p_rach_res_req is NULL"
				"- ignored");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	uecc_llim_rach_res_resp.transaction_id = 
		p_ue_ctx->curr_op_param.p_rach_res_req->uecc_llim_rach_res_req.transaction_id;

	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api,
			&uecc_llim_rach_res_resp.cell_index);

	uecc_llim_rach_res_resp.ue_index = 
		p_rrc_mac_ho_rach_resource_resp->ue_index;

	uecc_llim_rach_res_resp.response_code = 
		p_rrc_mac_ho_rach_resource_resp->response;

	if (RRC_MAC_CRNTI_INFO_PRESENT &
			p_rrc_mac_ho_rach_resource_resp->optional_elems_present)
	{
		uecc_llim_rach_res_resp.bitmask |=  RRC_UECC_LLIM_CRNTI_PRESENT;
		uecc_llim_rach_res_resp.crnti = 
			p_rrc_mac_ho_rach_resource_resp->crnti_info.crnti;

		/* Bug 839 Fix Start */
		p_ue_ctx->bitmask |= RRC_UECC_LLIM_UE_CTX_CRNTI_PRESENT;
		p_ue_ctx->crnti = 
			p_rrc_mac_ho_rach_resource_resp->crnti_info.crnti;
		/* Bug 839 Fix Stop */

	}

	if (RRC_MAC_PREAMBLE_INFO_PRESENT &
			p_rrc_mac_ho_rach_resource_resp->optional_elems_present)
	{
		uecc_llim_rach_res_resp.bitmask |= RRC_UECC_LLIM_PREAMBLE_INFO_PRESENT;

		uecc_llim_rach_res_resp.preamble_info.preamble_idx =
			p_rrc_mac_ho_rach_resource_resp->preamble_info.preamble_Idx;
		uecc_llim_rach_res_resp.preamble_info.prach_mask_idx =
			p_rrc_mac_ho_rach_resource_resp->preamble_info.prach_mask_Idx;
	}

	/* 2. send UECC_LLIM_HO_RACH_RESOURCE_RESP to UECC */
	rrc_llim_send_internal_msg( RRC_GET_UECC_MODULE_ID(p_rrc_mac_ho_rach_resource_resp->ue_index),
			UECC_LLIM_HO_RACH_RESOURCE_RESP,
			sizeof(uecc_llim_rach_res_resp),
			&uecc_llim_rach_res_resp);
	if (MAC_FAILURE == p_rrc_mac_ho_rach_resource_resp->response)
	{
		if (!(RRC_UECC_LLIM_INTRA_ENB_HO_REQ_PRESENT & p_ue_ctx->
					curr_op_param.p_rach_res_req->uecc_llim_rach_res_req.bitmask))
		{
			RRC_LLIM_TRACE(RRC_INFO, "Deleting UE context for ue_index [%u].",
					p_ue_ctx->ue_index);

			rrc_mem_free (p_ue_ctx->curr_op_param.p_rach_res_req);
			p_ue_ctx->curr_op_param.p_rach_res_req = PNULL;

			uemh_cleanup_ue_ctx(p_ue_ctx);    
			rrc_llim_set_ue_context(p_rrc_llim_gl_ctx,p_ue_ctx->ue_index, PNULL);

			rrc_mem_free(p_ue_ctx);
            /* SPR 20522 Fix Start */
			/* + Coverity 81348 */
			p_ue_ctx = PNULL;
			/* - Coverity 81348 */
            /* SPR 20522 Fix End */
		}
	}
	else
	{

		rrc_mem_free (p_ue_ctx->curr_op_param.p_rach_res_req);
		p_ue_ctx->curr_op_param.p_rach_res_req = PNULL;
	}

	RRC_LLIM_UT_TRACE_EXIT();
}


/*
 *   UEMH_STATE_W_FOR_RLC_REESTABLISH_UE_ENTITY_CNF state handlers
 */
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_w_rlc_reestablish_ue_state_entity_in_service_cnf 
 *
 *   INPUTS       :  void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   Description: :  
 *       This function continue ue reestablish if RLC is OK.
 *       state UEMH_STATE_ENTITY_IN_SERVICE
 *       event UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_w_rlc_reestablish_ue_state_entity_in_service_cnf(
		void                *p_api,             /* p_api */
		void                *p_msg,             /* p_msg */
		rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
		/* Pointer to the LLIM global context data */
		rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
		)
{
	rrc_uecc_llim_re_establish_ue_entity_resp_t 
		uecc_llim_re_establish_ue_entity_resp;

	rrc_rlc_re_establish_ue_entity_cnf_t *p_rlc_re_establish_ue_entity_cnf =
		(rrc_rlc_re_establish_ue_entity_cnf_t *)p_msg;
	rrc_counter_t lc_index = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_rlc_re_establish_ue_entity_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	memset_wrapper(&uecc_llim_re_establish_ue_entity_resp, RRC_NULL,
			sizeof(rrc_uecc_llim_re_establish_ue_entity_resp_t));

	/* Fill Cell Index */
	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api,
			&uecc_llim_re_establish_ue_entity_resp.cell_index);

	/* Fill UE Index */
	uecc_llim_re_establish_ue_entity_resp.ue_index =
		p_rlc_re_establish_ue_entity_cnf->ue_index;

	/* Fill Transaction Id */
	uecc_llim_re_establish_ue_entity_resp.transaction_id = 
		rrc_get_transaction_id(p_api);

	/* Fill top level response code */
	uecc_llim_re_establish_ue_entity_resp.response_code = 
		p_rlc_re_establish_ue_entity_cnf->response_code;

	if ((RLC_FAILURE == p_rlc_re_establish_ue_entity_cnf->response_code) ||
			(RLC_SUCCESS == p_rlc_re_establish_ue_entity_cnf->response_code))
	{
		for (lc_index = 0; 
				lc_index < p_rlc_re_establish_ue_entity_cnf->num_error_entity;
				lc_index++)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,
					"Lc_id=[%u] failed at RLC", 
					p_rlc_re_establish_ue_entity_cnf->
					error_entities[lc_index].lc_id);

			uecc_llim_re_establish_ue_entity_resp.rb_error_info[lc_index].lc_id =
				p_rlc_re_establish_ue_entity_cnf->error_entities[lc_index].lc_id;

			llim_fill_response_code(
					&uecc_llim_re_establish_ue_entity_resp.rb_error_info[lc_index].response,
					RRC_RLC_MODULE_ID,
					p_rlc_re_establish_ue_entity_cnf->
					error_entities[lc_index].response);
		}
		/* Fill error list */
		uecc_llim_re_establish_ue_entity_resp.bitmask |= 
			UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP_RB_ERROR_INFO_PRESENT;

		uecc_llim_re_establish_ue_entity_resp.rb_error_counter = lc_index;

		rrc_llim_send_internal_msg(RRC_GET_UECC_MODULE_ID(p_rlc_re_establish_ue_entity_cnf->ue_index),
				UECC_LLIM_RE_ESTABLISH_UE_ENTITY_RESP,
				sizeof(rrc_uecc_llim_re_establish_ue_entity_resp_t),
				&uecc_llim_re_establish_ue_entity_resp);
		if (p_ue_ctx->curr_op_param.p_reestablish_ue != PNULL)
		{
			rrc_mem_free (p_ue_ctx->curr_op_param.p_reestablish_ue);
			p_ue_ctx->curr_op_param.p_reestablish_ue = PNULL;
		}
	}
	else
	{
		RRC_ASSERT(RRC_FALSE);
	}
	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME: uemh_cleanup_ue_ctx
 *
 *   INPUTS       : rrc_llim_ue_ctx_t                   *p_ue_ctx
 *   OUTPUTS      : None
 *   Description: :  
 *       This function cleanups UEMH UE Context.
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_cleanup_ue_ctx
(
 rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_ue_ctx);

	if (p_ue_ctx->curr_op_param.p_create_ue != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_create_ue);
		p_ue_ctx->curr_op_param.p_create_ue = PNULL;
	}
	if ( p_ue_ctx->curr_op_param.p_del_ue != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_del_ue);
		p_ue_ctx->curr_op_param.p_del_ue = PNULL;
	}
	if (p_ue_ctx->curr_op_param.p_rcfg_ue  != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rcfg_ue );
		p_ue_ctx->curr_op_param.p_rcfg_ue = PNULL;
	}
	if (p_ue_ctx->curr_op_param.p_cfg_ue_security != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_cfg_ue_security);
		p_ue_ctx->curr_op_param.p_cfg_ue_security = PNULL;
	}
	if (p_ue_ctx->curr_op_param.p_rach_res_req != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_rach_res_req );
		p_ue_ctx->curr_op_param.p_rach_res_req = PNULL;
	}
	if (p_ue_ctx->curr_op_param.p_suspend_ue_req != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_suspend_ue_req);
		p_ue_ctx->curr_op_param.p_suspend_ue_req  = PNULL;
	}
	if (p_ue_ctx->curr_op_param.p_reestablish_ue  != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_reestablish_ue);
		p_ue_ctx->curr_op_param.p_reestablish_ue = PNULL ;
	}
	if (p_ue_ctx->curr_op_param.p_recfg_ue_security != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_recfg_ue_security);
		p_ue_ctx->curr_op_param.p_recfg_ue_security = PNULL;
	}
	if (p_ue_ctx->curr_op_param.p_resume_ue != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_resume_ue );
		p_ue_ctx->curr_op_param.p_resume_ue =PNULL;
	}
	if (p_ue_ctx->curr_op_param.p_change_crnti  != PNULL)
	{
		rrc_mem_free(p_ue_ctx->curr_op_param.p_change_crnti);
		p_ue_ctx->curr_op_param.p_change_crnti = PNULL;
	}

	RRC_LLIM_UT_TRACE_EXIT();
	return;
}

/******************************************************************************
 *    FUNCTION NAME:uemh_fsm_ue_in_service_state_reset_ue_entity_req 
 *
 *   INPUTS       :  void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   Description: :  
 *       This function sends PDCP_RESUME_UE_ENTITY_REQ to PDCP.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_RESET_UE_ENTITY_REQ
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_reset_ue_entity_req 
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_uecc_llim_reset_ue_entity_req_t* 
		p_llim_reset_ue_entity_req = 
		(rrc_uecc_llim_reset_ue_entity_req_t*)p_msg;  

	rrc_mac_reset_ue_entity_req_t*   p_mac_reset_ue_entity_req = PNULL;
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_llim_reset_ue_entity_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:%p p_rrc_llim_gl_ctx =%p",p_api,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/

	/* Allocate memory for message */
	p_mac_reset_ue_entity_req = 
		(rrc_mac_reset_ue_entity_req_t*)
		rrc_mem_get(sizeof(rrc_mac_reset_ue_entity_req_t));

	if (PNULL == p_mac_reset_ue_entity_req)
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_FATAL,
				"Memory Allocation Fail to mac_reset_ue_entity_req");
		RRC_LLIM_UT_TRACE_EXIT();
		return;
	}
	/* Init Operation */
	memset_wrapper(p_mac_reset_ue_entity_req, RRC_NULL,
			sizeof(rrc_mac_reset_ue_entity_req_t));

	p_mac_reset_ue_entity_req->ue_index =
		p_llim_reset_ue_entity_req->ue_index;
	if (RRC_SUCCESS != rrc_mac_il_send_rrc_mac_reset_ue_entity_req(
				p_mac_reset_ue_entity_req,
				RRC_LLIM_MODULE_ID,
					RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,p_llim_reset_ue_entity_req->cell_index),
				p_llim_reset_ue_entity_req->transaction_id,
				p_llim_reset_ue_entity_req->cell_index))
	{
		RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "[%s] could'nt send the MAC "
				"  RESET request in state [%s]",
				RRC_UEMH_FSM_NAME,
				UEMH_FSM_STATES_NAMES[UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx)]);
	}

	if (PNULL != p_mac_reset_ue_entity_req)
	{
		/* Deallocate memory */
		rrc_mem_free(p_mac_reset_ue_entity_req);
        /* SPR 20522 Fix Start */
		/* + Coverity 81328 */
		p_mac_reset_ue_entity_req = PNULL;
		/* - Coverity 81328 */
        /* SPR 20522 Fix End */
	}
	/* coverity_fix_63291_start */
	RRC_LLIM_UT_TRACE_EXIT();
	return ;
	/* coverity_fix_63291_stop */
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_reestb_ue_entity_comp_ind
 *
 *   INPUTS       :  void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   Description: :  
 *       This function sends RRC_RLC_RE_ESTABLISH_UE_ENTITY_COMPLETE_IND to the RLC.
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE;
 *       event UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_IND  
 *       RETURNS:
 *       None
 *
 ******************************************************************************/

static void uemh_fsm_ue_in_service_state_reestb_ue_entity_comp_ind
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 )
{
	rrc_transaction_id_t    transaction_id;
	rrc_uecc_llim_re_establish_ue_entity_complete_ind_t 
		*p_uecc_llim_reestb_ue_entity_comp_ind =
		(rrc_uecc_llim_re_establish_ue_entity_complete_ind_t *)p_msg;
	rrc_rlc_re_establish_ue_entity_complete_ind_t rlc_reestb_ue_entity_comp_ind;
	rrc_counter_t  counter = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_uecc_llim_reestb_ue_entity_comp_ind);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	/* Build and send RRC_RLC_RE_ESTABLISH_UE_ENTITY_COMPLETE_IND to the RLC */

	memset_wrapper(&rlc_reestb_ue_entity_comp_ind, 0,
			sizeof(rlc_reestb_ue_entity_comp_ind));

	rlc_reestb_ue_entity_comp_ind.ue_index = p_uecc_llim_reestb_ue_entity_comp_ind->ue_index;
	for (counter = 0;
			(counter < p_uecc_llim_reestb_ue_entity_comp_ind->lc_id_list.lc_count)
			&& (counter < RRC_RLC_MAX_NUM_LC); counter++)
	{
		rlc_reestb_ue_entity_comp_ind.entity_lcids[counter].bitmask = 0;
		rlc_reestb_ue_entity_comp_ind.entity_lcids[counter].lc_id =
			p_uecc_llim_reestb_ue_entity_comp_ind->
			lc_id_list.lc_id[counter];
		RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO,"RLC RE-ESTABLISH=[%u];Unused variable p_api=%p p_rrc_llim_gl_ctx=%p",
				rlc_reestb_ue_entity_comp_ind.entity_lcids[counter].lc_id,p_api,p_rrc_llim_gl_ctx);/*SPR 17777+-*/

	}
	rlc_reestb_ue_entity_comp_ind.num_entity_lc_id = counter;
	transaction_id = p_uecc_llim_reestb_ue_entity_comp_ind->transaction_id;

	rrc_rlc_il_send_rrc_rlc_re_establish_ue_entity_complete_ind(&rlc_reestb_ue_entity_comp_ind,
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_RLC_1_MODULE_ID, p_uecc_llim_reestb_ue_entity_comp_ind->cell_index),
			transaction_id,
			p_uecc_llim_reestb_ue_entity_comp_ind->cell_index);
	RRC_LLIM_UT_TRACE_EXIT();
}


/******************************************************************************
 *   FUNCTION NAME:  uemh_fsm_w_for_rlc_reestablish_ue_entity_cnf
 *
 *   INPUTS       :  void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   Description:    This function process the message 
 *                    UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF
 *
 *   RETURNS:        None
 *
 ******************************************************************************/
void uemh_fsm_w_for_rlc_reestablish_ue_entity_cnf
(
 void                *p_api,             /* p_api */
 void                *p_msg,             /* p_msg */   
 rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
 /* Pointer to the LLIM global context data */
 rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx 
 )
{
	rrc_rlc_re_establish_ue_entity_cnf_t  *p_rrc_rlc_ue_reestab_cnf = PNULL;

	rrc_uecc_llim_suspend_ue_entity_req_t* p_param_ue_suspend_req = PNULL;
	rrc_uecc_llim_suspend_ue_entity_resp_t rrc_uecc_llim_suspend_ue_entity_res;
	rrc_mac_reset_ue_entity_req_t rrc_mac_ue_reset_req;

	rrc_cell_index_t                  cell_index = RRC_INVALID_CELL_INDEX;

	RRC_LLIM_UT_TRACE_ENTER();
	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_msg);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	if (PNULL != p_ue_ctx)
	{
		rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, &cell_index);

		if ( RRC_INVALID_CELL_INDEX == cell_index )
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid_Cell_Index");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}

		if (PNULL == p_ue_ctx->curr_op_param.p_suspend_ue_req)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
					"p_ue_ctx->curr_op_param.p_suspend_ue_req is NULL - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}

		p_param_ue_suspend_req =
			&p_ue_ctx->curr_op_param.p_suspend_ue_req->uecc_suspend_ue ;
		if ( PNULL == p_param_ue_suspend_req )
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, 
					"p_param_ue_suspend_req is NULL - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}

		/* Precondition - should be the same transaction */
		if (rrc_get_transaction_id(p_api) !=
				p_param_ue_suspend_req->transaction_id)
		{
			RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Message with other "
					"transaction_id - ignored");
			RRC_LLIM_UT_TRACE_EXIT();
			return;
		}

		p_rrc_rlc_ue_reestab_cnf = (rrc_rlc_re_establish_ue_entity_cnf_t*)p_msg;
		RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Inside the handler for "
				"[UEMH_EVENT_RLC_REESTABLISH_UE_ENTITY_CNF]");

		if(RRC_SUCCESS == p_rrc_rlc_ue_reestab_cnf->response_code)
		{
			/* Check for radio link failure detection */
			if (p_param_ue_suspend_req->rlf_detected_flag)
			{
				/* checking if we have received rlc_reestablishment_ue_entity_cnf */
				if (RRC_TRUE == p_ue_ctx->curr_op_param.p_suspend_ue_req->pdcp_or_rlc_cnf_recvd)
				{
					rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api,
							&cell_index);

					if (RRC_INVALID_CELL_INDEX == cell_index)
					{
						RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "Invalid Cell Index");
						RRC_LLIM_UT_TRACE_EXIT();
						return;
					}

					memset_wrapper (&rrc_mac_ue_reset_req, 0, sizeof(rrc_mac_reset_ue_entity_req_t));


					rrc_mac_ue_reset_req.ue_index = p_ue_ctx->ue_index ; 
					if (RRC_SUCCESS != rrc_mac_il_send_rrc_mac_reset_ue_entity_req(
								&rrc_mac_ue_reset_req, 
								RRC_LLIM_MODULE_ID,
									RRC_GET_LL_MODULE_ID(RRC_MAC_1_MODULE_ID,cell_index),
								p_param_ue_suspend_req->transaction_id,
								cell_index))

					{

						RRC_LLIM_UEMH_FSM_TRACE(RRC_WARNING, "[%s] could'nt send the MAC "
								"  RESET request in state [%s]",
								RRC_UEMH_FSM_NAME,
								UEMH_FSM_STATES_NAMES[UEMH_FSM_GET_CURRENT_STATE(p_ue_ctx)]);
						RRC_LLIM_UT_TRACE_EXIT();
						return ;
					}
					else
					{
						RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "MAC RESET Sent successfully ");
						UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_W_FOR_MAC_RESET_UE_ENTITY_CNF);   
					}
					p_ue_ctx->curr_op_param.p_suspend_ue_req->pdcp_or_rlc_cnf_recvd = RRC_FALSE;
				}
				else
				{
					p_ue_ctx->curr_op_param.p_suspend_ue_req->pdcp_or_rlc_cnf_recvd = RRC_TRUE;
				}
			}
		}
		else
		{
			/* 1. Stop guard timer */
			if (PNULL != p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer)
			{
				RRC_LLIM_UEMH_FSM_TRACE(RRC_BRIEF, "Stop timer "
						"[UE_ENTITY_SUSPEND_TIMER]");
				rrc_stop_timer(p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer);
				p_ue_ctx->curr_op_param.p_suspend_ue_req->guard_timer = PNULL;
			} 
			memset_wrapper(&rrc_uecc_llim_suspend_ue_entity_res, 0, 
					sizeof(rrc_uecc_llim_suspend_ue_entity_resp_t));
			rrc_uecc_llim_suspend_ue_entity_res.cell_index = cell_index; 
			rrc_uecc_llim_suspend_ue_entity_res.transaction_id =
				p_param_ue_suspend_req->transaction_id ;
			rrc_uecc_llim_suspend_ue_entity_res.ue_index =
				p_ue_ctx->ue_index ;
			rrc_uecc_llim_suspend_ue_entity_res.response_code =
				p_rrc_rlc_ue_reestab_cnf->response_code ;

			RRC_LLIM_UEMH_FSM_TRACE(RRC_INFO, "p_rrc_rlc_ue_reestab_cnf" 
					"returned failure ");


			if (RRC_SUCCESS == rrc_llim_send_internal_msg(
						RRC_GET_UECC_MODULE_ID(p_rrc_rlc_ue_reestab_cnf->ue_index),
						UECC_LLIM_SUSPEND_UE_ENTITY_RESP,
						sizeof(rrc_uecc_llim_suspend_ue_entity_resp_t),
						&rrc_uecc_llim_suspend_ue_entity_res))

				UEMH_FSM_SET_STATE(p_ue_ctx, UEMH_STATE_UE_ENTITY_IN_SERVICE);  
			rrc_mem_free (p_ue_ctx->curr_op_param.p_suspend_ue_req);
			p_ue_ctx->curr_op_param.p_suspend_ue_req = PNULL;

		}
	}
	RRC_LLIM_UT_TRACE_EXIT();
}
/*SPR:6462 start*/
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_reestb_ue_entity_comp_cnf 
 *
 *   INPUTS       :  void                *p_api
 *                  void                *p_msg
 *                  rrc_llim_ue_ctx_t                   *p_ue_ctx
 *                  rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
 *   OUTPUTS      : None
 *   Description: :  
 *       This function send rlc_reestablish_ue_entity_complete_cnf to UECC.
 *       state UEMH_STATE_ENTITY_IN_SERVICE
 *       event UEMH_EVENT_UECC_REESTB_UE_ENTITY_COMP_CNF
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_reestb_ue_entity_comp_cnf(
		void                *p_api,             /* p_api */
		void                *p_msg,             /* p_msg */
		rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
		/* Pointer to the LLIM global context data */
		rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
		)
{
	rrc_uecc_llim_re_establish_ue_entity_complete_cnf_t 
		uecc_llim_re_establish_ue_entity_comp_cnf;

	rrc_rlc_re_establish_ue_entity_complete_cnf_t *p_rlc_re_establish_ue_entity_comp_cnf =
		(rrc_rlc_re_establish_ue_entity_complete_cnf_t *)p_msg;

    RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in  fsm:p_ue_ctx=%p",p_ue_ctx);/*SPR 17777 +-*/
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_rlc_re_establish_ue_entity_comp_cnf);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	memset_wrapper(&uecc_llim_re_establish_ue_entity_comp_cnf, RRC_NULL,
			sizeof(rrc_uecc_llim_re_establish_ue_entity_complete_cnf_t));

	/* Fill Cell Index */
	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api,
			&uecc_llim_re_establish_ue_entity_comp_cnf.cell_index);

	/* Fill UE Index */
	uecc_llim_re_establish_ue_entity_comp_cnf.ue_index =
		p_rlc_re_establish_ue_entity_comp_cnf->ue_index;

	/* Fill Transaction Id */
	uecc_llim_re_establish_ue_entity_comp_cnf.transaction_id = 
		rrc_get_transaction_id(p_api);

	/* Fill top level response code */
	uecc_llim_re_establish_ue_entity_comp_cnf.response_code = 
		p_rlc_re_establish_ue_entity_comp_cnf->response;


	rrc_llim_send_internal_msg(RRC_GET_UECC_MODULE_ID(p_rlc_re_establish_ue_entity_comp_cnf->ue_index),
			UECC_LLIM_RE_ESTABLISH_UE_ENTITY_COMPLETE_CNF,
			sizeof(rrc_uecc_llim_re_establish_ue_entity_complete_cnf_t),
			&uecc_llim_re_establish_ue_entity_comp_cnf);

	RRC_LLIM_UT_TRACE_EXIT();
}
/*SPR:6462 stop*/

/******************************************************************************
 *   FUNCTION NAME: rrc_mac_fill_scell_info
 *
 *   INPUTS       : rrc_mac_scell_info_t          *p_rrc_mac_scell_info
 *                  rrc_scell_to_add_mod_t        *p_rrc_scell_to_add_mod
 *                  cell_id_operation_list_t      *p_cell_id_operation_list
 *   OUTPUTS      : None
 *   Description:  this function fills the required parameters for a particular
 *                 scell which will sent to MAC
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void rrc_mac_fill_scell_info
(
 rrc_mac_scell_info_t          *p_rrc_mac_scell_info,
 rrc_scell_to_add_mod_t        *p_rrc_scell_to_add_mod,
 scells_operation_list_t  *p_scells_operation_list
 )
{
	RRC_ASSERT(PNULL != p_rrc_mac_scell_info);
	RRC_ASSERT(PNULL != p_rrc_scell_to_add_mod);


	RRC_LLIM_UT_TRACE_ENTER();

	p_rrc_mac_scell_info->cell_id = 
		p_rrc_scell_to_add_mod->cell_index;
	p_rrc_mac_scell_info->scell_index = 
		p_rrc_scell_to_add_mod->scellIndex;

	if ( (DELETE_SCELL == p_scells_operation_list[p_rrc_mac_scell_info->scell_index].
				operation_type ) && 
			(RRC_TRUE == p_scells_operation_list[p_rrc_mac_scell_info->scell_index].
			 scell_to_add_after_deletion_flag ))
	{
		p_rrc_mac_scell_info->operation_type = ADD_SCELL; 
	}
	else
	{
		p_rrc_mac_scell_info->operation_type = p_scells_operation_list[
			p_rrc_mac_scell_info->scell_index].operation_type; 
	}

	if(p_rrc_scell_to_add_mod->bitmask &
			RRM_SCELL_ADD_MOD_MIMO_CAPABILITY_DL_R10_SCELL_PRESENT)
	{
		map_rrm_mac_mimo_capability
			(&p_rrc_mac_scell_info->rrc_mac_supported_mimo_capability_dl_r10,
			 p_rrc_scell_to_add_mod->supported_mimo_capability_dl_r10);
	}

	if(p_rrc_scell_to_add_mod->bitmask & 
			RRM_SCELL_ADD_MOD_RADIO_RES_CONFIG_DEDICATED_SCELL_PRESENT)
	{
		if(p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.bitmask &
				RRM_PHYSICAL_CONFIG_DEDICATED_SCELL_CONFIG_PRESENT)
		{
			if(p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
					physical_config_dedicated_scell.bitmask
					& RRM_RADIO_RES_CONFIG_DEDICATED_SCELL_NON_UL_CONFIG_PRESENT)
			{
				if(p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
						physical_config_dedicated_scell.
						radio_res_dedicated_scell_non_ul_config.bitmask &
						RRM_SCELL_DEDICATED_NON_UL_ANTENNA_INFO_PRESENT)
				{
					p_rrc_mac_scell_info->optional_elems_present 
						|= RRC_MAC_SCELL_TX_MODE_INFO_PRESENT;
					p_rrc_mac_scell_info->tx_mode_info.transmission_mode =
						(U8) (p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
								physical_config_dedicated_scell.
								radio_res_dedicated_scell_non_ul_config.antenna_info_dedicated_r10.
								transmission_mode + 1);

					if(p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
							physical_config_dedicated_scell.
							radio_res_dedicated_scell_non_ul_config.
							antenna_info_dedicated_r10.bitmask &
							RRM_CODEBOOK_SUBSET_RESTRICTION_PRESENT)
					{
						p_rrc_mac_scell_info->optional_elems_present |= 
							RRC_MAC_CODEBOOK_SUBSET_RESTRICTION_V1020_PRESENT;
						p_rrc_mac_scell_info->
							rrc_mac_codebook_subset_restriction_v1020.cbsr_type = 
							rrc_calculate_cbsr_type(p_rrc_scell_to_add_mod->
									radio_res_config_dedicated_scell.
									physical_config_dedicated_scell.
									radio_res_dedicated_scell_non_ul_config.
									antenna_info_dedicated_r10.
									codebook_subset_restriction_r10.num_bits,
									(U8) (p_rrc_scell_to_add_mod->
										radio_res_config_dedicated_scell.
										physical_config_dedicated_scell.
										radio_res_dedicated_scell_non_ul_config.
										antenna_info_dedicated_r10.
										transmission_mode));

						l3_memcpy_wrapper(&p_rrc_mac_scell_info->
								rrc_mac_codebook_subset_restriction_v1020.cbsr_value,
								&p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
								physical_config_dedicated_scell.
								radio_res_dedicated_scell_non_ul_config.
								antenna_info_dedicated_r10.codebook_subset_restriction_r10.
								value,CBSR_MAX_VALUE_V1020);
					}
				}
				if(p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
						physical_config_dedicated_scell.
						radio_res_dedicated_scell_non_ul_config.bitmask &
						RRM_SCELL_DEDICATED_NON_UL_PDSCH_CONFIG_DEDICATED_PRESENT)
				{
					p_rrc_mac_scell_info->optional_elems_present |= 
						RRC_MAC_SCELL_PDSCH_CONFIG_INFO_PRESENT;
					p_rrc_mac_scell_info->pdsch_config_info.p_a = 
						p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
						physical_config_dedicated_scell.
						radio_res_dedicated_scell_non_ul_config.
						pdsch_configuration_dedicated.p_a;
				}
			}
		}
		if(p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
				physical_config_dedicated_scell.bitmask
				& RRM_RADIO_RES_CONFIG_DEDICATED_SCELL_UL_CONFIG_PRESENT)
		{
			/* SPR 11697 Fix Start */

			if((p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
						physical_config_dedicated_scell.
						radio_res_dedicated_scell_ul_config.bitmask &
						RRM_SCELL_DEDICATED_UL_CQI_CONFIG_SCELL_PRESENT) && 
					(( p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
					   physical_config_dedicated_scell.radio_res_dedicated_scell_ul_config.
					   cqi_report_config_scell.bitmask & 
					   RRM_SCELL_CQI_REPORT_CONFIG_APERIODIC_PRESENT ) ||
					 ( p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
					   physical_config_dedicated_scell.radio_res_dedicated_scell_ul_config.
					   cqi_report_config_scell.bitmask &
					   RRM_SCELL_CQI_REPORT_CONFIG_PERIODIC_PRESENT ) ||
					 ( p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
					   physical_config_dedicated_scell.radio_res_dedicated_scell_ul_config.
					   cqi_report_config_scell.bitmask &
					   RRM_SCELL_CQI_REPORT_CONFIG_PMI_RI_REPORT_PRESENT ))) 
			{
				p_rrc_mac_scell_info->optional_elems_present
					|= RRC_MAC_SCELL_CQI_INFO_PRESENT;
				/* SPR 11697 Fix Stop */

				rrc_scell_fill_cqi_info(&p_rrc_mac_scell_info->cqi_info,
						&p_rrc_scell_to_add_mod->radio_res_config_dedicated_scell.
						physical_config_dedicated_scell.
						radio_res_dedicated_scell_ul_config.cqi_report_config_scell);
			}
		}
	}
	if(p_rrc_scell_to_add_mod->bitmask & 
			RRM_SCELL_ADD_MOD_MAC_SCELL_CONFIG_EXTENSION_SCELL_PRESENT)
	{
		rrc_uecc_fill_scell_mac_main_config_extension(
				p_rrc_mac_scell_info,
				&p_rrc_scell_to_add_mod->mac_main_config_extensions);
	}
/* SPR_18107 start */
/* SPR_18107 stop */

    RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: rrc_uecc_fill_scell_mac_main_config_extension
 *
 *   INPUTS       : rrc_mac_scell_info_t                      *p_rrc_mac_scell_info
 *                  rrc_scell_mac_main_config_extensions_t    *p_rrc_scell_mac_main_config_extensions
 *   OUTPUTS      : None
 *   Description:  this function fills the required parameters for a mac main
 *                 config extension which will sent to MAC
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void rrc_uecc_fill_scell_mac_main_config_extension
(
 rrc_mac_scell_info_t *p_rrc_mac_scell_info,
 rrc_scell_mac_main_config_extensions_t *p_rrc_scell_mac_main_config_extensions
 )
{


	RRC_ASSERT(PNULL != p_rrc_mac_scell_info);
	RRC_ASSERT(PNULL != p_rrc_scell_mac_main_config_extensions);

	RRC_LLIM_UT_TRACE_ENTER();

	if(p_rrc_scell_mac_main_config_extensions->bitmask &
			RRC_RRM_SCELL_MAC_MAIN_CONFIG_EXTN_DL_NUM_HARQ_PROC_PRESENT) 
	{
		p_rrc_mac_scell_info->optional_elems_present |=
			RRC_MAC_DL_NUM_HARQ_PROC_PRESENT;
		p_rrc_mac_scell_info->rrc_mac_dl_num_harq_process.dl_num_harq_process =
			p_rrc_scell_mac_main_config_extensions->dl_num_harq_process;
	}
	if(p_rrc_scell_mac_main_config_extensions->bitmask &
			RRC_RRM_SCELL_MAC_MAIN_CONFIG_EXTN_DL_INIT_MCS_PRESENT)
	{
		p_rrc_mac_scell_info->optional_elems_present |=
			RRC_MAC_DL_INIT_MCS_PRESENT;
		p_rrc_mac_scell_info->rrc_mac_dl_init_mcs.dl_init_mcs = 
			p_rrc_scell_mac_main_config_extensions->dl_i_mcs;
	}
	if(p_rrc_scell_mac_main_config_extensions->bitmask &
			RRC_RRM_SCELL_MAC_MAIN_CONFIG_EXTN_NUM_OF_LAYER_INFO_PRESENT)
	{
		p_rrc_mac_scell_info->optional_elems_present |=
			RRC_MAC_SCELL_NUM_OF_LAYER_INFO_PRESENT;
		p_rrc_mac_scell_info->num_of_layer_info.num_of_layer =
			p_rrc_scell_mac_main_config_extensions->num_of_layer;
	}
	if(p_rrc_scell_mac_main_config_extensions->bitmask &
			RRC_RRM_SCELL_MAC_MAIN_CONFIG_EXTN_CODE_BOOK_INDEX_INFO_PRESENT)
	{
		p_rrc_mac_scell_info->optional_elems_present |=
			RRC_MAC_SCELL_CODE_BOOK_INDEX_INFO_PRESENT;
		p_rrc_mac_scell_info->code_book_index_info.code_book_index = 
			p_rrc_scell_mac_main_config_extensions->code_book_index;
	}
	if(p_rrc_scell_mac_main_config_extensions->bitmask &
			RRC_RRM_SCELL_MAC_MAIN_CONFIG_EXTN_USER_LOCATION_TYPE_PRESENT)
	{
		p_rrc_mac_scell_info->optional_elems_present
			|= RRC_MAC_SCELL_USER_LOCATION_TYPE_PRESENT;
		p_rrc_mac_scell_info->user_location_type.user_location_type =
			p_rrc_scell_mac_main_config_extensions->user_location_type;
	}
	if(p_rrc_scell_mac_main_config_extensions->bitmask &
			RRM_MAC_MAIN_CONFIG_EXT_RF_PARAMS_PRESENT)
	{
		p_rrc_mac_scell_info->optional_elems_present
			|= RRC_MAC_SCELL_RF_PARAMS_PRESENT;
		p_rrc_mac_scell_info->rf_params.halfDuplexFdd = 
			p_rrc_scell_mac_main_config_extensions->rf_params_half_duplex_fdd;
	}
	if(p_rrc_scell_mac_main_config_extensions->bitmask &
			RRM_MAC_SCELL_ACTIVATE_STATUS_PRESENT)
	{
		p_rrc_mac_scell_info->optional_elems_present
			|=RRC_MAC_SCELL_ACTIVATE_STATUS_PRESENT ;
		p_rrc_mac_scell_info->scell_activate_status.scellActivateStatus = 
			p_rrc_scell_mac_main_config_extensions->scell_activate_status;
	}

	RRC_LLIM_UT_TRACE_EXIT();

}

/******************************************************************************
 *   FUNCTION NAME: fill_mac_cqi_info
 *   INPUT        : rrc_mac_cqi_info_t                      *p_dst_cqi
 *                  rrc_cqi_report_config_scell_r10_t       *p_src_cqi
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC CQI information for scell
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void rrc_scell_fill_cqi_info
(
 rrc_mac_cqi_info_t                   *p_dst_cqi,
 rrc_cqi_report_config_scell_r10_t    *p_src_cqi
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_dst_cqi);
	RRC_ASSERT(PNULL != p_src_cqi);

	p_dst_cqi->optional_elems_present = 0;

	if(p_src_cqi->bitmask &
			RRM_SCELL_CQI_REPORT_CONFIG_APERIODIC_PRESENT)
	{
		p_dst_cqi->optional_elems_present |=
			RRC_MAC_CQI_APERIODIC_CONFIG_INFO_PRESENT;

		p_dst_cqi->cqi_aperiodic_config_info.cqi_aperiodic_mode =
			uemh_e2v_mac_cqi_reporting_mode_aperiodic(
					p_src_cqi->cqi_reporting_mode_aperiodic);

	}
	if(p_src_cqi->bitmask & 
			RRM_SCELL_CQI_REPORT_CONFIG_PERIODIC_PRESENT)
	{
		p_dst_cqi->optional_elems_present |=
			RRC_MAC_CQI_PERIODIC_CONFIG_INFO_PRESENT;

		p_dst_cqi->cqi_periodic_config_info.optional_elems_present = RRC_NULL;

		if(p_src_cqi->cqi_report_periodic_r10.bitmask &
				RRC_PHY_CQI_REPORT_PERIODIC_R10SETUP_PRESENT)
		{
			p_dst_cqi->cqi_periodic_config_info.optional_elems_present |=
				RRC_MAC_CQI_PMI_CONFIG_INDEX_INFO_V1020_PRESENT;
			p_dst_cqi->cqi_periodic_config_info.request_type = MAC_SETUP;

			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
				optional_elems_present = RRC_NULL;

			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
				cqi_pmi_config_index =
				p_src_cqi->cqi_report_periodic_r10.setup.cqi_pmi_config_index;
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
				cqi_pucch_resource_index =
				p_src_cqi->cqi_report_periodic_r10.setup.cqi_pucch_resource_index;
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
				simultaneous_ack_nack_and_cqi =
				p_src_cqi->cqi_report_periodic_r10.setup.simultaneous_ack_nack_cqi;
			if(p_src_cqi->cqi_report_periodic_r10.setup.
					cqi_format_ind_periodic.bitmask &
					RRC_PHY_CQI_FORMAT_IND_PERIODIC_SUBBAND_CQI_PRESENT)
			{
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					optional_elems_present |= 
					RRC_MAC_CQI_FMT_IND_PERIODIC_SUBBAND_K_PRESENT;

				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					cqi_fmt_ind_periodic_subband_k.
					cqi_format_indicator_periodic_subband_k =
					p_src_cqi->cqi_report_periodic_r10.setup.
					cqi_format_ind_periodic.cqi_format_ind_subband.k;

				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					cqi_fmt_ind_periodic = RRC_MAC_PERIODIC_SUBBAND;
			}
			else
			{
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					cqi_fmt_ind_periodic = RRC_MAC_PERIODIC_WIDEBAND;
			}
			if(p_src_cqi->cqi_report_periodic_r10.setup.bitmask &
					RRC_CQI_REPORT_PERIODIC_R10_SETUP_RI_CONFIG_INDEX_PRESENT)
			{
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					optional_elems_present |=
					RRC_MAC_RI_CONFIG_INDEX_INFO_PRESENT;
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					ri_config_index_info.ri_config_index =
					p_src_cqi->cqi_report_periodic_r10.setup.ri_config_index;
			}

		}
		else
		{
			p_dst_cqi->cqi_periodic_config_info.request_type = MAC_RELEASE;
		}
	}
	if(p_src_cqi->bitmask & 
			RRM_SCELL_CQI_REPORT_CONFIG_PMI_RI_REPORT_PRESENT)
	{
		p_dst_cqi->optional_elems_present |=
			RRC_MAC_CQI_REPORT_CONFIG_V920_PRESENT;
		p_dst_cqi->cqi_report_config_v920.optional_elems_present |=
			RRC_MAC_CQI_REPORT_CONFIG_PMI_RI_REPORT_R9_PRESENT;
		p_dst_cqi->cqi_report_config_v920.rrc_mac_pmi_ri_report_r9.
			pmi_ri_report_r9 = p_src_cqi->cqi_report_pmi_ri_report_r10;
	}
}
/******************************************************************************
 *   FUNCTION NAME: map_rrm_mac_mimo_capability
 *   INPUT        : rrc_mac_supported_mimo_capability_dl_r10_t   *p_rrc_mac_mimo_capability
 *                  U8                                            mimo_capability_dl_r10
 *   OUTPUT       : none
 *   DESCRIPTION  : This function maps the mimo capability received from rrm 
 *                  towards MAC Interface
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void map_rrm_mac_mimo_capability
(
 rrc_mac_supported_mimo_capability_dl_r10_t   *p_rrc_mac_mimo_capability,
 U8                                            mimo_capability_dl_r10
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	switch(mimo_capability_dl_r10)
	{
		case DL_TWO_LAYERS:
			p_rrc_mac_mimo_capability->num_Of_layer = RRC_MAC_MIMO_DL_TWO_LAYERS;
			break;
		case DL_FOUR_LAYERS:
			p_rrc_mac_mimo_capability->num_Of_layer = RRC_MAC_MIMO_DL_FOUR_LAYERS;
			break;
		case DL_EIGHT_LAYERS:
			RRC_TRACE(RRC_WARNING, 
					"Mimo capability for eight layers not supported");
			break;
		default:
			RRC_TRACE(RRC_WARNING, 
					"Invalid value recevied for mimo capability dl");
			break;

	}
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: rrc_mac_fill_ca_config_ue_info
 *
 *   INPUTS       : rrc_mac_carrier_aggr_config_t   *p_rrc_mac_carrier_aggr_config
 *                  rrm_mac_config_t              *p_rrm_mac_config,
 *                  rrm_scell_config_t            *p_rrm_scell_config,
 *                  scells_operation_list_t  *p_scells_operation_list
 *   OUTPUTS      : None
 *   Description:  this function fills the CA CONFIG UE INFO
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void rrc_mac_fill_ca_config_ue_info
(
 rrc_mac_carrier_aggr_config_t *p_rrc_mac_carrier_aggr_config,
 rrm_mac_config_t              *p_rrm_mac_config,
 rrm_scell_config_t            *p_rrm_scell_config,
 scells_operation_list_t  *p_scells_operation_list
 )
{
	rrc_counter_t          count_scell = RRC_NULL;

	rrc_counter_t         num_scells_present = RRC_NULL;


	RRC_ASSERT(PNULL != p_rrc_mac_carrier_aggr_config);
	/* SPR 14562 Deleted asserts */

	RRC_LLIM_UT_TRACE_ENTER();

	/* SPR 14562 Fix Start*/
	if(PNULL != p_rrm_mac_config)
	{
		if(p_rrm_mac_config->bitmask & 
				RRM_MAC_CONFIG_MAC_MAIN_CONFIG_PRESENT)
		{
			if(p_rrm_mac_config->mac_main_config.bitmask &
					RRC_MAC_MAIN_CONFIG_V1020_PRESENT)
			{
				if(p_rrm_mac_config->mac_main_config.mac_main_config_v1020.bitmask 
						& RRC_MAC_MAIN_CONFIG_V1020_SCELL_DEACTIVATION_TIMER_PRESENT)
				{
					p_rrc_mac_carrier_aggr_config->presence_bitmask |= 
						RRC_MAC_SCELL_DEACTIVATION_TIMER_INFO_PRESENT;

					map_scell_deactivation_timer_mac(&p_rrc_mac_carrier_aggr_config->
							scell_deactivation_timer,
							p_rrm_mac_config->
							mac_main_config.mac_main_config_v1020.
							scell_deactivation_timer);
				}
			}
		}
	}

	if(PNULL != p_rrm_scell_config) 
	{
		/* SPR 14562 Fix End */
		if(p_rrm_scell_config->bitmask &
				RRM_SCELL_ADD_MOD_LIST_PRESENT)
		{
			p_rrc_mac_carrier_aggr_config->count = p_rrm_scell_config->
				scell_add_mod_list.count;

			for(count_scell = RRC_NULL;count_scell < p_rrm_scell_config->scell_add_mod_list.
					count;count_scell++)
			{
				rrc_mac_fill_scell_info(
						&p_rrc_mac_carrier_aggr_config->
						rrc_mac_scell_info[count_scell],&p_rrm_scell_config->
						scell_add_mod_list.rrc_scell_to_add_mod[count_scell],
						p_scells_operation_list
						);
			}
		}

		if(p_rrm_scell_config->bitmask &
				RRM_SCELL_RELEASE_LIST_PRESENT)
		{

			num_scells_present =  p_rrc_mac_carrier_aggr_config->count;
			p_rrc_mac_carrier_aggr_config->count +=
				p_rrm_scell_config->scell_release_list.count;
			for(count_scell = RRC_NULL; count_scell < p_rrm_scell_config->scell_release_list.
					count; count_scell++)
			{
				p_rrc_mac_carrier_aggr_config->
					rrc_mac_scell_info[num_scells_present+count_scell].cell_id = 
					p_rrm_scell_config->scell_release_list.rrc_scell_to_release[
					count_scell].cell_index;
				p_rrc_mac_carrier_aggr_config->
					rrc_mac_scell_info[num_scells_present + count_scell].scell_index =
					p_rrm_scell_config->scell_release_list.rrc_scell_to_release[
					count_scell].scellIndex;
				p_rrc_mac_carrier_aggr_config->
					rrc_mac_scell_info[num_scells_present + count_scell].operation_type = DELETE_SCELL;
			}

		}

		/*CA_LC_BND_WIDTH_INFO_START*/
		if(p_rrm_scell_config->bitmask &
				RRM_SCELL_CONFIG_CA_LC_BANDWIDTH_DIST_INFO_PRESENT)
		{
			p_rrc_mac_carrier_aggr_config->
				presence_bitmask |= RRC_MAC_CA_LC_BANDWIDTH_DIST_INFO_PRESENT;
			l3_memcpy_wrapper(&p_rrc_mac_carrier_aggr_config->
					ca_lc_bandwidth_dist_info,
					&p_rrm_scell_config->ca_lc_bandwidth_dist_info,
					sizeof(rrc_mac_ca_lc_bandwidth_dist_info_t));
		}
	}
	/*CA_LC_BND_WIDTH_INFO_STOP*/
	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: rrc_calculate_cbsr_type
 *
 *   INPUTS       : U8    num_bits
 *                  -received from RRM
 *                  U8    transmission_mode
 *                  -received from RRM
 *   OUTPUTS      : cbsr_type
 *   Description:  this function fills the CA CONFIG UE INFO
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
U8 rrc_calculate_cbsr_type
(
 U8    num_bits,
 U8    transmission_mode         
 )
{
	U8 cbsr_type = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	switch(transmission_mode)
	{
		case TRANSMISSION_MODE_TM3:
			if(N2_TX_ANTENNA_TM3_NUM_BITS_V1020 == num_bits)
			{
				cbsr_type = N2_TX_ANTENNA_TM3_V1020;
			}
			else if(N4_TX_ANTENNA_TM3_NUM_BITS_V1020 == num_bits)
			{
				cbsr_type = N4_TX_ANTENNA_TM3_V1020;
			}
			else
			{
				cbsr_type = TX_ANTENNA_INVALID_VAL; 
			}
			break;
		case TRANSMISSION_MODE_TM4:
			if(N2_TX_ANTENNA_TM4_NUM_BITS_V1020 == num_bits)
			{
				cbsr_type = N2_TX_ANTENNA_TM4_V1020;
			}
			else if(N4_TX_ANTENNA_TM4_NUM_BITS_V1020 == num_bits)
			{
				cbsr_type = N4_TX_ANTENNA_TM4_V1020;
			}
			else
			{
				cbsr_type = TX_ANTENNA_INVALID_VAL; 
			}
			break;
		case TRANSMISSION_MODE_TM5:
			if(N2_TX_ANTENNA_TM5_NUM_BITS_V1020 == num_bits)
			{
				cbsr_type = N2_TX_ANTENNA_TM5_V1020;
			}
			else if(N4_TX_ANTENNA_TM5_NUM_BITS_V1020 == num_bits)
			{
				cbsr_type = N4_TX_ANTENNA_TM5_V1020;
			}
			else
			{
				cbsr_type = TX_ANTENNA_INVALID_VAL; 
			}
			break;
		case TRANSMISSION_MODE_TM6:
			if(N2_TX_ANTENNA_TM6_NUM_BITS_V1020 == num_bits)
			{
				cbsr_type = N2_TX_ANTENNA_TM6_V1020;
			}
			else if(N4_TX_ANTENNA_TM6_NUM_BITS_V1020 == num_bits)
			{
				cbsr_type = N4_TX_ANTENNA_TM6_V1020;
			}
			else
			{
				cbsr_type = TX_ANTENNA_INVALID_VAL; 
			}
			break;
		case TRANSMISSION_MODE_TM8_V920:
			if(N2_TX_ANTENNA_TM8_NUM_BITS_R9_V1020 == num_bits)
			{
				cbsr_type = N2_TX_ANTENNA_TM8_R9_V1020;
			}
			else if(N4_TX_ANTENNA_TM8_NUM_BITS_R9_V1020 == num_bits)
			{
				cbsr_type = N4_TX_ANTENNA_TM8_R9_V1020;
			}
			else
			{
				cbsr_type = TX_ANTENNA_INVALID_VAL; 
			}
			break;
		default:
			cbsr_type = TX_ANTENNA_INVALID_VAL; 
			break;
	}

	RRC_LLIM_UT_TRACE_EXIT();

	return cbsr_type;

}

/******************************************************************************
 *   FUNCTION NAME: rrc_fill_phy_scell_config_list
 *
 *   INPUTS       : rrc_phy_scell_config_list_t *p_rrc_phy_scell_config_list
 *                  rrm_scell_config_t          *p_rrm_scell_config
 *                  scells_operation_list_t  *p_scells_operation_list
 *   OUTPUTS      : None
 *   Description  : this function fills the CA configuration received from RRM
 *                 that to be sent to phy
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void rrc_fill_phy_scell_config_list
(
 rrc_phy_scell_config_list_t *p_rrc_phy_scell_config_list,
 rrm_scell_config_t          *p_rrm_scell_config,
 scells_operation_list_t *p_scells_operation_list
 )
{
	U16   count_scell = RRC_NULL;

	U16  num_scells_present = RRC_NULL;


	RRC_ASSERT(PNULL != p_rrc_phy_scell_config_list);
	RRC_ASSERT(PNULL != p_rrm_scell_config);
	RRC_ASSERT(PNULL != p_scells_operation_list);

	RRC_LLIM_UT_TRACE_ENTER();

	if(p_rrm_scell_config->bitmask & RRM_SCELL_ADD_MOD_LIST_PRESENT)
	{
		p_rrc_phy_scell_config_list->count = 
			p_rrm_scell_config->scell_add_mod_list.count;
		for(count_scell = RRC_NULL; count_scell < p_rrc_phy_scell_config_list->count; count_scell++)
		{
			p_rrc_phy_scell_config_list->rrc_phy_scell_config[count_scell].cell_index =
				p_rrm_scell_config->scell_add_mod_list.rrc_scell_to_add_mod[count_scell].cell_index;

			p_rrc_phy_scell_config_list->rrc_phy_scell_config[count_scell].bitmask |=
				RRC_PHY_CONFIG_OPERATION_LIST_PRESENT;

			p_rrc_phy_scell_config_list->rrc_phy_scell_config[count_scell].operation_type = 
				p_scells_operation_list[p_rrc_phy_scell_config_list->
				rrc_phy_scell_config[count_scell].cell_index].operation_type;

			if(p_rrm_scell_config->scell_add_mod_list.rrc_scell_to_add_mod[count_scell].
					bitmask & RRM_SCELL_ADD_MOD_RADIO_RES_CONFIG_DEDICATED_SCELL_PRESENT)
			{
				p_rrc_phy_scell_config_list->rrc_phy_scell_config[count_scell].bitmask |=
					RRC_PHY_CONFIG_DEDICATED_SCELL_PRESENT;

				l3_memcpy_wrapper(&p_rrc_phy_scell_config_list->rrc_phy_scell_config[count_scell].
						radio_res_config_dedicated_scell,&p_rrm_scell_config->
						scell_add_mod_list.rrc_scell_to_add_mod[count_scell].
						radio_res_config_dedicated_scell,
						sizeof(rrc_radio_res_config_dedicated_scell_t));
			}
		}
	}
	if(p_rrm_scell_config->bitmask & RRM_SCELL_RELEASE_LIST_PRESENT)
	{
		num_scells_present = p_rrc_phy_scell_config_list->count;
		p_rrc_phy_scell_config_list->count +=
			p_rrm_scell_config->scell_release_list.count;
		for(count_scell = RRC_NULL; count_scell < p_rrm_scell_config->scell_release_list.count; count_scell++)
		{
			p_rrc_phy_scell_config_list->rrc_phy_scell_config[num_scells_present + count_scell].cell_index = 
				p_rrm_scell_config->scell_release_list.rrc_scell_to_release[count_scell].cell_index;

			p_rrc_phy_scell_config_list->rrc_phy_scell_config[num_scells_present + count_scell].bitmask |=
				RRC_PHY_CONFIG_OPERATION_LIST_PRESENT;

			p_rrc_phy_scell_config_list->rrc_phy_scell_config[num_scells_present + count_scell].
				operation_type = DELETE_SCELL;
		}


	}

	RRC_LLIM_UT_TRACE_EXIT();

}
/******************************************************************************
 *   FUNCTION NAME: fill_mac_pucch_format
 *
 *   INPUTS       : rrc_pucch_channel_selection_config_v1020_t
 *                               *p_pucch_config
 *                  rrc_mac_pucch_format_r10_t   *p_mac_pucch_format
 *
 *   OUTPUTS      : None
 *   Description: : This function fills rrc_pucch_channel_selection_config_v1020_t
 *
 *   RETURNS      : None
 * ******************************************************************************/
void fill_mac_pucch_format (
		rrc_pucch_channel_selection_config_v1020_t  *p_pucch_config,/*src*/
		rrc_mac_pucch_channel_selection_config_v1020_t *p_mac_pucch_config /*dest*/
		)
{
	U8 index = RRC_NULL;
	U8 count = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();

	if(p_pucch_config->bitmask &
			RRC_N1PUCCH_AN_CS_R10_PRESENT)
	{
		p_mac_pucch_config->request_type
			= p_pucch_config->channel_selection_n1_pucch_an_cs_r10.request_type;

		if (p_pucch_config->channel_selection_n1_pucch_an_cs_r10.bitmask
				& RRC_N1PUCCH_AN_CS_LIST_R10_PRESENT)
		{
			p_mac_pucch_config->count = p_pucch_config->channel_selection_n1_pucch_an_cs_r10.
				n1pucch_an_cs_list_r10.count;

			for (index = RRC_NULL; index < p_mac_pucch_config->count; index++)
			{
				p_mac_pucch_config->rrc_mac_n1pucch_an_cs_list_r10[index].count =
					p_pucch_config->channel_selection_n1_pucch_an_cs_r10.
					n1pucch_an_cs_list_r10.n1_pucch_an_cs[index].count;

				for (count = RRC_NULL; count < p_mac_pucch_config->
						rrc_mac_n1pucch_an_cs_list_r10[index].count; count++)
				{
					p_mac_pucch_config->rrc_mac_n1pucch_an_cs_list_r10[index].
						rrc_mac_n1pucch_an_cs_r10[count].rrc_mac_n1pucch_an_cs =
						p_pucch_config->channel_selection_n1_pucch_an_cs_r10.
						n1pucch_an_cs_list_r10.n1_pucch_an_cs[index].
						n1_pucch_an_cs[count];
				}
			}
		}
	}


	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: fill_mac_cqi_info_r10
 *   INPUT        : rrc_mac_cqi_info_t                      *p_dst_cqi
 *                  rrc_cqi_report_config_r10_t             *p_src_cqi
 *   OUTPUT       : none
 *   DESCRIPTION  : This function fills MAC CQI information
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
void fill_mac_cqi_info_r10
(
 rrc_mac_cqi_info_t             *p_dst_cqi, /* destination */
 rrc_cqi_report_config_r10_t    *p_src_cqi /* source */
 )
{
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_dst_cqi);
	RRC_ASSERT(PNULL != p_src_cqi);

	p_dst_cqi->optional_elems_present = 0;

	if(p_src_cqi->bitmask &
			RRC_PHY_CQI_REPORT_CONFIG_R10_REPORT_APERIODIC_R10_PRESENT)
	{
		if(p_src_cqi->cqi_report_aperiodic_r10.bitmask &
				RRC_PHY_CQI_REPORT_APERIODIC_R10_SETUP_PRESENT)
		{
			p_dst_cqi->optional_elems_present |=
				RRC_MAC_CQI_APERIODIC_CONFIG_INFO_PRESENT;

			p_dst_cqi->cqi_aperiodic_config_info.cqi_aperiodic_mode =
				uemh_e2v_mac_cqi_reporting_mode_aperiodic(
						p_src_cqi->cqi_report_aperiodic_r10.setup.
						cqi_reporting_mode_aperiodic);
			if(p_src_cqi->cqi_report_aperiodic_r10.setup.bitmask &
					RRC_CQI_REPORT_APERIODIC_R10_SETUP_APERIODIC_CSI_TRIGGER_PRESENT)
			{
				/*TC_049_START*/
				p_dst_cqi->cqi_aperiodic_config_info.optional_elems_present |=
					RRC_MAC_APERIODIC_CSI_TRIGGER_R10_PRESENT;
				/*TC_049_END*/
				p_dst_cqi->cqi_aperiodic_config_info.aperiodic_csi_trigger_r10.
					trigger1r10 = p_src_cqi->cqi_report_aperiodic_r10.setup.
					aperiodic_csi_trigger.trigger1;
				p_dst_cqi->cqi_aperiodic_config_info.aperiodic_csi_trigger_r10.
					trigger2r10 = p_src_cqi->cqi_report_aperiodic_r10.setup.
					aperiodic_csi_trigger.trigger2;
			}
		}
	}
	if(p_src_cqi->bitmask & 
			RRC_PHY_CQI_REPORT_CONFIG_R10_REPORT_PERIODIC_R10_PRESENT)
	{
		p_dst_cqi->optional_elems_present |=
			RRC_MAC_CQI_PERIODIC_CONFIG_INFO_PRESENT;
		p_dst_cqi->cqi_periodic_config_info.optional_elems_present = 0;
		if(p_src_cqi->cqi_report_periodic_r10.bitmask &
				RRC_PHY_CQI_REPORT_PERIODIC_R10SETUP_PRESENT)
		{
			p_dst_cqi->cqi_periodic_config_info.optional_elems_present |=
				RRC_MAC_CQI_PMI_CONFIG_INDEX_INFO_V1020_PRESENT;
			p_dst_cqi->cqi_periodic_config_info.request_type = MAC_SETUP;
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
				optional_elems_present = 0;
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
				cqi_pmi_config_index =
				p_src_cqi->cqi_report_periodic_r10.setup.cqi_pmi_config_index;
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
				cqi_pucch_resource_index =
				p_src_cqi->cqi_report_periodic_r10.setup.cqi_pucch_resource_index;
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
				simultaneous_ack_nack_and_cqi =
				p_src_cqi->cqi_report_periodic_r10.setup.simultaneous_ack_nack_cqi;
			if(p_src_cqi->cqi_report_periodic_r10.setup.
					cqi_format_ind_periodic.bitmask &
					RRC_PHY_CQI_FORMAT_IND_PERIODIC_SUBBAND_CQI_PRESENT)
			{
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					optional_elems_present |= 
					RRC_MAC_CQI_FMT_IND_PERIODIC_SUBBAND_K_PRESENT;

				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					cqi_fmt_ind_periodic_subband_k.
					cqi_format_indicator_periodic_subband_k =
					p_src_cqi->cqi_report_periodic_r10.setup.
					cqi_format_ind_periodic.cqi_format_ind_subband.k;

				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					cqi_fmt_ind_periodic = RRC_MAC_PERIODIC_SUBBAND;
			}
			else
			{
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					cqi_fmt_ind_periodic = RRC_MAC_PERIODIC_WIDEBAND;
			}
			if(p_src_cqi->cqi_report_periodic_r10.setup.bitmask &
					RRC_CQI_REPORT_PERIODIC_R10_SETUP_RI_CONFIG_INDEX_PRESENT)
			{
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					optional_elems_present |=
					RRC_MAC_RI_CONFIG_INDEX_INFO_PRESENT;
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.
					ri_config_index_info.ri_config_index =
					p_src_cqi->cqi_report_periodic_r10.setup.ri_config_index;
			}
			/* eICIC ue reconfig changes start */
			if(p_src_cqi->cqi_report_periodic_r10.setup.bitmask &
					RRC_CQI_REPORT_PERIODIC_R10_SETUP_CSI_CONFIG_INDEX_PRESENT)
			{
				p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.optional_elems_present |=
					RRC_MAC_CSI_CONFIG_INDEX_V10_PRESENT;
				if(p_src_cqi->cqi_report_periodic_r10.setup.csi_config_index.bitmask &
						RRC_PHY_CQI_REPORT_PERIODIC_R10_SETUP_CSI_CONFIG_INDEX_SETUP_PRESENT)
				{
					p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.csi_config_index_v10.optional_elems_present = 0;

					p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.csi_config_index_v10.optional_elems_present |=
						RRC_MAC_CQI_PMI_CONFIG_INDEX2_R10_PRESENT;

					p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.csi_config_index_v10.request_type = MAC_SETUP;

					p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.csi_config_index_v10.
						cqi_pmi_config_index2_r10.cqi_pmi_config_index2 =
						p_src_cqi->cqi_report_periodic_r10.setup.csi_config_index.setup.cqi_pmi_config_index2;

					if(p_src_cqi->cqi_report_periodic_r10.setup.csi_config_index.setup.bitmask &
							RRC_PHY_CQI_PERIODIC_R10_SETUP_CSI_RI_CONFIG_INDEX2_PRESENT)
					{
						p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.csi_config_index_v10.optional_elems_present |=
							RRC_MAC_RI_CONFIG_INDEX2_R10_PRESENT;
						p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.csi_config_index_v10.
							ri_config_index2_r_10.ri_config_index =
							p_src_cqi->cqi_report_periodic_r10.setup.csi_config_index.setup.ri_config_index2;    

					}
				}
				else if(RELEASE == p_src_cqi->cqi_report_periodic_r10.setup.csi_config_index.request_type)
				{
					p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.csi_config_index_v10.request_type = MAC_RELEASE;
				}
			}
			/* eICIC ue reconfig changes stop */
			/*Bug_12742_fix_start*/
			if (p_src_cqi->cqi_report_periodic_r10.setup.bitmask &
					RRC_CQI_REPORT_PERIODIC_R10_SETUP_CQI_MASK_PRESENT)
			{
				p_dst_cqi->optional_elems_present |=
					RRC_MAC_CQI_REPORT_CONFIG_V920_PRESENT;
				p_dst_cqi->cqi_report_config_v920.optional_elems_present |=
					RRC_MAC_CQI_REPORT_CONFIG_CQI_MASK_R9_PRESENT;
				p_dst_cqi->cqi_report_config_v920.rrc_mac_cqi_mask_r9.
					cqi_mask_r9 = p_src_cqi->cqi_report_periodic_r10.
					setup.cqi_mask_r9;
			}
			/*Bug_12742_fix_stop*/
		}
		else
		{
			p_dst_cqi->cqi_periodic_config_info.request_type = MAC_RELEASE;
		}
	}
	/********needs to be checked whether bitmask is properly handled or not*********/
	if(p_src_cqi->bitmask & 
			RRC_PHY_CQI_REPORT_CONFIG_R10_PMI_RI_REPORT_R9_PRESENT)
	{
		p_dst_cqi->optional_elems_present |=
			RRC_MAC_CQI_REPORT_CONFIG_V920_PRESENT;
		p_dst_cqi->cqi_report_config_v920.optional_elems_present |=
			RRC_MAC_CQI_REPORT_CONFIG_PMI_RI_REPORT_R9_PRESENT;
		p_dst_cqi->cqi_report_config_v920.rrc_mac_pmi_ri_report_r9.
			pmi_ri_report_r9 = p_src_cqi->cqi_report_pmi_ri_report_r10;
	}
	/* eICIC ue reconfig changes start */
	if(p_src_cqi->bitmask & 
			RRC_PHY_CQI_REPORT_CONFIG_R10_CSI_SUBFRAME_PATTERN_CONFIG_R10_PRESENT)
	{
		p_dst_cqi->optional_elems_present |=
			RRC_MAC_CQI_CSI_SUBFRAME_PATTERN_CONFIG_V10_PRESENT;

		if((p_src_cqi->csi_subframePattern_r10.bitmask &
					RRC_PHY_CQI_REPORT_CONFIG_R10_CSI_SUBFRAMEPATTERN_CONFIG_SETUP) && 
				(SETUP == p_src_cqi->csi_subframePattern_r10.request_type))
		{
			p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.optional_elems_present = 0;
			p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.optional_elems_present |=
				RRC_MAC_CSI_MEAS_SUBFRAME_SET1_R10_PRESENT;
			p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.optional_elems_present |=
				RRC_MAC_CSI_MEAS_SUBFRAME_SET2_R10_PRESENT;
			p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.request_type = MAC_SETUP;

			if(p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set1_r10.bitmask &
					RRC_PHY_MEAS_SUBFRAME_PATTERN_FDD_R10)
			{
				p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.choice = FDD;
				p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.count = MAX_SUBFRAME_PATTERN_FDD; 
				l3_memcpy_wrapper(p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.csi_measurement_subset,
						p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set1_r10.
						subframe_pattern_fdd_r10.data,
						sizeof(U8)*MAX_SUBFRAME_PATTERN_FDD);
			}
			else if(p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set1_r10.bitmask &
					RRC_PHY_MEAS_SUBFRAME_PATTERN_TDD_R10)
			{
				if(p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set1_r10.
						subframe_pattern_tdd_r10.bitmask & RRC_PHY_SUBFRAME_PATTERNTDD_SUBFRAME_CONFIG1_5_R10)
				{
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.choice = TDD_CONFIG_1_5; 
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.count = MAX_SUBFRAME_CONFIG1_5_TDD;
					l3_memcpy_wrapper(p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.csi_measurement_subset,
							p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set1_r10.
							subframe_pattern_tdd_r10.subframe_config1_5_r10,
							sizeof(U8)*MAX_SUBFRAME_CONFIG1_5_TDD);
				}
				else if(p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set1_r10.
						subframe_pattern_tdd_r10.bitmask & RRC_PHY_SUBFRAME_PATTERNTDD_SUBFRAME_CONFIG0_R10)
				{
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.choice = TDD_CONFIG_0;
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.count = MAX_SUBFRAME_CONFIG0_TDD; 
					l3_memcpy_wrapper(p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.csi_measurement_subset,
							p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set1_r10.
							subframe_pattern_tdd_r10.subframe_config0_r10,
							sizeof(U8)*MAX_SUBFRAME_CONFIG0_TDD);
				}
				else if(p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set1_r10.
						subframe_pattern_tdd_r10.bitmask & RRC_PHY_SUBFRAME_PATTERNTDD_SUBFRAME_CONFIG6_R10)
				{
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.choice = TDD_CONFIG_6;
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.count = MAX_SUBFRAME_CONFIG6_TDD; 
					l3_memcpy_wrapper(p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set1_r10.csi_measurement_subset,
							p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set1_r10.
							subframe_pattern_tdd_r10.subframe_config6_r10,
							sizeof(U8)*MAX_SUBFRAME_CONFIG6_TDD);
				}
			}
			if(p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set2_r10.bitmask &
					RRC_PHY_MEAS_SUBFRAME_PATTERN_FDD_R10)
			{
				p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.choice = FDD;
				p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.count = MAX_SUBFRAME_PATTERN_FDD; 
				l3_memcpy_wrapper(p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.csi_measurement_subset,
						p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set2_r10.
						subframe_pattern_fdd_r10.data,
						sizeof(U8)*MAX_SUBFRAME_PATTERN_FDD);
			}
			else if(p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set2_r10.bitmask &
					RRC_PHY_MEAS_SUBFRAME_PATTERN_TDD_R10)
			{
				if(p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set2_r10.
						subframe_pattern_tdd_r10.bitmask & RRC_PHY_SUBFRAME_PATTERNTDD_SUBFRAME_CONFIG1_5_R10)
				{
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.choice = TDD_CONFIG_1_5; 
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.count = MAX_SUBFRAME_CONFIG1_5_TDD;
					l3_memcpy_wrapper(p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.csi_measurement_subset,
							p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set2_r10.
							subframe_pattern_tdd_r10.subframe_config1_5_r10,
							sizeof(U8)*MAX_SUBFRAME_CONFIG1_5_TDD);
				}
				else if(p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set2_r10.
						subframe_pattern_tdd_r10.bitmask & RRC_PHY_SUBFRAME_PATTERNTDD_SUBFRAME_CONFIG0_R10)
				{
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.choice = TDD_CONFIG_0;
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.count = MAX_SUBFRAME_CONFIG0_TDD; 
					l3_memcpy_wrapper(p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.csi_measurement_subset,
							p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set2_r10.
							subframe_pattern_tdd_r10.subframe_config0_r10,
							sizeof(U8)*MAX_SUBFRAME_CONFIG0_TDD);
				}
				else if(p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set2_r10.
						subframe_pattern_tdd_r10.bitmask & RRC_PHY_SUBFRAME_PATTERNTDD_SUBFRAME_CONFIG6_R10)
				{
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.choice = TDD_CONFIG_6;
					p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.count = MAX_SUBFRAME_CONFIG6_TDD; 
					l3_memcpy_wrapper(p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.rrc_mac_csi_meas_subframe_set2_r10.csi_measurement_subset,
							p_src_cqi->csi_subframePattern_r10.csi_subframe_pattern_config_r10_setup.csi_meas_subframe_set2_r10.
							subframe_pattern_tdd_r10.subframe_config6_r10,
							sizeof(U8)*MAX_SUBFRAME_CONFIG6_TDD);
				}
			}
		}
		else if(RELEASE == p_src_cqi->csi_subframePattern_r10.request_type)
		{
			/* eICIC code changes start */
			p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.optional_elems_present = 0;
			p_dst_cqi->rrc_mac_csi_subframe_pattern_config_v10.request_type = MAC_RELEASE;

			/* releasing csi_config_index */
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.optional_elems_present |=
				RRC_MAC_CSI_CONFIG_INDEX_V10_PRESENT;
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.csi_config_index_v10.optional_elems_present = RRC_NULL;
			p_dst_cqi->cqi_periodic_config_info.cqi_pmi_config_index_info_v1020.csi_config_index_v10.request_type = MAC_RELEASE;
		}
		/* eICIC code changes stop */
	}
	/* eICIC ue reconfig changes stop */
	RRC_LLIM_UT_TRACE_EXIT();

}



/******************************************************************************
 *   FUNCTION NAME: update_cell_id_operation_validity_for_config_error 
 *
 *   INPUTS       : rrc_mac_reconfigure_ue_entity_cnf_t     *p_msg
 *                   - Pointer to the RRC_MAC_RECONFIGURE_ENTITY_CNF msg
 *                     received from MAC
 *
 *                  rrc_llim_ue_ctx_t   *p_ue_ctx  
 *                    - Pointer to the LLIM global UE context data 
 *
 *   OUTPUTS      : None
 *   Description: : This function updates cell_id_operation_validity for the
 *                  scells whose configuration failed at MAC
 *
 *   RETURNS      : None
 * ******************************************************************************/
static void  update_cell_id_operation_validity_for_config_error(
		rrc_mac_reconfigure_ue_entity_cnf_t     *p_msg, 
		rrc_llim_ue_ctx_t   *p_ue_ctx          /* ue context */
		)
{
	rrc_uecc_llim_modify_lc_req_t  *p_modify_lc_param = PNULL;
	U8 index1 = 0 , scell_index = 0, index2 = 0 ;
	RRC_LLIM_UT_TRACE_ENTER();  

	p_modify_lc_param = &p_ue_ctx->curr_op_param.p_rcfg_ue->uecc_modify_lc;   


	if (p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
			scell_config.bitmask & RRM_SCELL_ADD_MOD_LIST_PRESENT )
	{
		/* Rollback will be done for following
		 * (1) If Addition of cells was successful, then it would be released
		 * (2) If Modification  of cells was successful , then it would be
		 *     rolled back to previous config
		 * (3) both 
		 */
		if((p_msg->ca_config_error_counter  > 0 ) ||
				(p_msg->reconfig_ca_config_error_counter > 0))
		{
			for (index1 = 0 ;
					index1 < p_msg->ca_config_error_counter;
					index1++)
			{
				/* Finding the scell index corresponding to the cell_id */
				for (index2 = 0 ; 
						index2< (p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].scell_config.scell_add_mod_list.count);
						index2++)
				{
					if (p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
							scell_config.scell_add_mod_list.rrc_scell_to_add_mod[index2].cell_index
							==  p_msg->rrc_mac_create_ca_config_err[index1].cell_id )
					{
						scell_index = p_modify_lc_param->
							modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
							scell_config.scell_add_mod_list.rrc_scell_to_add_mod[index2].scellIndex; 
						break ;
					}
					else
						continue;
				}
				update_cell_id_operation_validity(
						(p_modify_lc_param->scells_operation_list), 
						scell_index,
						RRC_FALSE);
				/* since addition of this Scell failed, no need to
				 * release this Scell */
			}

			/* If modification request for this cell is sent then , 
			 * revert the cell to the previous config */
			for (index1 = 0 ;
					index1 < p_msg->reconfig_ca_config_error_counter;
					index1++)
			{
				/* Finding the scell index corresponding to the cell_id */
				for (index2 = 0 ; 
						index2< (p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].scell_config.scell_add_mod_list.count);
						index2++)
				{
					if (p_modify_lc_param->modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
							scell_config.scell_add_mod_list.rrc_scell_to_add_mod[index2].cell_index
							==   p_msg->rrc_mac_reconfigure_ca_config_err[index1].cell_id)
					{
						scell_index = p_modify_lc_param->
							modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION].
							scell_config.scell_add_mod_list.rrc_scell_to_add_mod[index2].scellIndex; 
						break ;
					}
					else
						continue;
				}

				update_cell_id_operation_validity(
						(p_modify_lc_param->scells_operation_list),
						scell_index,
						RRC_FALSE);
				/* since modification of this Scell failed, no need to
				 * revert it to previous configuration as it is already
				 * at older configuration */

			}
		}

	}
	RRC_LLIM_UT_TRACE_EXIT();  

}    

/******************************************************************************
 *   FUNCTION NAME: update_cell_id_operation_validity 
 *
 *   INPUTS       : cell_id_operation_list_t *p_cell_id_operation_list
 *                   -Pointer to the cell_id_operation_list that holds the
 *                    operation_type to be applied on cells and the valid_ind
 *                    that indicates that the entry is valid or not
 *
 *                  U8 cell_index
 *                   - Value of the cell index for which the value has to be
 *                   updated
 *
 *                  U8 validity
 *                   - Value of the validity to be applied to the cell
 *
 *   OUTPUTS      : None
 *   Description: : This function updates the cell_id_operation_list's valid_ind 
 *                  flag to the validity as passed in function arguments 
 *
 *   RETURNS      : None
 * ******************************************************************************/
static void update_cell_id_operation_validity(
		scells_operation_list_t *p_cell_id_operation_list,
		U8 cell_index,
		U8 validity)
{
	if(( PNULL != p_cell_id_operation_list ) &&( cell_index < MAX_NUM_CELLS ))
	{
		p_cell_id_operation_list[cell_index].valid_ind =  validity;
	}
	else
	{
		RRC_TRACE(RRC_WARNING, 
				"Invalid Cell Index Received/rrc_uecc_llim_modify_lc_req_t is NULL ");

	}
}   

/******************************************************************************
 *   FUNCTION NAME: update_scell_config_modify_lc_req_for_rollback
 *
 *   INPUTS       :  rrc_uecc_llim_modify_lc_req_t *p_modify_lc_req
 *                   - Pointer to the RRC_UECC_LLIM_MODIFY_LC_REQ 
 *                     for rollbacking the scell configuration
 *
 *   OUTPUTS      : None
 *   Description  : This function prepares the scell_config in case of rollback  
 *
 *   RETURNS      : None
 * ******************************************************************************/
static void update_scell_config_modify_lc_req_for_rollback(
		rrc_uecc_llim_modify_lc_req_t *p_modify_lc_req)
{

	U8 loop = RRC_NULL;
	U8 index = RRC_NULL;
	rrc_uecc_llim_modify_drb_version_t *p_modify_lc_param = PNULL;
	rrm_scell_config_t*   p_org_scell_config = PNULL;
	rrm_scell_config_t*   p_scell_config_rollback = PNULL;

	U8 scell_index = 0 ;
	U8 cell_index = 0 ;

	RRC_LLIM_UT_TRACE_ENTER();  

	cell_index = p_modify_lc_req->cell_index;

	p_modify_lc_param =
		&p_modify_lc_req->
		modify_drb_entity[RRC_UECC_NEW_DRB_CONFIG_VERSION];

	if (p_modify_lc_param->scell_config.bitmask & RRM_SCELL_ADD_MOD_LIST_PRESENT )
	{
		p_scell_config_rollback =
			&p_modify_lc_req->
			modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].scell_config;

		p_org_scell_config = (rrm_scell_config_t*)rrc_mem_get(sizeof(rrm_scell_config_t));

		if( PNULL == p_org_scell_config )
		{
			RRC_TRACE(RRC_ERROR, 
					"p_org_scell_config is PNULL");
			return ;
		}    
		memset_wrapper(p_org_scell_config,RRC_NULL,sizeof(rrm_scell_config_t));      

		l3_memcpy_wrapper(p_org_scell_config,p_scell_config_rollback, sizeof(rrm_scell_config_t));

		memset_wrapper(p_scell_config_rollback,RRC_NULL,sizeof(rrm_scell_config_t));      


		/* In addition to doing memset to old config in modify_lc_req, also
		 * switching off the bitmask for the scell_config in
		 * modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION] which will be turned
		 * on when some scell config will be added in rollback */
		if (p_modify_lc_req->modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].bitmask  & 
				UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT )
		{

			p_modify_lc_req->modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION].bitmask ^=
				UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT;
		}


		for (loop = RRC_NULL; 
				loop < p_modify_lc_param->scell_config.scell_add_mod_list.count;
				loop++)
		{
			cell_index = 
				p_modify_lc_param->scell_config.
				scell_add_mod_list.rrc_scell_to_add_mod[loop].cell_index ;

			scell_index = 
				p_modify_lc_param->scell_config.
				scell_add_mod_list.rrc_scell_to_add_mod[loop].scellIndex ;

			if( RRC_TRUE == p_modify_lc_req->scells_operation_list[scell_index].valid_ind )
			{
				/* Verifying whether operation Type is ADD*/
				if( ADD_SCELL == p_modify_lc_req->scells_operation_list[scell_index].operation_type )
				{
					populate_scell_release_list_modify_lc_req_rollback(
							p_scell_config_rollback,
							scell_index, cell_index);
				}
				/* Verifying whether operation type is Modify */
				else if(MODIFY_SCELL == p_modify_lc_req->scells_operation_list[scell_index].operation_type)
				{
					/* Find the configuration correponding to the sCell */
					for( index = 0; 
							(index < p_org_scell_config->scell_add_mod_list.count) && ( index < MAX_SCELL) ;
							index++ )
					{
						if(p_org_scell_config->scell_add_mod_list.rrc_scell_to_add_mod[index].cell_index == cell_index )
						{

							populate_scell_add_mod_list_modify_lc_req_rollback(
									p_scell_config_rollback,
									&(p_org_scell_config->scell_add_mod_list.rrc_scell_to_add_mod[index]) );
						}    
					}
				} 

			}
		}
		p_scell_config_rollback->bitmask = RRC_NULL;

		if (p_scell_config_rollback->scell_add_mod_list.count >RRC_NULL)
		{
			p_scell_config_rollback->bitmask |= RRM_SCELL_ADD_MOD_LIST_PRESENT;

			p_modify_lc_req->modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION]
				.bitmask |= UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT ;
		}

		if(p_scell_config_rollback->scell_release_list.count > RRC_NULL)
		{
			p_scell_config_rollback->bitmask |= RRM_SCELL_RELEASE_LIST_PRESENT;

			p_modify_lc_req->modify_drb_entity[RRC_UECC_OLD_DRB_CONFIG_VERSION]
				.bitmask |= UECC_LLIM_MODIFY_LC_REQ_SCELL_CONFIG_PRESENT ;
		}  
	}
	else
	{

		RRC_LLIM_TRACE(RRC_DETAILED,"Scell config Not present.");
	}    
	/* coverity_fix_63290_start */
	rrc_mem_free((void *)p_org_scell_config);
	/* Coverity ID 85912 Fix Start*/
    /* SPR 20522 Fix Start */
	 p_org_scell_config = PNULL; 
    /* SPR 20522 Fix End */
	/* Coverity ID 85912 Fix End*/
	/* coverity_fix_63290_stop */
	RRC_LLIM_UT_TRACE_EXIT();  
}

/******************************************************************************
 *   FUNCTION NAME: populate_scell_release_list_modify_lc_req_rollback
 *
 *   INPUTS       : rrm_scell_config_t *p_scell_config
 *                   - Pointer to the rrm_scell_config_t 
 *                     for updating the scell_release_list
 *                  U8 scell_index
 *                  - Value of scell_index to be added to scell_release_list
 *                  U8 cell_index
 *                  - Value of cell_index to be added to scell_release_list
 *   OUTPUTS      : None 
 *   Description: : This function adds the scell that has been added
 *                  successfully at MAC to scell release list to rollback MAC at
 *                  prev  configuration in case of failure 
 *
 *   RETURNS      : None
 * ******************************************************************************/
static  void populate_scell_release_list_modify_lc_req_rollback(
		rrm_scell_config_t *p_scell_config,
		U8 scell_index, 
		U8 cell_index)
{
	U8 count = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();  
	count =  p_scell_config->scell_release_list.count ;
	p_scell_config->scell_release_list.rrc_scell_to_release[count].cell_index = cell_index;
	p_scell_config->scell_release_list.rrc_scell_to_release[count].scellIndex = scell_index;
	p_scell_config->scell_release_list.count++;

	RRC_LLIM_UT_TRACE_EXIT();  
}

/******************************************************************************
 *   FUNCTION NAME: populate_scell_add_mod_list_modify_lc_req_rollback
 *
 *   INPUTS       : rrm_scell_config_t *p_scell_config
 *                  - Pointer to the rrm_scell_config_t
 *                    for updating  the rrc_scell_to_add_mod_t list
 *                  U8 scell_index
 *                  - Value of scell_index to be added to scell_release_list
 *                  
 *                  rrc_scell_to_add_mod_t *p_scell_to_add_mod
 *                  - Pointer to the scell_to_add_mod cell that has to 
 *                  be added  in rollback
 *                  
 *
 *   OUTPUTS      : None
 *
 *   Description: : This function adds the scell (to be modified to its previous
 *                  configuration) in the old drb config scell_list in case of
 *                  rollback
 *
 *   RETURNS      : None
 * ******************************************************************************/
static void populate_scell_add_mod_list_modify_lc_req_rollback(
		rrm_scell_config_t *p_scell_config,
		rrc_scell_to_add_mod_t *p_scell_to_add_mod )
{
	U8 count = RRC_NULL;

	RRC_LLIM_UT_TRACE_ENTER();  

	count = p_scell_config->scell_add_mod_list.count ;

	l3_memcpy_wrapper( &(p_scell_config->scell_add_mod_list.rrc_scell_to_add_mod[count]),
			p_scell_to_add_mod, 
			sizeof(rrc_scell_to_add_mod_t));
	p_scell_config->scell_add_mod_list.count++;

	RRC_LLIM_UT_TRACE_EXIT();  
}    

/******************************************************************************
 *   FUNCTION NAME: map_scell_deactivation_timer_mac
 *
 *   INPUTS       : scell_deactivation_timer_t
 *                                    *p_rrc_mac_scell_deactivation_timer
 *                  U8                rrc_rrm_scell_deactivation_timer
 *
 *   OUTPUTS      : None
 *
 *   Description: : This function fills the scell_deactivation_timer that to be
 *                  sent to mac
 *
 *   RETURNS      : None
 * ******************************************************************************/
static void map_scell_deactivation_timer_mac
(
 scell_deactivation_timer_t  *p_rrc_mac_scell_deactivation_timer,
 U8                          rrc_rrm_scell_deactivation_timer 
 )
{
	RRC_ASSERT(PNULL != p_rrc_mac_scell_deactivation_timer);

	RRC_LLIM_UT_TRACE_ENTER();  

	switch(rrc_rrm_scell_deactivation_timer)
	{
		case RRC_RADIO_FRAME_2:
			p_rrc_mac_scell_deactivation_timer->scell_deactivation_timer = 2;
			break;
		case RRC_RADIO_FRAME_4:
			p_rrc_mac_scell_deactivation_timer->scell_deactivation_timer = 4;
			break;
		case RRC_RADIO_FRAME_8:
			p_rrc_mac_scell_deactivation_timer->scell_deactivation_timer = 8;
			break;
		case RRC_RADIO_FRAME_16:
			p_rrc_mac_scell_deactivation_timer->scell_deactivation_timer = 16;
			break;
		case RRC_RADIO_FRAME_32:
			p_rrc_mac_scell_deactivation_timer->scell_deactivation_timer = 32;
			break;
		case RRC_RADIO_FRAME_64:
			p_rrc_mac_scell_deactivation_timer->scell_deactivation_timer = 64;
			break;
		case RRC_RADIO_FRAME_128:
			p_rrc_mac_scell_deactivation_timer->scell_deactivation_timer = 128;
			break;
		case RRC_RADIO_FRAME_INFINITY:
			p_rrc_mac_scell_deactivation_timer->scell_deactivation_timer = 0;
			break;
		default:
			p_rrc_mac_scell_deactivation_timer->scell_deactivation_timer = 0;
			break;
	}
	RRC_LLIM_UT_TRACE_EXIT();  
}
/*CA end */
/*BUG 604 changes start*/
/******************************************************************************
 *   FUNCTION NAME:uemh_fsm_ue_in_service_state_s1u_data_fwd_req 
 *         
 *   DESCRIPTION: This function build and send data_fwd_req to s1u
 *   in case of Intra Cell HO
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_s1u_data_fwd_req(
		void                *p_api,             /* p_api */
		void                *p_msg,             /* p_msg */
		rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
		/* Pointer to the LLIM global context data */
		rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx)
{
	rrc_transaction_id_t    transaction_id;
	rrc_uecc_llim_s1u_intra_enb_data_fwd_req_t
		*p_llim_intra_enb_data_fwd_req =
		(rrc_uecc_llim_s1u_intra_enb_data_fwd_req_t *)p_msg;

	rrc_s1u_intra_enb_data_fwd_req_t s1u_intra_enb_data_fwd_req;

	RRC_LLIM_UT_TRACE_ENTER();


	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_llim_intra_enb_data_fwd_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in FSM p_api=%p p_rrc_llim_gl_ctx=%p",
			p_api,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/

	/* Build and send PDCP_RE_ESTABLISH_UE_ENTITY_REQ to RLC */
	memset_wrapper(&s1u_intra_enb_data_fwd_req, 0,
			sizeof(rrc_s1u_intra_enb_data_fwd_req_t));

	//    rrc_llim_set_cell_index (&s1u_intra_enb_data_fwd_req,
	//            RRC_S1U_MODULE_ID, RRC_S1U_INTRA_ENB_DATA_FWD_REQ,
	//            p_llim_intra_enb_data_fwd_req->cell_index);

	/*Fill Source and Target Ue_Index*/
	s1u_intra_enb_data_fwd_req.ue_index =
		p_llim_intra_enb_data_fwd_req->ue_index;
	s1u_intra_enb_data_fwd_req.target_ue_index = 
		p_llim_intra_enb_data_fwd_req->target_ue_index;

	transaction_id = p_llim_intra_enb_data_fwd_req->transaction_id;

	rrc_s1u_il_send_rrc_s1u_intra_enb_data_fwd_req(
			&s1u_intra_enb_data_fwd_req, 
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_llim_intra_enb_data_fwd_req->cell_index),
			transaction_id,
			p_llim_intra_enb_data_fwd_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME:uemh_fsm_ue_in_service_state_s1u_path_switch_req 
 *         
 *   DESCRIPTION: This function build and send path_switch_req to s1u
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_s1u_path_switch_req(
		void                *p_api,             /* p_api */
		void                *p_msg,             /* p_msg */
		rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
		/* Pointer to the LLIM global context data */
		rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx)
{
	rrc_transaction_id_t    transaction_id;
	rrc_uecc_llim_s1u_local_path_switch_req_t
		*p_llim_path_switch_req =
		(rrc_uecc_llim_s1u_local_path_switch_req_t *)p_msg;

	rrc_s1u_local_path_switch_req_t s1u_path_switch_req;

	RRC_LLIM_UT_TRACE_ENTER();


	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_llim_path_switch_req);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);


	RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in FSM p_api=%p p_rrc_llim_gl_ctx=%p",
			p_api,p_rrc_llim_gl_ctx);/*SPR 17777 +-*/

	/* Build and send PDCP_RE_ESTABLISH_UE_ENTITY_REQ to RLC */
	memset_wrapper(&s1u_path_switch_req, 0,
			sizeof(rrc_s1u_local_path_switch_req_t));

	//    rrc_llim_set_cell_index (&s1u_path_switch_req,
	//            RRC_S1U_MODULE_ID, RRC_S1U_LOCAL_PATH_SWITCH_REQ,
	//            p_llim_path_switch_req->cell_index);

	/*Fill Source and Target Ue_Index*/
	s1u_path_switch_req.ue_index =
		p_llim_path_switch_req->ue_index;
	s1u_path_switch_req.ue_index_for_path_switch = 
		p_llim_path_switch_req->ue_index_for_path_switch;

	transaction_id = p_llim_path_switch_req->transaction_id;

	rrc_s1u_il_send_rrc_s1u_local_path_switch_req(
			&s1u_path_switch_req, 
			RRC_LLIM_MODULE_ID,
				RRC_GET_LL_MODULE_ID(RRC_S1U_1_MODULE_ID,p_llim_path_switch_req->cell_index),
			transaction_id,
			p_llim_path_switch_req->cell_index);

	RRC_LLIM_UT_TRACE_EXIT();
}
/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_s1u_data_fwd_cnf 
 *
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE 
 *       event UEMH_EVENT_UECC_S1U_INTRA_ENB_DATA_FWD_CNF 
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_s1u_data_fwd_cnf(
		void                *p_api,             /* p_api */
		void                *p_msg,             /* p_msg */
		rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
		/* Pointer to the LLIM global context data */
		rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
		)
{
	rrc_uecc_llim_s1u_intra_enb_data_fwd_cnf_t 
		uecc_llim_s1u_intra_enb_data_fwd_cnf; 

	rrc_s1u_intra_enb_data_fwd_cnf_t *p_s1u_intra_enb_data_fwd_cnf =
		(rrc_s1u_intra_enb_data_fwd_cnf_t *)p_msg;

    RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:p_ue_ctx=%p",p_ue_ctx);/*SPR 17777 +-*/
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	memset_wrapper(&uecc_llim_s1u_intra_enb_data_fwd_cnf, RRC_NULL,
			sizeof(rrc_uecc_llim_s1u_intra_enb_data_fwd_cnf_t));

	/* fill transaction id */
	uecc_llim_s1u_intra_enb_data_fwd_cnf.transaction_id = 
		rrc_get_transaction_id(p_api);

	/* Fill UE Index */
	uecc_llim_s1u_intra_enb_data_fwd_cnf.ue_index =
		p_s1u_intra_enb_data_fwd_cnf->ue_index;
	/* Fill CELL Index */
	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, 
			&uecc_llim_s1u_intra_enb_data_fwd_cnf.cell_index);

	if(S1U_SUCCESS == p_s1u_intra_enb_data_fwd_cnf->response)
	{
		uecc_llim_s1u_intra_enb_data_fwd_cnf.response =
			RRC_SUCCESS;
	}
	else
	{
		uecc_llim_s1u_intra_enb_data_fwd_cnf.response = 
			RRC_FAILURE;
	}

	rrc_llim_send_internal_msg(
			RRC_GET_UECC_MODULE_ID(p_s1u_intra_enb_data_fwd_cnf->ue_index),
			UECC_LLIM_S1U_INTRA_ENB_DATA_FWD_CNF,
			sizeof(rrc_uecc_llim_s1u_intra_enb_data_fwd_cnf_t),
			&uecc_llim_s1u_intra_enb_data_fwd_cnf);

	RRC_LLIM_UT_TRACE_EXIT();
}

/******************************************************************************
 *   FUNCTION NAME: uemh_fsm_ue_in_service_state_s1u_path_switch_cnf 
 *
 *       state UEMH_STATE_UE_ENTITY_IN_SERVICE 
 *       event UEMH_EVENT_UECC_S1U_LOCAL_PATH_SWITCH_CNF 
 *
 *   RETURNS:
 *       None
 *
 ******************************************************************************/
static void uemh_fsm_ue_in_service_state_s1u_path_switch_cnf(
		void                *p_api,             /* p_api */
		void                *p_msg,             /* p_msg */
		rrc_llim_ue_ctx_t   *p_ue_ctx,          /* ue context */
		/* Pointer to the LLIM global context data */
		rrc_llim_gl_ctx_t   *p_rrc_llim_gl_ctx
		)
{
	rrc_uecc_llim_s1u_local_path_switch_cnf_t 
		uecc_llim_s1u_local_path_switch_cnf; 

	rrc_s1u_local_path_switch_cnf_t *p_s1u_local_path_switch_cnf =
		(rrc_s1u_local_path_switch_cnf_t *)p_msg;

    RRC_LLIM_UEMH_FSM_TRACE(RRC_DETAILEDALL, "Unused variable in fsm:p_ue_ctx=%p",p_ue_ctx);/*SPR 17777 +-*/
	RRC_LLIM_UT_TRACE_ENTER();

	RRC_ASSERT(PNULL != p_api);
	RRC_ASSERT(PNULL != p_ue_ctx);
	RRC_ASSERT(PNULL != p_rrc_llim_gl_ctx);

	memset_wrapper(&uecc_llim_s1u_local_path_switch_cnf, RRC_NULL,
			sizeof(rrc_uecc_llim_s1u_local_path_switch_cnf_t));

	/* fill transaction id */
	uecc_llim_s1u_local_path_switch_cnf.transaction_id = 
		rrc_get_transaction_id(p_api);

	/* Fill UE Index */
	uecc_llim_s1u_local_path_switch_cnf.ue_index =
		p_s1u_local_path_switch_cnf->ue_index;
	/* Fill CELL Index */
	rrc_llim_get_cell_index (p_rrc_llim_gl_ctx, p_api, 
			&uecc_llim_s1u_local_path_switch_cnf.cell_index);

	if(S1U_SUCCESS == p_s1u_local_path_switch_cnf->response)
	{
		uecc_llim_s1u_local_path_switch_cnf.response =
			RRC_SUCCESS;
	}
	else
	{
		uecc_llim_s1u_local_path_switch_cnf.response =
			RRC_FAILURE;
	}
	rrc_llim_send_internal_msg(
			RRC_GET_UECC_MODULE_ID(p_s1u_local_path_switch_cnf->ue_index),
			UECC_LLIM_S1U_LOCAL_PATH_SWITCH_CNF,
			sizeof(rrc_uecc_llim_s1u_local_path_switch_cnf_t),
			&uecc_llim_s1u_local_path_switch_cnf);

	RRC_LLIM_UT_TRACE_EXIT();
}
/*BUG 604 changes stop*/



